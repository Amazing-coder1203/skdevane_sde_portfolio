const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/worker-engine-rPr4Ul0q-C_h6msb3.js","assets/browser-awZxztMA-MZYHZ0lP-WowMQhI7.js","assets/direct-engine-CluHueed-CU3lGc3c.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var Cm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function CD(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var r=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return t[i]}})}),n}var ED={exports:{}},ly={},TD={exports:{}},Zt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jf=Symbol.for("react.element"),t8=Symbol.for("react.portal"),n8=Symbol.for("react.fragment"),i8=Symbol.for("react.strict_mode"),r8=Symbol.for("react.profiler"),o8=Symbol.for("react.provider"),s8=Symbol.for("react.context"),a8=Symbol.for("react.forward_ref"),l8=Symbol.for("react.suspense"),c8=Symbol.for("react.memo"),u8=Symbol.for("react.lazy"),z2=Symbol.iterator;function d8(t){return t===null||typeof t!="object"?null:(t=z2&&t[z2]||t["@@iterator"],typeof t=="function"?t:null)}var AD={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ID=Object.assign,PD={};function Cd(t,e,n){this.props=t,this.context=e,this.refs=PD,this.updater=n||AD}Cd.prototype.isReactComponent={};Cd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Cd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function RD(){}RD.prototype=Cd.prototype;function yS(t,e,n){this.props=t,this.context=e,this.refs=PD,this.updater=n||AD}var xS=yS.prototype=new RD;xS.constructor=yS;ID(xS,Cd.prototype);xS.isPureReactComponent=!0;var O2=Array.isArray,DD=Object.prototype.hasOwnProperty,wS={current:null},kD={key:!0,ref:!0,__self:!0,__source:!0};function ND(t,e,n){var i,r={},o=null,s=null;if(e!=null)for(i in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)DD.call(e,i)&&!kD.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:Jf,type:t,key:o,ref:s,props:r,_owner:wS.current}}function h8(t,e){return{$$typeof:Jf,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function _S(t){return typeof t=="object"&&t!==null&&t.$$typeof===Jf}function f8(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var F2=/\/+/g;function F1(t,e){return typeof t=="object"&&t!==null&&t.key!=null?f8(""+t.key):e.toString(36)}function nv(t,e,n,i,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Jf:case t8:s=!0}}if(s)return s=t,r=r(s),t=i===""?"."+F1(s,0):i,O2(r)?(n="",t!=null&&(n=t.replace(F2,"$&/")+"/"),nv(r,e,n,"",function(c){return c})):r!=null&&(_S(r)&&(r=h8(r,n+(!r.key||s&&s.key===r.key?"":(""+r.key).replace(F2,"$&/")+"/")+t)),e.push(r)),1;if(s=0,i=i===""?".":i+":",O2(t))for(var a=0;a<t.length;a++){o=t[a];var l=i+F1(o,a);s+=nv(o,e,n,l,r)}else if(l=d8(t),typeof l=="function")for(t=l.call(t),a=0;!(o=t.next()).done;)o=o.value,l=i+F1(o,a++),s+=nv(o,e,n,l,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Em(t,e,n){if(t==null)return t;var i=[],r=0;return nv(t,i,"","",function(o){return e.call(n,o,r++)}),i}function p8(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var pr={current:null},iv={transition:null},m8={ReactCurrentDispatcher:pr,ReactCurrentBatchConfig:iv,ReactCurrentOwner:wS};Zt.Children={map:Em,forEach:function(t,e,n){Em(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Em(t,function(){e++}),e},toArray:function(t){return Em(t,function(e){return e})||[]},only:function(t){if(!_S(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Zt.Component=Cd;Zt.Fragment=n8;Zt.Profiler=r8;Zt.PureComponent=yS;Zt.StrictMode=i8;Zt.Suspense=l8;Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=m8;Zt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=ID({},t.props),r=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=wS.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)DD.call(e,l)&&!kD.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:Jf,type:t.type,key:r,ref:o,props:i,_owner:s}};Zt.createContext=function(t){return t={$$typeof:s8,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:o8,_context:t},t.Consumer=t};Zt.createElement=ND;Zt.createFactory=function(t){var e=ND.bind(null,t);return e.type=t,e};Zt.createRef=function(){return{current:null}};Zt.forwardRef=function(t){return{$$typeof:a8,render:t}};Zt.isValidElement=_S;Zt.lazy=function(t){return{$$typeof:u8,_payload:{_status:-1,_result:t},_init:p8}};Zt.memo=function(t,e){return{$$typeof:c8,type:t,compare:e===void 0?null:e}};Zt.startTransition=function(t){var e=iv.transition;iv.transition={};try{t()}finally{iv.transition=e}};Zt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Zt.useCallback=function(t,e){return pr.current.useCallback(t,e)};Zt.useContext=function(t){return pr.current.useContext(t)};Zt.useDebugValue=function(){};Zt.useDeferredValue=function(t){return pr.current.useDeferredValue(t)};Zt.useEffect=function(t,e){return pr.current.useEffect(t,e)};Zt.useId=function(){return pr.current.useId()};Zt.useImperativeHandle=function(t,e,n){return pr.current.useImperativeHandle(t,e,n)};Zt.useInsertionEffect=function(t,e){return pr.current.useInsertionEffect(t,e)};Zt.useLayoutEffect=function(t,e){return pr.current.useLayoutEffect(t,e)};Zt.useMemo=function(t,e){return pr.current.useMemo(t,e)};Zt.useReducer=function(t,e,n){return pr.current.useReducer(t,e,n)};Zt.useRef=function(t){return pr.current.useRef(t)};Zt.useState=function(t){return pr.current.useState(t)};Zt.useSyncExternalStore=function(t,e,n){return pr.current.useSyncExternalStore(t,e,n)};Zt.useTransition=function(){return pr.current.useTransition()};Zt.version="18.2.0";TD.exports=Zt;var Pe=TD.exports;const Sv=vS(Pe);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g8=Pe,v8=Symbol.for("react.element"),y8=Symbol.for("react.fragment"),x8=Object.prototype.hasOwnProperty,w8=g8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_8={key:!0,ref:!0,__self:!0,__source:!0};function LD(t,e,n){var i,r={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(i in e)x8.call(e,i)&&!_8.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:v8,type:t,key:o,ref:s,props:r,_owner:w8.current}}ly.Fragment=y8;ly.jsx=LD;ly.jsxs=LD;ED.exports=ly;var U=ED.exports,zD={exports:{}},io={},OD={exports:{}},FD={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,$){var X=z.length;z.push($);e:for(;0<X;){var K=X-1>>>1,oe=z[K];if(0<r(oe,$))z[K]=$,z[X]=oe,X=K;else break e}}function n(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var $=z[0],X=z.pop();if(X!==$){z[0]=X;e:for(var K=0,oe=z.length,pe=oe>>>1;K<pe;){var be=2*(K+1)-1,it=z[be],ae=be+1,me=z[ae];if(0>r(it,X))ae<oe&&0>r(me,it)?(z[K]=me,z[ae]=X,K=ae):(z[K]=it,z[be]=X,K=be);else if(ae<oe&&0>r(me,X))z[K]=me,z[ae]=X,K=ae;else break e}}return $}function r(z,$){var X=z.sortIndex-$.sortIndex;return X!==0?X:z.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var l=[],c=[],u=1,d=null,f=3,m=!1,g=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(z){for(var $=n(c);$!==null;){if($.callback===null)i(c);else if($.startTime<=z)i(c),$.sortIndex=$.expirationTime,e(l,$);else break;$=n(c)}}function S(z){if(y=!1,_(z),!g)if(n(l)!==null)g=!0,G(E);else{var $=n(c);$!==null&&Y(S,$.startTime-z)}}function E(z,$){g=!1,y&&(y=!1,v(D),D=-1),m=!0;var X=f;try{for(_($),d=n(l);d!==null&&(!(d.expirationTime>$)||z&&!N());){var K=d.callback;if(typeof K=="function"){d.callback=null,f=d.priorityLevel;var oe=K(d.expirationTime<=$);$=t.unstable_now(),typeof oe=="function"?d.callback=oe:d===n(l)&&i(l),_($)}else i(l);d=n(l)}if(d!==null)var pe=!0;else{var be=n(c);be!==null&&Y(S,be.startTime-$),pe=!1}return pe}finally{d=null,f=X,m=!1}}var T=!1,P=null,D=-1,A=5,R=-1;function N(){return!(t.unstable_now()-R<A)}function O(){if(P!==null){var z=t.unstable_now();R=z;var $=!0;try{$=P(!0,z)}finally{$?H():(T=!1,P=null)}}else T=!1}var H;if(typeof w=="function")H=function(){w(O)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,Z=q.port2;q.port1.onmessage=O,H=function(){Z.postMessage(null)}}else H=function(){x(O,0)};function G(z){P=z,T||(T=!0,H())}function Y(z,$){D=x(function(){z(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){g||m||(g=!0,G(E))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(z){switch(f){case 1:case 2:case 3:var $=3;break;default:$=f}var X=f;f=$;try{return z()}finally{f=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,$){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var X=f;f=z;try{return $()}finally{f=X}},t.unstable_scheduleCallback=function(z,$,X){var K=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?K+X:K):X=K,z){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=X+oe,z={id:u++,callback:$,priorityLevel:z,startTime:X,expirationTime:oe,sortIndex:-1},X>K?(z.sortIndex=X,e(c,z),n(l)===null&&z===n(c)&&(y?(v(D),D=-1):y=!0,Y(S,X-K))):(z.sortIndex=oe,e(l,z),g||m||(g=!0,G(E))),z},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(z){var $=f;return function(){var X=f;f=$;try{return z.apply(this,arguments)}finally{f=X}}}})(FD);OD.exports=FD;var b8=OD.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UD=Pe,eo=b8;function ke(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var BD=new Set,uf={};function Ac(t,e){rd(t,e),rd(t+"Capture",e)}function rd(t,e){for(uf[t]=e,t=0;t<e.length;t++)BD.add(e[t])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),I_=Object.prototype.hasOwnProperty,S8=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,U2={},B2={};function M8(t){return I_.call(B2,t)?!0:I_.call(U2,t)?!1:S8.test(t)?B2[t]=!0:(U2[t]=!0,!1)}function C8(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function E8(t,e,n,i){if(e===null||typeof e>"u"||C8(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function mr(t,e,n,i,r,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Oi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Oi[t]=new mr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Oi[e]=new mr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Oi[t]=new mr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Oi[t]=new mr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Oi[t]=new mr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Oi[t]=new mr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Oi[t]=new mr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Oi[t]=new mr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Oi[t]=new mr(t,5,!1,t.toLowerCase(),null,!1,!1)});var bS=/[\-:]([a-z])/g;function SS(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(bS,SS);Oi[e]=new mr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(bS,SS);Oi[e]=new mr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(bS,SS);Oi[e]=new mr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Oi[t]=new mr(t,1,!1,t.toLowerCase(),null,!1,!1)});Oi.xlinkHref=new mr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Oi[t]=new mr(t,1,!1,t.toLowerCase(),null,!0,!0)});function MS(t,e,n,i){var r=Oi.hasOwnProperty(e)?Oi[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(E8(e,n,r,i)&&(n=null),i||r===null?M8(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var da=UD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Tm=Symbol.for("react.element"),Au=Symbol.for("react.portal"),Iu=Symbol.for("react.fragment"),CS=Symbol.for("react.strict_mode"),P_=Symbol.for("react.profiler"),HD=Symbol.for("react.provider"),VD=Symbol.for("react.context"),ES=Symbol.for("react.forward_ref"),R_=Symbol.for("react.suspense"),D_=Symbol.for("react.suspense_list"),TS=Symbol.for("react.memo"),za=Symbol.for("react.lazy"),$D=Symbol.for("react.offscreen"),H2=Symbol.iterator;function lh(t){return t===null||typeof t!="object"?null:(t=H2&&t[H2]||t["@@iterator"],typeof t=="function"?t:null)}var jn=Object.assign,U1;function Nh(t){if(U1===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);U1=e&&e[1]||""}return`
`+U1+t}var B1=!1;function H1(t,e){if(!t||B1)return"";B1=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),o=i.stack.split(`
`),s=r.length-1,a=o.length-1;1<=s&&0<=a&&r[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(r[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||r[s]!==o[a]){var l=`
`+r[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=s&&0<=a);break}}}finally{B1=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Nh(t):""}function T8(t){switch(t.tag){case 5:return Nh(t.type);case 16:return Nh("Lazy");case 13:return Nh("Suspense");case 19:return Nh("SuspenseList");case 0:case 2:case 15:return t=H1(t.type,!1),t;case 11:return t=H1(t.type.render,!1),t;case 1:return t=H1(t.type,!0),t;default:return""}}function k_(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Iu:return"Fragment";case Au:return"Portal";case P_:return"Profiler";case CS:return"StrictMode";case R_:return"Suspense";case D_:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case VD:return(t.displayName||"Context")+".Consumer";case HD:return(t._context.displayName||"Context")+".Provider";case ES:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case TS:return e=t.displayName||null,e!==null?e:k_(t.type)||"Memo";case za:e=t._payload,t=t._init;try{return k_(t(e))}catch{}}return null}function A8(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return k_(e);case 8:return e===CS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ol(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function WD(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function I8(t){var e=WD(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(s){i=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(s){i=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Am(t){t._valueTracker||(t._valueTracker=I8(t))}function GD(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=WD(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Mv(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function N_(t,e){var n=e.checked;return jn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function V2(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=ol(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function jD(t,e){e=e.checked,e!=null&&MS(t,"checked",e,!1)}function L_(t,e){jD(t,e);var n=ol(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?z_(t,e.type,n):e.hasOwnProperty("defaultValue")&&z_(t,e.type,ol(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function $2(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function z_(t,e,n){(e!=="number"||Mv(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Lh=Array.isArray;function Xu(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+ol(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function O_(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ke(91));return jn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function W2(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ke(92));if(Lh(n)){if(1<n.length)throw Error(ke(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ol(n)}}function qD(t,e){var n=ol(e.value),i=ol(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function G2(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function XD(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function F_(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?XD(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Im,YD=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Im=Im||document.createElement("div"),Im.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Im.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function df(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Gh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},P8=["Webkit","ms","Moz","O"];Object.keys(Gh).forEach(function(t){P8.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Gh[e]=Gh[t]})});function ZD(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Gh.hasOwnProperty(t)&&Gh[t]?(""+e).trim():e+"px"}function KD(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=ZD(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var R8=jn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function U_(t,e){if(e){if(R8[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ke(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ke(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ke(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ke(62))}}function B_(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var H_=null;function AS(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var V_=null,Yu=null,Zu=null;function j2(t){if(t=np(t)){if(typeof V_!="function")throw Error(ke(280));var e=t.stateNode;e&&(e=fy(e),V_(t.stateNode,t.type,e))}}function QD(t){Yu?Zu?Zu.push(t):Zu=[t]:Yu=t}function JD(){if(Yu){var t=Yu,e=Zu;if(Zu=Yu=null,j2(t),e)for(t=0;t<e.length;t++)j2(e[t])}}function ek(t,e){return t(e)}function tk(){}var V1=!1;function nk(t,e,n){if(V1)return t(e,n);V1=!0;try{return ek(t,e,n)}finally{V1=!1,(Yu!==null||Zu!==null)&&(tk(),JD())}}function hf(t,e){var n=t.stateNode;if(n===null)return null;var i=fy(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ke(231,e,typeof n));return n}var $_=!1;if(ia)try{var ch={};Object.defineProperty(ch,"passive",{get:function(){$_=!0}}),window.addEventListener("test",ch,ch),window.removeEventListener("test",ch,ch)}catch{$_=!1}function D8(t,e,n,i,r,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var jh=!1,Cv=null,Ev=!1,W_=null,k8={onError:function(t){jh=!0,Cv=t}};function N8(t,e,n,i,r,o,s,a,l){jh=!1,Cv=null,D8.apply(k8,arguments)}function L8(t,e,n,i,r,o,s,a,l){if(N8.apply(this,arguments),jh){if(jh){var c=Cv;jh=!1,Cv=null}else throw Error(ke(198));Ev||(Ev=!0,W_=c)}}function Ic(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function ik(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function q2(t){if(Ic(t)!==t)throw Error(ke(188))}function z8(t){var e=t.alternate;if(!e){if(e=Ic(t),e===null)throw Error(ke(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return q2(r),t;if(o===i)return q2(r),e;o=o.sibling}throw Error(ke(188))}if(n.return!==i.return)n=r,i=o;else{for(var s=!1,a=r.child;a;){if(a===n){s=!0,n=r,i=o;break}if(a===i){s=!0,i=r,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,i=r;break}if(a===i){s=!0,i=o,n=r;break}a=a.sibling}if(!s)throw Error(ke(189))}}if(n.alternate!==i)throw Error(ke(190))}if(n.tag!==3)throw Error(ke(188));return n.stateNode.current===n?t:e}function rk(t){return t=z8(t),t!==null?ok(t):null}function ok(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ok(t);if(e!==null)return e;t=t.sibling}return null}var sk=eo.unstable_scheduleCallback,X2=eo.unstable_cancelCallback,O8=eo.unstable_shouldYield,F8=eo.unstable_requestPaint,ti=eo.unstable_now,U8=eo.unstable_getCurrentPriorityLevel,IS=eo.unstable_ImmediatePriority,ak=eo.unstable_UserBlockingPriority,Tv=eo.unstable_NormalPriority,B8=eo.unstable_LowPriority,lk=eo.unstable_IdlePriority,cy=null,vs=null;function H8(t){if(vs&&typeof vs.onCommitFiberRoot=="function")try{vs.onCommitFiberRoot(cy,t,void 0,(t.current.flags&128)===128)}catch{}}var Go=Math.clz32?Math.clz32:W8,V8=Math.log,$8=Math.LN2;function W8(t){return t>>>=0,t===0?32:31-(V8(t)/$8|0)|0}var Pm=64,Rm=4194304;function zh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Av(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var a=s&~r;a!==0?i=zh(a):(o&=s,o!==0&&(i=zh(o)))}else s=n&~r,s!==0?i=zh(s):o!==0&&(i=zh(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Go(e),r=1<<n,i|=t[n],e&=~r;return i}function G8(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function j8(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-Go(o),a=1<<s,l=r[s];l===-1?(!(a&n)||a&i)&&(r[s]=G8(a,e)):l<=e&&(t.expiredLanes|=a),o&=~a}}function G_(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ck(){var t=Pm;return Pm<<=1,!(Pm&4194240)&&(Pm=64),t}function $1(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ep(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Go(e),t[e]=n}function q8(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Go(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}function PS(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Go(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var vn=0;function uk(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var dk,RS,hk,fk,pk,j_=!1,Dm=[],Ka=null,Qa=null,Ja=null,ff=new Map,pf=new Map,Ua=[],X8="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Y2(t,e){switch(t){case"focusin":case"focusout":Ka=null;break;case"dragenter":case"dragleave":Qa=null;break;case"mouseover":case"mouseout":Ja=null;break;case"pointerover":case"pointerout":ff.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":pf.delete(e.pointerId)}}function uh(t,e,n,i,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=np(e),e!==null&&RS(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function Y8(t,e,n,i,r){switch(e){case"focusin":return Ka=uh(Ka,t,e,n,i,r),!0;case"dragenter":return Qa=uh(Qa,t,e,n,i,r),!0;case"mouseover":return Ja=uh(Ja,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return ff.set(o,uh(ff.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,pf.set(o,uh(pf.get(o)||null,t,e,n,i,r)),!0}return!1}function mk(t){var e=Jl(t.target);if(e!==null){var n=Ic(e);if(n!==null){if(e=n.tag,e===13){if(e=ik(n),e!==null){t.blockedOn=e,pk(t.priority,function(){hk(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function rv(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=q_(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);H_=i,n.target.dispatchEvent(i),H_=null}else return e=np(n),e!==null&&RS(e),t.blockedOn=n,!1;e.shift()}return!0}function Z2(t,e,n){rv(t)&&n.delete(e)}function Z8(){j_=!1,Ka!==null&&rv(Ka)&&(Ka=null),Qa!==null&&rv(Qa)&&(Qa=null),Ja!==null&&rv(Ja)&&(Ja=null),ff.forEach(Z2),pf.forEach(Z2)}function dh(t,e){t.blockedOn===e&&(t.blockedOn=null,j_||(j_=!0,eo.unstable_scheduleCallback(eo.unstable_NormalPriority,Z8)))}function mf(t){function e(r){return dh(r,t)}if(0<Dm.length){dh(Dm[0],t);for(var n=1;n<Dm.length;n++){var i=Dm[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Ka!==null&&dh(Ka,t),Qa!==null&&dh(Qa,t),Ja!==null&&dh(Ja,t),ff.forEach(e),pf.forEach(e),n=0;n<Ua.length;n++)i=Ua[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Ua.length&&(n=Ua[0],n.blockedOn===null);)mk(n),n.blockedOn===null&&Ua.shift()}var Ku=da.ReactCurrentBatchConfig,Iv=!0;function K8(t,e,n,i){var r=vn,o=Ku.transition;Ku.transition=null;try{vn=1,DS(t,e,n,i)}finally{vn=r,Ku.transition=o}}function Q8(t,e,n,i){var r=vn,o=Ku.transition;Ku.transition=null;try{vn=4,DS(t,e,n,i)}finally{vn=r,Ku.transition=o}}function DS(t,e,n,i){if(Iv){var r=q_(t,e,n,i);if(r===null)J1(t,e,i,Pv,n),Y2(t,i);else if(Y8(r,t,e,n,i))i.stopPropagation();else if(Y2(t,i),e&4&&-1<X8.indexOf(t)){for(;r!==null;){var o=np(r);if(o!==null&&dk(o),o=q_(t,e,n,i),o===null&&J1(t,e,i,Pv,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else J1(t,e,i,null,n)}}var Pv=null;function q_(t,e,n,i){if(Pv=null,t=AS(i),t=Jl(t),t!==null)if(e=Ic(t),e===null)t=null;else if(n=e.tag,n===13){if(t=ik(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Pv=t,null}function gk(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(U8()){case IS:return 1;case ak:return 4;case Tv:case B8:return 16;case lk:return 536870912;default:return 16}default:return 16}}var $a=null,kS=null,ov=null;function vk(){if(ov)return ov;var t,e=kS,n=e.length,i,r="value"in $a?$a.value:$a.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var s=n-t;for(i=1;i<=s&&e[n-i]===r[o-i];i++);return ov=r.slice(t,1<i?1-i:void 0)}function sv(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function km(){return!0}function K2(){return!1}function ro(t){function e(n,i,r,o,s){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?km:K2,this.isPropagationStopped=K2,this}return jn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=km)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=km)},persist:function(){},isPersistent:km}),e}var Ed={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},NS=ro(Ed),tp=jn({},Ed,{view:0,detail:0}),J8=ro(tp),W1,G1,hh,uy=jn({},tp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:LS,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==hh&&(hh&&t.type==="mousemove"?(W1=t.screenX-hh.screenX,G1=t.screenY-hh.screenY):G1=W1=0,hh=t),W1)},movementY:function(t){return"movementY"in t?t.movementY:G1}}),Q2=ro(uy),eH=jn({},uy,{dataTransfer:0}),tH=ro(eH),nH=jn({},tp,{relatedTarget:0}),j1=ro(nH),iH=jn({},Ed,{animationName:0,elapsedTime:0,pseudoElement:0}),rH=ro(iH),oH=jn({},Ed,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),sH=ro(oH),aH=jn({},Ed,{data:0}),J2=ro(aH),lH={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cH={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uH={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dH(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=uH[t])?!!e[t]:!1}function LS(){return dH}var hH=jn({},tp,{key:function(t){if(t.key){var e=lH[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=sv(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?cH[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:LS,charCode:function(t){return t.type==="keypress"?sv(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?sv(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),fH=ro(hH),pH=jn({},uy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),eT=ro(pH),mH=jn({},tp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:LS}),gH=ro(mH),vH=jn({},Ed,{propertyName:0,elapsedTime:0,pseudoElement:0}),yH=ro(vH),xH=jn({},uy,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),wH=ro(xH),_H=[9,13,27,32],zS=ia&&"CompositionEvent"in window,qh=null;ia&&"documentMode"in document&&(qh=document.documentMode);var bH=ia&&"TextEvent"in window&&!qh,yk=ia&&(!zS||qh&&8<qh&&11>=qh),tT=" ",nT=!1;function xk(t,e){switch(t){case"keyup":return _H.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wk(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Pu=!1;function SH(t,e){switch(t){case"compositionend":return wk(e);case"keypress":return e.which!==32?null:(nT=!0,tT);case"textInput":return t=e.data,t===tT&&nT?null:t;default:return null}}function MH(t,e){if(Pu)return t==="compositionend"||!zS&&xk(t,e)?(t=vk(),ov=kS=$a=null,Pu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return yk&&e.locale!=="ko"?null:e.data;default:return null}}var CH={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function iT(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!CH[t.type]:e==="textarea"}function _k(t,e,n,i){QD(i),e=Rv(e,"onChange"),0<e.length&&(n=new NS("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Xh=null,gf=null;function EH(t){Dk(t,0)}function dy(t){var e=ku(t);if(GD(e))return t}function TH(t,e){if(t==="change")return e}var bk=!1;if(ia){var q1;if(ia){var X1="oninput"in document;if(!X1){var rT=document.createElement("div");rT.setAttribute("oninput","return;"),X1=typeof rT.oninput=="function"}q1=X1}else q1=!1;bk=q1&&(!document.documentMode||9<document.documentMode)}function oT(){Xh&&(Xh.detachEvent("onpropertychange",Sk),gf=Xh=null)}function Sk(t){if(t.propertyName==="value"&&dy(gf)){var e=[];_k(e,gf,t,AS(t)),nk(EH,e)}}function AH(t,e,n){t==="focusin"?(oT(),Xh=e,gf=n,Xh.attachEvent("onpropertychange",Sk)):t==="focusout"&&oT()}function IH(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return dy(gf)}function PH(t,e){if(t==="click")return dy(e)}function RH(t,e){if(t==="input"||t==="change")return dy(e)}function DH(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Zo=typeof Object.is=="function"?Object.is:DH;function vf(t,e){if(Zo(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!I_.call(e,r)||!Zo(t[r],e[r]))return!1}return!0}function sT(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function aT(t,e){var n=sT(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=sT(n)}}function Mk(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Mk(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ck(){for(var t=window,e=Mv();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Mv(t.document)}return e}function OS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function kH(t){var e=Ck(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Mk(n.ownerDocument.documentElement,n)){if(i!==null&&OS(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=aT(n,o);var s=aT(n,i);r&&s&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var NH=ia&&"documentMode"in document&&11>=document.documentMode,Ru=null,X_=null,Yh=null,Y_=!1;function lT(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Y_||Ru==null||Ru!==Mv(i)||(i=Ru,"selectionStart"in i&&OS(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Yh&&vf(Yh,i)||(Yh=i,i=Rv(X_,"onSelect"),0<i.length&&(e=new NS("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Ru)))}function Nm(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Du={animationend:Nm("Animation","AnimationEnd"),animationiteration:Nm("Animation","AnimationIteration"),animationstart:Nm("Animation","AnimationStart"),transitionend:Nm("Transition","TransitionEnd")},Y1={},Ek={};ia&&(Ek=document.createElement("div").style,"AnimationEvent"in window||(delete Du.animationend.animation,delete Du.animationiteration.animation,delete Du.animationstart.animation),"TransitionEvent"in window||delete Du.transitionend.transition);function hy(t){if(Y1[t])return Y1[t];if(!Du[t])return t;var e=Du[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Ek)return Y1[t]=e[n];return t}var Tk=hy("animationend"),Ak=hy("animationiteration"),Ik=hy("animationstart"),Pk=hy("transitionend"),Rk=new Map,cT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hl(t,e){Rk.set(t,e),Ac(e,[t])}for(var Z1=0;Z1<cT.length;Z1++){var K1=cT[Z1],LH=K1.toLowerCase(),zH=K1[0].toUpperCase()+K1.slice(1);hl(LH,"on"+zH)}hl(Tk,"onAnimationEnd");hl(Ak,"onAnimationIteration");hl(Ik,"onAnimationStart");hl("dblclick","onDoubleClick");hl("focusin","onFocus");hl("focusout","onBlur");hl(Pk,"onTransitionEnd");rd("onMouseEnter",["mouseout","mouseover"]);rd("onMouseLeave",["mouseout","mouseover"]);rd("onPointerEnter",["pointerout","pointerover"]);rd("onPointerLeave",["pointerout","pointerover"]);Ac("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ac("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ac("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ac("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ac("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ac("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),OH=new Set("cancel close invalid load scroll toggle".split(" ").concat(Oh));function uT(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,L8(i,e,void 0,t),t.currentTarget=null}function Dk(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var s=i.length-1;0<=s;s--){var a=i[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&r.isPropagationStopped())break e;uT(r,a,c),o=l}else for(s=0;s<i.length;s++){if(a=i[s],l=a.instance,c=a.currentTarget,a=a.listener,l!==o&&r.isPropagationStopped())break e;uT(r,a,c),o=l}}}if(Ev)throw t=W_,Ev=!1,W_=null,t}function In(t,e){var n=e[eb];n===void 0&&(n=e[eb]=new Set);var i=t+"__bubble";n.has(i)||(kk(e,t,2,!1),n.add(i))}function Q1(t,e,n){var i=0;e&&(i|=4),kk(n,t,i,e)}var Lm="_reactListening"+Math.random().toString(36).slice(2);function yf(t){if(!t[Lm]){t[Lm]=!0,BD.forEach(function(n){n!=="selectionchange"&&(OH.has(n)||Q1(n,!1,t),Q1(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Lm]||(e[Lm]=!0,Q1("selectionchange",!1,e))}}function kk(t,e,n,i){switch(gk(e)){case 1:var r=K8;break;case 4:r=Q8;break;default:r=DS}n=r.bind(null,e,n,t),r=void 0,!$_||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function J1(t,e,n,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var s=i.tag;if(s===3||s===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(s===4)for(s=i.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;s=s.return}for(;a!==null;){if(s=Jl(a),s===null)return;if(l=s.tag,l===5||l===6){i=o=s;continue e}a=a.parentNode}}i=i.return}nk(function(){var c=o,u=AS(n),d=[];e:{var f=Rk.get(t);if(f!==void 0){var m=NS,g=t;switch(t){case"keypress":if(sv(n)===0)break e;case"keydown":case"keyup":m=fH;break;case"focusin":g="focus",m=j1;break;case"focusout":g="blur",m=j1;break;case"beforeblur":case"afterblur":m=j1;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Q2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=tH;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=gH;break;case Tk:case Ak:case Ik:m=rH;break;case Pk:m=yH;break;case"scroll":m=J8;break;case"wheel":m=wH;break;case"copy":case"cut":case"paste":m=sH;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=eT}var y=(e&4)!==0,x=!y&&t==="scroll",v=y?f!==null?f+"Capture":null:f;y=[];for(var w=c,_;w!==null;){_=w;var S=_.stateNode;if(_.tag===5&&S!==null&&(_=S,v!==null&&(S=hf(w,v),S!=null&&y.push(xf(w,S,_)))),x)break;w=w.return}0<y.length&&(f=new m(f,g,null,n,u),d.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==H_&&(g=n.relatedTarget||n.fromElement)&&(Jl(g)||g[ra]))break e;if((m||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,m?(g=n.relatedTarget||n.toElement,m=c,g=g?Jl(g):null,g!==null&&(x=Ic(g),g!==x||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=c),m!==g)){if(y=Q2,S="onMouseLeave",v="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(y=eT,S="onPointerLeave",v="onPointerEnter",w="pointer"),x=m==null?f:ku(m),_=g==null?f:ku(g),f=new y(S,w+"leave",m,n,u),f.target=x,f.relatedTarget=_,S=null,Jl(u)===c&&(y=new y(v,w+"enter",g,n,u),y.target=_,y.relatedTarget=x,S=y),x=S,m&&g)t:{for(y=m,v=g,w=0,_=y;_;_=Jc(_))w++;for(_=0,S=v;S;S=Jc(S))_++;for(;0<w-_;)y=Jc(y),w--;for(;0<_-w;)v=Jc(v),_--;for(;w--;){if(y===v||v!==null&&y===v.alternate)break t;y=Jc(y),v=Jc(v)}y=null}else y=null;m!==null&&dT(d,f,m,y,!1),g!==null&&x!==null&&dT(d,x,g,y,!0)}}e:{if(f=c?ku(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var E=TH;else if(iT(f))if(bk)E=RH;else{E=IH;var T=AH}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(E=PH);if(E&&(E=E(t,c))){_k(d,E,n,u);break e}T&&T(t,f,c),t==="focusout"&&(T=f._wrapperState)&&T.controlled&&f.type==="number"&&z_(f,"number",f.value)}switch(T=c?ku(c):window,t){case"focusin":(iT(T)||T.contentEditable==="true")&&(Ru=T,X_=c,Yh=null);break;case"focusout":Yh=X_=Ru=null;break;case"mousedown":Y_=!0;break;case"contextmenu":case"mouseup":case"dragend":Y_=!1,lT(d,n,u);break;case"selectionchange":if(NH)break;case"keydown":case"keyup":lT(d,n,u)}var P;if(zS)e:{switch(t){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else Pu?xk(t,n)&&(D="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(D="onCompositionStart");D&&(yk&&n.locale!=="ko"&&(Pu||D!=="onCompositionStart"?D==="onCompositionEnd"&&Pu&&(P=vk()):($a=u,kS="value"in $a?$a.value:$a.textContent,Pu=!0)),T=Rv(c,D),0<T.length&&(D=new J2(D,t,null,n,u),d.push({event:D,listeners:T}),P?D.data=P:(P=wk(n),P!==null&&(D.data=P)))),(P=bH?SH(t,n):MH(t,n))&&(c=Rv(c,"onBeforeInput"),0<c.length&&(u=new J2("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=P))}Dk(d,e)})}function xf(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Rv(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=hf(t,n),o!=null&&i.unshift(xf(t,o,r)),o=hf(t,e),o!=null&&i.push(xf(t,o,r))),t=t.return}return i}function Jc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function dT(t,e,n,i,r){for(var o=e._reactName,s=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=hf(n,o),l!=null&&s.unshift(xf(n,l,a))):r||(l=hf(n,o),l!=null&&s.push(xf(n,l,a)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var FH=/\r\n?/g,UH=/\u0000|\uFFFD/g;function hT(t){return(typeof t=="string"?t:""+t).replace(FH,`
`).replace(UH,"")}function zm(t,e,n){if(e=hT(e),hT(t)!==e&&n)throw Error(ke(425))}function Dv(){}var Z_=null,K_=null;function Q_(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var J_=typeof setTimeout=="function"?setTimeout:void 0,BH=typeof clearTimeout=="function"?clearTimeout:void 0,fT=typeof Promise=="function"?Promise:void 0,HH=typeof queueMicrotask=="function"?queueMicrotask:typeof fT<"u"?function(t){return fT.resolve(null).then(t).catch(VH)}:J_;function VH(t){setTimeout(function(){throw t})}function ew(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),mf(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);mf(e)}function el(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function pT(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Td=Math.random().toString(36).slice(2),ds="__reactFiber$"+Td,wf="__reactProps$"+Td,ra="__reactContainer$"+Td,eb="__reactEvents$"+Td,$H="__reactListeners$"+Td,WH="__reactHandles$"+Td;function Jl(t){var e=t[ds];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ra]||n[ds]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=pT(t);t!==null;){if(n=t[ds])return n;t=pT(t)}return e}t=n,n=t.parentNode}return null}function np(t){return t=t[ds]||t[ra],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ku(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ke(33))}function fy(t){return t[wf]||null}var tb=[],Nu=-1;function fl(t){return{current:t}}function Dn(t){0>Nu||(t.current=tb[Nu],tb[Nu]=null,Nu--)}function Cn(t,e){Nu++,tb[Nu]=t.current,t.current=e}var sl={},er=fl(sl),Rr=fl(!1),pc=sl;function od(t,e){var n=t.type.contextTypes;if(!n)return sl;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Dr(t){return t=t.childContextTypes,t!=null}function kv(){Dn(Rr),Dn(er)}function mT(t,e,n){if(er.current!==sl)throw Error(ke(168));Cn(er,e),Cn(Rr,n)}function Nk(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(ke(108,A8(t)||"Unknown",r));return jn({},n,i)}function Nv(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||sl,pc=er.current,Cn(er,t),Cn(Rr,Rr.current),!0}function gT(t,e,n){var i=t.stateNode;if(!i)throw Error(ke(169));n?(t=Nk(t,e,pc),i.__reactInternalMemoizedMergedChildContext=t,Dn(Rr),Dn(er),Cn(er,t)):Dn(Rr),Cn(Rr,n)}var Xs=null,py=!1,tw=!1;function Lk(t){Xs===null?Xs=[t]:Xs.push(t)}function GH(t){py=!0,Lk(t)}function pl(){if(!tw&&Xs!==null){tw=!0;var t=0,e=vn;try{var n=Xs;for(vn=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Xs=null,py=!1}catch(r){throw Xs!==null&&(Xs=Xs.slice(t+1)),sk(IS,pl),r}finally{vn=e,tw=!1}}return null}var Lu=[],zu=0,Lv=null,zv=0,xo=[],wo=0,mc=null,Qs=1,Js="";function jl(t,e){Lu[zu++]=zv,Lu[zu++]=Lv,Lv=t,zv=e}function zk(t,e,n){xo[wo++]=Qs,xo[wo++]=Js,xo[wo++]=mc,mc=t;var i=Qs;t=Js;var r=32-Go(i)-1;i&=~(1<<r),n+=1;var o=32-Go(e)+r;if(30<o){var s=r-r%5;o=(i&(1<<s)-1).toString(32),i>>=s,r-=s,Qs=1<<32-Go(e)+r|n<<r|i,Js=o+t}else Qs=1<<o|n<<r|i,Js=t}function FS(t){t.return!==null&&(jl(t,1),zk(t,1,0))}function US(t){for(;t===Lv;)Lv=Lu[--zu],Lu[zu]=null,zv=Lu[--zu],Lu[zu]=null;for(;t===mc;)mc=xo[--wo],xo[wo]=null,Js=xo[--wo],xo[wo]=null,Qs=xo[--wo],xo[wo]=null}var Kr=null,Xr=null,Un=!1,Vo=null;function Ok(t,e){var n=bo(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function vT(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Kr=t,Xr=el(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Kr=t,Xr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=mc!==null?{id:Qs,overflow:Js}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=bo(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Kr=t,Xr=null,!0):!1;default:return!1}}function nb(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ib(t){if(Un){var e=Xr;if(e){var n=e;if(!vT(t,e)){if(nb(t))throw Error(ke(418));e=el(n.nextSibling);var i=Kr;e&&vT(t,e)?Ok(i,n):(t.flags=t.flags&-4097|2,Un=!1,Kr=t)}}else{if(nb(t))throw Error(ke(418));t.flags=t.flags&-4097|2,Un=!1,Kr=t}}}function yT(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Kr=t}function Om(t){if(t!==Kr)return!1;if(!Un)return yT(t),Un=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Q_(t.type,t.memoizedProps)),e&&(e=Xr)){if(nb(t))throw Fk(),Error(ke(418));for(;e;)Ok(t,e),e=el(e.nextSibling)}if(yT(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ke(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Xr=el(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Xr=null}}else Xr=Kr?el(t.stateNode.nextSibling):null;return!0}function Fk(){for(var t=Xr;t;)t=el(t.nextSibling)}function sd(){Xr=Kr=null,Un=!1}function BS(t){Vo===null?Vo=[t]:Vo.push(t)}var jH=da.ReactCurrentBatchConfig;function Uo(t,e){if(t&&t.defaultProps){e=jn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Ov=fl(null),Fv=null,Ou=null,HS=null;function VS(){HS=Ou=Fv=null}function $S(t){var e=Ov.current;Dn(Ov),t._currentValue=e}function rb(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Qu(t,e){Fv=t,HS=Ou=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ir=!0),t.firstContext=null)}function Co(t){var e=t._currentValue;if(HS!==t)if(t={context:t,memoizedValue:e,next:null},Ou===null){if(Fv===null)throw Error(ke(308));Ou=t,Fv.dependencies={lanes:0,firstContext:t}}else Ou=Ou.next=t;return e}var ec=null;function WS(t){ec===null?ec=[t]:ec.push(t)}function Uk(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,WS(e)):(n.next=r.next,r.next=n),e.interleaved=n,oa(t,i)}function oa(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Oa=!1;function GS(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bk(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ta(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function tl(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,nn&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,oa(t,n)}return r=i.interleaved,r===null?(e.next=e,WS(i)):(e.next=r.next,r.next=e),i.interleaved=e,oa(t,n)}function av(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,PS(t,n)}}function xT(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Uv(t,e,n,i){var r=t.updateQueue;Oa=!1;var o=r.firstBaseUpdate,s=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,s===null?o=c:s.next=c,s=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==s&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(o!==null){var d=r.baseState;s=0,u=c=l=null,a=o;do{var f=a.lane,m=a.eventTime;if((i&f)===f){u!==null&&(u=u.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,y=a;switch(f=e,m=n,y.tag){case 1:if(g=y.payload,typeof g=="function"){d=g.call(m,d,f);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,f=typeof g=="function"?g.call(m,d,f):g,f==null)break e;d=jn({},d,f);break e;case 2:Oa=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=m,l=d):u=u.next=m,s|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(u===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do s|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);vc|=s,t.lanes=s,t.memoizedState=d}}function wT(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(ke(191,r));r.call(i)}}}var Hk=new UD.Component().refs;function ob(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:jn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var my={isMounted:function(t){return(t=t._reactInternals)?Ic(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=hr(),r=il(t),o=ta(i,r);o.payload=e,n!=null&&(o.callback=n),e=tl(t,o,r),e!==null&&(jo(e,t,r,i),av(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=hr(),r=il(t),o=ta(i,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=tl(t,o,r),e!==null&&(jo(e,t,r,i),av(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=hr(),i=il(t),r=ta(n,i);r.tag=2,e!=null&&(r.callback=e),e=tl(t,r,i),e!==null&&(jo(e,t,i,n),av(e,t,i))}};function _T(t,e,n,i,r,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,s):e.prototype&&e.prototype.isPureReactComponent?!vf(n,i)||!vf(r,o):!0}function Vk(t,e,n){var i=!1,r=sl,o=e.contextType;return typeof o=="object"&&o!==null?o=Co(o):(r=Dr(e)?pc:er.current,i=e.contextTypes,o=(i=i!=null)?od(t,r):sl),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=my,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function bT(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&my.enqueueReplaceState(e,e.state,null)}function sb(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=Hk,GS(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=Co(o):(o=Dr(e)?pc:er.current,r.context=od(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(ob(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&my.enqueueReplaceState(r,r.state,null),Uv(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function fh(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ke(309));var i=n.stateNode}if(!i)throw Error(ke(147,t));var r=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=r.refs;a===Hk&&(a=r.refs={}),s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(ke(284));if(!n._owner)throw Error(ke(290,t))}return t}function Fm(t,e){throw t=Object.prototype.toString.call(e),Error(ke(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ST(t){var e=t._init;return e(t._payload)}function $k(t){function e(v,w){if(t){var _=v.deletions;_===null?(v.deletions=[w],v.flags|=16):_.push(w)}}function n(v,w){if(!t)return null;for(;w!==null;)e(v,w),w=w.sibling;return null}function i(v,w){for(v=new Map;w!==null;)w.key!==null?v.set(w.key,w):v.set(w.index,w),w=w.sibling;return v}function r(v,w){return v=rl(v,w),v.index=0,v.sibling=null,v}function o(v,w,_){return v.index=_,t?(_=v.alternate,_!==null?(_=_.index,_<w?(v.flags|=2,w):_):(v.flags|=2,w)):(v.flags|=1048576,w)}function s(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,w,_,S){return w===null||w.tag!==6?(w=lw(_,v.mode,S),w.return=v,w):(w=r(w,_),w.return=v,w)}function l(v,w,_,S){var E=_.type;return E===Iu?u(v,w,_.props.children,S,_.key):w!==null&&(w.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===za&&ST(E)===w.type)?(S=r(w,_.props),S.ref=fh(v,w,_),S.return=v,S):(S=fv(_.type,_.key,_.props,null,v.mode,S),S.ref=fh(v,w,_),S.return=v,S)}function c(v,w,_,S){return w===null||w.tag!==4||w.stateNode.containerInfo!==_.containerInfo||w.stateNode.implementation!==_.implementation?(w=cw(_,v.mode,S),w.return=v,w):(w=r(w,_.children||[]),w.return=v,w)}function u(v,w,_,S,E){return w===null||w.tag!==7?(w=ac(_,v.mode,S,E),w.return=v,w):(w=r(w,_),w.return=v,w)}function d(v,w,_){if(typeof w=="string"&&w!==""||typeof w=="number")return w=lw(""+w,v.mode,_),w.return=v,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Tm:return _=fv(w.type,w.key,w.props,null,v.mode,_),_.ref=fh(v,null,w),_.return=v,_;case Au:return w=cw(w,v.mode,_),w.return=v,w;case za:var S=w._init;return d(v,S(w._payload),_)}if(Lh(w)||lh(w))return w=ac(w,v.mode,_,null),w.return=v,w;Fm(v,w)}return null}function f(v,w,_,S){var E=w!==null?w.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return E!==null?null:a(v,w,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Tm:return _.key===E?l(v,w,_,S):null;case Au:return _.key===E?c(v,w,_,S):null;case za:return E=_._init,f(v,w,E(_._payload),S)}if(Lh(_)||lh(_))return E!==null?null:u(v,w,_,S,null);Fm(v,_)}return null}function m(v,w,_,S,E){if(typeof S=="string"&&S!==""||typeof S=="number")return v=v.get(_)||null,a(w,v,""+S,E);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Tm:return v=v.get(S.key===null?_:S.key)||null,l(w,v,S,E);case Au:return v=v.get(S.key===null?_:S.key)||null,c(w,v,S,E);case za:var T=S._init;return m(v,w,_,T(S._payload),E)}if(Lh(S)||lh(S))return v=v.get(_)||null,u(w,v,S,E,null);Fm(w,S)}return null}function g(v,w,_,S){for(var E=null,T=null,P=w,D=w=0,A=null;P!==null&&D<_.length;D++){P.index>D?(A=P,P=null):A=P.sibling;var R=f(v,P,_[D],S);if(R===null){P===null&&(P=A);break}t&&P&&R.alternate===null&&e(v,P),w=o(R,w,D),T===null?E=R:T.sibling=R,T=R,P=A}if(D===_.length)return n(v,P),Un&&jl(v,D),E;if(P===null){for(;D<_.length;D++)P=d(v,_[D],S),P!==null&&(w=o(P,w,D),T===null?E=P:T.sibling=P,T=P);return Un&&jl(v,D),E}for(P=i(v,P);D<_.length;D++)A=m(P,v,D,_[D],S),A!==null&&(t&&A.alternate!==null&&P.delete(A.key===null?D:A.key),w=o(A,w,D),T===null?E=A:T.sibling=A,T=A);return t&&P.forEach(function(N){return e(v,N)}),Un&&jl(v,D),E}function y(v,w,_,S){var E=lh(_);if(typeof E!="function")throw Error(ke(150));if(_=E.call(_),_==null)throw Error(ke(151));for(var T=E=null,P=w,D=w=0,A=null,R=_.next();P!==null&&!R.done;D++,R=_.next()){P.index>D?(A=P,P=null):A=P.sibling;var N=f(v,P,R.value,S);if(N===null){P===null&&(P=A);break}t&&P&&N.alternate===null&&e(v,P),w=o(N,w,D),T===null?E=N:T.sibling=N,T=N,P=A}if(R.done)return n(v,P),Un&&jl(v,D),E;if(P===null){for(;!R.done;D++,R=_.next())R=d(v,R.value,S),R!==null&&(w=o(R,w,D),T===null?E=R:T.sibling=R,T=R);return Un&&jl(v,D),E}for(P=i(v,P);!R.done;D++,R=_.next())R=m(P,v,D,R.value,S),R!==null&&(t&&R.alternate!==null&&P.delete(R.key===null?D:R.key),w=o(R,w,D),T===null?E=R:T.sibling=R,T=R);return t&&P.forEach(function(O){return e(v,O)}),Un&&jl(v,D),E}function x(v,w,_,S){if(typeof _=="object"&&_!==null&&_.type===Iu&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Tm:e:{for(var E=_.key,T=w;T!==null;){if(T.key===E){if(E=_.type,E===Iu){if(T.tag===7){n(v,T.sibling),w=r(T,_.props.children),w.return=v,v=w;break e}}else if(T.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===za&&ST(E)===T.type){n(v,T.sibling),w=r(T,_.props),w.ref=fh(v,T,_),w.return=v,v=w;break e}n(v,T);break}else e(v,T);T=T.sibling}_.type===Iu?(w=ac(_.props.children,v.mode,S,_.key),w.return=v,v=w):(S=fv(_.type,_.key,_.props,null,v.mode,S),S.ref=fh(v,w,_),S.return=v,v=S)}return s(v);case Au:e:{for(T=_.key;w!==null;){if(w.key===T)if(w.tag===4&&w.stateNode.containerInfo===_.containerInfo&&w.stateNode.implementation===_.implementation){n(v,w.sibling),w=r(w,_.children||[]),w.return=v,v=w;break e}else{n(v,w);break}else e(v,w);w=w.sibling}w=cw(_,v.mode,S),w.return=v,v=w}return s(v);case za:return T=_._init,x(v,w,T(_._payload),S)}if(Lh(_))return g(v,w,_,S);if(lh(_))return y(v,w,_,S);Fm(v,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,w!==null&&w.tag===6?(n(v,w.sibling),w=r(w,_),w.return=v,v=w):(n(v,w),w=lw(_,v.mode,S),w.return=v,v=w),s(v)):n(v,w)}return x}var ad=$k(!0),Wk=$k(!1),ip={},ys=fl(ip),_f=fl(ip),bf=fl(ip);function tc(t){if(t===ip)throw Error(ke(174));return t}function jS(t,e){switch(Cn(bf,e),Cn(_f,t),Cn(ys,ip),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:F_(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=F_(e,t)}Dn(ys),Cn(ys,e)}function ld(){Dn(ys),Dn(_f),Dn(bf)}function Gk(t){tc(bf.current);var e=tc(ys.current),n=F_(e,t.type);e!==n&&(Cn(_f,t),Cn(ys,n))}function qS(t){_f.current===t&&(Dn(ys),Dn(_f))}var $n=fl(0);function Bv(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var nw=[];function XS(){for(var t=0;t<nw.length;t++)nw[t]._workInProgressVersionPrimary=null;nw.length=0}var lv=da.ReactCurrentDispatcher,iw=da.ReactCurrentBatchConfig,gc=0,Gn=null,xi=null,Ai=null,Hv=!1,Zh=!1,Sf=0,qH=0;function $i(){throw Error(ke(321))}function YS(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Zo(t[n],e[n]))return!1;return!0}function ZS(t,e,n,i,r,o){if(gc=o,Gn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,lv.current=t===null||t.memoizedState===null?KH:QH,t=n(i,r),Zh){o=0;do{if(Zh=!1,Sf=0,25<=o)throw Error(ke(301));o+=1,Ai=xi=null,e.updateQueue=null,lv.current=JH,t=n(i,r)}while(Zh)}if(lv.current=Vv,e=xi!==null&&xi.next!==null,gc=0,Ai=xi=Gn=null,Hv=!1,e)throw Error(ke(300));return t}function KS(){var t=Sf!==0;return Sf=0,t}function cs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ai===null?Gn.memoizedState=Ai=t:Ai=Ai.next=t,Ai}function Eo(){if(xi===null){var t=Gn.alternate;t=t!==null?t.memoizedState:null}else t=xi.next;var e=Ai===null?Gn.memoizedState:Ai.next;if(e!==null)Ai=e,xi=t;else{if(t===null)throw Error(ke(310));xi=t,t={memoizedState:xi.memoizedState,baseState:xi.baseState,baseQueue:xi.baseQueue,queue:xi.queue,next:null},Ai===null?Gn.memoizedState=Ai=t:Ai=Ai.next=t}return Ai}function Mf(t,e){return typeof e=="function"?e(t):e}function rw(t){var e=Eo(),n=e.queue;if(n===null)throw Error(ke(311));n.lastRenderedReducer=t;var i=xi,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var s=r.next;r.next=o.next,o.next=s}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var a=s=null,l=null,c=o;do{var u=c.lane;if((gc&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,s=i):l=l.next=d,Gn.lanes|=u,vc|=u}c=c.next}while(c!==null&&c!==o);l===null?s=i:l.next=a,Zo(i,e.memoizedState)||(Ir=!0),e.memoizedState=i,e.baseState=s,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do o=r.lane,Gn.lanes|=o,vc|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ow(t){var e=Eo(),n=e.queue;if(n===null)throw Error(ke(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var s=r=r.next;do o=t(o,s.action),s=s.next;while(s!==r);Zo(o,e.memoizedState)||(Ir=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function jk(){}function qk(t,e){var n=Gn,i=Eo(),r=e(),o=!Zo(i.memoizedState,r);if(o&&(i.memoizedState=r,Ir=!0),i=i.queue,QS(Zk.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||Ai!==null&&Ai.memoizedState.tag&1){if(n.flags|=2048,Cf(9,Yk.bind(null,n,i,r,e),void 0,null),Ri===null)throw Error(ke(349));gc&30||Xk(n,e,r)}return r}function Xk(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Gn.updateQueue,e===null?(e={lastEffect:null,stores:null},Gn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Yk(t,e,n,i){e.value=n,e.getSnapshot=i,Kk(e)&&Qk(t)}function Zk(t,e,n){return n(function(){Kk(e)&&Qk(t)})}function Kk(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Zo(t,n)}catch{return!0}}function Qk(t){var e=oa(t,1);e!==null&&jo(e,t,1,-1)}function MT(t){var e=cs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mf,lastRenderedState:t},e.queue=t,t=t.dispatch=ZH.bind(null,Gn,t),[e.memoizedState,t]}function Cf(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Gn.updateQueue,e===null?(e={lastEffect:null,stores:null},Gn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function Jk(){return Eo().memoizedState}function cv(t,e,n,i){var r=cs();Gn.flags|=t,r.memoizedState=Cf(1|e,n,void 0,i===void 0?null:i)}function gy(t,e,n,i){var r=Eo();i=i===void 0?null:i;var o=void 0;if(xi!==null){var s=xi.memoizedState;if(o=s.destroy,i!==null&&YS(i,s.deps)){r.memoizedState=Cf(e,n,o,i);return}}Gn.flags|=t,r.memoizedState=Cf(1|e,n,o,i)}function CT(t,e){return cv(8390656,8,t,e)}function QS(t,e){return gy(2048,8,t,e)}function e3(t,e){return gy(4,2,t,e)}function t3(t,e){return gy(4,4,t,e)}function n3(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function i3(t,e,n){return n=n!=null?n.concat([t]):null,gy(4,4,n3.bind(null,e,t),n)}function JS(){}function r3(t,e){var n=Eo();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&YS(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function o3(t,e){var n=Eo();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&YS(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function s3(t,e,n){return gc&21?(Zo(n,e)||(n=ck(),Gn.lanes|=n,vc|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ir=!0),t.memoizedState=n)}function XH(t,e){var n=vn;vn=n!==0&&4>n?n:4,t(!0);var i=iw.transition;iw.transition={};try{t(!1),e()}finally{vn=n,iw.transition=i}}function a3(){return Eo().memoizedState}function YH(t,e,n){var i=il(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},l3(t))c3(e,n);else if(n=Uk(t,e,n,i),n!==null){var r=hr();jo(n,t,i,r),u3(n,e,i)}}function ZH(t,e,n){var i=il(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(l3(t))c3(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,n);if(r.hasEagerState=!0,r.eagerState=a,Zo(a,s)){var l=e.interleaved;l===null?(r.next=r,WS(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=Uk(t,e,r,i),n!==null&&(r=hr(),jo(n,t,i,r),u3(n,e,i))}}function l3(t){var e=t.alternate;return t===Gn||e!==null&&e===Gn}function c3(t,e){Zh=Hv=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function u3(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,PS(t,n)}}var Vv={readContext:Co,useCallback:$i,useContext:$i,useEffect:$i,useImperativeHandle:$i,useInsertionEffect:$i,useLayoutEffect:$i,useMemo:$i,useReducer:$i,useRef:$i,useState:$i,useDebugValue:$i,useDeferredValue:$i,useTransition:$i,useMutableSource:$i,useSyncExternalStore:$i,useId:$i,unstable_isNewReconciler:!1},KH={readContext:Co,useCallback:function(t,e){return cs().memoizedState=[t,e===void 0?null:e],t},useContext:Co,useEffect:CT,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,cv(4194308,4,n3.bind(null,e,t),n)},useLayoutEffect:function(t,e){return cv(4194308,4,t,e)},useInsertionEffect:function(t,e){return cv(4,2,t,e)},useMemo:function(t,e){var n=cs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=cs();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=YH.bind(null,Gn,t),[i.memoizedState,t]},useRef:function(t){var e=cs();return t={current:t},e.memoizedState=t},useState:MT,useDebugValue:JS,useDeferredValue:function(t){return cs().memoizedState=t},useTransition:function(){var t=MT(!1),e=t[0];return t=XH.bind(null,t[1]),cs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Gn,r=cs();if(Un){if(n===void 0)throw Error(ke(407));n=n()}else{if(n=e(),Ri===null)throw Error(ke(349));gc&30||Xk(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,CT(Zk.bind(null,i,o,t),[t]),i.flags|=2048,Cf(9,Yk.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=cs(),e=Ri.identifierPrefix;if(Un){var n=Js,i=Qs;n=(i&~(1<<32-Go(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Sf++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=qH++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},QH={readContext:Co,useCallback:r3,useContext:Co,useEffect:QS,useImperativeHandle:i3,useInsertionEffect:e3,useLayoutEffect:t3,useMemo:o3,useReducer:rw,useRef:Jk,useState:function(){return rw(Mf)},useDebugValue:JS,useDeferredValue:function(t){var e=Eo();return s3(e,xi.memoizedState,t)},useTransition:function(){var t=rw(Mf)[0],e=Eo().memoizedState;return[t,e]},useMutableSource:jk,useSyncExternalStore:qk,useId:a3,unstable_isNewReconciler:!1},JH={readContext:Co,useCallback:r3,useContext:Co,useEffect:QS,useImperativeHandle:i3,useInsertionEffect:e3,useLayoutEffect:t3,useMemo:o3,useReducer:ow,useRef:Jk,useState:function(){return ow(Mf)},useDebugValue:JS,useDeferredValue:function(t){var e=Eo();return xi===null?e.memoizedState=t:s3(e,xi.memoizedState,t)},useTransition:function(){var t=ow(Mf)[0],e=Eo().memoizedState;return[t,e]},useMutableSource:jk,useSyncExternalStore:qk,useId:a3,unstable_isNewReconciler:!1};function cd(t,e){try{var n="",i=e;do n+=T8(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function sw(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ab(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var e6=typeof WeakMap=="function"?WeakMap:Map;function d3(t,e,n){n=ta(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Wv||(Wv=!0,vb=i),ab(t,e)},n}function h3(t,e,n){n=ta(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){ab(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){ab(t,e),typeof i!="function"&&(nl===null?nl=new Set([this]):nl.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function ET(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new e6;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=p6.bind(null,t,e,n),e.then(t,t))}function TT(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function AT(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ta(-1,1),e.tag=2,tl(n,e,1))),n.lanes|=1),t)}var t6=da.ReactCurrentOwner,Ir=!1;function lr(t,e,n,i){e.child=t===null?Wk(e,null,n,i):ad(e,t.child,n,i)}function IT(t,e,n,i,r){n=n.render;var o=e.ref;return Qu(e,r),i=ZS(t,e,n,i,o,r),n=KS(),t!==null&&!Ir?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,sa(t,e,r)):(Un&&n&&FS(e),e.flags|=1,lr(t,e,i,r),e.child)}function PT(t,e,n,i,r){if(t===null){var o=n.type;return typeof o=="function"&&!aM(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,f3(t,e,o,i,r)):(t=fv(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:vf,n(s,i)&&t.ref===e.ref)return sa(t,e,r)}return e.flags|=1,t=rl(o,i),t.ref=e.ref,t.return=e,e.child=t}function f3(t,e,n,i,r){if(t!==null){var o=t.memoizedProps;if(vf(o,i)&&t.ref===e.ref)if(Ir=!1,e.pendingProps=i=o,(t.lanes&r)!==0)t.flags&131072&&(Ir=!0);else return e.lanes=t.lanes,sa(t,e,r)}return lb(t,e,n,i,r)}function p3(t,e,n){var i=e.pendingProps,r=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Cn(Uu,jr),jr|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Cn(Uu,jr),jr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,Cn(Uu,jr),jr|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,Cn(Uu,jr),jr|=i;return lr(t,e,r,n),e.child}function m3(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function lb(t,e,n,i,r){var o=Dr(n)?pc:er.current;return o=od(e,o),Qu(e,r),n=ZS(t,e,n,i,o,r),i=KS(),t!==null&&!Ir?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,sa(t,e,r)):(Un&&i&&FS(e),e.flags|=1,lr(t,e,n,r),e.child)}function RT(t,e,n,i,r){if(Dr(n)){var o=!0;Nv(e)}else o=!1;if(Qu(e,r),e.stateNode===null)uv(t,e),Vk(e,n,i),sb(e,n,i,r),i=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,c=n.contextType;typeof c=="object"&&c!==null?c=Co(c):(c=Dr(n)?pc:er.current,c=od(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==i||l!==c)&&bT(e,s,i,c),Oa=!1;var f=e.memoizedState;s.state=f,Uv(e,i,s,r),l=e.memoizedState,a!==i||f!==l||Rr.current||Oa?(typeof u=="function"&&(ob(e,n,u,i),l=e.memoizedState),(a=Oa||_T(e,n,a,i,f,l,c))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),s.props=i,s.state=l,s.context=c,i=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{s=e.stateNode,Bk(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Uo(e.type,a),s.props=c,d=e.pendingProps,f=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=Co(l):(l=Dr(n)?pc:er.current,l=od(e,l));var m=n.getDerivedStateFromProps;(u=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==d||f!==l)&&bT(e,s,i,l),Oa=!1,f=e.memoizedState,s.state=f,Uv(e,i,s,r);var g=e.memoizedState;a!==d||f!==g||Rr.current||Oa?(typeof m=="function"&&(ob(e,n,m,i),g=e.memoizedState),(c=Oa||_T(e,n,c,i,f,g,l)||!1)?(u||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,g,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,g,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=g),s.props=i,s.state=g,s.context=l,i=c):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return cb(t,e,n,i,o,r)}function cb(t,e,n,i,r,o){m3(t,e);var s=(e.flags&128)!==0;if(!i&&!s)return r&&gT(e,n,!1),sa(t,e,o);i=e.stateNode,t6.current=e;var a=s&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&s?(e.child=ad(e,t.child,null,o),e.child=ad(e,null,a,o)):lr(t,e,a,o),e.memoizedState=i.state,r&&gT(e,n,!0),e.child}function g3(t){var e=t.stateNode;e.pendingContext?mT(t,e.pendingContext,e.pendingContext!==e.context):e.context&&mT(t,e.context,!1),jS(t,e.containerInfo)}function DT(t,e,n,i,r){return sd(),BS(r),e.flags|=256,lr(t,e,n,i),e.child}var ub={dehydrated:null,treeContext:null,retryLane:0};function db(t){return{baseLanes:t,cachePool:null,transitions:null}}function v3(t,e,n){var i=e.pendingProps,r=$n.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Cn($n,r&1),t===null)return ib(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=i.children,t=i.fallback,o?(i=e.mode,o=e.child,s={mode:"hidden",children:s},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=xy(s,i,0,null),t=ac(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=db(n),e.memoizedState=ub,t):eM(e,s));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return n6(t,e,s,i,a,r,n);if(o){o=i.fallback,s=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(s&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=rl(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?o=rl(a,o):(o=ac(o,s,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,s=t.child.memoizedState,s=s===null?db(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=ub,i}return o=t.child,t=o.sibling,i=rl(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function eM(t,e){return e=xy({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Um(t,e,n,i){return i!==null&&BS(i),ad(e,t.child,null,n),t=eM(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function n6(t,e,n,i,r,o,s){if(n)return e.flags&256?(e.flags&=-257,i=sw(Error(ke(422))),Um(t,e,s,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=xy({mode:"visible",children:i.children},r,0,null),o=ac(o,r,s,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&ad(e,t.child,null,s),e.child.memoizedState=db(s),e.memoizedState=ub,o);if(!(e.mode&1))return Um(t,e,s,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,o=Error(ke(419)),i=sw(o,i,void 0),Um(t,e,s,i)}if(a=(s&t.childLanes)!==0,Ir||a){if(i=Ri,i!==null){switch(s&-s){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|s)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,oa(t,r),jo(i,t,r,-1))}return sM(),i=sw(Error(ke(421))),Um(t,e,s,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=m6.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,Xr=el(r.nextSibling),Kr=e,Un=!0,Vo=null,t!==null&&(xo[wo++]=Qs,xo[wo++]=Js,xo[wo++]=mc,Qs=t.id,Js=t.overflow,mc=e),e=eM(e,i.children),e.flags|=4096,e)}function kT(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),rb(t.return,e,n)}function aw(t,e,n,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function y3(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(lr(t,e,i.children,n),i=$n.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&kT(t,n,e);else if(t.tag===19)kT(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Cn($n,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Bv(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),aw(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Bv(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}aw(e,!0,n,null,o);break;case"together":aw(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function uv(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function sa(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),vc|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ke(153));if(e.child!==null){for(t=e.child,n=rl(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=rl(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function i6(t,e,n){switch(e.tag){case 3:g3(e),sd();break;case 5:Gk(e);break;case 1:Dr(e.type)&&Nv(e);break;case 4:jS(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Cn(Ov,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Cn($n,$n.current&1),e.flags|=128,null):n&e.child.childLanes?v3(t,e,n):(Cn($n,$n.current&1),t=sa(t,e,n),t!==null?t.sibling:null);Cn($n,$n.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return y3(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Cn($n,$n.current),i)break;return null;case 22:case 23:return e.lanes=0,p3(t,e,n)}return sa(t,e,n)}var x3,hb,w3,_3;x3=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};hb=function(){};w3=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,tc(ys.current);var o=null;switch(n){case"input":r=N_(t,r),i=N_(t,i),o=[];break;case"select":r=jn({},r,{value:void 0}),i=jn({},i,{value:void 0}),o=[];break;case"textarea":r=O_(t,r),i=O_(t,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Dv)}U_(n,i);var s;n=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(uf.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(uf.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&In("scroll",t),o||a===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};_3=function(t,e,n,i){n!==i&&(e.flags|=4)};function ph(t,e){if(!Un)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Wi(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function r6(t,e,n){var i=e.pendingProps;switch(US(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wi(e),null;case 1:return Dr(e.type)&&kv(),Wi(e),null;case 3:return i=e.stateNode,ld(),Dn(Rr),Dn(er),XS(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Om(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Vo!==null&&(wb(Vo),Vo=null))),hb(t,e),Wi(e),null;case 5:qS(e);var r=tc(bf.current);if(n=e.type,t!==null&&e.stateNode!=null)w3(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ke(166));return Wi(e),null}if(t=tc(ys.current),Om(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[ds]=e,i[wf]=o,t=(e.mode&1)!==0,n){case"dialog":In("cancel",i),In("close",i);break;case"iframe":case"object":case"embed":In("load",i);break;case"video":case"audio":for(r=0;r<Oh.length;r++)In(Oh[r],i);break;case"source":In("error",i);break;case"img":case"image":case"link":In("error",i),In("load",i);break;case"details":In("toggle",i);break;case"input":V2(i,o),In("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},In("invalid",i);break;case"textarea":W2(i,o),In("invalid",i)}U_(n,o),r=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?i.textContent!==a&&(o.suppressHydrationWarning!==!0&&zm(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&zm(i.textContent,a,t),r=["children",""+a]):uf.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&In("scroll",i)}switch(n){case"input":Am(i),$2(i,o,!0);break;case"textarea":Am(i),G2(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=Dv)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{s=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=XD(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=s.createElement(n,{is:i.is}):(t=s.createElement(n),n==="select"&&(s=t,i.multiple?s.multiple=!0:i.size&&(s.size=i.size))):t=s.createElementNS(t,n),t[ds]=e,t[wf]=i,x3(t,e,!1,!1),e.stateNode=t;e:{switch(s=B_(n,i),n){case"dialog":In("cancel",t),In("close",t),r=i;break;case"iframe":case"object":case"embed":In("load",t),r=i;break;case"video":case"audio":for(r=0;r<Oh.length;r++)In(Oh[r],t);r=i;break;case"source":In("error",t),r=i;break;case"img":case"image":case"link":In("error",t),In("load",t),r=i;break;case"details":In("toggle",t),r=i;break;case"input":V2(t,i),r=N_(t,i),In("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=jn({},i,{value:void 0}),In("invalid",t);break;case"textarea":W2(t,i),r=O_(t,i),In("invalid",t);break;default:r=i}U_(n,r),a=r;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?KD(t,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&YD(t,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&df(t,l):typeof l=="number"&&df(t,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(uf.hasOwnProperty(o)?l!=null&&o==="onScroll"&&In("scroll",t):l!=null&&MS(t,o,l,s))}switch(n){case"input":Am(t),$2(t,i,!1);break;case"textarea":Am(t),G2(t);break;case"option":i.value!=null&&t.setAttribute("value",""+ol(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?Xu(t,!!i.multiple,o,!1):i.defaultValue!=null&&Xu(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Dv)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Wi(e),null;case 6:if(t&&e.stateNode!=null)_3(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ke(166));if(n=tc(bf.current),tc(ys.current),Om(e)){if(i=e.stateNode,n=e.memoizedProps,i[ds]=e,(o=i.nodeValue!==n)&&(t=Kr,t!==null))switch(t.tag){case 3:zm(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&zm(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[ds]=e,e.stateNode=i}return Wi(e),null;case 13:if(Dn($n),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Un&&Xr!==null&&e.mode&1&&!(e.flags&128))Fk(),sd(),e.flags|=98560,o=!1;else if(o=Om(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(ke(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ke(317));o[ds]=e}else sd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Wi(e),o=!1}else Vo!==null&&(wb(Vo),Vo=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||$n.current&1?wi===0&&(wi=3):sM())),e.updateQueue!==null&&(e.flags|=4),Wi(e),null);case 4:return ld(),hb(t,e),t===null&&yf(e.stateNode.containerInfo),Wi(e),null;case 10:return $S(e.type._context),Wi(e),null;case 17:return Dr(e.type)&&kv(),Wi(e),null;case 19:if(Dn($n),o=e.memoizedState,o===null)return Wi(e),null;if(i=(e.flags&128)!==0,s=o.rendering,s===null)if(i)ph(o,!1);else{if(wi!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Bv(t),s!==null){for(e.flags|=128,ph(o,!1),i=s.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Cn($n,$n.current&1|2),e.child}t=t.sibling}o.tail!==null&&ti()>ud&&(e.flags|=128,i=!0,ph(o,!1),e.lanes=4194304)}else{if(!i)if(t=Bv(s),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ph(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Un)return Wi(e),null}else 2*ti()-o.renderingStartTime>ud&&n!==1073741824&&(e.flags|=128,i=!0,ph(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=ti(),e.sibling=null,n=$n.current,Cn($n,i?n&1|2:n&1),e):(Wi(e),null);case 22:case 23:return oM(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?jr&1073741824&&(Wi(e),e.subtreeFlags&6&&(e.flags|=8192)):Wi(e),null;case 24:return null;case 25:return null}throw Error(ke(156,e.tag))}function o6(t,e){switch(US(e),e.tag){case 1:return Dr(e.type)&&kv(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ld(),Dn(Rr),Dn(er),XS(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return qS(e),null;case 13:if(Dn($n),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ke(340));sd()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Dn($n),null;case 4:return ld(),null;case 10:return $S(e.type._context),null;case 22:case 23:return oM(),null;case 24:return null;default:return null}}var Bm=!1,Zi=!1,s6=typeof WeakSet=="function"?WeakSet:Set,st=null;function Fu(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Zn(t,e,i)}else n.current=null}function fb(t,e,n){try{n()}catch(i){Zn(t,e,i)}}var NT=!1;function a6(t,e){if(Z_=Iv,t=Ck(),OS(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var m;d!==n||r!==0&&d.nodeType!==3||(a=s+r),d!==o||i!==0&&d.nodeType!==3||(l=s+i),d.nodeType===3&&(s+=d.nodeValue.length),(m=d.firstChild)!==null;)f=d,d=m;for(;;){if(d===t)break t;if(f===n&&++c===r&&(a=s),f===o&&++u===i&&(l=s),(m=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(K_={focusedElem:t,selectionRange:n},Iv=!1,st=e;st!==null;)if(e=st,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,st=t;else for(;st!==null;){e=st;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,x=g.memoizedState,v=e.stateNode,w=v.getSnapshotBeforeUpdate(e.elementType===e.type?y:Uo(e.type,y),x);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ke(163))}}catch(S){Zn(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,st=t;break}st=e.return}return g=NT,NT=!1,g}function Kh(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&fb(e,n,o)}r=r.next}while(r!==i)}}function vy(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function pb(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function b3(t){var e=t.alternate;e!==null&&(t.alternate=null,b3(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ds],delete e[wf],delete e[eb],delete e[$H],delete e[WH])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function S3(t){return t.tag===5||t.tag===3||t.tag===4}function LT(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||S3(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function mb(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Dv));else if(i!==4&&(t=t.child,t!==null))for(mb(t,e,n),t=t.sibling;t!==null;)mb(t,e,n),t=t.sibling}function gb(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(gb(t,e,n),t=t.sibling;t!==null;)gb(t,e,n),t=t.sibling}var ki=null,Ho=!1;function Sa(t,e,n){for(n=n.child;n!==null;)M3(t,e,n),n=n.sibling}function M3(t,e,n){if(vs&&typeof vs.onCommitFiberUnmount=="function")try{vs.onCommitFiberUnmount(cy,n)}catch{}switch(n.tag){case 5:Zi||Fu(n,e);case 6:var i=ki,r=Ho;ki=null,Sa(t,e,n),ki=i,Ho=r,ki!==null&&(Ho?(t=ki,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ki.removeChild(n.stateNode));break;case 18:ki!==null&&(Ho?(t=ki,n=n.stateNode,t.nodeType===8?ew(t.parentNode,n):t.nodeType===1&&ew(t,n),mf(t)):ew(ki,n.stateNode));break;case 4:i=ki,r=Ho,ki=n.stateNode.containerInfo,Ho=!0,Sa(t,e,n),ki=i,Ho=r;break;case 0:case 11:case 14:case 15:if(!Zi&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&fb(n,e,s),r=r.next}while(r!==i)}Sa(t,e,n);break;case 1:if(!Zi&&(Fu(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Zn(n,e,a)}Sa(t,e,n);break;case 21:Sa(t,e,n);break;case 22:n.mode&1?(Zi=(i=Zi)||n.memoizedState!==null,Sa(t,e,n),Zi=i):Sa(t,e,n);break;default:Sa(t,e,n)}}function zT(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new s6),e.forEach(function(i){var r=g6.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function No(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:ki=a.stateNode,Ho=!1;break e;case 3:ki=a.stateNode.containerInfo,Ho=!0;break e;case 4:ki=a.stateNode.containerInfo,Ho=!0;break e}a=a.return}if(ki===null)throw Error(ke(160));M3(o,s,r),ki=null,Ho=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){Zn(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)C3(e,t),e=e.sibling}function C3(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(No(e,t),os(t),i&4){try{Kh(3,t,t.return),vy(3,t)}catch(y){Zn(t,t.return,y)}try{Kh(5,t,t.return)}catch(y){Zn(t,t.return,y)}}break;case 1:No(e,t),os(t),i&512&&n!==null&&Fu(n,n.return);break;case 5:if(No(e,t),os(t),i&512&&n!==null&&Fu(n,n.return),t.flags&32){var r=t.stateNode;try{df(r,"")}catch(y){Zn(t,t.return,y)}}if(i&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&jD(r,o),B_(a,s);var c=B_(a,o);for(s=0;s<l.length;s+=2){var u=l[s],d=l[s+1];u==="style"?KD(r,d):u==="dangerouslySetInnerHTML"?YD(r,d):u==="children"?df(r,d):MS(r,u,d,c)}switch(a){case"input":L_(r,o);break;case"textarea":qD(r,o);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var m=o.value;m!=null?Xu(r,!!o.multiple,m,!1):f!==!!o.multiple&&(o.defaultValue!=null?Xu(r,!!o.multiple,o.defaultValue,!0):Xu(r,!!o.multiple,o.multiple?[]:"",!1))}r[wf]=o}catch(y){Zn(t,t.return,y)}}break;case 6:if(No(e,t),os(t),i&4){if(t.stateNode===null)throw Error(ke(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(y){Zn(t,t.return,y)}}break;case 3:if(No(e,t),os(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{mf(e.containerInfo)}catch(y){Zn(t,t.return,y)}break;case 4:No(e,t),os(t);break;case 13:No(e,t),os(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(iM=ti())),i&4&&zT(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Zi=(c=Zi)||u,No(e,t),Zi=c):No(e,t),os(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(st=t,u=t.child;u!==null;){for(d=st=u;st!==null;){switch(f=st,m=f.child,f.tag){case 0:case 11:case 14:case 15:Kh(4,f,f.return);break;case 1:Fu(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){i=f,n=f.return;try{e=i,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(y){Zn(i,n,y)}}break;case 5:Fu(f,f.return);break;case 22:if(f.memoizedState!==null){FT(d);continue}}m!==null?(m.return=f,st=m):FT(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{r=d.stateNode,c?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=d.stateNode,l=d.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=ZD("display",s))}catch(y){Zn(t,t.return,y)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(y){Zn(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:No(e,t),os(t),i&4&&zT(t);break;case 21:break;default:No(e,t),os(t)}}function os(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(S3(n)){var i=n;break e}n=n.return}throw Error(ke(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(df(r,""),i.flags&=-33);var o=LT(t);gb(t,o,r);break;case 3:case 4:var s=i.stateNode.containerInfo,a=LT(t);mb(t,a,s);break;default:throw Error(ke(161))}}catch(l){Zn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function l6(t,e,n){st=t,E3(t)}function E3(t,e,n){for(var i=(t.mode&1)!==0;st!==null;){var r=st,o=r.child;if(r.tag===22&&i){var s=r.memoizedState!==null||Bm;if(!s){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Zi;a=Bm;var c=Zi;if(Bm=s,(Zi=l)&&!c)for(st=r;st!==null;)s=st,l=s.child,s.tag===22&&s.memoizedState!==null?UT(r):l!==null?(l.return=s,st=l):UT(r);for(;o!==null;)st=o,E3(o),o=o.sibling;st=r,Bm=a,Zi=c}OT(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,st=o):OT(t)}}function OT(t){for(;st!==null;){var e=st;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Zi||vy(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Zi)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Uo(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&wT(e,o,i);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}wT(e,s,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&mf(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ke(163))}Zi||e.flags&512&&pb(e)}catch(f){Zn(e,e.return,f)}}if(e===t){st=null;break}if(n=e.sibling,n!==null){n.return=e.return,st=n;break}st=e.return}}function FT(t){for(;st!==null;){var e=st;if(e===t){st=null;break}var n=e.sibling;if(n!==null){n.return=e.return,st=n;break}st=e.return}}function UT(t){for(;st!==null;){var e=st;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{vy(4,e)}catch(l){Zn(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){Zn(e,r,l)}}var o=e.return;try{pb(e)}catch(l){Zn(e,o,l)}break;case 5:var s=e.return;try{pb(e)}catch(l){Zn(e,s,l)}}}catch(l){Zn(e,e.return,l)}if(e===t){st=null;break}var a=e.sibling;if(a!==null){a.return=e.return,st=a;break}st=e.return}}var c6=Math.ceil,$v=da.ReactCurrentDispatcher,tM=da.ReactCurrentOwner,So=da.ReactCurrentBatchConfig,nn=0,Ri=null,di=null,Li=0,jr=0,Uu=fl(0),wi=0,Ef=null,vc=0,yy=0,nM=0,Qh=null,Er=null,iM=0,ud=1/0,js=null,Wv=!1,vb=null,nl=null,Hm=!1,Wa=null,Gv=0,Jh=0,yb=null,dv=-1,hv=0;function hr(){return nn&6?ti():dv!==-1?dv:dv=ti()}function il(t){return t.mode&1?nn&2&&Li!==0?Li&-Li:jH.transition!==null?(hv===0&&(hv=ck()),hv):(t=vn,t!==0||(t=window.event,t=t===void 0?16:gk(t.type)),t):1}function jo(t,e,n,i){if(50<Jh)throw Jh=0,yb=null,Error(ke(185));ep(t,n,i),(!(nn&2)||t!==Ri)&&(t===Ri&&(!(nn&2)&&(yy|=n),wi===4&&Ba(t,Li)),kr(t,i),n===1&&nn===0&&!(e.mode&1)&&(ud=ti()+500,py&&pl()))}function kr(t,e){var n=t.callbackNode;j8(t,e);var i=Av(t,t===Ri?Li:0);if(i===0)n!==null&&X2(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&X2(n),e===1)t.tag===0?GH(BT.bind(null,t)):Lk(BT.bind(null,t)),HH(function(){!(nn&6)&&pl()}),n=null;else{switch(uk(i)){case 1:n=IS;break;case 4:n=ak;break;case 16:n=Tv;break;case 536870912:n=lk;break;default:n=Tv}n=N3(n,T3.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function T3(t,e){if(dv=-1,hv=0,nn&6)throw Error(ke(327));var n=t.callbackNode;if(Ju()&&t.callbackNode!==n)return null;var i=Av(t,t===Ri?Li:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=jv(t,i);else{e=i;var r=nn;nn|=2;var o=I3();(Ri!==t||Li!==e)&&(js=null,ud=ti()+500,sc(t,e));do try{h6();break}catch(a){A3(t,a)}while(!0);VS(),$v.current=o,nn=r,di!==null?e=0:(Ri=null,Li=0,e=wi)}if(e!==0){if(e===2&&(r=G_(t),r!==0&&(i=r,e=xb(t,r))),e===1)throw n=Ef,sc(t,0),Ba(t,i),kr(t,ti()),n;if(e===6)Ba(t,i);else{if(r=t.current.alternate,!(i&30)&&!u6(r)&&(e=jv(t,i),e===2&&(o=G_(t),o!==0&&(i=o,e=xb(t,o))),e===1))throw n=Ef,sc(t,0),Ba(t,i),kr(t,ti()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(ke(345));case 2:ql(t,Er,js);break;case 3:if(Ba(t,i),(i&130023424)===i&&(e=iM+500-ti(),10<e)){if(Av(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){hr(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=J_(ql.bind(null,t,Er,js),e);break}ql(t,Er,js);break;case 4:if(Ba(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var s=31-Go(i);o=1<<s,s=e[s],s>r&&(r=s),i&=~o}if(i=r,i=ti()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*c6(i/1960))-i,10<i){t.timeoutHandle=J_(ql.bind(null,t,Er,js),i);break}ql(t,Er,js);break;case 5:ql(t,Er,js);break;default:throw Error(ke(329))}}}return kr(t,ti()),t.callbackNode===n?T3.bind(null,t):null}function xb(t,e){var n=Qh;return t.current.memoizedState.isDehydrated&&(sc(t,e).flags|=256),t=jv(t,e),t!==2&&(e=Er,Er=n,e!==null&&wb(e)),t}function wb(t){Er===null?Er=t:Er.push.apply(Er,t)}function u6(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!Zo(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ba(t,e){for(e&=~nM,e&=~yy,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Go(e),i=1<<n;t[n]=-1,e&=~i}}function BT(t){if(nn&6)throw Error(ke(327));Ju();var e=Av(t,0);if(!(e&1))return kr(t,ti()),null;var n=jv(t,e);if(t.tag!==0&&n===2){var i=G_(t);i!==0&&(e=i,n=xb(t,i))}if(n===1)throw n=Ef,sc(t,0),Ba(t,e),kr(t,ti()),n;if(n===6)throw Error(ke(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ql(t,Er,js),kr(t,ti()),null}function rM(t,e){var n=nn;nn|=1;try{return t(e)}finally{nn=n,nn===0&&(ud=ti()+500,py&&pl())}}function yc(t){Wa!==null&&Wa.tag===0&&!(nn&6)&&Ju();var e=nn;nn|=1;var n=So.transition,i=vn;try{if(So.transition=null,vn=1,t)return t()}finally{vn=i,So.transition=n,nn=e,!(nn&6)&&pl()}}function oM(){jr=Uu.current,Dn(Uu)}function sc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,BH(n)),di!==null)for(n=di.return;n!==null;){var i=n;switch(US(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&kv();break;case 3:ld(),Dn(Rr),Dn(er),XS();break;case 5:qS(i);break;case 4:ld();break;case 13:Dn($n);break;case 19:Dn($n);break;case 10:$S(i.type._context);break;case 22:case 23:oM()}n=n.return}if(Ri=t,di=t=rl(t.current,null),Li=jr=e,wi=0,Ef=null,nM=yy=vc=0,Er=Qh=null,ec!==null){for(e=0;e<ec.length;e++)if(n=ec[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var s=o.next;o.next=r,i.next=s}n.pending=i}ec=null}return t}function A3(t,e){do{var n=di;try{if(VS(),lv.current=Vv,Hv){for(var i=Gn.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Hv=!1}if(gc=0,Ai=xi=Gn=null,Zh=!1,Sf=0,tM.current=null,n===null||n.return===null){wi=1,Ef=e,di=null;break}e:{var o=t,s=n.return,a=n,l=e;if(e=Li,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=TT(s);if(m!==null){m.flags&=-257,AT(m,s,a,o,e),m.mode&1&&ET(o,c,e),e=m,l=c;var g=e.updateQueue;if(g===null){var y=new Set;y.add(l),e.updateQueue=y}else g.add(l);break e}else{if(!(e&1)){ET(o,c,e),sM();break e}l=Error(ke(426))}}else if(Un&&a.mode&1){var x=TT(s);if(x!==null){!(x.flags&65536)&&(x.flags|=256),AT(x,s,a,o,e),BS(cd(l,a));break e}}o=l=cd(l,a),wi!==4&&(wi=2),Qh===null?Qh=[o]:Qh.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var v=d3(o,l,e);xT(o,v);break e;case 1:a=l;var w=o.type,_=o.stateNode;if(!(o.flags&128)&&(typeof w.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(nl===null||!nl.has(_)))){o.flags|=65536,e&=-e,o.lanes|=e;var S=h3(o,a,e);xT(o,S);break e}}o=o.return}while(o!==null)}R3(n)}catch(E){e=E,di===n&&n!==null&&(di=n=n.return);continue}break}while(!0)}function I3(){var t=$v.current;return $v.current=Vv,t===null?Vv:t}function sM(){(wi===0||wi===3||wi===2)&&(wi=4),Ri===null||!(vc&268435455)&&!(yy&268435455)||Ba(Ri,Li)}function jv(t,e){var n=nn;nn|=2;var i=I3();(Ri!==t||Li!==e)&&(js=null,sc(t,e));do try{d6();break}catch(r){A3(t,r)}while(!0);if(VS(),nn=n,$v.current=i,di!==null)throw Error(ke(261));return Ri=null,Li=0,wi}function d6(){for(;di!==null;)P3(di)}function h6(){for(;di!==null&&!O8();)P3(di)}function P3(t){var e=k3(t.alternate,t,jr);t.memoizedProps=t.pendingProps,e===null?R3(t):di=e,tM.current=null}function R3(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=o6(n,e),n!==null){n.flags&=32767,di=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{wi=6,di=null;return}}else if(n=r6(n,e,jr),n!==null){di=n;return}if(e=e.sibling,e!==null){di=e;return}di=e=t}while(e!==null);wi===0&&(wi=5)}function ql(t,e,n){var i=vn,r=So.transition;try{So.transition=null,vn=1,f6(t,e,n,i)}finally{So.transition=r,vn=i}return null}function f6(t,e,n,i){do Ju();while(Wa!==null);if(nn&6)throw Error(ke(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ke(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(q8(t,o),t===Ri&&(di=Ri=null,Li=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Hm||(Hm=!0,N3(Tv,function(){return Ju(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=So.transition,So.transition=null;var s=vn;vn=1;var a=nn;nn|=4,tM.current=null,a6(t,n),C3(n,t),kH(K_),Iv=!!Z_,K_=Z_=null,t.current=n,l6(n),F8(),nn=a,vn=s,So.transition=o}else t.current=n;if(Hm&&(Hm=!1,Wa=t,Gv=r),o=t.pendingLanes,o===0&&(nl=null),H8(n.stateNode),kr(t,ti()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Wv)throw Wv=!1,t=vb,vb=null,t;return Gv&1&&t.tag!==0&&Ju(),o=t.pendingLanes,o&1?t===yb?Jh++:(Jh=0,yb=t):Jh=0,pl(),null}function Ju(){if(Wa!==null){var t=uk(Gv),e=So.transition,n=vn;try{if(So.transition=null,vn=16>t?16:t,Wa===null)var i=!1;else{if(t=Wa,Wa=null,Gv=0,nn&6)throw Error(ke(331));var r=nn;for(nn|=4,st=t.current;st!==null;){var o=st,s=o.child;if(st.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(st=c;st!==null;){var u=st;switch(u.tag){case 0:case 11:case 15:Kh(8,u,o)}var d=u.child;if(d!==null)d.return=u,st=d;else for(;st!==null;){u=st;var f=u.sibling,m=u.return;if(b3(u),u===c){st=null;break}if(f!==null){f.return=m,st=f;break}st=m}}}var g=o.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var x=y.sibling;y.sibling=null,y=x}while(y!==null)}}st=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,st=s;else e:for(;st!==null;){if(o=st,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Kh(9,o,o.return)}var v=o.sibling;if(v!==null){v.return=o.return,st=v;break e}st=o.return}}var w=t.current;for(st=w;st!==null;){s=st;var _=s.child;if(s.subtreeFlags&2064&&_!==null)_.return=s,st=_;else e:for(s=w;st!==null;){if(a=st,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:vy(9,a)}}catch(E){Zn(a,a.return,E)}if(a===s){st=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,st=S;break e}st=a.return}}if(nn=r,pl(),vs&&typeof vs.onPostCommitFiberRoot=="function")try{vs.onPostCommitFiberRoot(cy,t)}catch{}i=!0}return i}finally{vn=n,So.transition=e}}return!1}function HT(t,e,n){e=cd(n,e),e=d3(t,e,1),t=tl(t,e,1),e=hr(),t!==null&&(ep(t,1,e),kr(t,e))}function Zn(t,e,n){if(t.tag===3)HT(t,t,n);else for(;e!==null;){if(e.tag===3){HT(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(nl===null||!nl.has(i))){t=cd(n,t),t=h3(e,t,1),e=tl(e,t,1),t=hr(),e!==null&&(ep(e,1,t),kr(e,t));break}}e=e.return}}function p6(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=hr(),t.pingedLanes|=t.suspendedLanes&n,Ri===t&&(Li&n)===n&&(wi===4||wi===3&&(Li&130023424)===Li&&500>ti()-iM?sc(t,0):nM|=n),kr(t,e)}function D3(t,e){e===0&&(t.mode&1?(e=Rm,Rm<<=1,!(Rm&130023424)&&(Rm=4194304)):e=1);var n=hr();t=oa(t,e),t!==null&&(ep(t,e,n),kr(t,n))}function m6(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),D3(t,n)}function g6(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(ke(314))}i!==null&&i.delete(e),D3(t,n)}var k3;k3=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Rr.current)Ir=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ir=!1,i6(t,e,n);Ir=!!(t.flags&131072)}else Ir=!1,Un&&e.flags&1048576&&zk(e,zv,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;uv(t,e),t=e.pendingProps;var r=od(e,er.current);Qu(e,n),r=ZS(null,e,i,t,r,n);var o=KS();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Dr(i)?(o=!0,Nv(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,GS(e),r.updater=my,e.stateNode=r,r._reactInternals=e,sb(e,i,t,n),e=cb(null,e,i,!0,o,n)):(e.tag=0,Un&&o&&FS(e),lr(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(uv(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=y6(i),t=Uo(i,t),r){case 0:e=lb(null,e,i,t,n);break e;case 1:e=RT(null,e,i,t,n);break e;case 11:e=IT(null,e,i,t,n);break e;case 14:e=PT(null,e,i,Uo(i.type,t),n);break e}throw Error(ke(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Uo(i,r),lb(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Uo(i,r),RT(t,e,i,r,n);case 3:e:{if(g3(e),t===null)throw Error(ke(387));i=e.pendingProps,o=e.memoizedState,r=o.element,Bk(t,e),Uv(e,i,null,n);var s=e.memoizedState;if(i=s.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=cd(Error(ke(423)),e),e=DT(t,e,i,n,r);break e}else if(i!==r){r=cd(Error(ke(424)),e),e=DT(t,e,i,n,r);break e}else for(Xr=el(e.stateNode.containerInfo.firstChild),Kr=e,Un=!0,Vo=null,n=Wk(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(sd(),i===r){e=sa(t,e,n);break e}lr(t,e,i,n)}e=e.child}return e;case 5:return Gk(e),t===null&&ib(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,s=r.children,Q_(i,r)?s=null:o!==null&&Q_(i,o)&&(e.flags|=32),m3(t,e),lr(t,e,s,n),e.child;case 6:return t===null&&ib(e),null;case 13:return v3(t,e,n);case 4:return jS(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=ad(e,null,i,n):lr(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Uo(i,r),IT(t,e,i,r,n);case 7:return lr(t,e,e.pendingProps,n),e.child;case 8:return lr(t,e,e.pendingProps.children,n),e.child;case 12:return lr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,s=r.value,Cn(Ov,i._currentValue),i._currentValue=s,o!==null)if(Zo(o.value,s)){if(o.children===r.children&&!Rr.current){e=sa(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(o.tag===1){l=ta(-1,n&-n),l.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),rb(o.return,n,e),a.lanes|=n;break}l=l.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(ke(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),rb(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}lr(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Qu(e,n),r=Co(r),i=i(r),e.flags|=1,lr(t,e,i,n),e.child;case 14:return i=e.type,r=Uo(i,e.pendingProps),r=Uo(i.type,r),PT(t,e,i,r,n);case 15:return f3(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Uo(i,r),uv(t,e),e.tag=1,Dr(i)?(t=!0,Nv(e)):t=!1,Qu(e,n),Vk(e,i,r),sb(e,i,r,n),cb(null,e,i,!0,t,n);case 19:return y3(t,e,n);case 22:return p3(t,e,n)}throw Error(ke(156,e.tag))};function N3(t,e){return sk(t,e)}function v6(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bo(t,e,n,i){return new v6(t,e,n,i)}function aM(t){return t=t.prototype,!(!t||!t.isReactComponent)}function y6(t){if(typeof t=="function")return aM(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ES)return 11;if(t===TS)return 14}return 2}function rl(t,e){var n=t.alternate;return n===null?(n=bo(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function fv(t,e,n,i,r,o){var s=2;if(i=t,typeof t=="function")aM(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Iu:return ac(n.children,r,o,e);case CS:s=8,r|=8;break;case P_:return t=bo(12,n,e,r|2),t.elementType=P_,t.lanes=o,t;case R_:return t=bo(13,n,e,r),t.elementType=R_,t.lanes=o,t;case D_:return t=bo(19,n,e,r),t.elementType=D_,t.lanes=o,t;case $D:return xy(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case HD:s=10;break e;case VD:s=9;break e;case ES:s=11;break e;case TS:s=14;break e;case za:s=16,i=null;break e}throw Error(ke(130,t==null?t:typeof t,""))}return e=bo(s,n,e,r),e.elementType=t,e.type=i,e.lanes=o,e}function ac(t,e,n,i){return t=bo(7,t,i,e),t.lanes=n,t}function xy(t,e,n,i){return t=bo(22,t,i,e),t.elementType=$D,t.lanes=n,t.stateNode={isHidden:!1},t}function lw(t,e,n){return t=bo(6,t,null,e),t.lanes=n,t}function cw(t,e,n){return e=bo(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function x6(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$1(0),this.expirationTimes=$1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$1(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function lM(t,e,n,i,r,o,s,a,l){return t=new x6(t,e,n,a,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=bo(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},GS(o),t}function w6(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Au,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function L3(t){if(!t)return sl;t=t._reactInternals;e:{if(Ic(t)!==t||t.tag!==1)throw Error(ke(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Dr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ke(171))}if(t.tag===1){var n=t.type;if(Dr(n))return Nk(t,n,e)}return e}function z3(t,e,n,i,r,o,s,a,l){return t=lM(n,i,!0,t,r,o,s,a,l),t.context=L3(null),n=t.current,i=hr(),r=il(n),o=ta(i,r),o.callback=e??null,tl(n,o,r),t.current.lanes=r,ep(t,r,i),kr(t,i),t}function wy(t,e,n,i){var r=e.current,o=hr(),s=il(r);return n=L3(n),e.context===null?e.context=n:e.pendingContext=n,e=ta(o,s),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=tl(r,e,s),t!==null&&(jo(t,r,s,o),av(t,r,s)),s}function qv(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function VT(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function cM(t,e){VT(t,e),(t=t.alternate)&&VT(t,e)}function _6(){return null}var O3=typeof reportError=="function"?reportError:function(t){console.error(t)};function uM(t){this._internalRoot=t}_y.prototype.render=uM.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ke(409));wy(t,e,null,null)};_y.prototype.unmount=uM.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;yc(function(){wy(null,t,null,null)}),e[ra]=null}};function _y(t){this._internalRoot=t}_y.prototype.unstable_scheduleHydration=function(t){if(t){var e=fk();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ua.length&&e!==0&&e<Ua[n].priority;n++);Ua.splice(n,0,t),n===0&&mk(t)}};function dM(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function by(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function $T(){}function b6(t,e,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var c=qv(s);o.call(c)}}var s=z3(e,i,t,0,null,!1,!1,"",$T);return t._reactRootContainer=s,t[ra]=s.current,yf(t.nodeType===8?t.parentNode:t),yc(),s}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=qv(l);a.call(c)}}var l=lM(t,0,!1,null,null,!1,!1,"",$T);return t._reactRootContainer=l,t[ra]=l.current,yf(t.nodeType===8?t.parentNode:t),yc(function(){wy(e,l,n,i)}),l}function Sy(t,e,n,i,r){var o=n._reactRootContainer;if(o){var s=o;if(typeof r=="function"){var a=r;r=function(){var l=qv(s);a.call(l)}}wy(e,s,t,r)}else s=b6(n,e,t,r,i);return qv(s)}dk=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=zh(e.pendingLanes);n!==0&&(PS(e,n|1),kr(e,ti()),!(nn&6)&&(ud=ti()+500,pl()))}break;case 13:yc(function(){var i=oa(t,1);if(i!==null){var r=hr();jo(i,t,1,r)}}),cM(t,1)}};RS=function(t){if(t.tag===13){var e=oa(t,134217728);if(e!==null){var n=hr();jo(e,t,134217728,n)}cM(t,134217728)}};hk=function(t){if(t.tag===13){var e=il(t),n=oa(t,e);if(n!==null){var i=hr();jo(n,t,e,i)}cM(t,e)}};fk=function(){return vn};pk=function(t,e){var n=vn;try{return vn=t,e()}finally{vn=n}};V_=function(t,e,n){switch(e){case"input":if(L_(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=fy(i);if(!r)throw Error(ke(90));GD(i),L_(i,r)}}}break;case"textarea":qD(t,n);break;case"select":e=n.value,e!=null&&Xu(t,!!n.multiple,e,!1)}};ek=rM;tk=yc;var S6={usingClientEntryPoint:!1,Events:[np,ku,fy,QD,JD,rM]},mh={findFiberByHostInstance:Jl,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},M6={bundleType:mh.bundleType,version:mh.version,rendererPackageName:mh.rendererPackageName,rendererConfig:mh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:da.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=rk(t),t===null?null:t.stateNode},findFiberByHostInstance:mh.findFiberByHostInstance||_6,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vm.isDisabled&&Vm.supportsFiber)try{cy=Vm.inject(M6),vs=Vm}catch{}}io.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=S6;io.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!dM(e))throw Error(ke(200));return w6(t,e,null,n)};io.createRoot=function(t,e){if(!dM(t))throw Error(ke(299));var n=!1,i="",r=O3;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=lM(t,1,!1,null,null,n,!1,i,r),t[ra]=e.current,yf(t.nodeType===8?t.parentNode:t),new uM(e)};io.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ke(188)):(t=Object.keys(t).join(","),Error(ke(268,t)));return t=rk(e),t=t===null?null:t.stateNode,t};io.flushSync=function(t){return yc(t)};io.hydrate=function(t,e,n){if(!by(e))throw Error(ke(200));return Sy(null,t,e,!0,n)};io.hydrateRoot=function(t,e,n){if(!dM(t))throw Error(ke(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",s=O3;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=z3(e,null,t,1,n??null,r,!1,o,s),t[ra]=e.current,yf(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new _y(e)};io.render=function(t,e,n){if(!by(e))throw Error(ke(200));return Sy(null,t,e,!1,n)};io.unmountComponentAtNode=function(t){if(!by(t))throw Error(ke(40));return t._reactRootContainer?(yc(function(){Sy(null,null,t,!1,function(){t._reactRootContainer=null,t[ra]=null})}),!0):!1};io.unstable_batchedUpdates=rM;io.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!by(n))throw Error(ke(200));if(t==null||t._reactInternals===void 0)throw Error(ke(38));return Sy(t,e,n,!1,i)};io.version="18.2.0-next-9e3b772b8-20220608";function F3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(F3)}catch(t){console.error(t)}}F3(),zD.exports=io;var U3=zD.exports,B3,WT=U3;B3=WT.createRoot,WT.hydrateRoot;var Yn={},hM={},rp={},op={},H3="Expected a function",GT=NaN,C6="[object Symbol]",E6=/^\s+|\s+$/g,T6=/^[-+]0x[0-9a-f]+$/i,A6=/^0b[01]+$/i,I6=/^0o[0-7]+$/i,P6=parseInt,R6=typeof Cm=="object"&&Cm&&Cm.Object===Object&&Cm,D6=typeof self=="object"&&self&&self.Object===Object&&self,k6=R6||D6||Function("return this")(),N6=Object.prototype,L6=N6.toString,z6=Math.max,O6=Math.min,uw=function(){return k6.Date.now()};function F6(t,e,n){var i,r,o,s,a,l,c=0,u=!1,d=!1,f=!0;if(typeof t!="function")throw new TypeError(H3);e=jT(e)||0,Xv(n)&&(u=!!n.leading,d="maxWait"in n,o=d?z6(jT(n.maxWait)||0,e):o,f="trailing"in n?!!n.trailing:f);function m(T){var P=i,D=r;return i=r=void 0,c=T,s=t.apply(D,P),s}function g(T){return c=T,a=setTimeout(v,e),u?m(T):s}function y(T){var P=T-l,D=T-c,A=e-P;return d?O6(A,o-D):A}function x(T){var P=T-l,D=T-c;return l===void 0||P>=e||P<0||d&&D>=o}function v(){var T=uw();if(x(T))return w(T);a=setTimeout(v,y(T))}function w(T){return a=void 0,f&&i?m(T):(i=r=void 0,s)}function _(){a!==void 0&&clearTimeout(a),c=0,i=l=r=a=void 0}function S(){return a===void 0?s:w(uw())}function E(){var T=uw(),P=x(T);if(i=arguments,r=this,l=T,P){if(a===void 0)return g(l);if(d)return a=setTimeout(v,e),m(l)}return a===void 0&&(a=setTimeout(v,e)),s}return E.cancel=_,E.flush=S,E}function U6(t,e,n){var i=!0,r=!0;if(typeof t!="function")throw new TypeError(H3);return Xv(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),F6(t,e,{leading:i,maxWait:e,trailing:r})}function Xv(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function B6(t){return!!t&&typeof t=="object"}function H6(t){return typeof t=="symbol"||B6(t)&&L6.call(t)==C6}function jT(t){if(typeof t=="number")return t;if(H6(t))return GT;if(Xv(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Xv(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(E6,"");var n=A6.test(t);return n||I6.test(t)?P6(t.slice(2),n?2:8):T6.test(t)?GT:+t}var V6=U6,sp={};Object.defineProperty(sp,"__esModule",{value:!0});sp.addPassiveEventListener=function(e,n,i){var r=i.name;r||(r=n,console.warn("Listener must be a named function.")),pv.has(n)||pv.set(n,new Set);var o=pv.get(n);if(!o.has(r)){var s=function(){var a=!1;try{var l=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("test",null,l)}catch{}return a}();e.addEventListener(n,i,s?{passive:!0}:!1),o.add(r)}};sp.removePassiveEventListener=function(e,n,i){e.removeEventListener(n,i),pv.get(n).delete(i.name||n)};var pv=new Map;Object.defineProperty(op,"__esModule",{value:!0});var $6=V6,W6=j6($6),G6=sp;function j6(t){return t&&t.__esModule?t:{default:t}}var q6=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:66;return(0,W6.default)(e,n)},Hn={spyCallbacks:[],spySetState:[],scrollSpyContainers:[],mount:function(e,n){if(e){var i=q6(function(r){Hn.scrollHandler(e)},n);Hn.scrollSpyContainers.push(e),(0,G6.addPassiveEventListener)(e,"scroll",i)}},isMounted:function(e){return Hn.scrollSpyContainers.indexOf(e)!==-1},currentPositionX:function(e){if(e===document){var n=window.pageYOffset!==void 0,i=(document.compatMode||"")==="CSS1Compat";return n?window.pageXOffset:i?document.documentElement.scrollLeft:document.body.scrollLeft}else return e.scrollLeft},currentPositionY:function(e){if(e===document){var n=window.pageXOffset!==void 0,i=(document.compatMode||"")==="CSS1Compat";return n?window.pageYOffset:i?document.documentElement.scrollTop:document.body.scrollTop}else return e.scrollTop},scrollHandler:function(e){var n=Hn.scrollSpyContainers[Hn.scrollSpyContainers.indexOf(e)].spyCallbacks||[];n.forEach(function(i){return i(Hn.currentPositionX(e),Hn.currentPositionY(e))})},addStateHandler:function(e){Hn.spySetState.push(e)},addSpyHandler:function(e,n){var i=Hn.scrollSpyContainers[Hn.scrollSpyContainers.indexOf(n)];i.spyCallbacks||(i.spyCallbacks=[]),i.spyCallbacks.push(e),e(Hn.currentPositionX(n),Hn.currentPositionY(n))},updateStates:function(){Hn.spySetState.forEach(function(e){return e()})},unmount:function(e,n){Hn.scrollSpyContainers.forEach(function(i){return i.spyCallbacks&&i.spyCallbacks.length&&i.spyCallbacks.indexOf(n)>-1&&i.spyCallbacks.splice(i.spyCallbacks.indexOf(n),1)}),Hn.spySetState&&Hn.spySetState.length&&Hn.spySetState.indexOf(e)>-1&&Hn.spySetState.splice(Hn.spySetState.indexOf(e),1),document.removeEventListener("scroll",Hn.scrollHandler)},update:function(){return Hn.scrollSpyContainers.forEach(function(e){return Hn.scrollHandler(e)})}};op.default=Hn;var Ad={},ap={};Object.defineProperty(ap,"__esModule",{value:!0});var X6=function(e,n){var i=e.indexOf("#")===0?e.substring(1):e,r=i?"#"+i:"",o=window&&window.location,s=r?o.pathname+o.search+r:o.pathname+o.search;n?history.pushState(history.state,"",s):history.replaceState(history.state,"",s)},Y6=function(){return window.location.hash.replace(/^#/,"")},Z6=function(e){return function(n){return e.contains?e!=n&&e.contains(n):!!(e.compareDocumentPosition(n)&16)}},K6=function(e){return getComputedStyle(e).position!=="static"},dw=function(e,n){for(var i=e.offsetTop,r=e.offsetParent;r&&!n(r);)i+=r.offsetTop,r=r.offsetParent;return{offsetTop:i,offsetParent:r}},Q6=function(e,n,i){if(i)return e===document?n.getBoundingClientRect().left+(window.scrollX||window.pageXOffset):getComputedStyle(e).position!=="static"?n.offsetLeft:n.offsetLeft-e.offsetLeft;if(e===document)return n.getBoundingClientRect().top+(window.scrollY||window.pageYOffset);if(K6(e)){if(n.offsetParent!==e){var r=function(u){return u===e||u===document},o=dw(n,r),s=o.offsetTop,a=o.offsetParent;if(a!==e)throw new Error("Seems containerElement is not an ancestor of the Element");return s}return n.offsetTop}if(n.offsetParent===e.offsetParent)return n.offsetTop-e.offsetTop;var l=function(u){return u===document};return dw(n,l).offsetTop-dw(e,l).offsetTop};ap.default={updateHash:X6,getHash:Y6,filterElementInContainer:Z6,scrollOffset:Q6};var My={},fM={};Object.defineProperty(fM,"__esModule",{value:!0});fM.default={defaultEasing:function(e){return e<.5?Math.pow(e*2,2)/2:1-Math.pow((1-e)*2,2)/2},linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:-1+(4-2*e)*e},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}};var pM={};Object.defineProperty(pM,"__esModule",{value:!0});var J6=sp,eV=["mousedown","mousewheel","touchmove","keydown"];pM.default={subscribe:function(e){return typeof document<"u"&&eV.forEach(function(n){return(0,J6.addPassiveEventListener)(document,n,e)})}};var lp={};Object.defineProperty(lp,"__esModule",{value:!0});var _b={registered:{},scrollEvent:{register:function(e,n){_b.registered[e]=n},remove:function(e){_b.registered[e]=null}}};lp.default=_b;Object.defineProperty(My,"__esModule",{value:!0});var tV=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},nV=ap;Cy(nV);var iV=fM,qT=Cy(iV),rV=pM,oV=Cy(rV),sV=lp,us=Cy(sV);function Cy(t){return t&&t.__esModule?t:{default:t}}var V3=function(e){return qT.default[e.smooth]||qT.default.defaultEasing},aV=function(e){return typeof e=="function"?e:function(){return e}},lV=function(){if(typeof window<"u")return window.requestAnimationFrame||window.webkitRequestAnimationFrame},bb=function(){return lV()||function(t,e,n){window.setTimeout(t,n||1e3/60,new Date().getTime())}}(),$3=function(){return{currentPosition:0,startPosition:0,targetPosition:0,progress:0,duration:0,cancel:!1,target:null,containerElement:null,to:null,start:null,delta:null,percent:null,delayTimeout:null}},W3=function(e){var n=e.data.containerElement;if(n&&n!==document&&n!==document.body)return n.scrollLeft;var i=window.pageXOffset!==void 0,r=(document.compatMode||"")==="CSS1Compat";return i?window.pageXOffset:r?document.documentElement.scrollLeft:document.body.scrollLeft},G3=function(e){var n=e.data.containerElement;if(n&&n!==document&&n!==document.body)return n.scrollTop;var i=window.pageXOffset!==void 0,r=(document.compatMode||"")==="CSS1Compat";return i?window.pageYOffset:r?document.documentElement.scrollTop:document.body.scrollTop},cV=function(e){var n=e.data.containerElement;if(n&&n!==document&&n!==document.body)return n.scrollWidth-n.offsetWidth;var i=document.body,r=document.documentElement;return Math.max(i.scrollWidth,i.offsetWidth,r.clientWidth,r.scrollWidth,r.offsetWidth)},uV=function(e){var n=e.data.containerElement;if(n&&n!==document&&n!==document.body)return n.scrollHeight-n.offsetHeight;var i=document.body,r=document.documentElement;return Math.max(i.scrollHeight,i.offsetHeight,r.clientHeight,r.scrollHeight,r.offsetHeight)},dV=function t(e,n,i){var r=n.data;if(!n.ignoreCancelEvents&&r.cancel){us.default.registered.end&&us.default.registered.end(r.to,r.target,r.currentPositionY);return}if(r.delta=Math.round(r.targetPosition-r.startPosition),r.start===null&&(r.start=i),r.progress=i-r.start,r.percent=r.progress>=r.duration?1:e(r.progress/r.duration),r.currentPosition=r.startPosition+Math.ceil(r.delta*r.percent),r.containerElement&&r.containerElement!==document&&r.containerElement!==document.body?n.horizontal?r.containerElement.scrollLeft=r.currentPosition:r.containerElement.scrollTop=r.currentPosition:n.horizontal?window.scrollTo(r.currentPosition,0):window.scrollTo(0,r.currentPosition),r.percent<1){var o=t.bind(null,e,n);bb.call(window,o);return}us.default.registered.end&&us.default.registered.end(r.to,r.target,r.currentPosition)},mM=function(e){e.data.containerElement=e?e.containerId?document.getElementById(e.containerId):e.container&&e.container.nodeType?e.container:document:null},cp=function(e,n,i,r){n.data=n.data||$3(),window.clearTimeout(n.data.delayTimeout);var o=function(){n.data.cancel=!0};if(oV.default.subscribe(o),mM(n),n.data.start=null,n.data.cancel=!1,n.data.startPosition=n.horizontal?W3(n):G3(n),n.data.targetPosition=n.absolute?e:e+n.data.startPosition,n.data.startPosition===n.data.targetPosition){us.default.registered.end&&us.default.registered.end(n.data.to,n.data.target,n.data.currentPosition);return}n.data.delta=Math.round(n.data.targetPosition-n.data.startPosition),n.data.duration=aV(n.duration)(n.data.delta),n.data.duration=isNaN(parseFloat(n.data.duration))?1e3:parseFloat(n.data.duration),n.data.to=i,n.data.target=r;var s=V3(n),a=dV.bind(null,s,n);if(n&&n.delay>0){n.data.delayTimeout=window.setTimeout(function(){us.default.registered.begin&&us.default.registered.begin(n.data.to,n.data.target),bb.call(window,a)},n.delay);return}us.default.registered.begin&&us.default.registered.begin(n.data.to,n.data.target),bb.call(window,a)},Ey=function(e){return e=tV({},e),e.data=e.data||$3(),e.absolute=!0,e},hV=function(e){cp(0,Ey(e))},fV=function(e,n){cp(e,Ey(n))},pV=function(e){e=Ey(e),mM(e),cp(e.horizontal?cV(e):uV(e),e)},mV=function(e,n){n=Ey(n),mM(n);var i=n.horizontal?W3(n):G3(n);cp(e+i,n)};My.default={animateTopScroll:cp,getAnimationType:V3,scrollToTop:hV,scrollToBottom:pV,scrollTo:fV,scrollMore:mV};Object.defineProperty(Ad,"__esModule",{value:!0});var gV=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},vV=ap,yV=gM(vV),xV=My,wV=gM(xV),_V=lp,$m=gM(_V);function gM(t){return t&&t.__esModule?t:{default:t}}var Wm={},XT=void 0;Ad.default={unmount:function(){Wm={}},register:function(e,n){Wm[e]=n},unregister:function(e){delete Wm[e]},get:function(e){return Wm[e]||document.getElementById(e)||document.getElementsByName(e)[0]||document.getElementsByClassName(e)[0]},setActiveLink:function(e){return XT=e},getActiveLink:function(){return XT},scrollTo:function(e,n){var i=this.get(e);if(!i){console.warn("target Element not found");return}n=gV({},n,{absolute:!1});var r=n.containerId,o=n.container,s=void 0;r?s=document.getElementById(r):o&&o.nodeType?s=o:s=document,n.absolute=!0;var a=n.horizontal,l=yV.default.scrollOffset(s,i,a)+(n.offset||0);if(!n.smooth){$m.default.registered.begin&&$m.default.registered.begin(e,i),s===document?n.horizontal?window.scrollTo(l,0):window.scrollTo(0,l):s.scrollTop=l,$m.default.registered.end&&$m.default.registered.end(e,i);return}wV.default.animateTopScroll(l,n,e,i)}};var j3={exports:{}},bV="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",SV=bV,MV=SV;function q3(){}function X3(){}X3.resetWarningCache=q3;var CV=function(){function t(i,r,o,s,a,l){if(l!==MV){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:X3,resetWarningCache:q3};return n.PropTypes=n,n};j3.exports=CV();var up=j3.exports;const Ga=vS(up);var Ty={};Object.defineProperty(Ty,"__esModule",{value:!0});var EV=ap,hw=TV(EV);function TV(t){return t&&t.__esModule?t:{default:t}}var AV={mountFlag:!1,initialized:!1,scroller:null,containers:{},mount:function(e){this.scroller=e,this.handleHashChange=this.handleHashChange.bind(this),window.addEventListener("hashchange",this.handleHashChange),this.initStateFromHash(),this.mountFlag=!0},mapContainer:function(e,n){this.containers[e]=n},isMounted:function(){return this.mountFlag},isInitialized:function(){return this.initialized},initStateFromHash:function(){var e=this,n=this.getHash();n?window.setTimeout(function(){e.scrollTo(n,!0),e.initialized=!0},10):this.initialized=!0},scrollTo:function(e,n){var i=this.scroller,r=i.get(e);if(r&&(n||e!==i.getActiveLink())){var o=this.containers[e]||document;i.scrollTo(e,{container:o})}},getHash:function(){return hw.default.getHash()},changeHash:function(e,n){this.isInitialized()&&hw.default.getHash()!==e&&hw.default.updateHash(e,n)},handleHashChange:function(){this.scrollTo(this.getHash())},unmount:function(){this.scroller=null,this.containers=null,window.removeEventListener("hashchange",this.handleHashChange)}};Ty.default=AV;Object.defineProperty(rp,"__esModule",{value:!0});var Gm=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},IV=function(){function t(e,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),PV=Pe,YT=dp(PV),RV=op,jm=dp(RV),DV=Ad,kV=dp(DV),NV=up,On=dp(NV),LV=Ty,Ma=dp(LV);function dp(t){return t&&t.__esModule?t:{default:t}}function zV(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function OV(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function FV(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var ZT={to:On.default.string.isRequired,containerId:On.default.string,container:On.default.object,activeClass:On.default.string,activeStyle:On.default.object,spy:On.default.bool,horizontal:On.default.bool,smooth:On.default.oneOfType([On.default.bool,On.default.string]),offset:On.default.number,delay:On.default.number,isDynamic:On.default.bool,onClick:On.default.func,duration:On.default.oneOfType([On.default.number,On.default.func]),absolute:On.default.bool,onSetActive:On.default.func,onSetInactive:On.default.func,ignoreCancelEvents:On.default.bool,hashSpy:On.default.bool,saveHashHistory:On.default.bool,spyThrottle:On.default.number};rp.default=function(t,e){var n=e||kV.default,i=function(o){FV(s,o);function s(a){zV(this,s);var l=OV(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,a));return r.call(l),l.state={active:!1},l}return IV(s,[{key:"getScrollSpyContainer",value:function(){var l=this.props.containerId,c=this.props.container;return l&&!c?document.getElementById(l):c&&c.nodeType?c:document}},{key:"componentDidMount",value:function(){if(this.props.spy||this.props.hashSpy){var l=this.getScrollSpyContainer();jm.default.isMounted(l)||jm.default.mount(l,this.props.spyThrottle),this.props.hashSpy&&(Ma.default.isMounted()||Ma.default.mount(n),Ma.default.mapContainer(this.props.to,l)),jm.default.addSpyHandler(this.spyHandler,l),this.setState({container:l})}}},{key:"componentWillUnmount",value:function(){jm.default.unmount(this.stateHandler,this.spyHandler)}},{key:"render",value:function(){var l="";this.state&&this.state.active?l=((this.props.className||"")+" "+(this.props.activeClass||"active")).trim():l=this.props.className;var c={};this.state&&this.state.active?c=Gm({},this.props.style,this.props.activeStyle):c=Gm({},this.props.style);var u=Gm({},this.props);for(var d in ZT)u.hasOwnProperty(d)&&delete u[d];return u.className=l,u.style=c,u.onClick=this.handleClick,YT.default.createElement(t,u)}}]),s}(YT.default.PureComponent),r=function(){var s=this;this.scrollTo=function(a,l){n.scrollTo(a,Gm({},s.state,l))},this.handleClick=function(a){s.props.onClick&&s.props.onClick(a),a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault(),s.scrollTo(s.props.to,s.props)},this.spyHandler=function(a,l){var c=s.getScrollSpyContainer();if(!(Ma.default.isMounted()&&!Ma.default.isInitialized())){var u=s.props.horizontal,d=s.props.to,f=null,m=void 0,g=void 0;if(u){var y=0,x=0,v=0;if(c.getBoundingClientRect){var w=c.getBoundingClientRect();v=w.left}if(!f||s.props.isDynamic){if(f=n.get(d),!f)return;var _=f.getBoundingClientRect();y=_.left-v+a,x=y+_.width}var S=a-s.props.offset;m=S>=Math.floor(y)&&S<Math.floor(x),g=S<Math.floor(y)||S>=Math.floor(x)}else{var E=0,T=0,P=0;if(c.getBoundingClientRect){var D=c.getBoundingClientRect();P=D.top}if(!f||s.props.isDynamic){if(f=n.get(d),!f)return;var A=f.getBoundingClientRect();E=A.top-P+l,T=E+A.height}var R=l-s.props.offset;m=R>=Math.floor(E)&&R<Math.floor(T),g=R<Math.floor(E)||R>=Math.floor(T)}var N=n.getActiveLink();if(g){if(d===N&&n.setActiveLink(void 0),s.props.hashSpy&&Ma.default.getHash()===d){var O=s.props.saveHashHistory,H=O===void 0?!1:O;Ma.default.changeHash("",H)}s.props.spy&&s.state.active&&(s.setState({active:!1}),s.props.onSetInactive&&s.props.onSetInactive(d,f))}if(m&&(N!==d||s.state.active===!1)){n.setActiveLink(d);var q=s.props.saveHashHistory,Z=q===void 0?!1:q;s.props.hashSpy&&Ma.default.changeHash(d,Z),s.props.spy&&(s.setState({active:!0}),s.props.onSetActive&&s.props.onSetActive(d,f))}}}};return i.propTypes=ZT,i.defaultProps={offset:0},i};Object.defineProperty(hM,"__esModule",{value:!0});var UV=Pe,KT=Y3(UV),BV=rp,HV=Y3(BV);function Y3(t){return t&&t.__esModule?t:{default:t}}function VV(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function QT(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function $V(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var WV=function(t){$V(e,t);function e(){var n,i,r,o;VV(this,e);for(var s=arguments.length,a=Array(s),l=0;l<s;l++)a[l]=arguments[l];return o=(i=(r=QT(this,(n=e.__proto__||Object.getPrototypeOf(e)).call.apply(n,[this].concat(a))),r),r.render=function(){return KT.default.createElement("a",r.props,r.props.children)},i),QT(r,o)}return e}(KT.default.Component);hM.default=(0,HV.default)(WV);var vM={};Object.defineProperty(vM,"__esModule",{value:!0});var GV=function(){function t(e,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),jV=Pe,JT=Z3(jV),qV=rp,XV=Z3(qV);function Z3(t){return t&&t.__esModule?t:{default:t}}function YV(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ZV(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function KV(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var QV=function(t){KV(e,t);function e(){return YV(this,e),ZV(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return GV(e,[{key:"render",value:function(){return JT.default.createElement("button",this.props,this.props.children)}}]),e}(JT.default.Component);vM.default=(0,XV.default)(QV);var yM={},Ay={};Object.defineProperty(Ay,"__esModule",{value:!0});var JV=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},e$=function(){function t(e,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),t$=Pe,eA=Iy(t$),n$=U3;Iy(n$);var i$=Ad,tA=Iy(i$),r$=up,nA=Iy(r$);function Iy(t){return t&&t.__esModule?t:{default:t}}function o$(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s$(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function a$(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Ay.default=function(t){var e=function(n){a$(i,n);function i(r){o$(this,i);var o=s$(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,r));return o.childBindings={domNode:null},o}return e$(i,[{key:"componentDidMount",value:function(){if(typeof window>"u")return!1;this.registerElems(this.props.name)}},{key:"componentDidUpdate",value:function(o){this.props.name!==o.name&&this.registerElems(this.props.name)}},{key:"componentWillUnmount",value:function(){if(typeof window>"u")return!1;tA.default.unregister(this.props.name)}},{key:"registerElems",value:function(o){tA.default.register(o,this.childBindings.domNode)}},{key:"render",value:function(){return eA.default.createElement(t,JV({},this.props,{parentBindings:this.childBindings}))}}]),i}(eA.default.Component);return e.propTypes={name:nA.default.string,id:nA.default.string},e};Object.defineProperty(yM,"__esModule",{value:!0});var iA=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},l$=function(){function t(e,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),c$=Pe,rA=xM(c$),u$=Ay,d$=xM(u$),h$=up,oA=xM(h$);function xM(t){return t&&t.__esModule?t:{default:t}}function f$(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p$(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function m$(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var K3=function(t){m$(e,t);function e(){return f$(this,e),p$(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return l$(e,[{key:"render",value:function(){var i=this,r=iA({},this.props);return delete r.name,r.parentBindings&&delete r.parentBindings,rA.default.createElement("div",iA({},r,{ref:function(s){i.props.parentBindings.domNode=s}}),this.props.children)}}]),e}(rA.default.Component);K3.propTypes={name:oA.default.string,id:oA.default.string};yM.default=(0,d$.default)(K3);var fw=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},sA=function(){function t(e,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function aA(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lA(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function cA(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var qm=Pe,Il=op,pw=Ad,Vn=up,Ca=Ty,uA={to:Vn.string.isRequired,containerId:Vn.string,container:Vn.object,activeClass:Vn.string,spy:Vn.bool,smooth:Vn.oneOfType([Vn.bool,Vn.string]),offset:Vn.number,delay:Vn.number,isDynamic:Vn.bool,onClick:Vn.func,duration:Vn.oneOfType([Vn.number,Vn.func]),absolute:Vn.bool,onSetActive:Vn.func,onSetInactive:Vn.func,ignoreCancelEvents:Vn.bool,hashSpy:Vn.bool,spyThrottle:Vn.number},g$={Scroll:function(e,n){console.warn("Helpers.Scroll is deprecated since v1.7.0");var i=n||pw,r=function(s){cA(a,s);function a(l){aA(this,a);var c=lA(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,l));return o.call(c),c.state={active:!1},c}return sA(a,[{key:"getScrollSpyContainer",value:function(){var c=this.props.containerId,u=this.props.container;return c?document.getElementById(c):u&&u.nodeType?u:document}},{key:"componentDidMount",value:function(){if(this.props.spy||this.props.hashSpy){var c=this.getScrollSpyContainer();Il.isMounted(c)||Il.mount(c,this.props.spyThrottle),this.props.hashSpy&&(Ca.isMounted()||Ca.mount(i),Ca.mapContainer(this.props.to,c)),this.props.spy&&Il.addStateHandler(this.stateHandler),Il.addSpyHandler(this.spyHandler,c),this.setState({container:c})}}},{key:"componentWillUnmount",value:function(){Il.unmount(this.stateHandler,this.spyHandler)}},{key:"render",value:function(){var c="";this.state&&this.state.active?c=((this.props.className||"")+" "+(this.props.activeClass||"active")).trim():c=this.props.className;var u=fw({},this.props);for(var d in uA)u.hasOwnProperty(d)&&delete u[d];return u.className=c,u.onClick=this.handleClick,qm.createElement(e,u)}}]),a}(qm.Component),o=function(){var a=this;this.scrollTo=function(l,c){i.scrollTo(l,fw({},a.state,c))},this.handleClick=function(l){a.props.onClick&&a.props.onClick(l),l.stopPropagation&&l.stopPropagation(),l.preventDefault&&l.preventDefault(),a.scrollTo(a.props.to,a.props)},this.stateHandler=function(){i.getActiveLink()!==a.props.to&&(a.state!==null&&a.state.active&&a.props.onSetInactive&&a.props.onSetInactive(),a.setState({active:!1}))},this.spyHandler=function(l){var c=a.getScrollSpyContainer();if(!(Ca.isMounted()&&!Ca.isInitialized())){var u=a.props.to,d=null,f=0,m=0,g=0;if(c.getBoundingClientRect){var y=c.getBoundingClientRect();g=y.top}if(!d||a.props.isDynamic){if(d=i.get(u),!d)return;var x=d.getBoundingClientRect();f=x.top-g+l,m=f+x.height}var v=l-a.props.offset,w=v>=Math.floor(f)&&v<Math.floor(m),_=v<Math.floor(f)||v>=Math.floor(m),S=i.getActiveLink();if(_)return u===S&&i.setActiveLink(void 0),a.props.hashSpy&&Ca.getHash()===u&&Ca.changeHash(),a.props.spy&&a.state.active&&(a.setState({active:!1}),a.props.onSetInactive&&a.props.onSetInactive()),Il.updateStates();if(w&&S!==u)return i.setActiveLink(u),a.props.hashSpy&&Ca.changeHash(u),a.props.spy&&(a.setState({active:!0}),a.props.onSetActive&&a.props.onSetActive(u)),Il.updateStates()}}};return r.propTypes=uA,r.defaultProps={offset:0},r},Element:function(e){console.warn("Helpers.Element is deprecated since v1.7.0");var n=function(i){cA(r,i);function r(o){aA(this,r);var s=lA(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,o));return s.childBindings={domNode:null},s}return sA(r,[{key:"componentDidMount",value:function(){if(typeof window>"u")return!1;this.registerElems(this.props.name)}},{key:"componentDidUpdate",value:function(s){this.props.name!==s.name&&this.registerElems(this.props.name)}},{key:"componentWillUnmount",value:function(){if(typeof window>"u")return!1;pw.unregister(this.props.name)}},{key:"registerElems",value:function(s){pw.register(s,this.childBindings.domNode)}},{key:"render",value:function(){return qm.createElement(e,fw({},this.props,{parentBindings:this.childBindings}))}}]),r}(qm.Component);return n.propTypes={name:Vn.string,id:Vn.string},n}},v$=g$;Object.defineProperty(Yn,"__esModule",{value:!0});Yn.Helpers=Yn.ScrollElement=Yn.ScrollLink=Yn.animateScroll=Yn.scrollSpy=Yn.Events=Yn.scroller=ha=Yn.Element=Yn.Button=Tf=Yn.Link=void 0;var y$=hM,Q3=As(y$),x$=vM,J3=As(x$),w$=yM,eN=As(w$),_$=Ad,tN=As(_$),b$=lp,nN=As(b$),S$=op,iN=As(S$),M$=My,rN=As(M$),C$=rp,oN=As(C$),E$=Ay,sN=As(E$),T$=v$,aN=As(T$);function As(t){return t&&t.__esModule?t:{default:t}}var Tf=Yn.Link=Q3.default;Yn.Button=J3.default;var ha=Yn.Element=eN.default;Yn.scroller=tN.default;Yn.Events=nN.default;Yn.scrollSpy=iN.default;Yn.animateScroll=rN.default;Yn.ScrollLink=oN.default;Yn.ScrollElement=sN.default;Yn.Helpers=aN.default;Yn.default={Link:Q3.default,Button:J3.default,Element:eN.default,scroller:tN.default,Events:nN.default,scrollSpy:iN.default,animateScroll:rN.default,ScrollLink:oN.default,ScrollElement:sN.default,Helpers:aN.default};function lN(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=lN(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function yi(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=lN(t))&&(i&&(i+=" "),i+=e);return i}const A$=()=>{const[t,e]=Pe.useState(!1),[n,i]=Pe.useState(!1);Pe.useEffect(()=>{const o=()=>{e(window.scrollY>32)};return window.addEventListener("scroll",o),()=>{window.removeEventListener("scroll",o)}},[]);const r=({title:o})=>U.jsx(Tf,{onClick:()=>i(!1),to:o,offset:-100,spy:!0,smooth:!0,activeClass:"nav-active",className:"base-bold text-p4 uppercase transition-colors duration-500 cursor-pointer hover:text-p1 max-lg:my-4 max-lg:h5",children:o});return U.jsx("header",{className:yi("fixed top-0 left-0 z-50 w-full py-10 transition-all duration-500 max-lg:py-4",t&&"py-2 bg-black-100 backdrop-blur-[8px]"),children:U.jsxs("div",{className:"container flex h-14 items-center max-lg:px-5",children:[U.jsx("a",{className:"lg:hidden flex-1 cursor-pointer z-2",children:U.jsx("img",{src:"images/logo-port.png",width:115,height:55,alt:"logo"})}),U.jsx("div",{className:yi("w-full max-lg:fixed max-lg:top-0 max-lg:left-0 max-lg:w-full max-lg:bg-s2 max-lg:opacity-0",n?"max-lg:opacity-100":"max-lg:pointer-events-none"),children:U.jsxs("div",{className:"max-lg:relative max-lg:flex max-lg:flex-col max-lg:min-h-screen max-lg:p-6 max-lg:overflow-hidden sidebar-before max-md:px-4",children:[U.jsx("nav",{className:"max-lg:relative max-lg:z-2 max-lg:my-auto",children:U.jsxs("ul",{className:"relative flex items-center justify-between w-full ",children:[U.jsxs("li",{className:"nav-li",children:[U.jsx(r,{title:"About Me"}),U.jsx("div",{className:"dot"}),U.jsx(r,{title:"My Skills"}),U.jsx("div",{className:"dot"}),U.jsx(r,{title:"Experience"}),U.jsx("div",{className:"dot"}),U.jsx(r,{title:"FAQ"})]}),U.jsx("li",{className:"nav-logo",children:U.jsx(Tf,{to:"hero",offset:-250,spy:!0,smooth:!0,className:yi("max-lg:hidden transition-transform duration-500 cursor-pointer"),children:U.jsx("img",{src:"images/logo-port.png",width:200,height:95,alt:"logo"})})}),U.jsxs("li",{className:"nav-li",children:[U.jsx(r,{title:"Resume"}),U.jsx("div",{className:"dot"}),U.jsx(r,{title:"Projects"}),U.jsx("div",{className:"dot"}),U.jsx(r,{title:"Contact"})]})]})}),U.jsxs("div",{className:"lg:hidden block absolute top-1/2 left-0 w-[960px] h-[380px] translate-x-[-290px] -translate-y-1/2 rotate-90",children:[U.jsx("img",{src:"images/bg-outlines.svg",width:960,height:380,alt:"outline",className:"relative z-2"}),U.jsx("img",{src:"images/bg-outlines-fill.png",width:960,height:380,alt:"outline",className:"absolute inset-0 mix-blend-soft-light opacity-5"})]})]})}),U.jsx("button",{className:"lg:hidden z-2 size-10 border-2 border-s4/25 rounded-full flex justify-center items-center",onClick:()=>i(o=>!o),children:U.jsx("img",{src:`images/${n?"close":"magic"}.svg`,alt:"magic",className:"size-1/2 object-contain"})})]})})},cN=({fill:t})=>U.jsx("svg",{width:"8",height:"22",viewBox:"0 0 8 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:U.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.5 0H0.5V4V18V22H2.5V16.25L7.63991 11.7526C8.09524 11.3542 8.09524 10.6458 7.63991 10.2474L2.5 5.75V0Z",fill:t||"#2EF2FF"})}),Py=({icon:t,children:e,href:n,containerClassName:i,onClick:r,markerFill:o})=>{const s=()=>U.jsxs(U.Fragment,{children:[U.jsxs("span",{className:"relative flex items-center min-h-[60px] px-4 g4 rounded-2xl inner-before group-hover:before:opacity-100 overflow-hidden",children:[U.jsx("span",{className:"absolute -left-[1px]",children:U.jsx(cN,{markerFill:o})}),t&&U.jsx("img",{src:t,alt:"circle",className:"size-10 mr-5 object-contain z-10"}),U.jsx("span",{className:"relative z-2 font-poppins base-bold text-p1 uppercase",children:e})]}),U.jsx("span",{className:"glow-before glow-after"})]});return n?U.jsx("a",{className:yi("relative p-0.5 g5 rounded-2xl shadow-500 group",i),href:n,children:U.jsx(s,{})}):U.jsx("button",{className:yi("relative p-0.5 g5 rounded-2xl shadow-500 group",i),onClick:r,children:U.jsx(s,{})})},I$=()=>U.jsx("section",{className:"relative pt-40 pb-40 max-lg:pt-52 max-lg:pb-36 max-md:pt-36 max-md:pb-32 overflow-hidden",children:U.jsx(ha,{name:"hero",children:U.jsx("div",{className:"container relative z-10",children:U.jsxs("div",{className:"relative z-2 max-w-512 max-lg:max-w-388",children:[U.jsx("div",{className:"caption small-2 uppercase text-p3",children:"Portfolio Website"}),U.jsx("h1",{className:"mb-6 h1 text-p4 uppercase max-lg:mb-7 max-lg:h2 max-md:mb-4 max-md:text-5xl max-md:leading-12",children:"Shivkumar Devane"}),U.jsx("p",{className:"max-w-440 mb-10 body-1 max-md:mb-10 max-md:text-base",children:"Software Development Engineer (SDE) passionate about building scalable applications and solving complex problems. Experienced in Python, C++, React, and building efficient systems with a focus on high-performance solutions."}),U.jsx(Tf,{to:"About Me",offset:-100,spy:!0,smooth:!0,children:U.jsx(Py,{icon:"images/zap.svg",children:"Know More"})})]})})})}),P$=[{id:"0",icon:"images/feature-1.png",caption:"About Me",title:"Software Development Engineer",text:"Aspiring SDE with strong problem-solving skills and hands-on experience building scalable applications. Focused on efficient architecture and robust code. Pursuing a Computer Science minor at DTU.",button:{icon:"images/magictouch.svg",title:"View my work",to:"Experience"}},{id:"1",icon:"images/feature-2.png",caption:"Systems & Web Development",title:"Scalable Full-Stack Solutions",text:"Specialized in building robust backend systems and dynamic frontend interfaces. Experienced in Python, C++, React, and Node.js. Proficient in system design, database optimization, and cloud deployments on AWS.",button:{icon:"images/docs.svg",title:"Explore projects",to:"Projects"}}],R$=[{id:"0",icon:"images/detail-1.png",title:"System Design"},{id:"1",icon:"images/detail-2.png",title:"OOP & DSA"},{id:"2",icon:"images/detail-3.png",title:"Backend Dev"},{id:"3",icon:"images/detail-4.png",title:"Cloud & DevOps"}],mw=[{id:"0",question:"What technologies do you specialize in?",answer:"I specialize in Python, C++, and JavaScript. I have extensive experience with frameworks like React, Node.js, and FastAPI. I focus on building scalable systems with a deep understanding of core computer science principles."},{id:"1",question:"What is your approach to problem solving?",answer:"I follow a systematic approach: understanding the constraints, designing the algorithm with optimal time and space complexity, and implementing it using clean, maintainable Object-Oriented code."},{id:"2",question:"Can I see your software projects?",answer:"Definitely! My portfolio features projects like a full-stack e-commerce platform, a real-time analytics engine, and various open-source contributions focusing on system efficiency and user experience."},{id:"3",question:"What's your experience with Cloud and DevOps?",answer:"I've deployed applications using AWS (EC2, S3, Lambda) and am proficient with Docker, Git for version control, and CI/CD pipelines to ensure seamless software delivery."},{id:"4",question:"How do you ensure code quality?",answer:"I prioritize writing clean, modular code following SOLID principles. I also implement unit testing and conduct thorough code reviews to maintain high standards of reliability."},{id:"5",question:"Do you have experience with system design?",answer:"Yes, I have worked on designing both monolithic and microservices architectures, focusing on scalability, load balancing, and efficient database schema design."},{id:"6",question:"Are you open to SDE roles?",answer:"Yes, I am actively seeking SDE internships and full-time opportunities where I can contribute to building impactful software solutions and grow as an engineer."},{id:"7",question:"How can I get in touch?",answer:"The best way to reach me is via email at shivkumardevane47@gmail.com or through my LinkedIn profile linked in the footer."}],D$=[{id:"0",title:"Core Programming",priceMonthly:19,priceYearly:12,caption:"Foundation & Logic",features:["Python, C++, SQL","Data Structures & Algorithms","Object-Oriented Programming"],icon:"images/circle.svg",logo:"images/plan-1.png"},{id:"1",title:"Systems & Cloud",priceMonthly:79,priceYearly:59,caption:"Infrastructure & Scale",features:["Linux, Bash scripting, Shell","AWS (EC2, S3), Git, Cron","REST APIs & Automation"],icon:"images/triangle.svg",logo:"images/plan-2.png"},{id:"2",title:"Statistical Modeling",priceMonthly:39,priceYearly:29,caption:"Advanced Analytics",features:["Pandas, NumPy, Scikit-learn","Regression & Classification","Data Visualization (Matplotlib)"],icon:"images/hexagon.svg",logo:"images/plan-3.png"}],k$=[{id:"0",title:"Data Engineering",priceMonthly:19,priceYearly:12,caption:"Pipelines & ETL",features:["Parquet, Columnar formats","Data validation & reconciliation","High-frequency data processing"],icon:"images/circle.svg",logo:"images/plan-1.png"},{id:"1",title:"System Design",priceMonthly:79,priceYearly:59,caption:"Architecture & Scale",features:["Scalable pipeline design","Database optimization","Performance benchmarking"],icon:"images/triangle.svg",logo:"images/plan-2.png"},{id:"2",title:"Specialized Tools",priceMonthly:39,priceYearly:29,caption:"Productivity & Analysis",features:["Jupyter Notebooks, MS Excel","Jira, Figma, GenAI","Canva (Advanced)"],icon:"images/hexagon.svg",logo:"images/plan-3.png"}],gw=[{id:"0",name:"TickerTactics",role:"Data Analyst Intern",avatarUrl:"images/portfolio/tickertactics_logo.png",comment:"Architected and implemented high-performance trade execution engines. Optimized system throughput by 30% through advanced multithreading and efficient data structures."},{id:"1",name:"Soul AI",role:"Backend Engineer",avatarUrl:"images/portfolio/soul_ai_logo.png",comment:"Developed robust API endpoints and integrated AI models into full-stack applications. Focused on low-latency responses and scalable backend architecture."},{id:"2",name:"Deloitte Australia",role:"Software Development Simulation",avatarUrl:"images/portfolio/deloitte_logo.png",comment:"Participated in a technical simulation involving legacy code refactoring, bug fixing, and implementing new features in a enterprise-level codebase."},{id:"3",name:"ShopAffordable",role:"Full-Stack Project",avatarUrl:"images/portfolio/shopfordable.png",comment:"Built a full-stack e-commerce platform with real-time inventory and analytics, improving sales tracking for 100+ SKUs."},{id:"4",name:"Amazon Analytics",role:"Power BI Dashboard",avatarUrl:"images/portfolio/amazondash.png",comment:"Developed an interactive dashboard analyzing 128K+ Amazon India sales records, uncovering category trends and growth insights."},{id:"5",name:"African Migration",role:"Research & Visualization",avatarUrl:"images/portfolio/africanmig.png",comment:"Analyzed migration data from 42 countries and 85+ conflicts, producing dashboards that supported humanitarian planning."}],N$=()=>U.jsxs("svg",{width:"33",height:"32",viewBox:"0 0 33 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[U.jsx("path",{d:"M12.5484 0.847986C11.8284 2.95995 11.3164 5.15192 10.9164 7.34388C14.6285 6.92789 18.3727 6.92789 22.0848 7.34388C21.6848 5.15192 21.1728 2.97595 20.4528 0.847986C20.4307 0.759613 20.4238 0.686493 20.4164 0.607564C20.4131 0.572174 20.4097 0.535616 20.4048 0.495992C19.1567 0.191997 17.8447 0 16.5006 0C15.1405 0 13.8445 0.191997 12.5804 0.495992C12.5741 0.546895 12.5728 0.592737 12.5715 0.637543C12.5696 0.7054 12.5677 0.770896 12.5484 0.847986Z",fill:"#EAEDFF"}),U.jsx("path",{d:"M24.8211 7.67982C26.8852 8.03181 28.9172 8.52781 30.9333 9.1358C29.3493 5.82385 26.6771 3.15189 23.365 1.56792C23.989 3.56789 24.485 5.61585 24.8211 7.67982Z",fill:"#EAEDFF"}),U.jsx("path",{d:"M9.54034 30.2556C9.51633 30.2556 9.48833 30.2636 9.46033 30.2716C9.43233 30.2796 9.40433 30.2876 9.38033 30.2876C6.27619 28.7517 3.74809 26.2077 2.19602 23.1037C2.19602 23.0797 2.20402 23.0517 2.21202 23.0237C2.22002 22.9957 2.22802 22.9677 2.22802 22.9437C4.1801 23.5197 6.19619 23.9517 8.19628 24.2877C8.54829 26.3037 8.96431 28.3037 9.54034 30.2556Z",fill:"#EAEDFF"}),U.jsx("path",{d:"M30.8053 23.1197C29.2213 26.3037 26.5811 28.8797 23.365 30.4316C23.973 28.3997 24.485 26.3517 24.8211 24.2877C26.8372 23.9517 28.8212 23.5197 30.7733 22.9437C30.7637 22.9823 30.7772 23.0208 30.7896 23.0558C30.7977 23.079 30.8053 23.1006 30.8053 23.1197Z",fill:"#EAEDFF"}),U.jsx("path",{d:"M9.54041 1.74401C8.96438 3.69598 8.54836 5.67994 8.21235 7.69591C6.14826 8.01591 4.10017 8.5279 2.06808 9.13589C3.62015 5.91994 6.19626 3.27998 9.3804 1.69601C9.4044 1.69601 9.4324 1.70801 9.4604 1.72001C9.4884 1.73201 9.51641 1.74401 9.54041 1.74401Z",fill:"#EAEDFF"}),U.jsx("path",{d:"M7.84432 21.5836C5.63622 21.1836 3.46013 20.6716 1.34804 19.9516C1.27094 19.9324 1.20545 19.9305 1.13759 19.9286C1.09278 19.9273 1.04693 19.926 0.996021 19.9196C0.692008 18.6557 0.5 17.3597 0.5 15.9997C0.5 14.6557 0.692008 13.3437 0.996021 12.0958C1.03565 12.0908 1.07221 12.0874 1.1076 12.0841C1.18653 12.0767 1.25966 12.0699 1.34804 12.0478C3.47613 11.3438 5.63622 10.8158 7.84432 10.4158C7.4443 14.1277 7.4443 17.8717 7.84432 21.5836Z",fill:"#EAEDFF"}),U.jsx("path",{d:"M32.005 19.9196C32.309 18.6557 32.501 17.3597 32.501 15.9997C32.501 14.6557 32.309 13.3597 32.005 12.0958C31.877 12.0958 31.781 12.0798 31.653 12.0478C29.5409 11.3278 27.3488 10.8158 25.1567 10.4158C25.5727 14.1277 25.5727 17.8717 25.1567 21.5836C27.3488 21.1836 29.5249 20.6556 31.653 19.9516C31.7301 19.9324 31.7956 19.9305 31.8635 19.9286C31.9083 19.9273 31.9541 19.926 32.005 19.9196Z",fill:"#EAEDFF"}),U.jsx("path",{d:"M22.0848 24.6554C21.6848 26.8633 21.1728 29.0393 20.4528 31.1513C20.4307 31.2396 20.4238 31.3128 20.4164 31.3917C20.4131 31.4271 20.4097 31.4636 20.4048 31.5033C19.1567 31.8073 17.8447 31.9993 16.5006 31.9993C15.1405 31.9993 13.8445 31.8073 12.5804 31.5033C12.5741 31.4524 12.5728 31.4065 12.5715 31.3617C12.5696 31.2939 12.5677 31.2284 12.5484 31.1513C11.8444 29.0233 11.3164 26.8633 10.9164 24.6554C12.7724 24.8634 14.6285 25.0074 16.5006 25.0074C18.3727 25.0074 20.2448 24.8634 22.0848 24.6554Z",fill:"#EAEDFF"}),U.jsx("path",{d:"M10.4793 22.0209C14.4812 22.5258 18.5205 22.5258 22.5224 22.0209C23.0274 18.0192 23.0274 13.9802 22.5224 9.97847C18.5205 9.47358 14.4812 9.47358 10.4793 9.97847C9.97434 13.9802 9.97434 18.0192 10.4793 22.0209Z",fill:"#EAEDFF"})]}),L$=[{id:"3",title:"Web",icon:U.jsx(N$,{}),url:"#"}],z$=[{id:"0",title:"LinkedIn",icon:"images/socials/linkedin.svg",url:"https://www.linkedin.com/in/shivkumar-devane-12mar2005/"},{id:"1",title:"GitHub",icon:"images/socials/github_white.svg",url:"https://github.com/Amazing-coder1203/"},{id:"2",title:"Instagram",icon:"images/socials/instagram.svg",url:"#"},{id:"3",title:"Discord",icon:"images/socials/discord.svg",url:"#"}],O$=()=>U.jsx("section",{children:U.jsx(ha,{name:"About Me",children:U.jsx("div",{className:"container",children:U.jsxs("div",{className:"relative flex md:flex-wrap flex-nowrap border-2 border-s3 rounded-7xl md:overflow-hidden max-md:flex-col feature-after md:g7 max-md:border-none max-md:rounded-none max-md:gap-3",children:[P$.map(({id:t,icon:e,caption:n,title:i,text:r,button:o})=>U.jsxs("div",{className:"relative z-2 md:px-10 px-5 md:pb-10 pb-5 flex-50 max-md:g7 max-md:border-2 max-md:border-s3 max-md:rounded-3xl max-md:flex-320",children:[U.jsx("div",{className:"w-full flex justify-start items-start",children:U.jsxs("div",{className:"-ml-3 mb-12 flex items-center justify-center flex-col",children:[U.jsx("div",{className:"w-0.5 h-16 bg-s3"}),U.jsx("img",{src:e,className:"size-28 object-contain",alt:i})]})}),U.jsx("p",{className:"caption mb-5 max-md:mb-6",children:n}),U.jsx("h2",{className:"max-w-400 mb-7 h3 text-p4 max-md:mb-6 max-md:h5",children:i}),U.jsx("p",{className:"mb-11 body-1 max-md:mb-8 max-md:body-3",children:r}),U.jsx(Tf,{to:o.to,offset:-100,spy:!0,smooth:!0,children:U.jsx(Py,{icon:o.icon,children:o.title})})]},t)),U.jsxs("ul",{className:"relative flex justify-around flex-grow px-[5%] border-2 border-s3 rounded-7xl max-md:hidden",children:[U.jsx("div",{className:"absolute bg-s3/20 top-[38%] left-0 right-0 w-full h-[1px] z-10"}),R$.map(({id:t,icon:e,title:n})=>U.jsxs("li",{className:"relative pt-16 px-4 pb-14",children:[U.jsx("div",{className:"absolute top-8 bottom-0 left-1/2 bg-s3/20 w-[1px] h-full z-10"}),U.jsx("div",{className:"flex items-center justify-center mx-auto mb-3 border-2 border-s2 rounded-full hover:border-s4 transition-all duration-500 shadow-500 size-20",children:U.jsx("img",{src:e,alt:n,className:"size-17/20 object-contain z-20"})}),U.jsx("h3",{className:"relative z-2 max-w-36 mx-auto my-0 base-small text-center uppercase",children:n})]},t))]})]})})})});var wM={},Yv=function(){return Yv=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Yv.apply(this,arguments)},F$=function(){function t(e,n,i){var r=this;this.endVal=n,this.options=i,this.version="2.8.0",this.defaults={startVal:0,decimalPlaces:0,duration:2,useEasing:!0,useGrouping:!0,useIndianSeparators:!1,smartEasingThreshold:999,smartEasingAmount:333,separator:",",decimal:".",prefix:"",suffix:"",enableScrollSpy:!1,scrollSpyDelay:200,scrollSpyOnce:!1},this.finalEndVal=null,this.useEasing=!0,this.countDown=!1,this.error="",this.startVal=0,this.paused=!0,this.once=!1,this.count=function(o){r.startTime||(r.startTime=o);var s=o-r.startTime;r.remaining=r.duration-s,r.useEasing?r.countDown?r.frameVal=r.startVal-r.easingFn(s,0,r.startVal-r.endVal,r.duration):r.frameVal=r.easingFn(s,r.startVal,r.endVal-r.startVal,r.duration):r.frameVal=r.startVal+(r.endVal-r.startVal)*(s/r.duration);var a=r.countDown?r.frameVal<r.endVal:r.frameVal>r.endVal;r.frameVal=a?r.endVal:r.frameVal,r.frameVal=Number(r.frameVal.toFixed(r.options.decimalPlaces)),r.printValue(r.frameVal),s<r.duration?r.rAF=requestAnimationFrame(r.count):r.finalEndVal!==null?r.update(r.finalEndVal):r.options.onCompleteCallback&&r.options.onCompleteCallback()},this.formatNumber=function(o){var s,a,l,c,u=o<0?"-":"";s=Math.abs(o).toFixed(r.options.decimalPlaces);var d=(s+="").split(".");if(a=d[0],l=d.length>1?r.options.decimal+d[1]:"",r.options.useGrouping){c="";for(var f=3,m=0,g=0,y=a.length;g<y;++g)r.options.useIndianSeparators&&g===4&&(f=2,m=1),g!==0&&m%f==0&&(c=r.options.separator+c),m++,c=a[y-g-1]+c;a=c}return r.options.numerals&&r.options.numerals.length&&(a=a.replace(/[0-9]/g,function(x){return r.options.numerals[+x]}),l=l.replace(/[0-9]/g,function(x){return r.options.numerals[+x]})),u+r.options.prefix+a+l+r.options.suffix},this.easeOutExpo=function(o,s,a,l){return a*(1-Math.pow(2,-10*o/l))*1024/1023+s},this.options=Yv(Yv({},this.defaults),i),this.formattingFn=this.options.formattingFn?this.options.formattingFn:this.formatNumber,this.easingFn=this.options.easingFn?this.options.easingFn:this.easeOutExpo,this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.endVal=this.validateValue(n),this.options.decimalPlaces=Math.max(this.options.decimalPlaces),this.resetDuration(),this.options.separator=String(this.options.separator),this.useEasing=this.options.useEasing,this.options.separator===""&&(this.options.useGrouping=!1),this.el=typeof e=="string"?document.getElementById(e):e,this.el?this.printValue(this.startVal):this.error="[CountUp] target is null or undefined",typeof window<"u"&&this.options.enableScrollSpy&&(this.error?console.error(this.error,e):(window.onScrollFns=window.onScrollFns||[],window.onScrollFns.push(function(){return r.handleScroll(r)}),window.onscroll=function(){window.onScrollFns.forEach(function(o){return o()})},this.handleScroll(this)))}return t.prototype.handleScroll=function(e){if(e&&window&&!e.once){var n=window.innerHeight+window.scrollY,i=e.el.getBoundingClientRect(),r=i.top+window.pageYOffset,o=i.top+i.height+window.pageYOffset;o<n&&o>window.scrollY&&e.paused?(e.paused=!1,setTimeout(function(){return e.start()},e.options.scrollSpyDelay),e.options.scrollSpyOnce&&(e.once=!0)):(window.scrollY>o||r>n)&&!e.paused&&e.reset()}},t.prototype.determineDirectionAndSmartEasing=function(){var e=this.finalEndVal?this.finalEndVal:this.endVal;this.countDown=this.startVal>e;var n=e-this.startVal;if(Math.abs(n)>this.options.smartEasingThreshold&&this.options.useEasing){this.finalEndVal=e;var i=this.countDown?1:-1;this.endVal=e+i*this.options.smartEasingAmount,this.duration=this.duration/2}else this.endVal=e,this.finalEndVal=null;this.finalEndVal!==null?this.useEasing=!1:this.useEasing=this.options.useEasing},t.prototype.start=function(e){this.error||(this.options.onStartCallback&&this.options.onStartCallback(),e&&(this.options.onCompleteCallback=e),this.duration>0?(this.determineDirectionAndSmartEasing(),this.paused=!1,this.rAF=requestAnimationFrame(this.count)):this.printValue(this.endVal))},t.prototype.pauseResume=function(){this.paused?(this.startTime=null,this.duration=this.remaining,this.startVal=this.frameVal,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count)):cancelAnimationFrame(this.rAF),this.paused=!this.paused},t.prototype.reset=function(){cancelAnimationFrame(this.rAF),this.paused=!0,this.resetDuration(),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.printValue(this.startVal)},t.prototype.update=function(e){cancelAnimationFrame(this.rAF),this.startTime=null,this.endVal=this.validateValue(e),this.endVal!==this.frameVal&&(this.startVal=this.frameVal,this.finalEndVal==null&&this.resetDuration(),this.finalEndVal=null,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count))},t.prototype.printValue=function(e){var n;if(this.el){var i=this.formattingFn(e);!((n=this.options.plugin)===null||n===void 0)&&n.render?this.options.plugin.render(this.el,i):this.el.tagName==="INPUT"?this.el.value=i:this.el.tagName==="text"||this.el.tagName==="tspan"?this.el.textContent=i:this.el.innerHTML=i}},t.prototype.ensureNumber=function(e){return typeof e=="number"&&!isNaN(e)},t.prototype.validateValue=function(e){var n=Number(e);return this.ensureNumber(n)?n:(this.error="[CountUp] invalid start or end value: ".concat(e),null)},t.prototype.resetDuration=function(){this.startTime=null,this.duration=1e3*Number(this.options.duration),this.remaining=this.duration},t}();const U$=Object.freeze(Object.defineProperty({__proto__:null,CountUp:F$},Symbol.toStringTag,{value:"Module"})),B$=CD(U$);Object.defineProperty(wM,"__esModule",{value:!0});var Ii=Pe,H$=B$;function V$(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,r,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(i=o.call(n)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(u){c=!0,r=u}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw r}}return a}}function dA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Zv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dA(Object(n),!0).forEach(function(i){G$(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dA(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function $$(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function W$(t){var e=$$(t,"string");return typeof e=="symbol"?e:String(e)}function G$(t,e,n){return e=W$(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sb(){return Sb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Sb.apply(this,arguments)}function j$(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function uN(t,e){if(t==null)return{};var n=j$(t,e),i,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)i=o[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function q$(t,e){return X$(t)||V$(t,e)||Y$(t,e)||Z$()}function X$(t){if(Array.isArray(t))return t}function Y$(t,e){if(t){if(typeof t=="string")return hA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hA(t,e)}}function hA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Z$(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var K$=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?Ii.useLayoutEffect:Ii.useEffect;function Bo(t){var e=Ii.useRef(t);return K$(function(){e.current=t}),Ii.useCallback(function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e.current.apply(void 0,i)},[])}var Q$=function(e,n){var i=n.decimal,r=n.decimals,o=n.duration,s=n.easingFn,a=n.end,l=n.formattingFn,c=n.numerals,u=n.prefix,d=n.separator,f=n.start,m=n.suffix,g=n.useEasing,y=n.useGrouping,x=n.useIndianSeparators,v=n.enableScrollSpy,w=n.scrollSpyDelay,_=n.scrollSpyOnce,S=n.plugin;return new H$.CountUp(e,a,{startVal:f,duration:o,decimal:i,decimalPlaces:r,easingFn:s,formattingFn:l,numerals:c,separator:d,prefix:u,suffix:m,plugin:S,useEasing:g,useIndianSeparators:x,useGrouping:y,enableScrollSpy:v,scrollSpyDelay:w,scrollSpyOnce:_})},J$=["ref","startOnMount","enableReinitialize","delay","onEnd","onStart","onPauseResume","onReset","onUpdate"],eW={decimal:".",separator:",",delay:null,prefix:"",suffix:"",duration:2,start:0,decimals:0,startOnMount:!0,enableReinitialize:!0,useEasing:!0,useGrouping:!0,useIndianSeparators:!1},dN=function(e){var n=Object.fromEntries(Object.entries(e).filter(function(A){var R=q$(A,2),N=R[1];return N!==void 0})),i=Ii.useMemo(function(){return Zv(Zv({},eW),n)},[e]),r=i.ref,o=i.startOnMount,s=i.enableReinitialize,a=i.delay,l=i.onEnd,c=i.onStart,u=i.onPauseResume,d=i.onReset,f=i.onUpdate,m=uN(i,J$),g=Ii.useRef(),y=Ii.useRef(),x=Ii.useRef(!1),v=Bo(function(){return Q$(typeof r=="string"?r:r.current,m)}),w=Bo(function(A){var R=g.current;if(R&&!A)return R;var N=v();return g.current=N,N}),_=Bo(function(){var A=function(){return w(!0).start(function(){l==null||l({pauseResume:S,reset:E,start:P,update:T})})};a&&a>0?y.current=setTimeout(A,a*1e3):A(),c==null||c({pauseResume:S,reset:E,update:T})}),S=Bo(function(){w().pauseResume(),u==null||u({reset:E,start:P,update:T})}),E=Bo(function(){w().el&&(y.current&&clearTimeout(y.current),w().reset(),d==null||d({pauseResume:S,start:P,update:T}))}),T=Bo(function(A){w().update(A),f==null||f({pauseResume:S,reset:E,start:P})}),P=Bo(function(){E(),_()}),D=Bo(function(A){o&&(A&&E(),_())});return Ii.useEffect(function(){x.current?s&&D(!0):(x.current=!0,D())},[s,x,D,a,e.start,e.suffix,e.prefix,e.duration,e.separator,e.decimals,e.decimal,e.formattingFn]),Ii.useEffect(function(){return function(){E()}},[E]),{start:P,pauseResume:S,reset:E,update:T,getCountUp:w}},tW=["className","redraw","containerProps","children","style"],nW=function(e){var n=e.className,i=e.redraw,r=e.containerProps,o=e.children,s=e.style,a=uN(e,tW),l=Ii.useRef(null),c=Ii.useRef(!1),u=dN(Zv(Zv({},a),{},{ref:l,startOnMount:typeof o!="function"||e.delay===0,enableReinitialize:!1})),d=u.start,f=u.reset,m=u.update,g=u.pauseResume,y=u.getCountUp,x=Bo(function(){d()}),v=Bo(function(S){e.preserveValue||f(),m(S)}),w=Bo(function(){if(typeof e.children=="function"&&!(l.current instanceof Element)){console.error(`Couldn't find attached element to hook the CountUp instance into! Try to attach "containerRef" from the render prop to a an Element, eg. <span ref={containerRef} />.`);return}y()});Ii.useEffect(function(){w()},[w]),Ii.useEffect(function(){c.current&&v(e.end)},[e.end,v]);var _=i&&e;return Ii.useEffect(function(){i&&c.current&&x()},[x,i,_]),Ii.useEffect(function(){!i&&c.current&&x()},[x,i,e.start,e.suffix,e.prefix,e.duration,e.separator,e.decimals,e.decimal,e.className,e.formattingFn]),Ii.useEffect(function(){c.current=!0},[]),typeof o=="function"?o({countUpRef:l,start:d,reset:f,update:m,pauseResume:g,getCountUp:y}):Ii.createElement("span",Sb({className:n,ref:l,style:s},r),typeof e.start<"u"?y().formattingFn(e.start):"")};wM.default=nW;wM.useCountUp=dN;const iW=()=>{const[t,e]=Pe.useState(!1);return U.jsx("section",{children:U.jsx(ha,{name:"My Skills",children:U.jsxs("div",{className:"container",children:[U.jsxs("div",{className:"max-w-960 pricing-head_before relative mx-auto border-l border-r border-s2 bg-s1/50 pb-40 pt-28 max-xl:max-w-4xl max-lg:border-none max-md:pb-32 max-md:pt-16",children:[U.jsx("h3",{className:"h3 max-lg:h4 max-md:h5 z-3 relative mx-auto mb-14 max-w-lg text-center text-p4 max-md:mb-11 max-sm:max-w-sm",children:"Technical Architecture & Skills"}),U.jsxs("div",{className:"relative z-4 mx-auto flex w-[375px] rounded-3xl border-[3px] border-s4/25 bg-s1/50 p-2 backdrop-blur-[6px] max-md:w-[310px]",children:[U.jsx("button",{className:yi("pricing-head_btn",t&&"text-p4"),onClick:()=>e(!0),children:"Systems"}),U.jsx("button",{className:yi("pricing-head_btn",!t&&"text-p4"),onClick:()=>e(!1),children:"Data Eng"}),U.jsx("div",{className:yi("g4 rounded-14 before:h-100 pricing-head_btn_before absolute left-2 top-2 h-[calc(100%-16px)] w-[calc(50%-8px)] overflow-hidden shadow-400 transition-transform duration-500",!t&&"translate-x-full")})]}),U.jsxs("div",{className:"pricing-bg",children:[U.jsx("img",{src:"images/bg-outlines.svg",width:960,height:380,alt:"outline",className:"relative z-2"}),U.jsx("img",{src:"images/bg-outlines-fill.png",width:960,height:380,alt:"outline",className:"absolute inset-0 opacity-5 mix-blend-soft-light"})]})]}),U.jsx("div",{className:"scroll-hide relative z-2 -mt-12 flex items-start max-xl:gap-5 max-xl:overflow-auto max-xl:pt-6",children:(t?D$:k$).map((n,i)=>U.jsxs("div",{className:"pricing-plan_first pricing-plan_last pricing-plan_odd pricing-plan_even relative border-2 p-7 max-xl:min-w-80 max-lg:rounded-3xl xl:w-[calc(33.33%+2px)]",children:[i===1&&U.jsx("div",{className:"g4 absolute h-330 left-0 right-0 top-0 z-1 rounded-tl-3xl rounded-tr-3xl"}),U.jsx("div",{className:yi("absolute left-0 right-0 z-2 flex items-center justify-center",i===1?"-top-6":"-top-6 xl:-top-11"),children:U.jsx("img",{src:n.logo,alt:n.title,className:yi("object-contain drop-shadow-2xl",i===1?"size-[120px]":"size-[88px]")})}),U.jsxs("div",{className:yi("relative flex flex-col items-center",i===1?"pt-24":"pt-12"),children:[U.jsx("div",{className:yi("small-2 rounded-20 relative z-2 mx-auto mb-6 border-2 px-4 py-1.5 uppercase",i===1?"border-p3 text-p3":"border-p1 text-p1"),children:n.title}),U.jsx("div",{className:"relative z-2 flex items-center justify-center",children:U.jsx("div",{className:yi("h-num flex items-start",i===1?"text-p3":"text-p4")})})]}),U.jsx("div",{className:yi("body-1 relative z-2 mt-10 mb-10 w-1/2 mx-auto border-b-s2 pb-9 text-center text-p4",i===1&&"border-b"),children:n.caption}),U.jsx("ul",{className:"mx-auto space-y-4 xl:px-7",children:n.features.map(r=>U.jsxs("li",{className:"relative flex items-center gap-5",children:[U.jsx("img",{src:"images/check.png",alt:"check",className:"size-10 object-contain"}),U.jsx("p",{className:"flex-1",children:r})]},r))}),U.jsx("div",{className:"mt-10 flex w-full justify-center",children:U.jsx(Py,{icon:n.icon,children:"Dive Deeper"})}),i===1&&U.jsx("p",{className:"small-compact mt-9 text-center text-p3 before:mx-2.5 before:content-[''] after:mx-2.5 after:content-['']"})]},n.id))})]})})})};var hN={},Mb=function(t,e){return Mb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])},Mb(t,e)};function fN(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Mb(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Kv=function(){return Kv=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Kv.apply(this,arguments)};function pN(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function mN(t,e,n,i){var r=arguments.length,o=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,n,o):s(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o}function gN(t,e){return function(n,i){e(n,i,t)}}function rW(t,e,n,i,r,o){function s(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var a=i.kind,l=a==="getter"?"get":a==="setter"?"set":"value",c=!e&&t?i.static?t:t.prototype:null,u=e||(c?Object.getOwnPropertyDescriptor(c,i.name):{}),d,f=!1,m=n.length-1;m>=0;m--){var g={};for(var y in i)g[y]=y==="access"?{}:i[y];for(var y in i.access)g.access[y]=i.access[y];g.addInitializer=function(v){if(f)throw new TypeError("Cannot add initializers after decoration has completed");o.push(s(v||null))};var x=(0,n[m])(a==="accessor"?{get:u.get,set:u.set}:u[l],g);if(a==="accessor"){if(x===void 0)continue;if(x===null||typeof x!="object")throw new TypeError("Object expected");(d=s(x.get))&&(u.get=d),(d=s(x.set))&&(u.set=d),(d=s(x.init))&&r.unshift(d)}else(d=s(x))&&(a==="field"?r.unshift(d):u[l]=d)}c&&Object.defineProperty(c,i.name,u),f=!0}function oW(t,e,n){for(var i=arguments.length>2,r=0;r<e.length;r++)n=i?e[r].call(t,n):e[r].call(t);return i?n:void 0}function sW(t){return typeof t=="symbol"?t:"".concat(t)}function aW(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function vN(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function yN(t,e,n,i){function r(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{c(i.next(u))}catch(d){s(d)}}function l(u){try{c(i.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})}function xN(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},i,r,o,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(u){return l([c,u])}}function l(c){if(i)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(n=0)),n;)try{if(i=1,r&&(o=c[0]&2?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,r=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],r=0}finally{i=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var Ry=Object.create?function(t,e,n,i){i===void 0&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]};function wN(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Ry(e,t,n)}function Qv(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function _M(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),r,o=[],s;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(a){s={error:a}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(s)throw s.error}}return o}function _N(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(_M(arguments[e]));return t}function bN(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var i=Array(t),r=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i}function SN(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,o;i<r;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))}function dd(t){return this instanceof dd?(this.v=t,this):new dd(t)}function MN(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(m){return function(g){return Promise.resolve(g).then(m,d)}}function a(m,g){i[m]&&(r[m]=function(y){return new Promise(function(x,v){o.push([m,y,x,v])>1||l(m,y)})},g&&(r[m]=g(r[m])))}function l(m,g){try{c(i[m](g))}catch(y){f(o[0][3],y)}}function c(m){m.value instanceof dd?Promise.resolve(m.value.v).then(u,d):f(o[0][2],m)}function u(m){l("next",m)}function d(m){l("throw",m)}function f(m,g){m(g),o.shift(),o.length&&l(o[0][0],o[0][1])}}function CN(t){var e,n;return e={},i("next"),i("throw",function(r){throw r}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(r,o){e[r]=t[r]?function(s){return(n=!n)?{value:dd(t[r](s)),done:!1}:o?o(s):s}:o}}function EN(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Qv=="function"?Qv(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=t[o]&&function(s){return new Promise(function(a,l){s=t[o](s),r(a,l,s.done,s.value)})}}function r(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}}function TN(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var lW=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};function AN(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Ry(e,t,n);return lW(e,t),e}function IN(t){return t&&t.__esModule?t:{default:t}}function PN(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)}function RN(t,e,n,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(t,n):r?r.value=n:e.set(t,n),n}function DN(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function kN(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var i,r;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=e[Symbol.asyncDispose]}if(i===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=e[Symbol.dispose],n&&(r=i)}if(typeof i!="function")throw new TypeError("Object not disposable.");r&&(i=function(){try{r.call(this)}catch(o){return Promise.reject(o)}}),t.stack.push({value:e,dispose:i,async:n})}else n&&t.stack.push({async:!0});return e}var cW=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var i=new Error(n);return i.name="SuppressedError",i.error=t,i.suppressed=e,i};function NN(t){function e(o){t.error=t.hasError?new cW(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var n,i=0;function r(){for(;n=t.stack.pop();)try{if(!n.async&&i===1)return i=0,t.stack.push(n),Promise.resolve().then(r);if(n.dispose){var o=n.dispose.call(n.value);if(n.async)return i|=2,Promise.resolve(o).then(r,function(s){return e(s),r()})}else i|=1}catch(s){e(s)}if(i===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return r()}const uW={__extends:fN,__assign:Kv,__rest:pN,__decorate:mN,__param:gN,__metadata:vN,__awaiter:yN,__generator:xN,__createBinding:Ry,__exportStar:wN,__values:Qv,__read:_M,__spread:_N,__spreadArrays:bN,__spreadArray:SN,__await:dd,__asyncGenerator:MN,__asyncDelegator:CN,__asyncValues:EN,__makeTemplateObject:TN,__importStar:AN,__importDefault:IN,__classPrivateFieldGet:PN,__classPrivateFieldSet:RN,__classPrivateFieldIn:DN,__addDisposableResource:kN,__disposeResources:NN},dW=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:kN,get __assign(){return Kv},__asyncDelegator:CN,__asyncGenerator:MN,__asyncValues:EN,__await:dd,__awaiter:yN,__classPrivateFieldGet:PN,__classPrivateFieldIn:DN,__classPrivateFieldSet:RN,__createBinding:Ry,__decorate:mN,__disposeResources:NN,__esDecorate:rW,__exportStar:wN,__extends:fN,__generator:xN,__importDefault:IN,__importStar:AN,__makeTemplateObject:TN,__metadata:vN,__param:gN,__propKey:sW,__read:_M,__rest:pN,__runInitializers:oW,__setFunctionName:aW,__spread:_N,__spreadArray:SN,__spreadArrays:bN,__values:Qv,default:uW},Symbol.toStringTag,{value:"Module"})),hW=CD(dW);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SlideDown=void 0;var e=hW,n=(0,e.__importStar)(Pe),i=function(r){(0,e.__extends)(o,r);function o(s){var a=r.call(this,s)||this;return a.outerRef=null,a.handleRef=function(l){if(a.outerRef=l,a.props.forwardedRef)if(typeof a.props.forwardedRef=="function")a.props.forwardedRef(l);else if(typeof a.props.forwardedRef=="object"){var c=a.props.forwardedRef;c.current=l}else throw new Error("Invalid forwardedRef ".concat(a.props.forwardedRef))},a.handleTransitionEnd=function(l){l.target===a.outerRef&&l.propertyName==="height"&&(a.state.childrenLeaving?a.setState({children:null,childrenLeaving:!1},function(){return a.endTransition()}):a.endTransition())},a.state={children:s.children,childrenLeaving:!1},a}return o.prototype.componentDidMount=function(){this.outerRef&&(this.props.closed||!this.props.children?(this.outerRef.classList.add("closed"),this.outerRef.style.height="0px"):this.props.transitionOnAppear?this.startTransition("0px"):this.outerRef.style.height="auto")},o.prototype.getSnapshotBeforeUpdate=function(){return this.outerRef?this.outerRef.getBoundingClientRect().height+"px":null},o.getDerivedStateFromProps=function(s,a){return s.children?{children:s.children,childrenLeaving:!1}:a.children?{children:a.children,childrenLeaving:!0}:null},o.prototype.componentDidUpdate=function(s,a,l){this.outerRef&&this.startTransition(l)},o.prototype.startTransition=function(s){var a="0px";!this.props.closed&&!this.state.childrenLeaving&&this.state.children&&(this.outerRef.classList.remove("closed"),this.outerRef.style.height="auto",a=getComputedStyle(this.outerRef).height),parseFloat(a).toFixed(2)!==parseFloat(s).toFixed(2)&&(this.outerRef.classList.add("transitioning"),this.outerRef.style.height=s,this.outerRef.offsetHeight,this.outerRef.style.transitionProperty="height",this.outerRef.style.height=a)},o.prototype.endTransition=function(){this.outerRef.classList.remove("transitioning"),this.outerRef.style.transitionProperty="none",this.outerRef.style.height=this.props.closed?"0px":"auto",(this.props.closed||!this.state.children)&&this.outerRef.classList.add("closed")},o.prototype.render=function(){var s=this.props,a=s.as,l=a===void 0?"div":a;s.children;var c=s.className;s.closed,s.transitionOnAppear,s.forwardedRef;var u=(0,e.__rest)(s,["as","children","className","closed","transitionOnAppear","forwardedRef"]),d=c?"react-slidedown "+c:"react-slidedown";return n.default.createElement(l,(0,e.__assign)({ref:this.handleRef,className:d,onTransitionEnd:this.handleTransitionEnd},u),this.state.children)},o.defaultProps={transitionOnAppear:!0,closed:!1},o}(n.Component);t.SlideDown=(0,n.forwardRef)(function(r,o){return n.default.createElement(i,(0,e.__assign)({},r,{forwardedRef:o}))}),t.default=t.SlideDown})(hN);const fA=({item:t,index:e})=>{const[n,i]=Pe.useState(null),r=n===t.id;return U.jsxs("div",{className:"relative z-2 mb-16",children:[U.jsxs("div",{className:"group relative flex cursor-pointer items-center justify-between gap-10 px-7",onClick:()=>{i(n===t.id?null:t.id)},children:[U.jsxs("div",{className:"flex-1",children:[U.jsxs("div",{className:"small-compact mb-1.5 text-p3 max-lg:hidden",children:[e<10?"0":"",e]}),U.jsx("div",{className:yi("h6 text-p4 transition-colors duration-500 max-md:flex max-md:min-h-20 max-md:items-center",r&&"max-lg:text-p1"),children:t.question})]}),U.jsx("div",{className:yi("faq-icon relative flex size-12 items-center justify-center rounded-full border-2 border-s2 shadow-400 transition-all duration-500 group-hover:border-s4",r&&"before:bg-p1 after:rotate-0 after:bg-p1"),children:U.jsx("div",{className:"g4 size-11/12 rounded-full shadow-300"})})]}),U.jsx(hN.SlideDown,{children:n===t.id&&U.jsx("div",{className:"body-3 px-7 py-3.5",children:t.answer})}),U.jsxs("div",{className:yi("g5 -bottom-7 -top-7 left-0 right-0 -z-1 rounded-3xl opacity-0 transition-opacity duration-500 absolute",r&&"opacity-100"),children:[U.jsx("div",{className:"g4 absolute inset-0.5 -z-1 rounded-3xl"}),U.jsx("div",{className:"absolute left-8 top-0 h-0.5 w-40 bg-p1"})]})]})},fW=()=>{const t=Math.floor(mw.length/2);return U.jsx("section",{children:U.jsxs(ha,{name:"FAQ",className:"relative",children:[U.jsxs("div",{className:"container relative z-2 py-28",children:[U.jsxs("div",{children:[U.jsx("h3",{className:"h3 max-md:h5 max-w-640 max-lg:max-w-md mb-7 text-p4",children:"Curiosity didnt just ask, it built."}),U.jsx("p",{className:"body-1 max-lg:max-w-sm",children:"Got questions? Here are the answers about my skills, projects, and journey."})]}),U.jsx("div",{className:"faq-line_after w-0.5 h-full absolute left-[calc(50%-1px)] top-0 -z-1 bg-s2"})]}),U.jsxs("div",{className:"faq-glow_before relative z-2 border-2 border-s2 bg-s1",children:[U.jsxs("div",{className:"container flex gap-10 max-lg:block",children:[U.jsx("div",{className:"rounded-half absolute -top-10 left-[calc(50%-40px)] z-4 flex size-20 items-center justify-center border-2 border-s2 bg-s1",children:U.jsx("img",{src:"images/faq-logo.svg",alt:"logo",className:"size-1/2"})}),U.jsx("div",{className:"relative flex-1 pt-24",children:mw.slice(0,t).map((e,n)=>U.jsx(fA,{item:e,index:n},e.id))}),U.jsx("div",{className:"relative flex-1 lg:pt-24",children:mw.slice(t).map((e,n)=>U.jsx(fA,{item:e,index:t+n},e.id))})]}),U.jsx("div",{className:"faq-lin_after absolute left-[calc(50%-1px)] top-0 -z-1 h-full w-0.5 bg-s2 max-lg:hidden"})]})]})})},pA=({item:t,containerClassName:e})=>U.jsxs("div",{className:yi("relative px-14 pb-14 pt-11 after:absolute after:bottom-0 after:right-0 after:h-0.5 after:w-screen after:bg-s2 after:content-[''] max-md:px-0 max-md:pt-11 after:max-md:-right-4",e),children:[U.jsx("blockquote",{className:"h6 mb-8 text-p4",children:t.comment}),U.jsxs("div",{className:"flex items-center max-xl:-mr-8",children:[U.jsx("div",{className:"mr-4 size-20 shrink-0 rounded-2xl border-2 border-s2 p-1.5",children:U.jsx("img",{src:t.avatarUrl,alt:t.name,className:"size-full object-contain"})}),U.jsxs("div",{children:[U.jsx("h4",{className:"body-2 mb-0.5 text-p1",children:t.name}),U.jsx("p",{className:"small-compact uppercase text-s3",children:t.role})]})]})]}),pW=()=>{const t=Math.floor(gw.length/2);return U.jsx("section",{className:"relative z-2 py-24 md:py-28 lg:py-40",children:U.jsx(ha,{name:"Experience",children:U.jsxs("div",{className:"container block lg:flex",children:[U.jsxs("div",{className:"testimonials_head-res relative alignleft fixed z-2 mr-20 flex-300",children:[U.jsx("p",{className:"caption mb-5 max-md:mb-2.5",children:"Work History"}),U.jsx("h3",{className:"h3 max-md:h5 text-p4",children:"Professional Experience"})]}),U.jsxs("div",{className:"testimonials_inner-after testimonials_inner-before relative -my-12 -mr-3 flex items-start max-lg:static max-md:block",children:[U.jsx("div",{className:"testimonials_group-after flex-50",children:gw.slice(0,t).map(e=>U.jsx(pA,{item:e,containerClassName:"last:after:hidden last:after:max-md:block"},e.id))}),U.jsx("div",{className:"flex-50",children:gw.slice(t).map(e=>U.jsx(pA,{item:e,containerClassName:"last:after:hidden after:right-auto after:left-0 after:max-md:-left-4 md:px-12"},e.id))})]})]})})})},mW="modulepreload",gW=function(t){return"/skdevane_sde_portfolio/"+t},mA={},gA=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),a=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));r=Promise.allSettled(n.map(l=>{if(l=gW(l),l in mA)return;mA[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":mW,c||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((f,m)=>{d.addEventListener("load",f),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function o(s){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s}return r.then(s=>{for(const a of s||[])a.status==="rejected"&&o(a.reason);return e().catch(o)})};function Cb(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function vA(t,e,n,i,r,o,s){try{var a=t[o](s),l=a.value}catch(c){return void n(c)}a.done?e(l):Promise.resolve(l).then(i,r)}function LN(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var o=t.apply(e,n);function s(l){vA(o,i,r,s,a,"next",l)}function a(l){vA(o,i,r,s,a,"throw",l)}s(void 0)})}}function zN(t,e,n){return e=Jv(e),function(i,r){if(r&&(typeof r=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}(i)}(t,FN()?Reflect.construct(e,n||[],Jv(t).constructor):e.apply(t,n))}function bM(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function SM(t,e,n){return e&&function(i,r){for(var o=0;o<r.length;o++){var s=r[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,BN(s.key),s)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Bu(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=MM(t))||e){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(l){throw l},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,s=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var l=n.next();return s=l.done,l},e:function(l){a=!0,o=l},f:function(){try{s||n.return==null||n.return()}finally{if(a)throw o}}}}function pt(t,e,n){return(e=BN(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jv(t){return Jv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Jv(t)}function ON(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Eb(t,e)}function FN(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(FN=function(){return!!t})()}function yA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Ee(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yA(Object(n),!0).forEach(function(i){pt(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yA(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Dy(t,e){if(t==null)return{};var n,i,r=function(s,a){if(s==null)return{};var l={};for(var c in s)if({}.hasOwnProperty.call(s,c)){if(a.indexOf(c)!==-1)continue;l[c]=s[c]}return l}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Af(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,e,n=typeof Symbol=="function"?Symbol:{},i=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function o(m,g,y,x){var v=g&&g.prototype instanceof a?g:a,w=Object.create(v.prototype);return Gr(w,"_invoke",function(_,S,E){var T,P,D,A=0,R=E||[],N=!1,O={p:0,n:0,v:t,a:H,f:H.bind(t,4),d:function(q,Z){return T=q,P=0,D=t,O.n=Z,s}};function H(q,Z){for(P=q,D=Z,e=0;!N&&A&&!G&&e<R.length;e++){var G,Y=R[e],z=O.p,$=Y[2];q>3?(G=$===Z)&&(D=Y[(P=Y[4])?5:(P=3,3)],Y[4]=Y[5]=t):Y[0]<=z&&((G=q<2&&z<Y[1])?(P=0,O.v=Z,O.n=Y[1]):z<$&&(G=q<3||Y[0]>Z||Z>$)&&(Y[4]=q,Y[5]=Z,O.n=$,P=0))}if(G||q>1)return s;throw N=!0,Z}return function(q,Z,G){if(A>1)throw TypeError("Generator is already running");for(N&&Z===1&&H(Z,G),P=Z,D=G;(e=P<2?t:D)||!N;){T||(P?P<3?(P>1&&(O.n=-1),H(P,D)):O.n=D:O.v=D);try{if(A=2,T){if(P||(q="next"),e=T[q]){if(!(e=e.call(T,D)))throw TypeError("iterator result is not an object");if(!e.done)return e;D=e.value,P<2&&(P=0)}else P===1&&(e=T.return)&&e.call(T),P<2&&(D=TypeError("The iterator does not provide a '"+q+"' method"),P=1);T=t}else if((e=(N=O.n<0)?D:_.call(S,O))!==s)break}catch(Y){T=t,P=1,D=Y}finally{A=1}}return{value:e,done:N}}}(m,y,x),!0),w}var s={};function a(){}function l(){}function c(){}e=Object.getPrototypeOf;var u=[][i]?e(e([][i]())):(Gr(e={},i,function(){return this}),e),d=c.prototype=a.prototype=Object.create(u);function f(m){return Object.setPrototypeOf?Object.setPrototypeOf(m,c):(m.__proto__=c,Gr(m,r,"GeneratorFunction")),m.prototype=Object.create(d),m}return l.prototype=c,Gr(d,"constructor",c),Gr(c,"constructor",l),l.displayName="GeneratorFunction",Gr(c,r,"GeneratorFunction"),Gr(d),Gr(d,r,"Generator"),Gr(d,i,function(){return this}),Gr(d,"toString",function(){return"[object Generator]"}),(Af=function(){return{w:o,m:f}})()}function Gr(t,e,n,i){var r=Object.defineProperty;try{r({},"",{})}catch{r=0}Gr=function(o,s,a,l){function c(u,d){Gr(o,u,function(f){return this._invoke(u,d,f)})}s?r?r(o,s,{value:a,enumerable:!l,configurable:!l,writable:!l}):o[s]=a:(c("next",0),c("throw",1),c("return",2))},Gr(t,e,n,i)}function Eb(t,e){return Eb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Eb(t,e)}function Ge(t,e){return function(n){if(Array.isArray(n))return n}(t)||function(n,i){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var o,s,a,l,c=[],u=!0,d=!1;try{if(a=(r=r.call(n)).next,i!==0)for(;!(u=(o=a.call(r)).done)&&(c.push(o.value),c.length!==i);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw s}}return c}}(t,e)||MM(t,e)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function UN(t){return function(e){if(Array.isArray(e))return Cb(e)}(t)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||MM(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function BN(t){var e=function(n,i){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var o=r.call(n,i);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(n)}(t,"string");return typeof e=="symbol"?e:e+""}function e0(t){return e0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e0(t)}function MM(t,e){if(t){if(typeof t=="string")return Cb(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Cb(t,e):void 0}}var ky,Wt,HN,Zl,xA,VN,$N,WN,CM,Tb,Ab,GN,If={},jN=[],vW=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,hp=Array.isArray;function ea(t,e){for(var n in e)t[n]=e[n];return t}function EM(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function M(t,e,n){var i,r,o,s={};for(o in e)o=="key"?i=e[o]:o=="ref"?r=e[o]:s[o]=e[o];if(arguments.length>2&&(s.children=arguments.length>3?ky.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(o in t.defaultProps)s[o]===void 0&&(s[o]=t.defaultProps[o]);return mv(t,s,i,r,null)}function mv(t,e,n,i,r){var o={type:t,props:e,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++HN,__i:-1,__u:0};return r==null&&Wt.vnode!=null&&Wt.vnode(o),o}function Tt(t){return t.children}function xs(t,e){this.props=t,this.context=e}function hd(t,e){if(e==null)return t.__?hd(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?hd(t):null}function qN(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return qN(t)}}function Ib(t){(!t.__d&&(t.__d=!0)&&Zl.push(t)&&!t0.__r++||xA!=Wt.debounceRendering)&&((xA=Wt.debounceRendering)||VN)(t0)}function t0(){for(var t,e,n,i,r,o,s,a=1;Zl.length;)Zl.length>a&&Zl.sort($N),t=Zl.shift(),a=Zl.length,t.__d&&(n=void 0,i=void 0,r=(i=(e=t).__v).__e,o=[],s=[],e.__P&&((n=ea({},i)).__v=i.__v+1,Wt.vnode&&Wt.vnode(n),TM(e.__P,n,i,e.__n,e.__P.namespaceURI,32&i.__u?[r]:null,o,r??hd(i),!!(32&i.__u),s),n.__v=i.__v,n.__.__k[n.__i]=n,ZN(o,n,s),i.__e=i.__=null,n.__e!=r&&qN(n)));t0.__r=0}function XN(t,e,n,i,r,o,s,a,l,c,u){var d,f,m,g,y,x,v,w=i&&i.__k||jN,_=e.length;for(l=function(S,E,T,P,D){var A,R,N,O,H,q=T.length,Z=q,G=0;for(S.__k=new Array(D),A=0;A<D;A++)(R=E[A])!=null&&typeof R!="boolean"&&typeof R!="function"?(typeof R=="string"||typeof R=="number"||typeof R=="bigint"||R.constructor==String?R=S.__k[A]=mv(null,R,null,null,null):hp(R)?R=S.__k[A]=mv(Tt,{children:R},null,null,null):R.constructor==null&&R.__b>0?R=S.__k[A]=mv(R.type,R.props,R.key,R.ref?R.ref:null,R.__v):S.__k[A]=R,O=A+G,R.__=S,R.__b=S.__b+1,(H=R.__i=yW(R,T,O,Z))!=-1&&(Z--,(N=T[H])&&(N.__u|=2)),N==null||N.__v==null?(H==-1&&(D>q?G--:D<q&&G++),typeof R.type!="function"&&(R.__u|=4)):H!=O&&(H==O-1?G--:H==O+1?G++:(H>O?G--:G++,R.__u|=4))):S.__k[A]=null;if(Z)for(A=0;A<q;A++)(N=T[A])!=null&&!(2&N.__u)&&(N.__e==P&&(P=hd(N)),QN(N,N));return P}(n,e,w,l,_),d=0;d<_;d++)(m=n.__k[d])!=null&&(f=m.__i==-1?If:w[m.__i]||If,m.__i=d,x=TM(t,m,f,r,o,s,a,l,c,u),g=m.__e,m.ref&&f.ref!=m.ref&&(f.ref&&AM(f.ref,null,m),u.push(m.ref,m.__c||g,m)),y==null&&g!=null&&(y=g),(v=!!(4&m.__u))||f.__k===m.__k?l=YN(m,l,t,v):typeof m.type=="function"&&x!==void 0?l=x:g&&(l=g.nextSibling),m.__u&=-7);return n.__e=y,l}function YN(t,e,n,i){var r,o;if(typeof t.type=="function"){for(r=t.__k,o=0;r&&o<r.length;o++)r[o]&&(r[o].__=t,e=YN(r[o],e,n,i));return e}t.__e!=e&&(i&&(e&&t.type&&!e.parentNode&&(e=hd(t)),n.insertBefore(t.__e,e||null)),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function n0(t,e){return e=e||[],t==null||typeof t=="boolean"||(hp(t)?t.some(function(n){n0(n,e)}):e.push(t)),e}function yW(t,e,n,i){var r,o,s,a=t.key,l=t.type,c=e[n],u=c!=null&&!(2&c.__u);if(c===null&&a==null||u&&a==c.key&&l==c.type)return n;if(i>(u?1:0)){for(r=n-1,o=n+1;r>=0||o<e.length;)if((c=e[s=r>=0?r--:o++])!=null&&!(2&c.__u)&&a==c.key&&l==c.type)return s}return-1}function wA(t,e,n){e[0]=="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||vW.test(e)?n:n+"px"}function Xm(t,e,n,i,r){var o,s;e:if(e=="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof i=="string"&&(t.style.cssText=i=""),i)for(e in i)n&&e in n||wA(t.style,e,"");if(n)for(e in n)i&&n[e]==i[e]||wA(t.style,e,n[e])}else if(e[0]=="o"&&e[1]=="n")o=e!=(e=e.replace(WN,"$1")),s=e.toLowerCase(),e=s in t||e=="onFocusOut"||e=="onFocusIn"?s.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+o]=n,n?i?n.u=i.u:(n.u=CM,t.addEventListener(e,o?Ab:Tb,o)):t.removeEventListener(e,o?Ab:Tb,o);else{if(r=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function _A(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=CM++;else if(e.t<n.u)return;return n(Wt.event?Wt.event(e):e)}}}function TM(t,e,n,i,r,o,s,a,l,c){var u,d,f,m,g,y,x,v,w,_,S,E,T,P,D,A,R,N=e.type;if(e.constructor!=null)return null;128&n.__u&&(l=!!(32&n.__u),o=[a=e.__e=n.__e]),(u=Wt.__b)&&u(e);e:if(typeof N=="function")try{if(v=e.props,w="prototype"in N&&N.prototype.render,_=(u=N.contextType)&&i[u.__c],S=u?_?_.props.value:u.__:i,n.__c?x=(d=e.__c=n.__c).__=d.__E:(w?e.__c=d=new N(v,S):(e.__c=d=new xs(v,S),d.constructor=N,d.render=wW),_&&_.sub(d),d.state||(d.state={}),d.__n=i,f=d.__d=!0,d.__h=[],d._sb=[]),w&&d.__s==null&&(d.__s=d.state),w&&N.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=ea({},d.__s)),ea(d.__s,N.getDerivedStateFromProps(v,d.__s))),m=d.props,g=d.state,d.__v=e,f)w&&N.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),w&&d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(w&&N.getDerivedStateFromProps==null&&v!==m&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(v,S),e.__v==n.__v||!d.__e&&d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(v,d.__s,S)===!1){for(e.__v!=n.__v&&(d.props=v,d.state=d.__s,d.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(O){O&&(O.__=e)}),E=0;E<d._sb.length;E++)d.__h.push(d._sb[E]);d._sb=[],d.__h.length&&s.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(v,d.__s,S),w&&d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(m,g,y)})}if(d.context=S,d.props=v,d.__P=t,d.__e=!1,T=Wt.__r,P=0,w){for(d.state=d.__s,d.__d=!1,T&&T(e),u=d.render(d.props,d.state,d.context),D=0;D<d._sb.length;D++)d.__h.push(d._sb[D]);d._sb=[]}else do d.__d=!1,T&&T(e),u=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++P<25);d.state=d.__s,d.getChildContext!=null&&(i=ea(ea({},i),d.getChildContext())),w&&!f&&d.getSnapshotBeforeUpdate!=null&&(y=d.getSnapshotBeforeUpdate(m,g)),A=u,u!=null&&u.type===Tt&&u.key==null&&(A=KN(u.props.children)),a=XN(t,hp(A)?A:[A],e,n,i,r,o,s,a,l,c),d.base=e.__e,e.__u&=-161,d.__h.length&&s.push(d),x&&(d.__E=d.__=null)}catch(O){if(e.__v=null,l||o!=null)if(O.then){for(e.__u|=l?160:128;a&&a.nodeType==8&&a.nextSibling;)a=a.nextSibling;o[o.indexOf(a)]=null,e.__e=a}else{for(R=o.length;R--;)EM(o[R]);Pb(e)}else e.__e=n.__e,e.__k=n.__k,O.then||Pb(e);Wt.__e(O,e,n)}else o==null&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):a=e.__e=xW(n.__e,e,n,i,r,o,s,l,c);return(u=Wt.diffed)&&u(e),128&e.__u?void 0:a}function Pb(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(Pb)}function ZN(t,e,n){for(var i=0;i<n.length;i++)AM(n[i],n[++i],n[++i]);Wt.__c&&Wt.__c(e,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(o){o.call(r)})}catch(o){Wt.__e(o,r.__v)}})}function KN(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:hp(t)?t.map(KN):ea({},t)}function xW(t,e,n,i,r,o,s,a,l){var c,u,d,f,m,g,y,x=n.props||If,v=e.props,w=e.type;if(w=="svg"?r="http://www.w3.org/2000/svg":w=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),o!=null){for(c=0;c<o.length;c++)if((m=o[c])&&"setAttribute"in m==!!w&&(w?m.localName==w:m.nodeType==3)){t=m,o[c]=null;break}}if(t==null){if(w==null)return document.createTextNode(v);t=document.createElementNS(r,w,v.is&&v),a&&(Wt.__m&&Wt.__m(e,o),a=!1),o=null}if(w==null)x===v||a&&t.data==v||(t.data=v);else{if(o=o&&ky.call(t.childNodes),!a&&o!=null)for(x={},c=0;c<t.attributes.length;c++)x[(m=t.attributes[c]).name]=m.value;for(c in x)if(m=x[c],c!="children"){if(c=="dangerouslySetInnerHTML")d=m;else if(!(c in v)){if(c=="value"&&"defaultValue"in v||c=="checked"&&"defaultChecked"in v)continue;Xm(t,c,null,m,r)}}for(c in v)m=v[c],c=="children"?f=m:c=="dangerouslySetInnerHTML"?u=m:c=="value"?g=m:c=="checked"?y=m:a&&typeof m!="function"||x[c]===m||Xm(t,c,m,x[c],r);if(u)a||d&&(u.__html==d.__html||u.__html==t.innerHTML)||(t.innerHTML=u.__html),e.__k=[];else if(d&&(t.innerHTML=""),XN(e.type=="template"?t.content:t,hp(f)?f:[f],e,n,i,w=="foreignObject"?"http://www.w3.org/1999/xhtml":r,o,s,o?o[0]:n.__k&&hd(n,0),a,l),o!=null)for(c=o.length;c--;)EM(o[c]);a||(c="value",w=="progress"&&g==null?t.removeAttribute("value"):g!=null&&(g!==t[c]||w=="progress"&&!g||w=="option"&&g!=x[c])&&Xm(t,c,g,x[c],r),c="checked",y!=null&&y!=t[c]&&Xm(t,c,y,x[c],r))}return t}function AM(t,e,n){try{if(typeof t=="function"){var i=typeof t.__u=="function";i&&t.__u(),i&&e==null||(t.__u=t(e))}else t.current=e}catch(r){Wt.__e(r,n)}}function QN(t,e,n){var i,r;if(Wt.unmount&&Wt.unmount(t),(i=t.ref)&&(i.current&&i.current!=t.__e||AM(i,null,e)),(i=t.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(o){Wt.__e(o,e)}i.base=i.__P=null}if(i=t.__k)for(r=0;r<i.length;r++)i[r]&&QN(i[r],e,n||typeof t.type!="function");n||EM(t.__e),t.__c=t.__=t.__e=void 0}function wW(t,e,n){return this.constructor(t,n)}function Rb(t,e,n){var i,r,o;e==document&&(e=document.documentElement),Wt.__&&Wt.__(t,e),i=e.__k,r=[],o=[],TM(e,t=e.__k=M(Tt,null,[t]),i||If,If,e.namespaceURI,i?null:e.firstChild?ky.call(e.childNodes):null,r,i?i.__e:e.firstChild,!1,o),ZN(r,t,o)}function Pc(t){function e(n){var i,r;return this.getChildContext||(i=new Set,(r={})[e.__c]=this,this.getChildContext=function(){return r},this.componentWillUnmount=function(){i=null},this.shouldComponentUpdate=function(o){this.props.value!=o.value&&i.forEach(function(s){s.__e=!0,Ib(s)})},this.sub=function(o){i.add(o);var s=o.componentWillUnmount;o.componentWillUnmount=function(){i&&i.delete(o),s&&s.call(o)}}),n.children}return e.__c="__cC"+GN++,e.__=t,e.Provider=e.__l=(e.Consumer=function(n,i){return n.children(i)}).contextType=e,e}ky=jN.slice,Wt={__e:function(t,e,n,i){for(var r,o,s;e=e.__;)if((r=e.__c)&&!r.__)try{if((o=r.constructor)&&o.getDerivedStateFromError!=null&&(r.setState(o.getDerivedStateFromError(t)),s=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,i||{}),s=r.__d),s)return r.__E=r}catch(a){t=a}throw t}},HN=0,xs.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=ea({},this.state),typeof t=="function"&&(t=t(ea({},n),this.props)),t&&ea(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),Ib(this))},xs.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Ib(this))},xs.prototype.render=Tt,Zl=[],VN=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,$N=function(t,e){return t.__v.__b-e.__v.__b},t0.__r=0,WN=/(PointerCapture)$|Capture$/i,CM=0,Tb=_A(!1),Ab=_A(!0),GN=0;var xc,Fn,vw,bA,Pf=0,JN=[],ei=Wt,SA=ei.__b,MA=ei.__r,CA=ei.diffed,EA=ei.__c,TA=ei.unmount,AA=ei.__;function fp(t,e){ei.__h&&ei.__h(Fn,t,Pf||e),Pf=0;var n=Fn.__H||(Fn.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function xe(t){return Pf=1,eL(tL,t)}function eL(t,e,n){var i=fp(xc++,2);if(i.t=t,!i.__c&&(i.__=[tL(void 0,e),function(a){var l=i.__N?i.__N[0]:i.__[0],c=i.t(l,a);l!==c&&(i.__N=[c,i.__[1]],i.__c.setState({}))}],i.__c=Fn,!Fn.__f)){var r=function(a,l,c){if(!i.__c.__H)return!0;var u=i.__c.__H.__.filter(function(f){return!!f.__c});if(u.every(function(f){return!f.__N}))return!o||o.call(this,a,l,c);var d=i.__c.props!==a;return u.forEach(function(f){if(f.__N){var m=f.__[0];f.__=f.__N,f.__N=void 0,m!==f.__[0]&&(d=!0)}}),o&&o.call(this,a,l,c)||d};Fn.__f=!0;var o=Fn.shouldComponentUpdate,s=Fn.componentWillUpdate;Fn.componentWillUpdate=function(a,l,c){if(this.__e){var u=o;o=void 0,r(a,l,c),o=u}s&&s.call(this,a,l,c)},Fn.shouldComponentUpdate=r}return i.__N||i.__}function ge(t,e){var n=fp(xc++,3);!ei.__s&&IM(n.__H,e)&&(n.__=t,n.u=e,Fn.__H.__h.push(n))}function Ny(t,e){var n=fp(xc++,4);!ei.__s&&IM(n.__H,e)&&(n.__=t,n.u=e,Fn.__h.push(n))}function vt(t){return Pf=5,Rt(function(){return{current:t}},[])}function Rt(t,e){var n=fp(xc++,7);return IM(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function Lt(t,e){return Pf=8,Rt(function(){return t},e)}function Rc(t){var e=Fn.context[t.__c],n=fp(xc++,9);return n.c=t,e?(n.__==null&&(n.__=!0,e.sub(Fn)),e.props.value):t.__}function _W(){for(var t;t=JN.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(gv),t.__H.__h.forEach(Db),t.__H.__h=[]}catch(e){t.__H.__h=[],ei.__e(e,t.__v)}}ei.__b=function(t){Fn=null,SA&&SA(t)},ei.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),AA&&AA(t,e)},ei.__r=function(t){MA&&MA(t),xc=0;var e=(Fn=t.__c).__H;e&&(vw===Fn?(e.__h=[],Fn.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(e.__h.forEach(gv),e.__h.forEach(Db),e.__h=[],xc=0)),vw=Fn},ei.diffed=function(t){CA&&CA(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(JN.push(e)!==1&&bA===ei.requestAnimationFrame||((bA=ei.requestAnimationFrame)||bW)(_W)),e.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),vw=Fn=null},ei.__c=function(t,e){e.some(function(n){try{n.__h.forEach(gv),n.__h=n.__h.filter(function(i){return!i.__||Db(i)})}catch(i){e.some(function(r){r.__h&&(r.__h=[])}),e=[],ei.__e(i,n.__v)}}),EA&&EA(t,e)},ei.unmount=function(t){TA&&TA(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(i){try{gv(i)}catch(r){e=r}}),n.__H=void 0,e&&ei.__e(e,n.__v))};var IA=typeof requestAnimationFrame=="function";function bW(t){var e,n=function(){clearTimeout(i),IA&&cancelAnimationFrame(e),setTimeout(t)},i=setTimeout(n,35);IA&&(e=requestAnimationFrame(n))}function gv(t){var e=Fn,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),Fn=e}function Db(t){var e=Fn;t.__c=t.__(),Fn=e}function IM(t,e){return!t||t.length!==e.length||e.some(function(n,i){return n!==t[i]})}function tL(t,e){return typeof e=="function"?e(t):e}var SW=`/*! tailwindcss v4.1.18 | MIT License | https://tailwindcss.com */
@layer properties;
@layer theme, base, components, utilities;
@layer theme {
  :root, :host {
    --font-sans: ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji",
      "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
    --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono",
      "Courier New", monospace;
    --color-red-500: oklch(63.7% 0.237 25.331);
    --color-yellow-500: oklch(79.5% 0.184 86.047);
    --color-green-500: oklch(72.3% 0.219 149.579);
    --color-teal-500: oklch(70.4% 0.14 182.503);
    --color-blue-500: oklch(62.3% 0.214 259.815);
    --color-indigo-500: oklch(58.5% 0.233 277.117);
    --color-purple-500: oklch(62.7% 0.265 303.9);
    --color-pink-500: oklch(65.6% 0.241 354.308);
    --color-gray-300: oklch(87.2% 0.01 258.338);
    --color-white: #fff;
    --spacing: 0.25rem;
    --container-sm: 24rem;
    --text-xs: 0.75rem;
    --text-xs--line-height: calc(1 / 0.75);
    --text-sm: 0.875rem;
    --text-sm--line-height: calc(1.25 / 0.875);
    --text-base: 1rem;
    --text-base--line-height: calc(1.5 / 1);
    --text-lg: 1.125rem;
    --text-lg--line-height: calc(1.75 / 1.125);
    --text-xl: 1.25rem;
    --text-xl--line-height: calc(1.75 / 1.25);
    --font-weight-medium: 500;
    --font-weight-semibold: 600;
    --font-weight-bold: 700;
    --leading-relaxed: 1.625;
    --radius-md: 0.375rem;
    --radius-lg: 0.5rem;
    --radius-xl: 0.75rem;
    --radius-2xl: 1rem;
    --ease-out: cubic-bezier(0, 0, 0.2, 1);
    --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);
    --animate-spin: spin 1s linear infinite;
    --animate-pulse: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    --default-transition-duration: 150ms;
    --default-transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    --default-font-family: var(--font-sans);
    --default-mono-font-family: var(--font-mono);
    --color-bg-app: var(--ep-background-app);
    --color-bg-surface: var(--ep-background-surface);
    --color-bg-surface-alt: var(--ep-background-surface-alt);
    --color-bg-elevated: var(--ep-background-elevated);
    --color-bg-overlay: var(--ep-background-overlay);
    --color-bg-input: var(--ep-background-input);
    --color-fg-primary: var(--ep-foreground-primary);
    --color-fg-secondary: var(--ep-foreground-secondary);
    --color-fg-muted: var(--ep-foreground-muted);
    --color-fg-disabled: var(--ep-foreground-disabled);
    --color-fg-on-accent: var(--ep-foreground-on-accent);
    --color-border-default: var(--ep-border-default);
    --color-border-subtle: var(--ep-border-subtle);
    --color-border-strong: var(--ep-border-strong);
    --color-accent: var(--ep-accent-primary);
    --color-accent-hover: var(--ep-accent-primary-hover);
    --color-accent-light: var(--ep-accent-primary-light);
    --color-accent-fg: var(--ep-accent-primary-foreground);
    --color-interactive-hover: var(--ep-interactive-hover);
    --color-interactive-active: var(--ep-interactive-active);
    --color-interactive-selected: var(--ep-interactive-selected);
    --color-interactive-focus-ring: var(--ep-interactive-focus-ring);
    --color-state-error: var(--ep-state-error);
    --color-state-error-light: var(--ep-state-error-light);
    --color-state-info-light: var(--ep-state-info-light);
    --color-tooltip-bg: var(--ep-tooltip-background);
    --color-tooltip-fg: var(--ep-tooltip-foreground);
  }
}
@layer base {
  *, ::after, ::before, ::backdrop, ::file-selector-button {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    border: 0 solid;
  }
  html, :host {
    line-height: 1.5;
    -webkit-text-size-adjust: 100%;
    -moz-tab-size: 4;
      -o-tab-size: 4;
         tab-size: 4;
    font-family: var(--default-font-family, ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji");
    font-feature-settings: var(--default-font-feature-settings, normal);
    font-variation-settings: var(--default-font-variation-settings, normal);
    -webkit-tap-highlight-color: transparent;
  }
  hr {
    height: 0;
    color: inherit;
    border-top-width: 1px;
  }
  abbr:where([title]) {
    -webkit-text-decoration: underline dotted;
    text-decoration: underline dotted;
  }
  h1, h2, h3, h4, h5, h6 {
    font-size: inherit;
    font-weight: inherit;
  }
  a {
    color: inherit;
    -webkit-text-decoration: inherit;
    text-decoration: inherit;
  }
  b, strong {
    font-weight: bolder;
  }
  code, kbd, samp, pre {
    font-family: var(--default-mono-font-family, ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace);
    font-feature-settings: var(--default-mono-font-feature-settings, normal);
    font-variation-settings: var(--default-mono-font-variation-settings, normal);
    font-size: 1em;
  }
  small {
    font-size: 80%;
  }
  sub, sup {
    font-size: 75%;
    line-height: 0;
    position: relative;
    vertical-align: baseline;
  }
  sub {
    bottom: -0.25em;
  }
  sup {
    top: -0.5em;
  }
  table {
    text-indent: 0;
    border-color: inherit;
    border-collapse: collapse;
  }
  :-moz-focusring {
    outline: auto;
  }
  progress {
    vertical-align: baseline;
  }
  summary {
    display: list-item;
  }
  ol, ul, menu {
    list-style: none;
  }
  img, svg, video, canvas, audio, iframe, embed, object {
    display: block;
    vertical-align: middle;
  }
  img, video {
    max-width: 100%;
    height: auto;
  }
  button, input, select, optgroup, textarea, ::file-selector-button {
    font: inherit;
    font-feature-settings: inherit;
    font-variation-settings: inherit;
    letter-spacing: inherit;
    color: inherit;
    border-radius: 0;
    background-color: transparent;
    opacity: 1;
  }
  :where(select:is([multiple], [size])) optgroup {
    font-weight: bolder;
  }
  :where(select:is([multiple], [size])) optgroup option {
    padding-inline-start: 20px;
  }
  ::file-selector-button {
    margin-inline-end: 4px;
  }
  ::-moz-placeholder {
    opacity: 1;
  }
  ::placeholder {
    opacity: 1;
  }
  @supports (not (-webkit-appearance: -apple-pay-button))  or (contain-intrinsic-size: 1px) {
    ::-moz-placeholder {
      color: currentcolor;
      @supports (color: color-mix(in lab, red, red)) {
        color: color-mix(in oklab, currentcolor 50%, transparent);
      }
    }
    ::placeholder {
      color: currentcolor;
      @supports (color: color-mix(in lab, red, red)) {
        color: color-mix(in oklab, currentcolor 50%, transparent);
      }
    }
  }
  textarea {
    resize: vertical;
  }
  ::-webkit-search-decoration {
    -webkit-appearance: none;
  }
  ::-webkit-date-and-time-value {
    min-height: 1lh;
    text-align: inherit;
  }
  ::-webkit-datetime-edit {
    display: inline-flex;
  }
  ::-webkit-datetime-edit-fields-wrapper {
    padding: 0;
  }
  ::-webkit-datetime-edit, ::-webkit-datetime-edit-year-field, ::-webkit-datetime-edit-month-field, ::-webkit-datetime-edit-day-field, ::-webkit-datetime-edit-hour-field, ::-webkit-datetime-edit-minute-field, ::-webkit-datetime-edit-second-field, ::-webkit-datetime-edit-millisecond-field, ::-webkit-datetime-edit-meridiem-field {
    padding-block: 0;
  }
  ::-webkit-calendar-picker-indicator {
    line-height: 1;
  }
  :-moz-ui-invalid {
    box-shadow: none;
  }
  button, input:where([type="button"], [type="reset"], [type="submit"]), ::file-selector-button {
    -webkit-appearance: button;
       -moz-appearance: button;
            appearance: button;
  }
  ::-webkit-inner-spin-button, ::-webkit-outer-spin-button {
    height: auto;
  }
  [hidden]:where(:not([hidden="until-found"])) {
    display: none !important;
  }
}
@layer utilities {
  .pointer-events-auto {
    pointer-events: auto;
  }
  .pointer-events-none {
    pointer-events: none;
  }
  .visible {
    visibility: visible;
  }
  .absolute {
    position: absolute;
  }
  .fixed {
    position: fixed;
  }
  .relative {
    position: relative;
  }
  .static {
    position: static;
  }
  .sticky {
    position: sticky;
  }
  .inset-0 {
    inset: calc(var(--spacing) * 0);
  }
  .inset-x-0 {
    inset-inline: calc(var(--spacing) * 0);
  }
  .inset-y-0 {
    inset-block: calc(var(--spacing) * 0);
  }
  .top-0 {
    top: calc(var(--spacing) * 0);
  }
  .top-1\\/2 {
    top: calc(1/2 * 100%);
  }
  .top-4 {
    top: calc(var(--spacing) * 4);
  }
  .top-6 {
    top: calc(var(--spacing) * 6);
  }
  .right-0 {
    right: calc(var(--spacing) * 0);
  }
  .right-1 {
    right: calc(var(--spacing) * 1);
  }
  .right-4 {
    right: calc(var(--spacing) * 4);
  }
  .bottom-0 {
    bottom: calc(var(--spacing) * 0);
  }
  .left-0 {
    left: calc(var(--spacing) * 0);
  }
  .left-1\\/2 {
    left: calc(1/2 * 100%);
  }
  .z-10 {
    z-index: 10;
  }
  .z-40 {
    z-index: 40;
  }
  .z-50 {
    z-index: 50;
  }
  .z-100 {
    z-index: 100;
  }
  .col-start-1 {
    grid-column-start: 1;
  }
  .row-start-1 {
    grid-row-start: 1;
  }
  .container {
    width: 100%;
    @media (width >= 40rem) {
      max-width: 40rem;
    }
    @media (width >= 48rem) {
      max-width: 48rem;
    }
    @media (width >= 64rem) {
      max-width: 64rem;
    }
    @media (width >= 80rem) {
      max-width: 80rem;
    }
    @media (width >= 96rem) {
      max-width: 96rem;
    }
  }
  .mx-4 {
    margin-inline: calc(var(--spacing) * 4);
  }
  .my-2 {
    margin-block: calc(var(--spacing) * 2);
  }
  .my-4 {
    margin-block: calc(var(--spacing) * 4);
  }
  .mt-0\\.5 {
    margin-top: calc(var(--spacing) * 0.5);
  }
  .mt-1 {
    margin-top: calc(var(--spacing) * 1);
  }
  .mt-2 {
    margin-top: calc(var(--spacing) * 2);
  }
  .mt-3 {
    margin-top: calc(var(--spacing) * 3);
  }
  .mt-4 {
    margin-top: calc(var(--spacing) * 4);
  }
  .mt-5 {
    margin-top: calc(var(--spacing) * 5);
  }
  .mt-6 {
    margin-top: calc(var(--spacing) * 6);
  }
  .mr-2 {
    margin-right: calc(var(--spacing) * 2);
  }
  .mb-1 {
    margin-bottom: calc(var(--spacing) * 1);
  }
  .mb-1\\.5 {
    margin-bottom: calc(var(--spacing) * 1.5);
  }
  .mb-2 {
    margin-bottom: calc(var(--spacing) * 2);
  }
  .mb-3 {
    margin-bottom: calc(var(--spacing) * 3);
  }
  .mb-4 {
    margin-bottom: calc(var(--spacing) * 4);
  }
  .mb-6 {
    margin-bottom: calc(var(--spacing) * 6);
  }
  .ml-1 {
    margin-left: calc(var(--spacing) * 1);
  }
  .block {
    display: block;
  }
  .contents {
    display: contents;
  }
  .flex {
    display: flex;
  }
  .grid {
    display: grid;
  }
  .hidden {
    display: none;
  }
  .inline {
    display: inline;
  }
  .inline-block {
    display: inline-block;
  }
  .inline-flex {
    display: inline-flex;
  }
  .h-1 {
    height: calc(var(--spacing) * 1);
  }
  .h-1\\.5 {
    height: calc(var(--spacing) * 1.5);
  }
  .h-2 {
    height: calc(var(--spacing) * 2);
  }
  .h-3 {
    height: calc(var(--spacing) * 3);
  }
  .h-3\\.5 {
    height: calc(var(--spacing) * 3.5);
  }
  .h-4 {
    height: calc(var(--spacing) * 4);
  }
  .h-5 {
    height: calc(var(--spacing) * 5);
  }
  .h-6 {
    height: calc(var(--spacing) * 6);
  }
  .h-7 {
    height: calc(var(--spacing) * 7);
  }
  .h-8 {
    height: calc(var(--spacing) * 8);
  }
  .h-9 {
    height: calc(var(--spacing) * 9);
  }
  .h-10 {
    height: calc(var(--spacing) * 10);
  }
  .h-16 {
    height: calc(var(--spacing) * 16);
  }
  .h-18 {
    height: calc(var(--spacing) * 18);
  }
  .h-\\[32px\\] {
    height: 32px;
  }
  .h-full {
    height: 100%;
  }
  .h-px {
    height: 1px;
  }
  .max-h-48 {
    max-height: calc(var(--spacing) * 48);
  }
  .max-h-60 {
    max-height: calc(var(--spacing) * 60);
  }
  .min-h-0 {
    min-height: calc(var(--spacing) * 0);
  }
  .\\!w-full {
    width: 100% !important;
  }
  .w-2 {
    width: calc(var(--spacing) * 2);
  }
  .w-3 {
    width: calc(var(--spacing) * 3);
  }
  .w-3\\.5 {
    width: calc(var(--spacing) * 3.5);
  }
  .w-4 {
    width: calc(var(--spacing) * 4);
  }
  .w-5 {
    width: calc(var(--spacing) * 5);
  }
  .w-6 {
    width: calc(var(--spacing) * 6);
  }
  .w-8 {
    width: calc(var(--spacing) * 8);
  }
  .w-9 {
    width: calc(var(--spacing) * 9);
  }
  .w-10 {
    width: calc(var(--spacing) * 10);
  }
  .w-12 {
    width: calc(var(--spacing) * 12);
  }
  .w-16 {
    width: calc(var(--spacing) * 16);
  }
  .w-18 {
    width: calc(var(--spacing) * 18);
  }
  .w-32 {
    width: calc(var(--spacing) * 32);
  }
  .w-36 {
    width: calc(var(--spacing) * 36);
  }
  .w-\\[32px\\] {
    width: 32px;
  }
  .w-auto {
    width: auto;
  }
  .w-full {
    width: 100%;
  }
  .w-px {
    width: 1px;
  }
  .max-w-\\[150px\\] {
    max-width: 150px;
  }
  .max-w-\\[240px\\] {
    max-width: 240px;
  }
  .max-w-sm {
    max-width: var(--container-sm);
  }
  .min-w-0 {
    min-width: calc(var(--spacing) * 0);
  }
  .min-w-\\[8rem\\] {
    min-width: 8rem;
  }
  .min-w-\\[32px\\] {
    min-width: 32px;
  }
  .min-w-\\[120px\\] {
    min-width: 120px;
  }
  .min-w-\\[200px\\] {
    min-width: 200px;
  }
  .flex-1 {
    flex: 1;
  }
  .flex-shrink-0 {
    flex-shrink: 0;
  }
  .shrink-0 {
    flex-shrink: 0;
  }
  .-translate-x-1\\/2 {
    --tw-translate-x: calc(calc(1/2 * 100%) * -1);
    translate: var(--tw-translate-x) var(--tw-translate-y);
  }
  .translate-x-\\[1px\\] {
    --tw-translate-x: 1px;
    translate: var(--tw-translate-x) var(--tw-translate-y);
  }
  .-translate-y-1\\/2 {
    --tw-translate-y: calc(calc(1/2 * 100%) * -1);
    translate: var(--tw-translate-x) var(--tw-translate-y);
  }
  .translate-y-\\[1px\\] {
    --tw-translate-y: 1px;
    translate: var(--tw-translate-x) var(--tw-translate-y);
  }
  .scale-95 {
    --tw-scale-x: 95%;
    --tw-scale-y: 95%;
    --tw-scale-z: 95%;
    scale: var(--tw-scale-x) var(--tw-scale-y);
  }
  .scale-100 {
    --tw-scale-x: 100%;
    --tw-scale-y: 100%;
    --tw-scale-z: 100%;
    scale: var(--tw-scale-x) var(--tw-scale-y);
  }
  .rotate-45 {
    rotate: 45deg;
  }
  .transform {
    transform: var(--tw-rotate-x,) var(--tw-rotate-y,) var(--tw-rotate-z,) var(--tw-skew-x,) var(--tw-skew-y,);
  }
  .animate-pulse {
    animation: var(--animate-pulse);
  }
  .animate-spin {
    animation: var(--animate-spin);
  }
  .cursor-default {
    cursor: default;
  }
  .cursor-grab {
    cursor: grab;
  }
  .cursor-not-allowed {
    cursor: not-allowed;
  }
  .cursor-pointer {
    cursor: pointer;
  }
  .touch-none {
    touch-action: none;
  }
  .resize {
    resize: both;
  }
  .appearance-none {
    -webkit-appearance: none;
       -moz-appearance: none;
            appearance: none;
  }
  .grid-cols-2 {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
  .grid-cols-6 {
    grid-template-columns: repeat(6, minmax(0, 1fr));
  }
  .flex-col {
    flex-direction: column;
  }
  .flex-row {
    flex-direction: row;
  }
  .flex-wrap {
    flex-wrap: wrap;
  }
  .items-center {
    align-items: center;
  }
  .items-end {
    align-items: flex-end;
  }
  .items-start {
    align-items: flex-start;
  }
  .justify-between {
    justify-content: space-between;
  }
  .justify-center {
    justify-content: center;
  }
  .justify-end {
    justify-content: flex-end;
  }
  .justify-start {
    justify-content: flex-start;
  }
  .gap-1 {
    gap: calc(var(--spacing) * 1);
  }
  .gap-2 {
    gap: calc(var(--spacing) * 2);
  }
  .gap-3 {
    gap: calc(var(--spacing) * 3);
  }
  .gap-4 {
    gap: calc(var(--spacing) * 4);
  }
  .space-y-2 {
    :where(& > :not(:last-child)) {
      --tw-space-y-reverse: 0;
      margin-block-start: calc(calc(var(--spacing) * 2) * var(--tw-space-y-reverse));
      margin-block-end: calc(calc(var(--spacing) * 2) * calc(1 - var(--tw-space-y-reverse)));
    }
  }
  .space-y-3 {
    :where(& > :not(:last-child)) {
      --tw-space-y-reverse: 0;
      margin-block-start: calc(calc(var(--spacing) * 3) * var(--tw-space-y-reverse));
      margin-block-end: calc(calc(var(--spacing) * 3) * calc(1 - var(--tw-space-y-reverse)));
    }
  }
  .space-y-4 {
    :where(& > :not(:last-child)) {
      --tw-space-y-reverse: 0;
      margin-block-start: calc(calc(var(--spacing) * 4) * var(--tw-space-y-reverse));
      margin-block-end: calc(calc(var(--spacing) * 4) * calc(1 - var(--tw-space-y-reverse)));
    }
  }
  .space-y-6 {
    :where(& > :not(:last-child)) {
      --tw-space-y-reverse: 0;
      margin-block-start: calc(calc(var(--spacing) * 6) * var(--tw-space-y-reverse));
      margin-block-end: calc(calc(var(--spacing) * 6) * calc(1 - var(--tw-space-y-reverse)));
    }
  }
  .gap-x-1 {
    -moz-column-gap: calc(var(--spacing) * 1);
         column-gap: calc(var(--spacing) * 1);
  }
  .space-x-2 {
    :where(& > :not(:last-child)) {
      --tw-space-x-reverse: 0;
      margin-inline-start: calc(calc(var(--spacing) * 2) * var(--tw-space-x-reverse));
      margin-inline-end: calc(calc(var(--spacing) * 2) * calc(1 - var(--tw-space-x-reverse)));
    }
  }
  .space-x-3 {
    :where(& > :not(:last-child)) {
      --tw-space-x-reverse: 0;
      margin-inline-start: calc(calc(var(--spacing) * 3) * var(--tw-space-x-reverse));
      margin-inline-end: calc(calc(var(--spacing) * 3) * calc(1 - var(--tw-space-x-reverse)));
    }
  }
  .gap-y-4 {
    row-gap: calc(var(--spacing) * 4);
  }
  .divide-y {
    :where(& > :not(:last-child)) {
      --tw-divide-y-reverse: 0;
      border-bottom-style: var(--tw-border-style);
      border-top-style: var(--tw-border-style);
      border-top-width: calc(1px * var(--tw-divide-y-reverse));
      border-bottom-width: calc(1px * calc(1 - var(--tw-divide-y-reverse)));
    }
  }
  .divide-border-subtle {
    :where(& > :not(:last-child)) {
      border-color: var(--color-border-subtle);
    }
  }
  .truncate {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
  .overflow-auto {
    overflow: auto;
  }
  .overflow-hidden {
    overflow: hidden;
  }
  .overflow-x-auto {
    overflow-x: auto;
  }
  .overflow-y-auto {
    overflow-y: auto;
  }
  .rounded {
    border-radius: 0.25rem;
  }
  .rounded-\\[3px\\] {
    border-radius: 3px;
  }
  .rounded-full {
    border-radius: calc(infinity * 1px);
  }
  .rounded-lg {
    border-radius: var(--radius-lg);
  }
  .rounded-md {
    border-radius: var(--radius-md);
  }
  .rounded-none {
    border-radius: 0;
  }
  .rounded-xl {
    border-radius: var(--radius-xl);
  }
  .rounded-t-2xl {
    border-top-left-radius: var(--radius-2xl);
    border-top-right-radius: var(--radius-2xl);
  }
  .rounded-t-lg {
    border-top-left-radius: var(--radius-lg);
    border-top-right-radius: var(--radius-lg);
  }
  .rounded-l-md {
    border-top-left-radius: var(--radius-md);
    border-bottom-left-radius: var(--radius-md);
  }
  .rounded-r-md {
    border-top-right-radius: var(--radius-md);
    border-bottom-right-radius: var(--radius-md);
  }
  .border {
    border-style: var(--tw-border-style);
    border-width: 1px;
  }
  .border-0 {
    border-style: var(--tw-border-style);
    border-width: 0px;
  }
  .border-2 {
    border-style: var(--tw-border-style);
    border-width: 2px;
  }
  .border-3 {
    border-style: var(--tw-border-style);
    border-width: 3px;
  }
  .border-4 {
    border-style: var(--tw-border-style);
    border-width: 4px;
  }
  .border-t {
    border-top-style: var(--tw-border-style);
    border-top-width: 1px;
  }
  .border-r {
    border-right-style: var(--tw-border-style);
    border-right-width: 1px;
  }
  .border-r-0 {
    border-right-style: var(--tw-border-style);
    border-right-width: 0px;
  }
  .border-b {
    border-bottom-style: var(--tw-border-style);
    border-bottom-width: 1px;
  }
  .border-b-2 {
    border-bottom-style: var(--tw-border-style);
    border-bottom-width: 2px;
  }
  .border-l {
    border-left-style: var(--tw-border-style);
    border-left-width: 1px;
  }
  .border-none {
    --tw-border-style: none;
    border-style: none;
  }
  .border-\\[\\#cfd4da\\] {
    border-color: #cfd4da;
  }
  .border-accent {
    border-color: var(--color-accent);
  }
  .border-border-default {
    border-color: var(--color-border-default);
  }
  .border-border-strong {
    border-color: var(--color-border-strong);
  }
  .border-border-subtle {
    border-color: var(--color-border-subtle);
  }
  .border-gray-300 {
    border-color: var(--color-gray-300);
  }
  .border-state-error {
    border-color: var(--color-state-error);
  }
  .border-transparent {
    border-color: transparent;
  }
  .border-t-accent {
    border-top-color: var(--color-accent);
  }
  .border-r-accent {
    border-right-color: var(--color-accent);
  }
  .border-b-accent {
    border-bottom-color: var(--color-accent);
  }
  .border-b-transparent {
    border-bottom-color: transparent;
  }
  .bg-\\[\\#f8f9fa\\] {
    background-color: #f8f9fa;
  }
  .bg-accent {
    background-color: var(--color-accent);
  }
  .bg-accent-light {
    background-color: var(--color-accent-light);
  }
  .bg-bg-app {
    background-color: var(--color-bg-app);
  }
  .bg-bg-elevated {
    background-color: var(--color-bg-elevated);
  }
  .bg-bg-input {
    background-color: var(--color-bg-input);
  }
  .bg-bg-overlay {
    background-color: var(--color-bg-overlay);
  }
  .bg-bg-surface {
    background-color: var(--color-bg-surface);
  }
  .bg-bg-surface-alt {
    background-color: var(--color-bg-surface-alt);
  }
  .bg-bg-surface\\/80 {
    background-color: var(--color-bg-surface);
    @supports (color: color-mix(in lab, red, red)) {
      background-color: color-mix(in oklab, var(--color-bg-surface) 80%, transparent);
    }
  }
  .bg-blue-500 {
    background-color: var(--color-blue-500);
  }
  .bg-border-default {
    background-color: var(--color-border-default);
  }
  .bg-border-subtle {
    background-color: var(--color-border-subtle);
  }
  .bg-green-500 {
    background-color: var(--color-green-500);
  }
  .bg-indigo-500 {
    background-color: var(--color-indigo-500);
  }
  .bg-inherit {
    background-color: inherit;
  }
  .bg-interactive-hover {
    background-color: var(--color-interactive-hover);
  }
  .bg-interactive-selected {
    background-color: var(--color-interactive-selected);
  }
  .bg-pink-500 {
    background-color: var(--color-pink-500);
  }
  .bg-purple-500 {
    background-color: var(--color-purple-500);
  }
  .bg-red-500 {
    background-color: var(--color-red-500);
  }
  .bg-state-error-light {
    background-color: var(--color-state-error-light);
  }
  .bg-state-info-light {
    background-color: var(--color-state-info-light);
  }
  .bg-teal-500 {
    background-color: var(--color-teal-500);
  }
  .bg-tooltip-bg {
    background-color: var(--color-tooltip-bg);
  }
  .bg-transparent {
    background-color: transparent;
  }
  .bg-white {
    background-color: var(--color-white);
  }
  .bg-yellow-500 {
    background-color: var(--color-yellow-500);
  }
  .p-0 {
    padding: calc(var(--spacing) * 0);
  }
  .p-1 {
    padding: calc(var(--spacing) * 1);
  }
  .p-1\\.5 {
    padding: calc(var(--spacing) * 1.5);
  }
  .p-2 {
    padding: calc(var(--spacing) * 2);
  }
  .p-3 {
    padding: calc(var(--spacing) * 3);
  }
  .p-4 {
    padding: calc(var(--spacing) * 4);
  }
  .p-5 {
    padding: calc(var(--spacing) * 5);
  }
  .p-6 {
    padding: calc(var(--spacing) * 6);
  }
  .p-8 {
    padding: calc(var(--spacing) * 8);
  }
  .p-\\[5px\\] {
    padding: 5px;
  }
  .px-1 {
    padding-inline: calc(var(--spacing) * 1);
  }
  .px-2 {
    padding-inline: calc(var(--spacing) * 2);
  }
  .px-3 {
    padding-inline: calc(var(--spacing) * 3);
  }
  .px-4 {
    padding-inline: calc(var(--spacing) * 4);
  }
  .px-5 {
    padding-inline: calc(var(--spacing) * 5);
  }
  .px-6 {
    padding-inline: calc(var(--spacing) * 6);
  }
  .py-1 {
    padding-block: calc(var(--spacing) * 1);
  }
  .py-1\\.5 {
    padding-block: calc(var(--spacing) * 1.5);
  }
  .py-2 {
    padding-block: calc(var(--spacing) * 2);
  }
  .py-2\\.5 {
    padding-block: calc(var(--spacing) * 2.5);
  }
  .py-3 {
    padding-block: calc(var(--spacing) * 3);
  }
  .py-4 {
    padding-block: calc(var(--spacing) * 4);
  }
  .pt-2 {
    padding-top: calc(var(--spacing) * 2);
  }
  .pt-4 {
    padding-top: calc(var(--spacing) * 4);
  }
  .pr-2 {
    padding-right: calc(var(--spacing) * 2);
  }
  .pr-3 {
    padding-right: calc(var(--spacing) * 3);
  }
  .pr-7 {
    padding-right: calc(var(--spacing) * 7);
  }
  .pr-9 {
    padding-right: calc(var(--spacing) * 9);
  }
  .pb-3 {
    padding-bottom: calc(var(--spacing) * 3);
  }
  .pl-2 {
    padding-left: calc(var(--spacing) * 2);
  }
  .pl-3 {
    padding-left: calc(var(--spacing) * 3);
  }
  .pl-4 {
    padding-left: calc(var(--spacing) * 4);
  }
  .pl-8 {
    padding-left: calc(var(--spacing) * 8);
  }
  .text-center {
    text-align: center;
  }
  .text-left {
    text-align: left;
  }
  .text-right {
    text-align: right;
  }
  .text-base {
    font-size: var(--text-base);
    line-height: var(--tw-leading, var(--text-base--line-height));
  }
  .text-lg {
    font-size: var(--text-lg);
    line-height: var(--tw-leading, var(--text-lg--line-height));
  }
  .text-sm {
    font-size: var(--text-sm);
    line-height: var(--tw-leading, var(--text-sm--line-height));
  }
  .text-xl {
    font-size: var(--text-xl);
    line-height: var(--tw-leading, var(--text-xl--line-height));
  }
  .text-xs {
    font-size: var(--text-xs);
    line-height: var(--tw-leading, var(--text-xs--line-height));
  }
  .text-\\[13px\\] {
    font-size: 13px;
  }
  .leading-none {
    --tw-leading: 1;
    line-height: 1;
  }
  .leading-relaxed {
    --tw-leading: var(--leading-relaxed);
    line-height: var(--leading-relaxed);
  }
  .font-bold {
    --tw-font-weight: var(--font-weight-bold);
    font-weight: var(--font-weight-bold);
  }
  .font-medium {
    --tw-font-weight: var(--font-weight-medium);
    font-weight: var(--font-weight-medium);
  }
  .font-semibold {
    --tw-font-weight: var(--font-weight-semibold);
    font-weight: var(--font-weight-semibold);
  }
  .whitespace-nowrap {
    white-space: nowrap;
  }
  .text-accent {
    color: var(--color-accent);
  }
  .text-accent-fg {
    color: var(--color-accent-fg);
  }
  .text-fg-disabled {
    color: var(--color-fg-disabled);
  }
  .text-fg-muted {
    color: var(--color-fg-muted);
  }
  .text-fg-on-accent {
    color: var(--color-fg-on-accent);
  }
  .text-fg-primary {
    color: var(--color-fg-primary);
  }
  .text-fg-secondary {
    color: var(--color-fg-secondary);
  }
  .text-state-error {
    color: var(--color-state-error);
  }
  .text-tooltip-fg {
    color: var(--color-tooltip-fg);
  }
  .text-white {
    color: var(--color-white);
  }
  .uppercase {
    text-transform: uppercase;
  }
  .italic {
    font-style: italic;
  }
  .underline {
    text-decoration-line: underline;
  }
  .placeholder-fg-muted {
    &::-moz-placeholder {
      color: var(--color-fg-muted);
    }
    &::placeholder {
      color: var(--color-fg-muted);
    }
  }
  .accent-accent {
    accent-color: var(--color-accent);
  }
  .opacity-0 {
    opacity: 0%;
  }
  .opacity-50 {
    opacity: 50%;
  }
  .opacity-100 {
    opacity: 100%;
  }
  .shadow {
    --tw-shadow: 0 1px 3px 0 var(--tw-shadow-color, rgb(0 0 0 / 0.1)), 0 1px 2px -1px var(--tw-shadow-color, rgb(0 0 0 / 0.1));
    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
  }
  .shadow-2xl {
    --tw-shadow: 0 25px 50px -12px var(--tw-shadow-color, rgb(0 0 0 / 0.25));
    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
  }
  .shadow-lg {
    --tw-shadow: 0 10px 15px -3px var(--tw-shadow-color, rgb(0 0 0 / 0.1)), 0 4px 6px -4px var(--tw-shadow-color, rgb(0 0 0 / 0.1));
    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
  }
  .shadow-md {
    --tw-shadow: 0 4px 6px -1px var(--tw-shadow-color, rgb(0 0 0 / 0.1)), 0 2px 4px -2px var(--tw-shadow-color, rgb(0 0 0 / 0.1));
    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
  }
  .shadow-sm {
    --tw-shadow: 0 1px 3px 0 var(--tw-shadow-color, rgb(0 0 0 / 0.1)), 0 1px 2px -1px var(--tw-shadow-color, rgb(0 0 0 / 0.1));
    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
  }
  .ring {
    --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);
    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
  }
  .ring-1 {
    --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);
    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
  }
  .ring-2 {
    --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);
    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
  }
  .ring-accent {
    --tw-ring-color: var(--color-accent);
  }
  .ring-border-default {
    --tw-ring-color: var(--color-border-default);
  }
  .ring-interactive-focus-ring {
    --tw-ring-color: var(--color-interactive-focus-ring);
  }
  .outline {
    outline-style: var(--tw-outline-style);
    outline-width: 1px;
  }
  .outline-1 {
    outline-style: var(--tw-outline-style);
    outline-width: 1px;
  }
  .outline-2 {
    outline-style: var(--tw-outline-style);
    outline-width: 2px;
  }
  .-outline-offset-1 {
    outline-offset: calc(1px * -1);
  }
  .outline-offset-2 {
    outline-offset: 2px;
  }
  .outline-accent {
    outline-color: var(--color-accent);
  }
  .outline-border-default {
    outline-color: var(--color-border-default);
  }
  .backdrop-blur {
    --tw-backdrop-blur: blur(8px);
    backdrop-filter: var(--tw-backdrop-blur,) var(--tw-backdrop-brightness,) var(--tw-backdrop-contrast,) var(--tw-backdrop-grayscale,) var(--tw-backdrop-hue-rotate,) var(--tw-backdrop-invert,) var(--tw-backdrop-opacity,) var(--tw-backdrop-saturate,) var(--tw-backdrop-sepia,);
  }
  .transition {
    transition-property: color, background-color, border-color, outline-color, text-decoration-color, fill, stroke, --tw-gradient-from, --tw-gradient-via, --tw-gradient-to, opacity, box-shadow, transform, translate, scale, rotate, filter, backdrop-filter, display, content-visibility, overlay, pointer-events;
    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));
    transition-duration: var(--tw-duration, var(--default-transition-duration));
  }
  .transition-\\[height\\] {
    transition-property: height;
    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));
    transition-duration: var(--tw-duration, var(--default-transition-duration));
  }
  .transition-all {
    transition-property: all;
    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));
    transition-duration: var(--tw-duration, var(--default-transition-duration));
  }
  .transition-colors {
    transition-property: color, background-color, border-color, outline-color, text-decoration-color, fill, stroke, --tw-gradient-from, --tw-gradient-via, --tw-gradient-to;
    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));
    transition-duration: var(--tw-duration, var(--default-transition-duration));
  }
  .transition-opacity {
    transition-property: opacity;
    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));
    transition-duration: var(--tw-duration, var(--default-transition-duration));
  }
  .transition-transform {
    transition-property: transform, translate, scale, rotate;
    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));
    transition-duration: var(--tw-duration, var(--default-transition-duration));
  }
  .duration-150 {
    --tw-duration: 150ms;
    transition-duration: 150ms;
  }
  .duration-200 {
    --tw-duration: 200ms;
    transition-duration: 200ms;
  }
  .duration-300 {
    --tw-duration: 300ms;
    transition-duration: 300ms;
  }
  .ease-in-out {
    --tw-ease: var(--ease-in-out);
    transition-timing-function: var(--ease-in-out);
  }
  .ease-out {
    --tw-ease: var(--ease-out);
    transition-timing-function: var(--ease-out);
  }
  .outline-none {
    --tw-outline-style: none;
    outline-style: none;
  }
  .select-none {
    -webkit-user-select: none;
    -moz-user-select: none;
         user-select: none;
  }
  .group-hover\\:opacity-100 {
    &:is(:where(.group):hover *) {
      @media (hover: hover) {
        opacity: 100%;
      }
    }
  }
  .peer-checked\\:opacity-100 {
    &:is(:where(.peer):checked ~ *) {
      opacity: 100%;
    }
  }
  .placeholder\\:text-fg-muted {
    &::-moz-placeholder {
      color: var(--color-fg-muted);
    }
    &::placeholder {
      color: var(--color-fg-muted);
    }
  }
  .first\\:mt-0 {
    &:first-child {
      margin-top: calc(var(--spacing) * 0);
    }
  }
  .checked\\:border-accent {
    &:checked {
      border-color: var(--color-accent);
    }
  }
  .checked\\:bg-accent {
    &:checked {
      background-color: var(--color-accent);
    }
  }
  .hover\\:border-b-accent {
    &:hover {
      @media (hover: hover) {
        border-bottom-color: var(--color-accent);
      }
    }
  }
  .hover\\:border-b-fg-muted {
    &:hover {
      @media (hover: hover) {
        border-bottom-color: var(--color-fg-muted);
      }
    }
  }
  .hover\\:\\!bg-accent-hover {
    &:hover {
      @media (hover: hover) {
        background-color: var(--color-accent-hover) !important;
      }
    }
  }
  .hover\\:bg-accent {
    &:hover {
      @media (hover: hover) {
        background-color: var(--color-accent);
      }
    }
  }
  .hover\\:bg-accent-hover {
    &:hover {
      @media (hover: hover) {
        background-color: var(--color-accent-hover);
      }
    }
  }
  .hover\\:bg-border-default {
    &:hover {
      @media (hover: hover) {
        background-color: var(--color-border-default);
      }
    }
  }
  .hover\\:bg-interactive-hover {
    &:hover {
      @media (hover: hover) {
        background-color: var(--color-interactive-hover);
      }
    }
  }
  .hover\\:bg-transparent {
    &:hover {
      @media (hover: hover) {
        background-color: transparent;
      }
    }
  }
  .hover\\:text-accent-hover {
    &:hover {
      @media (hover: hover) {
        color: var(--color-accent-hover);
      }
    }
  }
  .hover\\:text-fg-on-accent {
    &:hover {
      @media (hover: hover) {
        color: var(--color-fg-on-accent);
      }
    }
  }
  .hover\\:text-fg-primary {
    &:hover {
      @media (hover: hover) {
        color: var(--color-fg-primary);
      }
    }
  }
  .hover\\:text-fg-secondary {
    &:hover {
      @media (hover: hover) {
        color: var(--color-fg-secondary);
      }
    }
  }
  .hover\\:shadow-md {
    &:hover {
      @media (hover: hover) {
        --tw-shadow: 0 4px 6px -1px var(--tw-shadow-color, rgb(0 0 0 / 0.1)), 0 2px 4px -2px var(--tw-shadow-color, rgb(0 0 0 / 0.1));
        box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
      }
    }
  }
  .hover\\:ring {
    &:hover {
      @media (hover: hover) {
        --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);
        box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
      }
    }
  }
  .hover\\:ring-0 {
    &:hover {
      @media (hover: hover) {
        --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);
        box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
      }
    }
  }
  .hover\\:ring-accent {
    &:hover {
      @media (hover: hover) {
        --tw-ring-color: var(--color-accent);
      }
    }
  }
  .hover\\:ring-transparent {
    &:hover {
      @media (hover: hover) {
        --tw-ring-color: transparent;
      }
    }
  }
  .focus\\:border-accent {
    &:focus {
      border-color: var(--color-accent);
    }
  }
  .focus\\:border-blue-500 {
    &:focus {
      border-color: var(--color-blue-500);
    }
  }
  .focus\\:border-transparent {
    &:focus {
      border-color: transparent;
    }
  }
  .focus\\:ring-1 {
    &:focus {
      --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);
      box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
    }
  }
  .focus\\:ring-2 {
    &:focus {
      --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);
      box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
    }
  }
  .focus\\:ring-accent {
    &:focus {
      --tw-ring-color: var(--color-accent);
    }
  }
  .focus\\:ring-blue-500 {
    &:focus {
      --tw-ring-color: var(--color-blue-500);
    }
  }
  .focus\\:outline-none {
    &:focus {
      --tw-outline-style: none;
      outline-style: none;
    }
  }
  .active\\:cursor-grabbing {
    &:active {
      cursor: grabbing;
    }
  }
  .active\\:bg-interactive-active {
    &:active {
      background-color: var(--color-interactive-active);
    }
  }
  .disabled\\:cursor-not-allowed {
    &:disabled {
      cursor: not-allowed;
    }
  }
  .disabled\\:opacity-40 {
    &:disabled {
      opacity: 40%;
    }
  }
  .disabled\\:opacity-50 {
    &:disabled {
      opacity: 50%;
    }
  }
  .disabled\\:hover\\:bg-transparent {
    &:disabled {
      &:hover {
        @media (hover: hover) {
          background-color: transparent;
        }
      }
    }
  }
  .disabled\\:hover\\:ring-0 {
    &:disabled {
      &:hover {
        @media (hover: hover) {
          --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);
          box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
        }
      }
    }
  }
  .md\\:flex {
    @media (width >= 48rem) {
      display: flex;
    }
  }
  .md\\:h-auto {
    @media (width >= 48rem) {
      height: auto;
    }
  }
  .md\\:max-h-\\[80vh\\] {
    @media (width >= 48rem) {
      max-height: 80vh;
    }
  }
  .md\\:w-\\[28rem\\] {
    @media (width >= 48rem) {
      width: 28rem;
    }
  }
  .md\\:w-\\[32rem\\] {
    @media (width >= 48rem) {
      width: 32rem;
    }
  }
  .md\\:w-\\[48rem\\] {
    @media (width >= 48rem) {
      width: 48rem;
    }
  }
  .md\\:max-w-\\[90vw\\] {
    @media (width >= 48rem) {
      max-width: 90vw;
    }
  }
  .md\\:flex-none {
    @media (width >= 48rem) {
      flex: none;
    }
  }
  .md\\:items-center {
    @media (width >= 48rem) {
      align-items: center;
    }
  }
  .md\\:justify-center {
    @media (width >= 48rem) {
      justify-content: center;
    }
  }
  .md\\:rounded-lg {
    @media (width >= 48rem) {
      border-radius: var(--radius-lg);
    }
  }
  .md\\:border {
    @media (width >= 48rem) {
      border-style: var(--tw-border-style);
      border-width: 1px;
    }
  }
  .md\\:border-border-subtle {
    @media (width >= 48rem) {
      border-color: var(--color-border-subtle);
    }
  }
  .md\\:shadow-lg {
    @media (width >= 48rem) {
      --tw-shadow: 0 10px 15px -3px var(--tw-shadow-color, rgb(0 0 0 / 0.1)), 0 4px 6px -4px var(--tw-shadow-color, rgb(0 0 0 / 0.1));
      box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
    }
  }
}
@import url('https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap');
:host {
  --tw-translate-x: 0;
  --tw-translate-y: 0;
  --tw-translate-z: 0;
  --tw-rotate-x: rotateX(0);
  --tw-rotate-y: rotateY(0);
  --tw-rotate-z: rotateZ(0);
  --tw-skew-x: skewX(0);
  --tw-skew-y: skewY(0);
  --tw-border-style: solid;
  --tw-gradient-from: #0000;
  --tw-gradient-via: #0000;
  --tw-gradient-to: #0000;
  --tw-gradient-from-position: 0%;
  --tw-gradient-via-position: 50%;
  --tw-gradient-to-position: 100%;
  --tw-shadow: 0 0 #0000;
  --tw-inset-shadow: 0 0 #0000;
  --tw-ring-shadow: 0 0 #0000;
  --tw-inset-ring-shadow: 0 0 #0000;
  --tw-ring-offset-width: 0px;
  --tw-ring-offset-color: #fff;
  --tw-ring-offset-shadow: 0 0 #0000;
  --tw-outline-style: solid;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  width: 100%;
  height: 100%;
  font-family: 'Open Sans', system-ui, sans-serif;
  color: var(--ep-foreground-primary);
  background-color: var(--ep-background-surface);
}
:host *::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}
:host *::-webkit-scrollbar-track {
  background: var(--ep-scrollbar-track);
}
:host *::-webkit-scrollbar-thumb {
  background: var(--ep-scrollbar-thumb);
  border-radius: 4px;
}
:host *::-webkit-scrollbar-thumb:hover {
  background: var(--ep-scrollbar-thumb-hover);
}
@property --tw-translate-x {
  syntax: "*";
  inherits: false;
  initial-value: 0;
}
@property --tw-translate-y {
  syntax: "*";
  inherits: false;
  initial-value: 0;
}
@property --tw-translate-z {
  syntax: "*";
  inherits: false;
  initial-value: 0;
}
@property --tw-scale-x {
  syntax: "*";
  inherits: false;
  initial-value: 1;
}
@property --tw-scale-y {
  syntax: "*";
  inherits: false;
  initial-value: 1;
}
@property --tw-scale-z {
  syntax: "*";
  inherits: false;
  initial-value: 1;
}
@property --tw-rotate-x {
  syntax: "*";
  inherits: false;
}
@property --tw-rotate-y {
  syntax: "*";
  inherits: false;
}
@property --tw-rotate-z {
  syntax: "*";
  inherits: false;
}
@property --tw-skew-x {
  syntax: "*";
  inherits: false;
}
@property --tw-skew-y {
  syntax: "*";
  inherits: false;
}
@property --tw-space-y-reverse {
  syntax: "*";
  inherits: false;
  initial-value: 0;
}
@property --tw-space-x-reverse {
  syntax: "*";
  inherits: false;
  initial-value: 0;
}
@property --tw-divide-y-reverse {
  syntax: "*";
  inherits: false;
  initial-value: 0;
}
@property --tw-border-style {
  syntax: "*";
  inherits: false;
  initial-value: solid;
}
@property --tw-leading {
  syntax: "*";
  inherits: false;
}
@property --tw-font-weight {
  syntax: "*";
  inherits: false;
}
@property --tw-shadow {
  syntax: "*";
  inherits: false;
  initial-value: 0 0 #0000;
}
@property --tw-shadow-color {
  syntax: "*";
  inherits: false;
}
@property --tw-shadow-alpha {
  syntax: "<percentage>";
  inherits: false;
  initial-value: 100%;
}
@property --tw-inset-shadow {
  syntax: "*";
  inherits: false;
  initial-value: 0 0 #0000;
}
@property --tw-inset-shadow-color {
  syntax: "*";
  inherits: false;
}
@property --tw-inset-shadow-alpha {
  syntax: "<percentage>";
  inherits: false;
  initial-value: 100%;
}
@property --tw-ring-color {
  syntax: "*";
  inherits: false;
}
@property --tw-ring-shadow {
  syntax: "*";
  inherits: false;
  initial-value: 0 0 #0000;
}
@property --tw-inset-ring-color {
  syntax: "*";
  inherits: false;
}
@property --tw-inset-ring-shadow {
  syntax: "*";
  inherits: false;
  initial-value: 0 0 #0000;
}
@property --tw-ring-inset {
  syntax: "*";
  inherits: false;
}
@property --tw-ring-offset-width {
  syntax: "<length>";
  inherits: false;
  initial-value: 0px;
}
@property --tw-ring-offset-color {
  syntax: "*";
  inherits: false;
  initial-value: #fff;
}
@property --tw-ring-offset-shadow {
  syntax: "*";
  inherits: false;
  initial-value: 0 0 #0000;
}
@property --tw-outline-style {
  syntax: "*";
  inherits: false;
  initial-value: solid;
}
@property --tw-backdrop-blur {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-brightness {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-contrast {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-grayscale {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-hue-rotate {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-invert {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-opacity {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-saturate {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-sepia {
  syntax: "*";
  inherits: false;
}
@property --tw-duration {
  syntax: "*";
  inherits: false;
}
@property --tw-ease {
  syntax: "*";
  inherits: false;
}
@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}
@keyframes pulse {
  50% {
    opacity: 0.5;
  }
}
@layer properties {
  @supports ((-webkit-hyphens: none) and (not (margin-trim: inline))) or ((-moz-orient: inline) and (not (color:rgb(from red r g b)))) {
    *, ::before, ::after, ::backdrop {
      --tw-translate-x: 0;
      --tw-translate-y: 0;
      --tw-translate-z: 0;
      --tw-scale-x: 1;
      --tw-scale-y: 1;
      --tw-scale-z: 1;
      --tw-rotate-x: initial;
      --tw-rotate-y: initial;
      --tw-rotate-z: initial;
      --tw-skew-x: initial;
      --tw-skew-y: initial;
      --tw-space-y-reverse: 0;
      --tw-space-x-reverse: 0;
      --tw-divide-y-reverse: 0;
      --tw-border-style: solid;
      --tw-leading: initial;
      --tw-font-weight: initial;
      --tw-shadow: 0 0 #0000;
      --tw-shadow-color: initial;
      --tw-shadow-alpha: 100%;
      --tw-inset-shadow: 0 0 #0000;
      --tw-inset-shadow-color: initial;
      --tw-inset-shadow-alpha: 100%;
      --tw-ring-color: initial;
      --tw-ring-shadow: 0 0 #0000;
      --tw-inset-ring-color: initial;
      --tw-inset-ring-shadow: 0 0 #0000;
      --tw-ring-inset: initial;
      --tw-ring-offset-width: 0px;
      --tw-ring-offset-color: #fff;
      --tw-ring-offset-shadow: 0 0 #0000;
      --tw-outline-style: solid;
      --tw-backdrop-blur: initial;
      --tw-backdrop-brightness: initial;
      --tw-backdrop-contrast: initial;
      --tw-backdrop-grayscale: initial;
      --tw-backdrop-hue-rotate: initial;
      --tw-backdrop-invert: initial;
      --tw-backdrop-opacity: initial;
      --tw-backdrop-saturate: initial;
      --tw-backdrop-sepia: initial;
      --tw-duration: initial;
      --tw-ease: initial;
    }
  }
}
`,MW=0;function ee(t,e,n,i,r,o){e||(e={});var s,a,l=e;if("ref"in l)for(a in l={},e)a=="ref"?s=e[a]:l[a]=e[a];var c={type:t,props:l,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--MW,__i:-1,__u:0,__source:r,__self:o};if(typeof t=="function"&&(s=t.defaultProps))for(a in s)l[a]===void 0&&(l[a]=s[a]);return Wt.vnode&&Wt.vnode(c),c}var Dc=(t=>(t[t.Degree0=0]="Degree0",t[t.Degree90=1]="Degree90",t[t.Degree180=2]="Degree180",t[t.Degree270=3]="Degree270",t))(Dc||{});function CW(t){return{x:Math.floor(t.x),y:Math.floor(t.y)}}function EW(t){return{width:Math.ceil(t.width),height:Math.ceil(t.height)}}function ore(t){return{origin:CW(t.origin),size:EW(t.size)}}function kb(t){const{width:e,height:n}=t;return{width:n,height:e}}function i0(t,e,n){return{width:(t=e%2==0?t:kb(t)).width*n,height:t.height*n}}function sre(t){const e=[t.p1.x,t.p2.x,t.p3.x,t.p4.x],n=[t.p1.y,t.p2.y,t.p3.y,t.p4.y];return{origin:{x:Math.min(...e),y:Math.min(...n)},size:{width:Math.max(...e)-Math.min(...e),height:Math.max(...n)-Math.min(...n)}}}function are(t){return{p1:{x:t.origin.x,y:t.origin.y},p2:{x:t.origin.x+t.size.width,y:t.origin.y},p3:{x:t.origin.x+t.size.width,y:t.origin.y+t.size.height},p4:{x:t.origin.x,y:t.origin.y+t.size.height}}}function nL(t,e,n){let i=e.x,r=e.y;switch(n){case 0:i=e.x,r=e.y;break;case 1:i=t.height-e.y,r=e.x;break;case 2:i=t.width-e.x,r=t.height-e.y;break;case 3:i=e.y,r=t.width-e.x}return{x:i,y:r}}function vv(t,e){return{x:t.x*e,y:t.y*e}}function al(t){if(t.length===0)return{origin:{x:0,y:0},size:{width:0,height:0}};const e=t.map(o=>o.x),n=t.map(o=>o.y),i=Math.min(...e),r=Math.min(...n);return{origin:{x:i,y:r},size:{width:Math.max(...e)-i,height:Math.max(...n)-r}}}function ll(t,e){return{origin:{x:t.origin.x-e,y:t.origin.y-e},size:{width:t.size.width+2*e,height:t.size.height+2*e}}}function PM(t,e,n){let i=e.origin.x,r=e.origin.y,o=e.size;switch(n){case 0:break;case 1:i=t.height-e.origin.y-e.size.height,r=e.origin.x,o=kb(e.size);break;case 2:i=t.width-e.origin.x-e.size.width,r=t.height-e.origin.y-e.size.height;break;case 3:i=e.origin.y,r=t.width-e.origin.x-e.size.width,o=kb(e.size)}return{origin:{x:i,y:r},size:{width:o.width,height:o.height}}}function iL(t,e){return{origin:{x:t.origin.x*e,y:t.origin.y*e},size:{width:t.size.width*e,height:t.size.height*e}}}function TW(t,e,n,i){return iL(PM(t,e,n),i)}function rL(t){if(t.length===0)return null;let e=t[0].origin.x,n=t[0].origin.y,i=t[0].origin.x+t[0].size.width,r=t[0].origin.y+t[0].size.height;for(const o of t)e=Math.min(e,o.origin.x),n=Math.min(n,o.origin.y),i=Math.max(i,o.origin.x+o.size.width),r=Math.max(r,o.origin.y+o.size.height);return{origin:{x:e,y:n},size:{width:i-e,height:r-n}}}function lre(t,e,n,i){const r=t.origin.x,o=t.origin.y,s=t.size.width,a=t.size.height,l=n/s,c=i/a,u=n/a,d=i/s;switch(e){case 0:return{a:l,b:0,c:0,d:c,e:-l*r,f:-c*o};case 3:return{a:0,b:-d,c:u,d:0,e:-u*o,f:d*(r+s)};case 2:return{a:-l,b:0,c:0,d:-c,e:l*(r+s),f:c*(o+a)};case 1:return{a:0,b:d,c:-u,d:0,e:u*(o+a),f:-d*r}}}class oL{isEnabled(){return!1}debug(){}info(){}warn(){}error(){}perf(){}}class sL{isEnabled(){return!0}debug(e,n,...i){console.debug(`${e}.${n}`,...i)}info(e,n,...i){console.info(`${e}.${n}`,...i)}warn(e,n,...i){console.warn(`${e}.${n}`,...i)}error(e,n,...i){console.error(`${e}.${n}`,...i)}perf(e,n,i,r,...o){console.info(`${e}.${n}.${i}.${r}`,...o)}}class AW{constructor(e,n){this.logger=e,this.level=n}isEnabled(e){return this.level<={debug:0,info:1,warn:2,error:3}[e]}debug(e,n,...i){this.level<=0&&this.logger.debug(e,n,...i)}info(e,n,...i){this.level<=1&&this.logger.info(e,n,...i)}warn(e,n,...i){this.level<=2&&this.logger.warn(e,n,...i)}error(e,n,...i){this.level<=3&&this.logger.error(e,n,...i)}perf(e,n,i,r,...o){this.logger.perf(e,n,i,r,...o)}}class aL{constructor(){this.marks=new Map}isEnabled(){return!1}debug(e,n,...i){}info(e,n,...i){}warn(e,n,...i){}error(e,n,...i){}perf(e,n,i,r,o,...s){const a=`${e}.${n}.${i}.${r}.${o}`;switch(r){case"Begin":globalThis.performance.mark(a,{detail:s}),this.marks.set(`${e}.${n}.${i}.${o}`,Date.now());break;case"End":globalThis.performance.mark(a,{detail:s});const l=`${e}.${n}.${i}.Measure.${o}`,c=`${e}.${n}.${i}.Begin.${o}`;globalThis.performance.measure(l,c,a);const u=this.marks.get(`${e}.${n}.${i}.${o}`);if(u){const d=Date.now()-u;console.info(` ${e}.${n}.${i}.${o}: ${d}ms`),this.marks.delete(`${e}.${n}.${i}.${o}`)}}}}class lL{constructor(e){this.loggers=e}isEnabled(e){return this.loggers.some(n=>n.isEnabled(e))}debug(e,n,...i){for(const r of this.loggers)r.debug(e,n,...i)}info(e,n,...i){for(const r of this.loggers)r.info(e,n,...i)}warn(e,n,...i){for(const r of this.loggers)r.warn(e,n,...i)}error(e,n,...i){for(const r of this.loggers)r.error(e,n,...i)}perf(e,n,i,r,...o){for(const s of this.loggers)s.perf(e,n,i,r,...o)}}var Fh=(t=>(t[t.Pending=0]="Pending",t[t.Resolved=1]="Resolved",t[t.Rejected=2]="Rejected",t[t.Aborted=3]="Aborted",t))(Fh||{});class IW extends Error{constructor(e){super(`Task aborted: ${JSON.stringify(e)}`),this.name="TaskAbortedError",this.reason=e}}class PW extends Error{constructor(e){super(`Task rejected: ${JSON.stringify(e)}`),this.name="TaskRejectedError",this.reason=e}}class Rn{constructor(){this.state={stage:0},this.resolvedCallbacks=[],this.rejectedCallbacks=[],this._promise=null,this.progressCbs=[]}toPromise(){return this._promise||(this._promise=new Promise((e,n)=>{this.wait(i=>e(i),i=>{i.type==="abort"?n(new IW(i.reason)):n(new PW(i.reason))})})),this._promise}wait(e,n){switch(this.state.stage){case 0:this.resolvedCallbacks.push(e),this.rejectedCallbacks.push(n);break;case 1:e(this.state.result);break;case 2:n({type:"reject",reason:this.state.reason});break;case 3:n({type:"abort",reason:this.state.reason})}}resolve(e){if(this.state.stage===0){this.state={stage:1,result:e};for(const n of this.resolvedCallbacks)try{n(e)}catch{}this.resolvedCallbacks=[],this.rejectedCallbacks=[]}}reject(e){if(this.state.stage===0){this.state={stage:2,reason:e};for(const n of this.rejectedCallbacks)try{n({type:"reject",reason:e})}catch{}this.resolvedCallbacks=[],this.rejectedCallbacks=[]}}abort(e){if(this.state.stage===0){this.state={stage:3,reason:e};for(const n of this.rejectedCallbacks)try{n({type:"abort",reason:e})}catch{}this.resolvedCallbacks=[],this.rejectedCallbacks=[]}}fail(e){e.type==="abort"?this.abort(e.reason):this.reject(e.reason)}onProgress(e){this.progressCbs.push(e)}progress(e){for(const n of this.progressCbs)n(e)}static all(e){const n=new Rn;if(e.length===0)return n.resolve([]),n;const i=new Array(e.length);let r=0,o=!1;return e.forEach((s,a)=>{s.wait(l=>{o||(i[a]=l,r++,r===e.length&&(o=!0,n.resolve(i)))},l=>{o||(o=!0,l.type==="abort"?n.abort(l.reason):n.reject(l.reason))})}),n}static allSettled(e){const n=new Rn;if(e.length===0)return n.resolve([]),n;const i=new Array(e.length);let r=0;return e.forEach((o,s)=>{o.wait(a=>{i[s]={status:"resolved",value:a},r++,r===e.length&&n.resolve(i)},a=>{i[s]={status:a.type==="abort"?"aborted":"rejected",reason:a.reason},r++,r===e.length&&n.resolve(i)})}),n}static race(e){const n=new Rn;if(e.length===0)return n.reject("No tasks provided"),n;let i=!1;return e.forEach(r=>{r.wait(o=>{i||(i=!0,n.resolve(o))},o=>{i||(i=!0,o.type==="abort"?n.abort(o.reason):n.reject(o.reason))})}),n}static withProgress(e,n){const i=Rn.all(e);if(n){let r=0;e.forEach(o=>{o.wait(()=>{r++,n(r,e.length)},()=>{r++,n(r,e.length)})})}return i}}const RW=Object.freeze(["","","","\uFEFF","",""]),DW=new RegExp(`[${RW.join("")}]`,"g");function cre(t){return t.replace(DW,"")}var cL=(t=>(t[t.Unknown=0]="Unknown",t[t.XYZ=1]="XYZ",t[t.FitPage=2]="FitPage",t[t.FitHorizontal=3]="FitHorizontal",t[t.FitVertical=4]="FitVertical",t[t.FitRectangle=5]="FitRectangle",t[t.FitBoundingBox=6]="FitBoundingBox",t[t.FitBoundingBoxHorizontal=7]="FitBoundingBoxHorizontal",t[t.FitBoundingBoxVertical=8]="FitBoundingBoxVertical",t))(cL||{}),kW=(t=>(t[t.NotSet=0]="NotSet",t[t.True=1]="True",t[t.False=2]="False",t[t.Unknown=3]="Unknown",t))(kW||{}),vi=(t=>(t[t.Unknown=-1]="Unknown",t[t.Courier=0]="Courier",t[t.Courier_Bold=1]="Courier_Bold",t[t.Courier_BoldOblique=2]="Courier_BoldOblique",t[t.Courier_Oblique=3]="Courier_Oblique",t[t.Helvetica=4]="Helvetica",t[t.Helvetica_Bold=5]="Helvetica_Bold",t[t.Helvetica_BoldOblique=6]="Helvetica_BoldOblique",t[t.Helvetica_Oblique=7]="Helvetica_Oblique",t[t.Times_Roman=8]="Times_Roman",t[t.Times_Bold=9]="Times_Bold",t[t.Times_BoldItalic=10]="Times_BoldItalic",t[t.Times_Italic=11]="Times_Italic",t[t.Symbol=12]="Symbol",t[t.ZapfDingbats=13]="ZapfDingbats",t))(vi||{}),Sr=(t=>(t[t.Left=0]="Left",t[t.Center=1]="Center",t[t.Right=2]="Right",t))(Sr||{}),yo=(t=>(t[t.Top=0]="Top",t[t.Middle=1]="Middle",t[t.Bottom=2]="Bottom",t))(yo||{}),Mt=(t=>(t[t.Normal=0]="Normal",t[t.Multiply=1]="Multiply",t[t.Screen=2]="Screen",t[t.Overlay=3]="Overlay",t[t.Darken=4]="Darken",t[t.Lighten=5]="Lighten",t[t.ColorDodge=6]="ColorDodge",t[t.ColorBurn=7]="ColorBurn",t[t.HardLight=8]="HardLight",t[t.SoftLight=9]="SoftLight",t[t.Difference=10]="Difference",t[t.Exclusion=11]="Exclusion",t[t.Hue=12]="Hue",t[t.Saturation=13]="Saturation",t[t.Color=14]="Color",t[t.Luminosity=15]="Luminosity",t))(Mt||{}),NW=(t=>(t[t.Contain=0]="Contain",t[t.Cover=1]="Cover",t[t.Stretch=2]="Stretch",t))(NW||{}),yv=(t=>(t[t.Unsupported=0]="Unsupported",t[t.Goto=1]="Goto",t[t.RemoteGoto=2]="RemoteGoto",t[t.URI=3]="URI",t[t.LaunchAppOrOpenFile=4]="LaunchAppOrOpenFile",t))(yv||{}),_e=(t=>(t[t.UNKNOWN=0]="UNKNOWN",t[t.TEXT=1]="TEXT",t[t.LINK=2]="LINK",t[t.FREETEXT=3]="FREETEXT",t[t.LINE=4]="LINE",t[t.SQUARE=5]="SQUARE",t[t.CIRCLE=6]="CIRCLE",t[t.POLYGON=7]="POLYGON",t[t.POLYLINE=8]="POLYLINE",t[t.HIGHLIGHT=9]="HIGHLIGHT",t[t.UNDERLINE=10]="UNDERLINE",t[t.SQUIGGLY=11]="SQUIGGLY",t[t.STRIKEOUT=12]="STRIKEOUT",t[t.STAMP=13]="STAMP",t[t.CARET=14]="CARET",t[t.INK=15]="INK",t[t.POPUP=16]="POPUP",t[t.FILEATTACHMENT=17]="FILEATTACHMENT",t[t.SOUND=18]="SOUND",t[t.MOVIE=19]="MOVIE",t[t.WIDGET=20]="WIDGET",t[t.SCREEN=21]="SCREEN",t[t.PRINTERMARK=22]="PRINTERMARK",t[t.TRAPNET=23]="TRAPNET",t[t.WATERMARK=24]="WATERMARK",t[t.THREED=25]="THREED",t[t.RICHMEDIA=26]="RICHMEDIA",t[t.XFAWIDGET=27]="XFAWIDGET",t[t.REDACT=28]="REDACT",t))(_e||{}),LW=(t=>(t[t.Normal=0]="Normal",t[t.Rollover=1]="Rollover",t[t.Down=2]="Down",t))(LW||{}),RM=(t=>(t[t.Unknown=-1]="Unknown",t[t.Comment=0]="Comment",t[t.Key=1]="Key",t[t.Note=2]="Note",t[t.Help=3]="Help",t[t.NewParagraph=4]="NewParagraph",t[t.Paragraph=5]="Paragraph",t[t.Insert=6]="Insert",t[t.Graph=7]="Graph",t[t.PushPin=8]="PushPin",t[t.Paperclip=9]="Paperclip",t[t.Tag=10]="Tag",t[t.Speaker=11]="Speaker",t[t.Mic=12]="Mic",t[t.Approved=13]="Approved",t[t.Experimental=14]="Experimental",t[t.NotApproved=15]="NotApproved",t[t.AsIs=16]="AsIs",t[t.Expired=17]="Expired",t[t.NotForPublicRelease=18]="NotForPublicRelease",t[t.Confidential=19]="Confidential",t[t.Final=20]="Final",t[t.Sold=21]="Sold",t[t.Departmental=22]="Departmental",t[t.ForComment=23]="ForComment",t[t.TopSecret=24]="TopSecret",t[t.Draft=25]="Draft",t[t.ForPublicRelease=26]="ForPublicRelease",t))(RM||{}),Pt=(t=>(t[t.None=0]="None",t[t.Square=1]="Square",t[t.Circle=2]="Circle",t[t.Diamond=3]="Diamond",t[t.OpenArrow=4]="OpenArrow",t[t.ClosedArrow=5]="ClosedArrow",t[t.Butt=6]="Butt",t[t.ROpenArrow=7]="ROpenArrow",t[t.RClosedArrow=8]="RClosedArrow",t[t.Slash=9]="Slash",t[t.Unknown=10]="Unknown",t))(Pt||{}),zW=(t=>(t[t.UNKNOWN=0]="UNKNOWN",t[t.PUSHBUTTON=1]="PUSHBUTTON",t[t.CHECKBOX=2]="CHECKBOX",t[t.RADIOBUTTON=3]="RADIOBUTTON",t[t.COMBOBOX=4]="COMBOBOX",t[t.LISTBOX=5]="LISTBOX",t[t.TEXTFIELD=6]="TEXTFIELD",t[t.SIGNATURE=7]="SIGNATURE",t[t.XFA=8]="XFA",t[t.XFA_CHECKBOX=9]="XFA_CHECKBOX",t[t.XFA_COMBOBOX=10]="XFA_COMBOBOX",t[t.XFA_IMAGEFIELD=11]="XFA_IMAGEFIELD",t[t.XFA_LISTBOX=12]="XFA_LISTBOX",t[t.XFA_PUSHBUTTON=13]="XFA_PUSHBUTTON",t[t.XFA_SIGNATURE=14]="XFA_SIGNATURE",t[t.XFA_TEXTFIELD=15]="XFA_TEXTFIELD",t))(zW||{}),OW=(t=>(t[t.Color=0]="Color",t[t.InteriorColor=1]="InteriorColor",t))(OW||{}),xn=(t=>(t[t.UNKNOWN=0]="UNKNOWN",t[t.SOLID=1]="SOLID",t[t.DASHED=2]="DASHED",t[t.BEVELED=3]="BEVELED",t[t.INSET=4]="INSET",t[t.UNDERLINE=5]="UNDERLINE",t[t.CLOUDY=6]="CLOUDY",t))(xn||{}),FW=(t=>(t[t.UNKNOWN=0]="UNKNOWN",t[t.TEXT=1]="TEXT",t[t.PATH=2]="PATH",t[t.IMAGE=3]="IMAGE",t[t.SHADING=4]="SHADING",t[t.FORM=5]="FORM",t))(FW||{});const Nb=Object.freeze({1:"invisible",2:"hidden",4:"print",8:"noZoom",16:"noRotate",32:"noView",64:"readOnly",128:"locked",256:"toggleNoView"}),UW=Object.entries(Nb).reduce((t,[e,n])=>(t[n]=Number(e),t),{});function ure(t){return Object.keys(Nb).filter(e=>(t&e)!==0).map(e=>Nb[e])}function dre(t){return t.reduce((e,n)=>e|UW[n],0)}var BW=(t=>(t[t.Create=0]="Create",t[t.Read=1]="Read",t[t.Update=2]="Update",t[t.Delete=3]="Delete",t))(BW||{}),Uh=(t=>(t[t.None=0]="None",t[t.MatchCase=1]="MatchCase",t[t.MatchWholeWord=2]="MatchWholeWord",t[t.MatchConsecutive=4]="MatchConsecutive",t))(Uh||{}),HW=(t=>(t[t.Display=0]="Display",t[t.Print=1]="Print",t))(HW||{}),Xt=(t=>(t[t.Ok=0]="Ok",t[t.Unknown=1]="Unknown",t[t.NotFound=2]="NotFound",t[t.WrongFormat=3]="WrongFormat",t[t.Password=4]="Password",t[t.Security=5]="Security",t[t.PageError=6]="PageError",t[t.XFALoad=7]="XFALoad",t[t.XFALayout=8]="XFALayout",t[t.Cancelled=9]="Cancelled",t[t.Initialization=10]="Initialization",t[t.NotReady=11]="NotReady",t[t.NotSupport=12]="NotSupport",t[t.LoadDoc=13]="LoadDoc",t[t.DocNotOpen=14]="DocNotOpen",t[t.CantCloseDoc=15]="CantCloseDoc",t[t.CantCreateNewDoc=16]="CantCreateNewDoc",t[t.CantImportPages=17]="CantImportPages",t[t.CantCreateAnnot=18]="CantCreateAnnot",t[t.CantSetAnnotRect=19]="CantSetAnnotRect",t[t.CantSetAnnotContent=20]="CantSetAnnotContent",t[t.CantRemoveInkList=21]="CantRemoveInkList",t[t.CantAddInkStoke=22]="CantAddInkStoke",t[t.CantReadAttachmentSize=23]="CantReadAttachmentSize",t[t.CantReadAttachmentContent=24]="CantReadAttachmentContent",t[t.CantFocusAnnot=25]="CantFocusAnnot",t[t.CantSelectText=26]="CantSelectText",t[t.CantSelectOption=27]="CantSelectOption",t[t.CantCheckField=28]="CantCheckField",t[t.CantSetAnnotString=29]="CantSetAnnotString",t))(Xt||{});class hn{static create(){return new Rn}static resolve(e){const n=new Rn;return n.resolve(e),n}static reject(e){const n=new Rn;return n.reject(e),n}static abort(e){const n=new Rn;return n.reject(e),n}}function hre(t){const e=n=>(i=>Math.max(0,Math.min(255,i)))(n).toString(16).padStart(2,"0");return`#${e(t.red)}${e(t.green)}${e(t.blue)}`}function fre(t){/^#?[0-9a-f]{3}$/i.test(t)&&(t=t.replace(/^#?([0-9a-f])([0-9a-f])([0-9a-f])$/i,"#$1$1$2$2$3$3").toLowerCase());const[,e,n,i]=/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(t)??(()=>{throw new Error(`Invalid hex colour: "${t}"`)})();return{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16)}}function pre(t){return(e=>Math.max(0,Math.min(255,e)))(t)/255}function mre(t){return((e,n=255)=>Math.max(0,Math.min(n,e)))(Math.round(255*t))}function gre(t){if(!(t!=null&&t.startsWith("D:"))||t.length<16)return;const e=+t.slice(2,6),n=+t.slice(6,8)-1,i=+t.slice(8,10),r=+t.slice(10,12),o=+t.slice(12,14),s=+t.slice(14,16);return new Date(Date.UTC(e,n,i,r,o,s))}function vre(t=new Date){const e=(n,i=2)=>n.toString().padStart(i,"0");return`D:${t.getUTCFullYear()}${e(t.getUTCMonth()+1)}${e(t.getUTCDate())}${e(t.getUTCHours())}${e(t.getUTCMinutes())}${e(t.getUTCSeconds())}`}const Lb=Object.freeze([{id:Sr.Left,label:"Left",css:"left"},{id:Sr.Center,label:"Center",css:"center"},{id:Sr.Right,label:"Right",css:"right"}]),PA=Lb.reduce((t,e)=>(t[e.id]=e,t),{});function VW(t){return function(e){return PA[e]??PA[Sr.Left]}(t).css}Lb.reduce((t,e)=>(t[e.css]=e.id,t),{}),Lb.map(t=>({value:t.id,label:t.label}));var uL=(t=>(t.Courier="Courier",t.Helvetica="Helvetica",t.Times="Times",t.Symbol="Symbol",t.ZapfDingbats="ZapfDingbats",t.Unknown="Unknown",t))(uL||{});const $W=vi.Helvetica,dL={id:vi.Helvetica,family:"Helvetica",bold:!1,italic:!1,label:"Helvetica",css:"Helvetica, Arial, sans-serif"},DM=Object.freeze([{id:vi.Courier,family:"Courier",bold:!1,italic:!1,label:"Courier",css:"Courier, monospace"},{id:vi.Courier_Bold,family:"Courier",bold:!0,italic:!1,label:"Courier Bold",css:'"Courier-Bold", Courier, monospace'},{id:vi.Courier_BoldOblique,family:"Courier",bold:!0,italic:!0,label:"Courier Bold Oblique",css:'"Courier-BoldOblique", Courier, monospace'},{id:vi.Courier_Oblique,family:"Courier",bold:!1,italic:!0,label:"Courier Oblique",css:'"Courier-Oblique", Courier, monospace'},dL,{id:vi.Helvetica_Bold,family:"Helvetica",bold:!0,italic:!1,label:"Helvetica Bold",css:'"Helvetica-Bold", Arial, sans-serif'},{id:vi.Helvetica_BoldOblique,family:"Helvetica",bold:!0,italic:!0,label:"Helvetica Bold Oblique",css:'"Helvetica-BoldOblique", Arial, sans-serif'},{id:vi.Helvetica_Oblique,family:"Helvetica",bold:!1,italic:!0,label:"Helvetica Oblique",css:'"Helvetica-Oblique", Arial, sans-serif'},{id:vi.Times_Roman,family:"Times",bold:!1,italic:!1,label:"Times Roman",css:'"Times New Roman", Times, serif'},{id:vi.Times_Bold,family:"Times",bold:!0,italic:!1,label:"Times Bold",css:'"Times New Roman Bold", Times, serif'},{id:vi.Times_BoldItalic,family:"Times",bold:!0,italic:!0,label:"Times Bold Italic",css:'"Times New Roman Bold Italic", Times, serif'},{id:vi.Times_Italic,family:"Times",bold:!1,italic:!0,label:"Times Italic",css:'"Times New Roman Italic", Times, serif'},{id:vi.Symbol,family:"Symbol",bold:!1,italic:!1,label:"Symbol",css:"Symbol"},{id:vi.ZapfDingbats,family:"ZapfDingbats",bold:!1,italic:!1,label:"Zapf Dingbats",css:"ZapfDingbats"}]),WW=DM.reduce((t,e)=>(t[e.id]=e,t),{}),hL=new Map;for(const t of DM)hL.set(`${t.family}_${t.bold}_${t.italic}`,t.id);function Ly(t){return WW[t]??dL}function Ym(t){return Ly(t).bold}function Zm(t){return Ly(t).italic}function Pl(t,{bold:e,italic:n}){return hL.get(`${t}_${e}_${n}`)??$W}Object.values(uL).filter(t=>t!=="Unknown").map(t=>({value:t,label:t}));const GW=[...new Set(DM.map(t=>t.family))];function RA(t){switch(t){case"Courier":return"Courier";case"Helvetica":default:return"Helvetica";case"Times":return"Times";case"Symbol":return"Symbol";case"ZapfDingbats":return"ZapfDingbats"}}const r0=Object.freeze([{id:Mt.Normal,label:"Normal",css:"normal"},{id:Mt.Multiply,label:"Multiply",css:"multiply"},{id:Mt.Screen,label:"Screen",css:"screen"},{id:Mt.Overlay,label:"Overlay",css:"overlay"},{id:Mt.Darken,label:"Darken",css:"darken"},{id:Mt.Lighten,label:"Lighten",css:"lighten"},{id:Mt.ColorDodge,label:"Color Dodge",css:"color-dodge"},{id:Mt.ColorBurn,label:"Color Burn",css:"color-burn"},{id:Mt.HardLight,label:"Hard Light",css:"hard-light"},{id:Mt.SoftLight,label:"Soft Light",css:"soft-light"},{id:Mt.Difference,label:"Difference",css:"difference"},{id:Mt.Exclusion,label:"Exclusion",css:"exclusion"},{id:Mt.Hue,label:"Hue",css:"hue"},{id:Mt.Saturation,label:"Saturation",css:"saturation"},{id:Mt.Color,label:"Color",css:"color"},{id:Mt.Luminosity,label:"Luminosity",css:"luminosity"}]),DA=r0.reduce((t,e)=>(t[e.id]=e,t),{});function Xi(t){return function(e){return DA[e]??DA[Mt.Normal]}(t).css}r0.reduce((t,e)=>(t[e.css]=e.id,t),{}),r0.map(t=>({value:t.id,label:t.label}));const jW=r0.map(t=>t.id);function kA(t){if(t instanceof oL)return{type:"noop"};if(t instanceof sL)return{type:"console"};if(t instanceof aL)return{type:"perf"};if(t instanceof AW){const e=t;return{type:"level",config:{level:e.level,logger:kA(e.logger)}}}return t instanceof lL?{type:"all",config:{loggers:t.loggers.map(kA)}}:{type:"noop"}}const qW=/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;function yre(t){return qW.test(t)}function ni(){var t;if(typeof((t=globalThis.crypto)==null?void 0:t.randomUUID)=="function")return globalThis.crypto.randomUUID();const e=function(i){var r;if(typeof((r=globalThis.crypto)==null?void 0:r.getRandomValues)=="function")return globalThis.crypto.getRandomValues(new Uint8Array(i));if(typeof require=="function")try{const{randomBytes:s}=require("crypto");return s(i)}catch{}const o=new Uint8Array(i);for(let s=0;s<i;s++)o[s]=Math.floor(256*Math.random());return o}(16);e[6]=15&e[6]|64,e[8]=63&e[8]|128;const n=Array.from(e,i=>i.toString(16).padStart(2,"0")).join("");return`${n.slice(0,8)}-${n.slice(8,12)}-${n.slice(12,16)}-${n.slice(16,20)}-${n.slice(20)}`}class Bh extends Rn{constructor(e={}){super(),this.children=new Map,this.childResults=[],this.completedCount=0,this.expectedCount=0,this.isFinalized=!1,this.config={aggregate:e.aggregate??(n=>n),onChildComplete:e.onChildComplete??(()=>{}),failFast:e.failFast??!0}}addChild(e,n){if(this.state.stage!==Fh.Pending)return this.state.stage===Fh.Aborted&&e.abort(this.state.reason),this;const i=n??this.expectedCount;return this.expectedCount=Math.max(this.expectedCount,i+1),this.children.set(e,i),e.wait(r=>this.handleChildSuccess(e,r,i),r=>this.handleChildError(e,r,i)),this}finalize(){return this.isFinalized||(this.isFinalized=!0,this.expectedCount===0&&this.resolve(this.config.aggregate([]))),this}handleChildSuccess(e,n,i){if(this.state.stage!==Fh.Pending)return;this.childResults[i]=n,this.completedCount++,this.children.delete(e);const r=this.config.onChildComplete(this.completedCount,this.expectedCount,n,i);if(r!==void 0&&this.progress(r),this.completedCount===this.expectedCount){const o=this.config.aggregate(this.childResults);this.resolve(o)}}handleChildError(e,n,i){if(this.state.stage===Fh.Pending){if(this.children.delete(e),this.config.failFast){for(const[r]of this.children)r.abort("Sibling task failed");this.children.clear(),this.fail(n)}else if(this.childResults[i]=void 0,this.completedCount++,this.completedCount===this.expectedCount){const r=this.config.aggregate(this.childResults);this.resolve(r)}}}abort(e){for(const[n]of this.children)n.abort(e);this.children.clear(),super.abort(e)}reject(e){for(const[n]of this.children)n.abort(e);this.children.clear(),super.reject(e)}getPendingCount(){return this.children.size}getCompletedCount(){return this.completedCount}static gather(e){const n=new Bh({aggregate:i=>i,onChildComplete:(i,r)=>({completed:i,total:r})});return e.forEach((i,r)=>n.addChild(i,r)),n.finalize(),n}static gatherIndexed(e){const n=new Bh({aggregate:i=>{const r={};return i.forEach((o,s)=>{r[s]=o}),r},onChildComplete:(i,r,o,s)=>({page:s,result:o})});return e.forEach((i,r)=>n.addChild(i,r)),n.finalize(),n}static gatherFrom(e,n){const i=new Bh(n);return e.forEach((r,o)=>i.addChild(r,o)),i.finalize(),i}static first(e){let n=!1;const i=new Bh({aggregate:r=>r[0],failFast:!1});return i.handleChildSuccess=(r,o)=>{if(!n){n=!0;for(const[s]of i.children)s!==r&&s.abort("Race won by sibling");i.resolve(o)}},e.forEach((r,o)=>i.addChild(r,o)),i.finalize(),i}}function ii(){}class NA{constructor(){this.dependencyGraph=new Map}addNode(e,n=[]){this.dependencyGraph.set(e,new Set(n))}hasCircularDependencies(){const e=new Set,n=new Set,i=r=>{e.add(r),n.add(r);const o=this.dependencyGraph.get(r)||new Set;for(const s of o)if(e.has(s)){if(n.has(s))return!0}else if(i(s))return!0;return n.delete(r),!1};for(const r of this.dependencyGraph.keys())if(!e.has(r)&&i(r))return!0;return!1}resolveLoadOrder(){if(this.hasCircularDependencies())throw new Error("Circular dependencies detected");const e=[],n=new Set,i=new Set,r=o=>{if(i.has(o))throw new Error("Circular dependency");if(n.has(o))return;i.add(o);const s=this.dependencyGraph.get(o)||new Set;for(const a of s)r(a);i.delete(o),n.add(o),e.push(o)};for(const o of this.dependencyGraph.keys())n.has(o)||r(o);return e}}class wr extends Error{constructor(e){super(e),this.name="PluginRegistrationError"}}class eu extends Error{constructor(e){super(e),this.name="PluginNotFoundError"}}class XW extends Error{constructor(e){super(e),this.name="CircularDependencyError"}}class YW extends Error{constructor(e){super(e),this.name="PluginConfigurationError"}}class ZW{constructor(e,n){this.store=e,this.pluginId=n}getState(){return this.store.getState().plugins[this.pluginId]}dispatch(e){return this.store.dispatchToPlugin(this.pluginId,e)}subscribeToState(e){return this.store.subscribeToPlugin(this.pluginId,(n,i,r)=>{e(n,i,r)})}onAction(e,n){return this.store.onAction(e,(i,r,o)=>{n(i,r.plugins[this.pluginId],o.plugins[this.pluginId])})}}const zy="START_LOADING_DOCUMENT",fL="UPDATE_DOCUMENT_LOADING_PROGRESS",Oy="SET_DOCUMENT_LOADED",kM="SET_DOCUMENT_ERROR",NM="RETRY_LOADING_DOCUMENT",Fy="CLOSE_DOCUMENT",LM="SET_ACTIVE_DOCUMENT",zM="REORDER_DOCUMENTS",OM="MOVE_DOCUMENT",Id="REFRESH_PAGES",Uy="SET_SCALE",By="SET_ROTATION",KW=[zy,fL,Oy,Fy,LM,kM,NM,"REFRESH_DOCUMENT",Id,"SET_PAGES",Uy,By,"SET_DEFAULT_SCALE","SET_DEFAULT_ROTATION",zM,OM],LA=(t,e,n,i,r,o)=>({type:zy,payload:{documentId:t,name:e,scale:n,rotation:i,passwordProvided:r,autoActivate:o}}),zA=(t,e)=>({type:Fy,payload:{documentId:t,nextActiveDocumentId:e}}),OA=(t,e)=>({type:Id,payload:{documentId:t,pageIndexes:e}}),FA=(t,e)=>({type:By,payload:{rotation:t,documentId:e}});class QW{constructor(e,n){this.initialCoreState=n,this.pluginReducers={},this.listeners=[],this.pluginListeners={},this.isDispatching=!1,this.state={core:n,plugins:{}},this.coreReducer=e}addPluginReducer(e,n,i){this.state.plugins[e]=i,this.pluginReducers[e]=n}dispatchToCore(e){if(!this.coreReducer)return this.getState();if(this.isDispatching)throw new Error("Reducers may not dispatch actions. To trigger cascading actions, dispatch from a listener callback instead.");const n=this.getState();try{this.isDispatching=!0,this.state.core=this.coreReducer(this.state.core,e)}finally{this.isDispatching=!1}return this.listeners.forEach(i=>{const r=this.getState();i(e,r,n)}),this.getState()}dispatchToPlugin(e,n,i=!0){if(this.isDispatching)throw new Error("Reducers may not dispatch actions. To trigger cascading actions, dispatch from a listener callback instead.");const r=this.getState(),o=this.pluginReducers[e];if(!o)return r.plugins[e];const s=r.plugins[e];try{this.isDispatching=!0;const a=o(s,n);this.state.plugins[e]=a}finally{this.isDispatching=!1}return i&&this.listeners.forEach(a=>{const l=this.getState();a(n,l,r)}),this.pluginListeners[e]&&this.pluginListeners[e].forEach(a=>{const l=this.getState().plugins[e];a(n,l,s)}),this.getState().plugins[e]}dispatch(e){if(this.isDispatching)throw new Error("Reducers may not dispatch actions. To trigger cascading actions, dispatch from a listener callback instead.");const n=this.getState();try{this.isDispatching=!0,this.isCoreAction(e)&&(this.state.core=this.coreReducer(this.state.core,e));for(const i in this.pluginReducers){const r=this.pluginReducers[i],o=n.plugins[i];r&&(this.state.plugins[i]=r(o,e))}}finally{this.isDispatching=!1}return this.listeners.forEach(i=>{const r=this.getState();i(e,r,n)}),this.getState()}getState(){if(this.isDispatching)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return{core:{...this.state.core},plugins:{...this.state.plugins}}}subscribe(e){if(this.isDispatching)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state.");return this.listeners.push(e),()=>{if(this.isDispatching)throw new Error("You may not unsubscribe from a store listener while the reducer is executing.");this.listeners=this.listeners.filter(n=>n!==e)}}subscribeToPlugin(e,n){if(!(e in this.state.plugins))throw new Error(`Plugin state not found for plugin "${e}". Did you forget to call addPluginReducer?`);if(this.isDispatching)throw new Error("You may not call store.subscribeToPlugin() while the reducer is executing.");return this.pluginListeners[e]||(this.pluginListeners[e]=[]),this.pluginListeners[e].push(n),()=>{if(this.isDispatching)throw new Error("You may not unsubscribe from a store listener while the reducer is executing.");this.pluginListeners[e]=this.pluginListeners[e].filter(i=>i!==n),this.pluginListeners[e].length===0&&delete this.pluginListeners[e]}}onAction(e,n){return this.subscribe((i,r,o)=>{i.type===e&&n(i,r,o)})}getPluginStore(e){if(!(e in this.state.plugins))throw new Error(`Plugin state not found for plugin "${e}". Did you forget to call addPluginReducer?`);return new ZW(this,e)}isCoreAction(e){return KW.includes(e.type)}destroy(){var e,n;this.listeners.length=0;for(const i in this.pluginListeners)(n=(e=this.pluginListeners[i])==null?void 0:e.splice)==null||n.call(e,0);this.pluginListeners={},this.pluginReducers={},this.state.plugins={},this.state.core={...this.initialCoreState}}}function JW(t,e,n){const i=t.activeDocumentId;if(i!==e)return i;if(n!==void 0)return n&&t.documents[n]?n:null;const r=t.documentOrder.indexOf(e);return r===-1?null:r>0?t.documentOrder[r-1]:r<t.documentOrder.length-1?t.documentOrder[r+1]:null}const eG=(t,e)=>{switch(e.type){case zy:{const{documentId:n,name:i,scale:r,rotation:o,passwordProvided:s,autoActivate:a=!0}=e.payload,l={id:n,name:i,status:"loading",loadingProgress:0,error:null,document:null,scale:r??t.defaultScale,rotation:o??t.defaultRotation,passwordProvided:s??!1,pageRefreshVersions:{},loadStartedAt:Date.now()};return{...t,documents:{...t.documents,[n]:l},documentOrder:[...t.documentOrder,n],activeDocumentId:a||!t.activeDocumentId?n:t.activeDocumentId}}case fL:{const{documentId:n,progress:i}=e.payload,r=t.documents[n];return r&&r.status==="loading"?{...t,documents:{...t.documents,[n]:{...r,loadingProgress:i}}}:t}case Oy:{const{documentId:n,document:i}=e.payload,r=t.documents[n];return r?{...t,documents:{...t.documents,[n]:{...r,status:"loaded",document:i,error:null,errorCode:void 0,errorDetails:void 0,passwordProvided:void 0,loadedAt:Date.now()}}}:t}case kM:{const{documentId:n,error:i,errorCode:r,errorDetails:o}=e.payload,s=t.documents[n];return s?{...t,documents:{...t.documents,[n]:{...s,status:"error",error:i,errorCode:r,errorDetails:o}}}:t}case NM:{const{documentId:n,passwordProvided:i}=e.payload,r=t.documents[n];return r&&r.status==="error"?{...t,documents:{...t.documents,[n]:{...r,status:"loading",loadingProgress:0,error:null,errorCode:void 0,errorDetails:void 0,passwordProvided:i??!1,loadStartedAt:Date.now()}}}:t}case Fy:{const{documentId:n,nextActiveDocumentId:i}=e.payload,{[n]:r,...o}=t.documents;return{...t,documents:o,documentOrder:t.documentOrder.filter(s=>s!==n),activeDocumentId:JW(t,n,i)}}case OM:{const{documentId:n,toIndex:i}=e.payload,r=function(o,s,a){const l=o.indexOf(s);if(l===-1||a<0||a>=o.length||l===a)return null;const c=[...o];return c.splice(l,1),c.splice(a,0,s),c}(t.documentOrder,n,i);return r?{...t,documentOrder:r}:t}case zM:return{...t,documentOrder:e.payload};case LM:return{...t,activeDocumentId:e.payload};case Uy:{const{scale:n,documentId:i}=e.payload,r=i??t.activeDocumentId;if(!r)return t;const o=t.documents[r];return o?{...t,documents:{...t.documents,[r]:{...o,scale:n}}}:t}case By:{const{rotation:n,documentId:i}=e.payload,r=i??t.activeDocumentId;if(!r)return t;const o=t.documents[r];return o?{...t,documents:{...t.documents,[r]:{...o,rotation:n}}}:t}case Id:{const{documentId:n,pageIndexes:i}=e.payload,r=t.documents[n];if(!r)return t;const o={...r.pageRefreshVersions};for(const s of i)o[s]=(o[s]||0)+1;return{...t,documents:{...t.documents,[n]:{...r,pageRefreshVersions:o}}}}default:return t}};class tG{constructor(e,n){this.plugins=new Map,this.manifests=new Map,this.capabilities=new Map,this.status=new Map,this.configurations=new Map,this.initPromise=null,this.pendingRegistrations=[],this.processingRegistrations=[],this.initialized=!1,this.isInitializing=!1,this.pluginsReadyPromise=null,this.destroyed=!1,this.resolver=new NA,this.engine=e,this.initialCoreState=(i=>({documents:{},documentOrder:[],activeDocumentId:null,defaultScale:(i==null?void 0:i.defaultScale)??1,defaultRotation:(i==null?void 0:i.defaultRotation)??Dc.Degree0}))(n),this.store=new QW(eG,this.initialCoreState),this.logger=(n==null?void 0:n.logger)??new oL}getLogger(){return this.logger}registerPlugin(e,n){if(this.initialized&&!this.isInitializing)throw new wr("Cannot register plugins after initialization");this.validateManifest(e.manifest),this.store.addPluginReducer(e.manifest.id,e.reducer,typeof e.initialState=="function"?e.initialState(this.initialCoreState,{...e.manifest.defaultConfig,...n}):e.initialState),this.pendingRegistrations.push({package:e,config:n})}getStore(){return this.store}getEngine(){return this.engine}pluginsReady(){return this.pluginsReadyPromise||(this.pluginsReadyPromise=(async()=>{this.initialized||await this.initialize();const e=Array.from(this.plugins.values()).map(n=>typeof n.ready=="function"?n.ready():Promise.resolve());await Promise.all(e)})()),this.pluginsReadyPromise}async initialize(){if(this.destroyed)throw new wr("Registry has been destroyed");return this.initPromise||(this.initPromise=(async()=>{if(this.initialized)throw new wr("Registry is already initialized");this.isInitializing=!0;try{if(this.destroyed)return;for(;this.pendingRegistrations.length>0;){if(this.destroyed)return;this.processingRegistrations=[...this.pendingRegistrations],this.pendingRegistrations=[];for(const n of this.processingRegistrations){const i=new Set,r=[...n.package.manifest.requires,...n.package.manifest.optional];for(const o of r){const s=this.processingRegistrations.find(a=>a.package.manifest.provides.includes(o));s&&i.add(s.package.manifest.id)}this.resolver.addNode(n.package.manifest.id,[...i])}const e=this.resolver.resolveLoadOrder();for(const n of e){const i=this.processingRegistrations.find(r=>r.package.manifest.id===n);this.instantiatePlugin(i.package.manifest,i.package.create,i.config)}for(const n of e)await this.runPluginInitialization(n);this.processingRegistrations=[],this.resolver=new NA}this.initialized=!0}catch(e){throw e instanceof Error?new XW(`Failed to resolve plugin dependencies: ${e.message}`):e}finally{this.isInitializing=!1}})()),this.initPromise}instantiatePlugin(e,n,i){const r={...e.defaultConfig,...i};this.validateConfig(e.id,r,e.defaultConfig);const o=n(this,r);this.validatePlugin(o);for(const s of e.provides){if(this.capabilities.has(s))throw new wr(`Capability ${s} is already provided by plugin ${this.capabilities.get(s)}`);this.capabilities.set(s,e.id)}this.plugins.set(e.id,o),this.manifests.set(e.id,e),this.status.set(e.id,"registered"),this.configurations.set(e.id,r)}async runPluginInitialization(e){const n=this.plugins.get(e);if(!n)return;const i=this.manifests.get(e),r=this.configurations.get(e);for(const o of i.requires)if(!this.capabilities.has(o))throw new wr(`Missing required capability: ${o} for plugin ${e}`);this.logger.debug("PluginRegistry","InitializePlugin",`Initializing plugin ${e}`);try{n.initialize&&await n.initialize(r),this.status.set(e,"active"),this.logger.info("PluginRegistry","PluginInitialized",`Plugin ${e} initialized successfully`)}catch(o){throw this.status.set(e,"error"),this.logger.error("PluginRegistry","InitializationFailed",`Plugin ${e} initialization failed`,{error:o}),o}}getPluginConfig(e){const n=this.configurations.get(e);if(!n)throw new eu(`Configuration for plugin ${e} not found`);return n}validateConfig(e,n,i){const r=Object.keys(i).filter(o=>!n.hasOwnProperty(o));if(r.length>0)throw new YW(`Missing required configuration keys for plugin ${e}: ${r.join(", ")}`)}async updatePluginConfig(e,n){const i=this.getPlugin(e);if(!i)throw new eu(`Plugin ${e} not found`);const r=this.manifests.get(e),o=this.configurations.get(e);if(!r||!o)throw new eu(`Plugin ${e} not found`);const s={...o,...n};this.validateConfig(e,s,r.defaultConfig),this.configurations.set(e,s),i.initialize&&await i.initialize(s)}registerPluginBatch(e){for(const n of e)this.registerPlugin(n.package,n.config)}async unregisterPlugin(e){const n=this.plugins.get(e);if(!n)throw new eu(`Plugin ${e} is not registered`);const i=this.manifests.get(e);if(!i)throw new eu(`Manifest for plugin ${e} not found`);for(const[r,o]of this.manifests.entries())if(r!==e&&[...o.requires,...o.optional].some(s=>i.provides.includes(s)))throw new wr(`Cannot unregister plugin ${e}: plugin ${r} depends on it`);try{n.destroy&&await n.destroy();for(const r of i.provides)this.capabilities.delete(r);this.plugins.delete(e),this.manifests.delete(e),this.status.delete(e)}catch(r){throw r instanceof Error?new Error(`Failed to unregister plugin ${e}: ${r.message}`):r}}getPlugin(e){return this.plugins.get(e)||null}getCapabilityProvider(e){const n=this.capabilities.get(e);return n?this.getPlugin(n):null}hasCapability(e){return this.capabilities.has(e)}getAllPlugins(){return Array.from(this.plugins.values())}getPluginStatus(e){const n=this.status.get(e);if(!n)throw new eu(`Plugin ${e} not found`);return n}validatePlugin(e){if(!e.id)throw new wr("Plugin must have an id")}validateManifest(e){if(!e.id)throw new wr("Manifest must have an id");if(!e.name)throw new wr("Manifest must have a name");if(!e.version)throw new wr("Manifest must have a version");if(!Array.isArray(e.provides))throw new wr("Manifest must have a provides array");if(!Array.isArray(e.requires))throw new wr("Manifest must have a requires array");if(!Array.isArray(e.optional))throw new wr("Manifest must have an optional array")}isDestroyed(){return this.destroyed}async destroy(){var e;if(this.destroyed)throw new wr("Registry has already been destroyed");this.destroyed=!0;try{await this.initPromise}catch{}for(const n of Array.from(this.plugins.values()).reverse())await((e=n.destroy)==null?void 0:e.call(n));this.store.destroy(),this.plugins.clear(),this.manifests.clear(),this.capabilities.clear(),this.status.clear(),this.pendingRegistrations.length=0,this.processingRegistrations.length=0}}function Tn(t,e){return{package:t,config:e}}function nG(t){return"autoMountElements"in t&&typeof t.autoMountElements=="function"}class Ln{constructor(e,n){if(this.id=e,this.registry=n,this.cooldownActions={},this.debouncedTimeouts={},this.unsubscribeFromState=null,this.unsubscribeFromCoreStore=null,this.unsubscribeFromStartLoadingDocument=null,this.unsubscribeFromSetDocumentLoaded=null,this.unsubscribeFromCloseDocument=null,this.unsubscribeFromSetScale=null,this.unsubscribeFromSetRotation=null,e!==this.constructor.id)throw new Error(`Plugin ID mismatch: ${e} !== ${this.constructor.id}`);this.engine=this.registry.getEngine(),this.logger=this.registry.getLogger(),this.coreStore=this.registry.getStore(),this.pluginStore=this.coreStore.getPluginStore(this.id),this.unsubscribeFromState=this.pluginStore.subscribeToState((i,r,o)=>{this.onStoreUpdated(o,r)}),this.unsubscribeFromCoreStore=this.coreStore.subscribe((i,r,o)=>{this.onCoreStoreUpdated(o,r),r.core.activeDocumentId!==o.core.activeDocumentId&&this.onActiveDocumentChanged(o.core.activeDocumentId,r.core.activeDocumentId)}),this.unsubscribeFromStartLoadingDocument=this.coreStore.onAction(zy,i=>{this.onDocumentLoadingStarted(i.payload.documentId)}),this.unsubscribeFromSetDocumentLoaded=this.coreStore.onAction(Oy,i=>{this.onDocumentLoaded(i.payload.documentId)}),this.unsubscribeFromCloseDocument=this.coreStore.onAction(Fy,i=>{this.onDocumentClosed(i.payload.documentId)}),this.unsubscribeFromSetScale=this.coreStore.onAction(Uy,(i,r)=>{const o=i.payload.documentId??r.core.activeDocumentId;o&&this.onScaleChanged(o,i.payload.scale)}),this.unsubscribeFromSetRotation=this.coreStore.onAction(By,(i,r)=>{const o=i.payload.documentId??r.core.activeDocumentId;o&&this.onRotationChanged(o,i.payload.rotation)}),this.readyPromise=new Promise(i=>{this.readyResolve=i}),this.readyResolve()}provides(){if(!this._capability){const e=this.buildCapability();this._capability=Object.freeze(e)}return this._capability}get state(){return this.pluginStore.getState()}get coreState(){return this.coreStore.getState()}getState(){return this.pluginStore.getState()}getCoreState(){return this.coreStore.getState()}dispatchCoreAction(e){return this.coreStore.dispatchToCore(e)}dispatchToAllPlugins(e){return this.coreStore.dispatch(e)}dispatch(e){return this.pluginStore.dispatch(e)}cooldownDispatch(e,n=100){const i=Date.now();return i-(this.cooldownActions[e.type]||0)>=n&&(this.cooldownActions[e.type]=i,this.dispatch(e),!0)}debouncedDispatch(e,n=100){const i=e.type;this.debouncedTimeouts[i]&&clearTimeout(this.debouncedTimeouts[i]),this.debouncedTimeouts[i]=setTimeout(()=>{this.dispatch(e),delete this.debouncedTimeouts[i]},n)}cancelDebouncedDispatch(e){this.debouncedTimeouts[e]&&(clearTimeout(this.debouncedTimeouts[e]),delete this.debouncedTimeouts[e])}subscribe(e){return this.pluginStore.subscribeToState(e)}subscribeToCoreStore(e){return this.coreStore.subscribe(e)}onStoreUpdated(e,n){}onCoreStoreUpdated(e,n){}onDocumentLoadingStarted(e){}onDocumentLoaded(e){}onDocumentClosed(e){}onActiveDocumentChanged(e,n){}onScaleChanged(e,n){}onRotationChanged(e,n){}destroy(){Object.values(this.debouncedTimeouts).forEach(e=>{clearTimeout(e)}),this.debouncedTimeouts={},this.unsubscribeFromState&&(this.unsubscribeFromState(),this.unsubscribeFromState=null),this.unsubscribeFromCoreStore&&(this.unsubscribeFromCoreStore(),this.unsubscribeFromCoreStore=null),this.unsubscribeFromStartLoadingDocument&&(this.unsubscribeFromStartLoadingDocument(),this.unsubscribeFromStartLoadingDocument=null),this.unsubscribeFromSetDocumentLoaded&&(this.unsubscribeFromSetDocumentLoaded(),this.unsubscribeFromSetDocumentLoaded=null),this.unsubscribeFromCloseDocument&&(this.unsubscribeFromCloseDocument(),this.unsubscribeFromCloseDocument=null),this.unsubscribeFromSetScale&&(this.unsubscribeFromSetScale(),this.unsubscribeFromSetScale=null),this.unsubscribeFromSetRotation&&(this.unsubscribeFromSetRotation(),this.unsubscribeFromSetRotation=null)}ready(){return this.readyPromise}markReady(){this.readyResolve()}resetReady(){this.readyPromise=new Promise(e=>{this.readyResolve=e})}getActiveDocumentId(){const e=this.coreState.core.activeDocumentId;if(!e)throw new Error("No active document");return e}getActiveDocumentIdOrNull(){return this.coreState.core.activeDocumentId}getCoreDocument(e){const n=e??this.getActiveDocumentIdOrNull();return n?this.coreState.core.documents[n]??null:null}getCoreDocumentOrThrow(e){const n=this.getCoreDocument(e);if(!n)throw new Error(`Document not found: ${e??"active"}`);return n}}class o0{constructor(e,n){this.handler=e,this.options=n,this.lastRun=0,this.handle=i=>{this.options.mode==="debounce"?this.debounce(i):this.throttle(i)}}debounce(e){this.timeoutId&&window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{this.handler(e),this.timeoutId=void 0},this.options.wait)}throttle(e){if(this.options.mode==="debounce")return;const n=Date.now(),i=this.options.throttleMode||"leading-trailing";n-this.lastRun>=this.options.wait&&(i==="leading-trailing"&&this.handler(e),this.lastRun=n),this.timeoutId&&window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{this.handler(e),this.lastRun=Date.now(),this.timeoutId=void 0},this.options.wait-(n-this.lastRun))}destroy(){this.timeoutId&&window.clearTimeout(this.timeoutId)}}class zb{constructor(e,n){this.handler=e,this.options=n,this.controls=new Map,this.handle=i=>{const r=String(this.options.keyExtractor(i));let o=this.controls.get(r);o||(o=new o0(this.handler,this.baseOptions),this.controls.set(r,o)),o.handle(i)},this.baseOptions={mode:n.mode,wait:n.wait,...n.mode==="throttle"&&"throttleMode"in n?{throttleMode:n.throttleMode}:{}}}destroy(){for(const e of this.controls.values())e.destroy();this.controls.clear()}}function Ob(t){return"keyExtractor"in t}function fn(t,e,n){return t<e?e:t>n?n:t}function wc(t,e,n){if(t===e)return!0;if(t==null||e==null)return t===e;const i=typeof t;if(i!==typeof e)return!1;if(i==="object"){n||(n=new Set);const r=function(a,l){return`${UA(a)}__${UA(l)}`}(t,e);if(n.has(r))return!0;n.add(r);const o=Array.isArray(t),s=Array.isArray(e);return o&&s?function(a,l,c){if(a.length!==l.length)return!1;const u=new Array(l.length).fill(!1);e:for(let d=0;d<a.length;d++){const f=a[d];for(let m=0;m<l.length;m++)if(!u[m]&&wc(f,l[m],c)){u[m]=!0;continue e}return!1}return!0}(t,e,n):!o&&!s&&function(a,l,c){const u=Object.keys(a).sort(),d=Object.keys(l).sort();if(u.length!==d.length)return!1;for(let f=0;f<u.length;f++)if(u[f]!==d[f])return!1;for(const f of u)if(!wc(a[f],l[f],c))return!1;return!0}(t,e,n)}return!1}let iG=0;const yw=new WeakMap;function UA(t){return yw.has(t)||yw.set(t,++iG),yw.get(t)}function Qi(){const t=new Set;return{emit:(e=void 0)=>t.forEach(n=>n(e)),on:e=>(t.add(e),()=>t.delete(e)),off:e=>t.delete(e),clear:()=>t.clear()}}function Ht(t,e=wc){const n=new Set,i=new Map;let r=t;const o=(s,a)=>{let l=s,c=()=>{};if(a){if(Ob(a)){const u=new zb(s,a);l=u.handle,c=()=>u.destroy()}else{const u=new o0(s,a);l=u.handle,c=()=>u.destroy()}i.set(s,{wrapped:l,destroy:c})}return r!==void 0&&l(r),n.add(l),()=>{n.delete(l),c(),i.delete(s)}};return{get value(){return r},emit(s=void 0){r!==void 0&&e(r,s)||(r=s,(a=>{n.forEach(l=>l(a))})(s))},on:o,off(s){const a=i.get(s);a?(n.delete(a.wrapped),a.destroy(),i.delete(s)):n.delete(s)},clear(){n.clear(),i.forEach(s=>s.destroy()),i.clear()},select:(s,a=wc)=>(l,c)=>{let u;if(r!==void 0){const d=s(r);u=d,l(d)}return o(d=>{const f=s(d);u!==void 0&&a(u,f)||(u=f,l(f))},c)}}}function Tr(t,e){const n=(e==null?void 0:e.cache)??!0,i=(e==null?void 0:e.equality)??wc,r=new Map,o=new Map,s=new Map,a=new Set,l=new Map,c=u=>String(u);return{emit(u,d){const f=c(u);if(n){const y=r.get(f);if(y!==void 0&&i(y,d))return;r.set(f,d)}const m=o.get(f);m&&m.forEach(y=>y(d));const g=t(u,d);a.forEach(y=>y(g))},forScope(u){const d=c(u);return(f,m)=>{const g=(w=>{let _=o.get(w);return _||(_=new Set,o.set(w,_)),_})(d),y=(w=>{let _=s.get(w);return _||(_=new Map,s.set(w,_)),_})(d);let x=f,v=()=>{};if(m){if(Ob(m)){const w=new zb(f,m);x=w.handle,v=()=>w.destroy()}else{const w=new o0(f,m);x=w.handle,v=()=>w.destroy()}y.set(f,{wrapped:x,destroy:v})}if(n){const w=r.get(d);w!==void 0&&x(w)}return g.add(x),()=>{g.delete(x),v(),y.delete(f),g.size===0&&o.delete(d),y.size===0&&s.delete(d)}}},onGlobal:(u,d)=>{let f=u,m=()=>{};if(d){if(Ob(d)){const g=new zb(u,d);f=g.handle,m=()=>g.destroy()}else{const g=new o0(u,d);f=g.handle,m=()=>g.destroy()}l.set(u,{wrapped:f,destroy:m})}return a.add(f),()=>{a.delete(f),m(),l.delete(u)}},getValue:u=>n?r.get(c(u)):void 0,getScopes:()=>n?Array.from(r.keys()):Array.from(o.keys()),clearScope(u){const d=c(u);n&&r.delete(d);const f=o.get(d);f&&(f.clear(),o.delete(d));const m=s.get(d);m&&(m.forEach(g=>g.destroy()),m.clear(),s.delete(d))},clear(){n&&r.clear(),o.forEach(u=>u.clear()),o.clear(),s.forEach(u=>{u.forEach(d=>d.destroy()),u.clear()}),s.clear(),a.clear(),l.forEach(u=>u.destroy()),l.clear()}}}class rG{constructor(e){this.autoMountElements=[],this.package=e}addUtility(e){return this.autoMountElements.push({component:e,type:"utility"}),this}addWrapper(e){return this.autoMountElements.push({component:e,type:"wrapper"}),this}build(){return{...this.package,autoMountElements:()=>this.autoMountElements}}}function kc(t){return new rG(t)}const FM=Pc({registry:null,coreState:null,isInitializing:!0,pluginsReady:!1,activeDocumentId:null,activeDocument:null,documents:{},documentStates:[]});function oG({plugins:t,children:e}){const{utilities:n,wrappers:i}=Rt(()=>{const r=[],o=[];for(const s of t){const a=s.package;if(nG(a)){const l=a.autoMountElements()||[];for(const c of l)c.type==="utility"?r.push(c.component):c.type==="wrapper"&&o.push(c.component)}}return{utilities:r,wrappers:o}},[t]);return ee(Tt,{children:[i.reduce((r,o)=>ee(o,{children:r}),e),n.map((r,o)=>ee(r,{},`utility-${o}`))]})}function sG({engine:t,logger:e,onInitialized:n,plugins:i,children:r,autoMountDomElements:o=!0}){const[s,a]=xe(null),[l,c]=xe(null),[u,d]=xe(!0),[f,m]=xe(!1),g=vt(n);ge(()=>{g.current=n},[n]),ge(()=>{const v=new tG(t,{logger:e});v.registerPluginBatch(i);let w;return(async()=>{var _;if(await v.initialize(),v.isDestroyed())return;const S=v.getStore();c(S.getState().core);const E=S.subscribe((T,P,D)=>{S.isCoreAction(T)&&P.core!==D.core&&c(P.core)});if(await((_=g.current)==null?void 0:_.call(g,v)),!v.isDestroyed())return v.pluginsReady().then(()=>{v.isDestroyed()||m(!0)}),a(v),d(!1),E;E()})().then(_=>{w=_}).catch(console.error),()=>{w==null||w(),v.destroy(),a(null),c(null),d(!0),m(!1)}},[t,i]);const y=Rt(()=>{const v=(l==null?void 0:l.activeDocumentId)??null,w=(l==null?void 0:l.documents)??{},_=(l==null?void 0:l.documentOrder)??[],S=v&&w[v]?w[v]:null,E=_.map(T=>w[T]).filter(T=>T!=null);return{registry:s,coreState:l,isInitializing:u,pluginsReady:f,activeDocumentId:v,activeDocument:S,documents:w,documentStates:E}},[s,l,u,f]),x=typeof r=="function"?r(y):r;return ee(FM.Provider,{value:y,children:f&&o?ee(oG,{plugins:i,children:x}):x})}function zr(t){const{registry:e}=function(){const i=Rc(FM);if(i===void 0)throw new Error("useCapability must be used within a PDFContext.Provider");const{registry:r,isInitializing:o}=i;if(o)return i;if(r===null)throw new Error("PDF registry failed to initialize properly");return i}();if(e===null)return{plugin:null,isLoading:!0,ready:new Promise(()=>{})};const n=e.getPlugin(t);if(!n)throw new Error(`Plugin ${t} not found`);return{plugin:n,isLoading:!1,ready:n.ready()}}function oi(t){const{plugin:e,isLoading:n,ready:i}=zr(t);if(!e)return{provides:null,isLoading:n,ready:i};if(!e.provides)throw new Error(`Plugin ${t} does not provide a capability`);return{provides:e.provides(),isLoading:n,ready:i}}function Fb(){const{coreState:t}=Rc(FM);return t}function oo(t){const e=Fb();return Rt(()=>e&&t?e.documents[t]??null:null,[e,t])}const aG="https://cdn.jsdelivr.net/npm/@embedpdf/pdfium@2.1.2/dist/pdfium.wasm";Pc(void 0);const pL="viewport",lG={id:pL,name:"Viewport Plugin",version:"1.0.0",provides:["viewport"],requires:[],optional:[],defaultConfig:{viewportGap:10,scrollEndDelay:300}},mL="INIT_VIEWPORT_STATE",gL="CLEANUP_VIEWPORT_STATE",vL="REGISTER_VIEWPORT",yL="UNREGISTER_VIEWPORT",xL="SET_VIEWPORT_METRICS",wL="SET_VIEWPORT_SCROLL_METRICS",_L="SET_VIEWPORT_GAP",bL="SET_SCROLL_ACTIVITY",SL="SET_SMOOTH_SCROLL_ACTIVITY",ML="ADD_VIEWPORT_GATE",CL="REMOVE_VIEWPORT_GATE";function BA(t,e){return{type:SL,payload:{documentId:t,isSmoothScrolling:e}}}const cG={viewportMetrics:{width:0,height:0,scrollTop:0,scrollLeft:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0,clientLeft:0,clientTop:0,relativePosition:{x:0,y:0}},isScrolling:!1,isSmoothScrolling:!1,gates:new Set},HA={viewportGap:0,documents:{},activeViewports:new Set,activeDocumentId:null},EL=class extends Ln{constructor(t,e,n){var i;super(t,e),this.id=t,this.viewportResize$=Ht(),this.viewportMetrics$=Ht(),this.scrollMetrics$=Ht(),this.scrollActivity$=Ht(),this.gateState$=Ht(),this.scrollRequests$=new Map,n.viewportGap&&this.dispatch((i=n.viewportGap,{type:_L,payload:i})),this.scrollEndDelay=n.scrollEndDelay||100}onDocumentLoadingStarted(t){this.dispatch(function(e){return{type:mL,payload:{documentId:e}}}(t)),this.scrollRequests$.set(t,Qi()),this.logger.debug("ViewportPlugin","DocumentOpened",`Initialized viewport state for document: ${t}`)}onDocumentClosed(t){var e;this.dispatch(function(n){return{type:gL,payload:{documentId:n}}}(t)),(e=this.scrollRequests$.get(t))==null||e.clear(),this.scrollRequests$.delete(t),this.logger.debug("ViewportPlugin","DocumentClosed",`Cleaned up viewport state for document: ${t}`)}buildCapability(){return{getViewportGap:()=>this.state.viewportGap,getMetrics:()=>this.getMetrics(),scrollTo:t=>this.scrollTo(t),isScrolling:()=>this.isScrolling(),isSmoothScrolling:()=>this.isSmoothScrolling(),isGated:t=>this.isGated(t),hasGate:(t,e)=>this.hasGate(t,e),getGates:t=>this.getGates(t),forDocument:t=>this.createViewportScope(t),gate:(t,e)=>this.gate(t,e),releaseGate:(t,e)=>this.releaseGate(t,e),isViewportMounted:t=>this.state.activeViewports.has(t),onViewportChange:this.viewportMetrics$.on,onViewportResize:this.viewportResize$.on,onScrollChange:this.scrollMetrics$.on,onScrollActivity:this.scrollActivity$.on,onGateChange:this.gateState$.on}}createViewportScope(t){return{getMetrics:()=>this.getMetrics(t),scrollTo:e=>this.scrollTo(e,t),isScrolling:()=>this.isScrolling(t),isSmoothScrolling:()=>this.isSmoothScrolling(t),isGated:()=>this.isGated(t),hasGate:e=>this.hasGate(e,t),getGates:()=>this.getGates(t),gate:e=>this.gate(e,t),releaseGate:e=>this.releaseGate(e,t),onViewportChange:e=>this.viewportMetrics$.on(n=>{n.documentId===t&&e(n.metrics)}),onScrollChange:e=>this.scrollMetrics$.on(n=>{n.documentId===t&&e(n.scrollMetrics)}),onScrollActivity:e=>this.scrollActivity$.on(n=>{n.documentId===t&&e(n.activity)}),onGateChange:e=>this.gateState$.on(n=>{(n==null?void 0:n.documentId)===t&&e(n)})}}registerViewport(t){if(!this.state.documents[t])throw new Error(`Cannot register viewport for ${t}: document state not found. Document must be opened before registering viewport.`);this.state.activeViewports.has(t)||(this.dispatch(function(e){return{type:vL,payload:{documentId:e}}}(t)),this.logger.debug("ViewportPlugin","RegisterViewport",`Registered viewport (DOM mounted) for document: ${t}`))}unregisterViewport(t){this.registry.isDestroyed()||this.state.activeViewports.has(t)&&(this.dispatch(function(e){return{type:yL,payload:{documentId:e}}}(t)),this.logger.debug("ViewportPlugin","UnregisterViewport",`Unregistered viewport (DOM unmounted) for document: ${t}. State preserved.`))}setViewportResizeMetrics(t,e){if(this.registry.isDestroyed())return;this.dispatch(function(i,r){return{type:xL,payload:{documentId:i,metrics:r}}}(t,e));const n=this.state.documents[t];n&&this.viewportResize$.emit({documentId:t,metrics:n.viewportMetrics})}setViewportScrollMetrics(t,e){if(this.registry.isDestroyed())return;const n=this.state.documents[t];n&&(e.scrollTop===n.viewportMetrics.scrollTop&&e.scrollLeft===n.viewportMetrics.scrollLeft||(this.dispatch(function(i,r){return{type:wL,payload:{documentId:i,scrollMetrics:r}}}(t,e)),this.bumpScrollActivity(t),this.scrollMetrics$.emit({documentId:t,scrollMetrics:e})))}onScrollRequest(t,e){const n=this.scrollRequests$.get(t);if(!n)throw new Error(`Cannot subscribe to scroll requests for ${t}: document state not initialized`);return n.on(e)}gate(t,e){const n=this.state.documents[e];n?n.gates.has(t)||(this.dispatch(function(i,r){return{type:ML,payload:{documentId:i,key:r}}}(e,t)),this.logger.debug("ViewportPlugin","GateAdded",`Added gate '${t}' for document: ${e}. Total gates: ${n.gates.size+1}`)):this.logger.warn("ViewportPlugin","GateViewport",`Cannot gate viewport for ${e}: document not found`)}releaseGate(t,e){const n=this.state.documents[e];n?n.gates.has(t)&&(this.dispatch(function(i,r){return{type:CL,payload:{documentId:i,key:r}}}(e,t)),this.logger.debug("ViewportPlugin","GateReleased",`Released gate '${t}' for document: ${e}. Remaining gates: ${n.gates.size-1}`)):this.logger.warn("ViewportPlugin","ReleaseGate",`Cannot release gate for ${e}: document not found`)}getViewportState(t){const e=t??this.getActiveDocumentId(),n=this.state.documents[e];if(!n)throw new Error(`Viewport state not found for document: ${e}`);return n}getMetrics(t){return this.getViewportState(t).viewportMetrics}isScrolling(t){return this.getViewportState(t).isScrolling}isSmoothScrolling(t){return this.getViewportState(t).isSmoothScrolling}isGated(t){return this.getViewportState(t).gates.size>0}hasGate(t,e){return this.getViewportState(e).gates.has(t)}getGates(t){const e=this.getViewportState(t);return Array.from(e.gates)}scrollTo(t,e){const n=e??this.getActiveDocumentId(),i=this.getViewportState(n),{x:r,y:o,alignX:s,alignY:a,behavior:l="auto"}=t;l==="smooth"&&this.dispatch(BA(n,!0));const c=i.viewportMetrics;let u=r,d=o;s!==void 0&&(u=r-c.clientWidth*(s/100)),a!==void 0&&(d=o-c.clientHeight*(a/100));const f=this.scrollRequests$.get(n);f&&f.emit({x:u,y:d,behavior:l})}bumpScrollActivity(t){this.debouncedDispatch(function(e,n){return{type:bL,payload:{documentId:e,isScrolling:n}}}(t,!1),this.scrollEndDelay),this.debouncedDispatch(BA(t,!1),this.scrollEndDelay)}onStoreUpdated(t,e){for(const n in e.documents){const i=t.documents[n],r=e.documents[n];if(i!==r&&(this.viewportMetrics$.emit({documentId:n,metrics:r.viewportMetrics}),!i||i.isScrolling===r.isScrolling&&i.isSmoothScrolling===r.isSmoothScrolling||this.scrollActivity$.emit({documentId:n,activity:{isScrolling:r.isScrolling,isSmoothScrolling:r.isSmoothScrolling}}),i&&i.gates!==r.gates)){const o=Array.from(i.gates),s=Array.from(r.gates),a=s.find(c=>!o.includes(c)),l=o.find(c=>!s.includes(c));this.gateState$.emit({documentId:n,isGated:r.gates.size>0,gates:s,addedGate:a,removedGate:l}),this.logger.debug("ViewportPlugin","GateStateChanged",`Gate state changed for document ${n}. Gates: [${s.join(", ")}], Gated: ${r.gates.size>0}`)}}}async initialize(t){this.logger.info("ViewportPlugin","Initialize","Viewport plugin initialized")}async destroy(){this.viewportMetrics$.clear(),this.viewportResize$.clear(),this.scrollMetrics$.clear(),this.scrollActivity$.clear(),this.gateState$.clear(),this.scrollRequests$.forEach(t=>t.clear()),this.scrollRequests$.clear(),super.destroy()}};EL.id="viewport";let Hy=EL;const uG={manifest:lG,create:(t,e)=>new Hy(pL,t,e),reducer:(t=HA,e)=>{switch(e.type){case mL:{const{documentId:n}=e.payload;return{...t,documents:{...t.documents,[n]:{...cG,gates:new Set}}}}case gL:{const{documentId:n}=e.payload,{[n]:i,...r}=t.documents,o=new Set(t.activeViewports);return o.delete(n),{...t,documents:r,activeViewports:o,activeDocumentId:t.activeDocumentId===n?null:t.activeDocumentId}}case vL:{const{documentId:n}=e.payload,i=new Set(t.activeViewports);return i.add(n),{...t,activeViewports:i,activeDocumentId:t.activeDocumentId??n}}case yL:{const{documentId:n}=e.payload,i=new Set(t.activeViewports);return i.delete(n),{...t,activeViewports:i}}case"SET_ACTIVE_VIEWPORT_DOCUMENT":return{...t,activeDocumentId:e.payload};case _L:return{...t,viewportGap:e.payload};case xL:{const{documentId:n,metrics:i}=e.payload,r=t.documents[n];return r?{...t,documents:{...t.documents,[n]:{...r,viewportMetrics:{width:i.width,height:i.height,scrollTop:i.scrollTop,scrollLeft:i.scrollLeft,clientWidth:i.clientWidth,clientHeight:i.clientHeight,scrollWidth:i.scrollWidth,scrollHeight:i.scrollHeight,clientLeft:i.clientLeft,clientTop:i.clientTop,relativePosition:{x:i.scrollWidth<=i.clientWidth?0:i.scrollLeft/(i.scrollWidth-i.clientWidth),y:i.scrollHeight<=i.clientHeight?0:i.scrollTop/(i.scrollHeight-i.clientHeight)}}}}}:t}case wL:{const{documentId:n,scrollMetrics:i}=e.payload,r=t.documents[n];return r?{...t,documents:{...t.documents,[n]:{...r,viewportMetrics:{...r.viewportMetrics,scrollTop:i.scrollTop,scrollLeft:i.scrollLeft},isScrolling:!0}}}:t}case bL:{const{documentId:n,isScrolling:i}=e.payload,r=t.documents[n];return r?{...t,documents:{...t.documents,[n]:{...r,isScrolling:i}}}:t}case SL:{const{documentId:n,isSmoothScrolling:i}=e.payload,r=t.documents[n];return r?{...t,documents:{...t.documents,[n]:{...r,isSmoothScrolling:i}}}:t}case ML:{const{documentId:n,key:i}=e.payload,r=t.documents[n];if(!r)return t;const o=new Set(r.gates);return o.add(i),{...t,documents:{...t.documents,[n]:{...r,gates:o}}}}case CL:{const{documentId:n,key:i}=e.payload,r=t.documents[n];if(!r)return t;const o=new Set(r.gates);return o.delete(i),{...t,documents:{...t.documents,[n]:{...r,gates:o}}}}default:return t}},initialState:HA},TL=Pc(null),Ub=()=>oi(Hy.id);function dG(t){const{plugin:e}=zr(Hy.id),n=vt(null);return Ny(()=>{if(!e)return;const i=n.current;if(!i)return;try{e.registerViewport(t)}catch(a){return void console.error(`Failed to register viewport for document ${t}:`,a)}const r=()=>{e.setViewportScrollMetrics(t,{scrollTop:i.scrollTop,scrollLeft:i.scrollLeft})};i.addEventListener("scroll",r);const o=new ResizeObserver(()=>{e.setViewportResizeMetrics(t,{width:i.offsetWidth,height:i.offsetHeight,clientWidth:i.clientWidth,clientHeight:i.clientHeight,scrollTop:i.scrollTop,scrollLeft:i.scrollLeft,scrollWidth:i.scrollWidth,scrollHeight:i.scrollHeight,clientLeft:i.clientLeft,clientTop:i.clientTop})});o.observe(i);const s=e.onScrollRequest(t,({x:a,y:l,behavior:c="auto"})=>{requestAnimationFrame(()=>{i.scrollTo({left:a,top:l,behavior:c})})});return()=>{e.unregisterViewport(t),o.disconnect(),i.removeEventListener("scroll",r),s()}},[e,t]),n}function hG({children:t,documentId:e,...n}){const[i,r]=xe(0),o=dG(e),{provides:s}=Ub(),a=(u=>{const{provides:d}=Ub(),[f,m]=xe((d==null?void 0:d.isGated(u))??!1);return ge(()=>{if(d)return m(d.isGated(u)),d.onGateChange(g=>{g.documentId===u&&m(g.isGated)})},[d,u]),f})(e);ge(()=>{s&&r(s.getViewportGap())},[s]);const{style:l,...c}=n;return ee(TL.Provider,{value:o,children:ee("div",{...c,ref:o,style:{width:"100%",height:"100%",overflow:"auto",...typeof l=="object"?l:{},padding:`${i}px`},children:!a&&t})})}var qr=(t=>(t.Vertical="vertical",t.Horizontal="horizontal",t))(qr||{});class AL{constructor(e){this.pageGap=e.pageGap??20,this.viewportGap=e.viewportGap??20,this.bufferSize=e.bufferSize??2}getVisibleRange(e,n,i){const r=this.getScrollOffset(e),o=r,s=r+this.getClientSize(e);let a=0;for(;a<n.length&&(n[a].offset+n[a].height)*i<=o;)a++;let l=a;for(;l<n.length&&n[l].offset*i<=s;)l++;return{start:Math.max(0,a-this.bufferSize),end:Math.min(n.length-1,l+this.bufferSize-1)}}handleScroll(e,n,i){const r=this.getVisibleRange(e,n,i),o=n.slice(r.start,r.end+1),s=this.calculatePageVisibility(o,e,i),a=s.map(g=>g.pageNumber),l=n.slice(r.start,r.end+1).flatMap(g=>g.index),c=this.determineCurrentPage(s),u=n[r.start],d=n[r.end],f=u?u.offset*i:0,m=d?(n[n.length-1].offset+n[n.length-1].height)*i-(d.offset+d.height)*i:0;return{currentPage:c,visiblePages:a,pageVisibilityMetrics:s,renderedPageIndexes:l,scrollOffset:{x:e.scrollLeft,y:e.scrollTop},startSpacing:f,endSpacing:m}}calculatePageVisibility(e,n,i){const r=[];return e.forEach(o=>{o.pageLayouts.forEach(s=>{const a=o.x*i,l=o.y*i,c=a+s.x*i,u=l+s.y*i,d=s.rotatedWidth*i,f=s.rotatedHeight*i,m=n.scrollLeft,g=n.scrollTop,y=m+n.clientWidth,x=g+n.clientHeight,v=Math.max(c,m),w=Math.max(u,g),_=Math.min(c+d,y),S=Math.min(u+f,x);if(v<_&&w<S){const E=_-v,T=S-w,P=d*f,D=E*T;r.push({pageNumber:s.pageNumber,viewportX:v-m,viewportY:w-g,visiblePercentage:D/P*100,original:{pageX:(v-c)/i,pageY:(w-u)/i,visibleWidth:E/i,visibleHeight:T/i,scale:1},scaled:{pageX:v-c,pageY:w-u,visibleWidth:E,visibleHeight:T,scale:i}})}})}),r}determineCurrentPage(e){if(e.length===0)return 1;const n=Math.max(...e.map(r=>r.visiblePercentage)),i=e.filter(r=>r.visiblePercentage===n);return i.length===1?i[0].pageNumber:i.sort((r,o)=>r.pageNumber-o.pageNumber)[0].pageNumber}getRectLocationForPage(e,n,i){const r=n.find(a=>a.pageNumbers.includes(e));if(!r)return null;const o=r.pageLayouts.find(a=>a.pageNumber===e);if(!o)return null;let s=0;if(i){const a=i.width;r.width<a&&(s=(a-r.width)/2)}return{origin:{x:r.x+o.x+s,y:r.y+o.y},size:{width:o.width,height:o.height}}}getScrollPositionForPage(e,n,i,r,o){const s=this.getTotalContentSize(n),a=this.getRectLocationForPage(e,n,s);if(!a)return null;const l=vv(a.origin,i);if(o){const c=function(u,d,f,m){return vv(nL(u,d,f),m)}({width:a.size.width,height:a.size.height},{x:o.x,y:o.y},r,i);return{x:l.x+c.x+this.viewportGap,y:l.y+c.y+this.viewportGap}}return{x:l.x+this.viewportGap,y:l.y+this.viewportGap}}getRectPositionForPage(e,n,i,r,o){const s=this.getTotalContentSize(n),a=this.getRectLocationForPage(e,n,s);if(!a)return null;const l=vv(a.origin,i),c=TW({width:a.size.width,height:a.size.height},o,r,i);return{origin:{x:l.x+c.origin.x,y:l.y+c.origin.y},size:c.size}}}class fG extends AL{constructor(e){super(e)}createVirtualItems(e){let n=0;return e.map((i,r)=>{let o=0;const s=i.map(u=>{const d={pageNumber:u.index+1,pageIndex:u.index,x:o,y:0,width:u.size.width,height:u.size.height,rotatedWidth:u.rotatedSize.width,rotatedHeight:u.rotatedSize.height};return o+=u.rotatedSize.width+this.pageGap,d}),a=i.reduce((u,d,f)=>u+d.rotatedSize.width+(f<i.length-1?this.pageGap:0),0),l=Math.max(...i.map(u=>u.rotatedSize.height)),c={id:`item-${r}`,x:0,y:n,offset:n,width:a,height:l,pageLayouts:s,pageNumbers:i.map(u=>u.index+1),index:r};return n+=l+this.pageGap,c})}getTotalContentSize(e){return e.length===0?{width:0,height:0}:{width:Math.max(...e.map(n=>n.width)),height:e[e.length-1].y+e[e.length-1].height}}getScrollOffset(e){return e.scrollTop}getClientSize(e){return e.clientHeight}}class pG extends AL{constructor(e){super(e)}createVirtualItems(e){let n=0;return e.map((i,r)=>{let o=0;const s=i.map(u=>{const d={pageNumber:u.index+1,pageIndex:u.index,x:o,y:0,width:u.size.width,height:u.size.height,rotatedWidth:u.rotatedSize.width,rotatedHeight:u.rotatedSize.height};return o+=u.rotatedSize.width+this.pageGap,d}),a=i.reduce((u,d,f)=>u+d.rotatedSize.width+(f<i.length-1?this.pageGap:0),0),l=Math.max(...i.map(u=>u.rotatedSize.height)),c={id:`item-${r}`,x:n,y:0,offset:n,width:a,height:l,pageLayouts:s,pageNumbers:i.map(u=>u.index+1),index:r};return n+=a+this.pageGap,c})}getTotalContentSize(e){return e.length===0?{width:0,height:0}:{width:e[e.length-1].x+e[e.length-1].width,height:Math.max(...e.map(n=>n.height))}}getScrollOffset(e){return e.scrollLeft}getClientSize(e){return e.clientWidth}}const IL="INIT_SCROLL_STATE",PL="CLEANUP_SCROLL_STATE",RL="UPDATE_DOCUMENT_SCROLL_STATE",DL="SET_SCROLL_STRATEGY";function gh(t,e){return{type:RL,payload:{documentId:t,state:e}}}const mG={isChanging:!1,targetPage:1,fromPage:1,startTime:0},kL=class extends Ln{constructor(t,e,n){var i,r;super(t,e),this.id=t,this.config=n,this.strategies=new Map,this.layoutReady=new Set,this.initialLayoutFired=new Set,this.scrollerLayoutEmitters=new Map,this.pageChange$=Ht(),this.scroll$=Ht(),this.layoutChange$=Ht(),this.pageChangeState$=Ht(),this.layoutReady$=Ht(),this.state$=Ht(),this.viewport=this.registry.getPlugin("viewport").provides(),this.spread=((i=this.registry.getPlugin("spread"))==null?void 0:i.provides())??null,this.viewport.onScrollActivity(o=>{const s=this.getDocumentState(o.documentId);s!=null&&s.pageChangeState.isChanging&&!o.activity.isSmoothScrolling&&this.completePageChange(o.documentId)}),(r=this.spread)==null||r.onSpreadChange(o=>{this.refreshDocumentLayout(o.documentId)}),this.viewport.onViewportChange(o=>{const s=this.getDocumentState(o.documentId);if(!s)return;const a=this.computeMetrics(o.documentId,o.metrics);this.layoutReady.has(o.documentId)?this.commitMetrics(o.documentId,a):this.commitMetrics(o.documentId,{...a,scrollOffset:s.scrollOffset})})}onDocumentLoadingStarted(t){const e=this.getCoreDocument(t);if(!e)return;const n=this.createDocumentState(e);this.dispatch(function(r,o){return{type:IL,payload:{documentId:r,state:o}}}(t,n));const i=this.createStrategy(n.strategy);this.strategies.set(t,i),this.scrollerLayoutEmitters.set(t,Ht())}onDocumentLoaded(t){var e;const n=this.getCoreDocument(t);n&&(this.dispatch(gh(t,{totalPages:((e=n.document)==null?void 0:e.pageCount)??0})),this.refreshDocumentLayout(t),this.logger.debug("ScrollPlugin","DocumentOpened",`Initialized scroll state for document: ${t}`))}onDocumentClosed(t){this.strategies.delete(t),this.layoutReady.delete(t),this.initialLayoutFired.delete(t);const e=this.scrollerLayoutEmitters.get(t);e&&(e.clear(),this.scrollerLayoutEmitters.delete(t)),this.dispatch(function(n){return{type:PL,payload:n}}(t)),this.logger.debug("ScrollPlugin","DocumentClosed",`Cleaned up scroll state for document: ${t}`)}onScaleChanged(t){const e=this.coreState.core.documents[t];if(!e||e.status!=="loaded")return;const n=this.viewport.forDocument(t),i=this.computeMetrics(t,n.getMetrics());this.commitMetrics(t,i)}onRotationChanged(t){this.refreshDocumentLayout(t)}onScrollerData(t,e){const n=this.scrollerLayoutEmitters.get(t);if(!n)throw new Error(`No scroller layout emitter found for document: ${t}`);return n.on(e)}getScrollerLayout(t){const e=this.getDocumentState(t),n=this.getCoreDocumentOrThrow(t);if(!e||!n)throw new Error(`Cannot get scroller layout for document: ${t}`);return i=e,r=n.scale,{startSpacing:i.startSpacing,endSpacing:i.endSpacing,totalWidth:i.totalContentSize.width*r,totalHeight:i.totalContentSize.height*r,pageGap:i.pageGap*r,strategy:i.strategy,items:i.renderedPageIndexes.map(o=>({...i.virtualItems[o],pageLayouts:i.virtualItems[o].pageLayouts.map(s=>({...s,rotatedWidth:s.rotatedWidth*r,rotatedHeight:s.rotatedHeight*r,width:s.width*r,height:s.height*r}))}))};var i,r}setLayoutReady(t){if(this.layoutReady.has(t))return;const e=this.getDocumentState(t);if(!e)return;this.layoutReady.add(t);const n=!this.initialLayoutFired.has(t);n&&this.initialLayoutFired.add(t),this.viewport.forDocument(t).scrollTo({...e.scrollOffset,behavior:"instant"}),this.layoutReady$.emit({documentId:t,isInitial:n,pageNumber:e.currentPage,totalPages:e.totalPages})}clearLayoutReady(t){this.layoutReady.delete(t)}buildCapability(){return{getCurrentPage:()=>this.getCurrentPage(),getTotalPages:()=>this.getTotalPages(),getPageChangeState:()=>this.getPageChangeState(),scrollToPage:t=>this.scrollToPage(t),scrollToNextPage:t=>this.scrollToNextPage(t),scrollToPreviousPage:t=>this.scrollToPreviousPage(t),getMetrics:t=>this.getMetrics(t),getLayout:()=>this.getLayout(),getRectPositionForPage:(t,e,n,i)=>this.getRectPositionForPage(t,e,n,i),forDocument:t=>this.createScrollScope(t),setScrollStrategy:(t,e)=>this.setScrollStrategyForDocument(t,e),getPageGap:()=>this.state.defaultPageGap,onPageChange:this.pageChange$.on,onScroll:this.scroll$.on,onLayoutChange:this.layoutChange$.on,onLayoutReady:this.layoutReady$.on,onPageChangeState:this.pageChangeState$.on,onStateChange:this.state$.on}}createScrollScope(t){return{getCurrentPage:()=>this.getCurrentPage(t),getTotalPages:()=>this.getTotalPages(t),getPageChangeState:()=>this.getPageChangeState(t),scrollToPage:e=>this.scrollToPage(e,t),scrollToNextPage:e=>this.scrollToNextPage(e,t),scrollToPreviousPage:e=>this.scrollToPreviousPage(e,t),getSpreadPagesWithRotatedSize:()=>this.getSpreadPagesWithRotatedSize(t),getMetrics:e=>this.getMetrics(e,t),getLayout:()=>this.getLayout(t),getRectPositionForPage:(e,n,i,r)=>this.getRectPositionForPage(e,n,i,r,t),setScrollStrategy:e=>this.setScrollStrategyForDocument(e,t),onPageChange:e=>this.pageChange$.on(n=>{n.documentId===t&&e(n)}),onScroll:e=>this.scroll$.on(n=>{n.documentId===t&&e(n.metrics)}),onLayoutChange:e=>this.layoutChange$.on(n=>{n.documentId===t&&e(n.layout)})}}getDocumentState(t){const e=t??this.getActiveDocumentId();return this.state.documents[e]??null}getDocumentStateOrThrow(t){const e=this.getDocumentState(t);if(!e)throw new Error(`Scroll state not found for document: ${t??"active"}`);return e}getStrategy(t){const e=t??this.getActiveDocumentId(),n=this.strategies.get(e);if(!n)throw new Error(`Strategy not found for document: ${e}`);return n}createStrategy(t){const e={pageGap:this.state.defaultPageGap,viewportGap:this.viewport.getViewportGap(),bufferSize:this.state.defaultBufferSize};return t===qr.Horizontal?new pG(e):new fG(e)}createDocumentState(t){var e;return{virtualItems:[],totalPages:((e=t.document)==null?void 0:e.pageCount)??0,currentPage:1,totalContentSize:{width:0,height:0},strategy:this.state.defaultStrategy,pageGap:this.state.defaultPageGap,visiblePages:[],pageVisibilityMetrics:[],renderedPageIndexes:[],scrollOffset:{x:0,y:0},startSpacing:0,endSpacing:0,pageChangeState:mG}}startPageChange(t,e,n="smooth"){const i=this.getDocumentState(t);if(!i)return;const r={isChanging:!0,targetPage:e,fromPage:i.currentPage,startTime:Date.now()};this.dispatch(gh(t,{pageChangeState:r})),n==="instant"&&this.completePageChange(t)}completePageChange(t){const e=this.getDocumentState(t);if(!e||!e.pageChangeState.isChanging)return;const n={isChanging:!1,targetPage:e.pageChangeState.targetPage,fromPage:e.pageChangeState.fromPage,startTime:e.pageChangeState.startTime};this.dispatch(gh(t,{pageChangeState:n}))}computeLayout(t,e){const n=this.getStrategy(t),i=n.createVirtualItems(e);return{virtualItems:i,totalContentSize:n.getTotalContentSize(i)}}computeMetrics(t,e,n){const i=this.getCoreDocumentOrThrow(t),r=this.getDocumentState(t),o=this.getStrategy(t);if(!r)throw new Error(`Document state not found: ${t}`);return o.handleScroll(e,n??r.virtualItems,i.scale)}commitMetrics(t,e){const n=this.getDocumentState(t);n&&(this.dispatch(gh(t,e)),this.scroll$.emit({documentId:t,metrics:e}),e.currentPage!==n.currentPage&&this.pageChange$.emit({documentId:t,pageNumber:e.currentPage,totalPages:n.totalPages}),this.pushScrollerLayout(t))}pushScrollerLayout(t){const e=this.scrollerLayoutEmitters.get(t);if(e)try{const n=this.getScrollerLayout(t);e.emit(n)}catch{}}refreshDocumentLayout(t){const e=this.coreState.core.documents[t],n=this.getDocumentState(t);if(!e||!n||e.status!=="loaded")return;const i=this.getSpreadPagesWithRotatedSize(t),r=this.computeLayout(t,i),o=this.viewport.forDocument(t),s=this.computeMetrics(t,o.getMetrics(),r.virtualItems);this.dispatch(gh(t,{...r,...s})),this.layoutChange$.emit({documentId:t,layout:r}),this.pushScrollerLayout(t)}getSpreadPagesWithRotatedSize(t){var e,n;const i=t??this.getActiveDocumentId(),r=this.coreState.core.documents[i];if(!r)throw new Error(`Document ${i} not loaded`);return(((e=this.spread)==null?void 0:e.forDocument(i).getSpreadPages())||((n=r.document)==null?void 0:n.pages.map(o=>[o]))||[]).map(o=>o.map(s=>({...s,rotatedSize:i0(s.size,r.rotation,1)})))}getCurrentPage(t){return this.getDocumentStateOrThrow(t).currentPage}getTotalPages(t){return this.getDocumentStateOrThrow(t).totalPages}getPageChangeState(t){return this.getDocumentStateOrThrow(t).pageChangeState}scrollToPage(t,e){const n=e??this.getActiveDocumentId(),i=this.getDocumentStateOrThrow(n),r=this.getStrategy(n),o=this.getCoreDocumentOrThrow(n),{pageNumber:s,behavior:a="smooth",pageCoordinates:l,alignX:c,alignY:u}=t;this.startPageChange(n,s,a);const d=r.getScrollPositionForPage(s,i.virtualItems,o.scale,o.rotation,l);d?this.viewport.forDocument(n).scrollTo({...d,behavior:a,alignX:c,alignY:u}):this.completePageChange(n)}scrollToNextPage(t="smooth",e){const n=e??this.getActiveDocumentId(),i=this.getDocumentStateOrThrow(n),r=this.getStrategy(n),o=this.getCoreDocumentOrThrow(n),s=i.virtualItems.findIndex(a=>a.pageNumbers.includes(i.currentPage));if(s>=0&&s<i.virtualItems.length-1){const a=i.virtualItems[s+1].pageNumbers[0];this.startPageChange(n,a,t);const l=r.getScrollPositionForPage(a,i.virtualItems,o.scale,o.rotation);l?this.viewport.forDocument(n).scrollTo({...l,behavior:t}):this.completePageChange(n)}}scrollToPreviousPage(t="smooth",e){const n=e??this.getActiveDocumentId(),i=this.getDocumentStateOrThrow(n),r=this.getStrategy(n),o=this.coreState.core.documents[n],s=i.virtualItems.findIndex(a=>a.pageNumbers.includes(i.currentPage));if(s>0){const a=i.virtualItems[s-1].pageNumbers[0];this.startPageChange(n,a,t);const l=r.getScrollPositionForPage(a,i.virtualItems,o.scale,o.rotation);l?this.viewport.forDocument(n).scrollTo({...l,behavior:t}):this.completePageChange(n)}}getMetrics(t,e){const n=e??this.getActiveDocumentId();if(t)return this.computeMetrics(n,t);const i=this.viewport.forDocument(n);return this.computeMetrics(n,i.getMetrics())}getLayout(t){const e=this.getDocumentStateOrThrow(t);return{virtualItems:e.virtualItems,totalContentSize:e.totalContentSize}}getRectPositionForPage(t,e,n,i,r){const o=r??this.getActiveDocumentId(),s=this.getDocumentStateOrThrow(o),a=this.getStrategy(o),l=this.getCoreDocumentOrThrow(o);return a.getRectPositionForPage(t+1,s.virtualItems,n??l.scale,i??l.rotation,e)}setScrollStrategyForDocument(t,e){const n=e??this.getActiveDocumentId(),i=this.getDocumentState(n);if(!i||i.strategy===t)return;const r=this.createStrategy(t);this.strategies.set(n,r),this.dispatch(function(o,s){return{type:DL,payload:{documentId:o,strategy:s}}}(n,t)),this.refreshDocumentLayout(n)}onStoreUpdated(t,e){for(const n in e.documents){const i=t.documents[n],r=e.documents[n];i!==r&&(this.state$.emit(r),(i==null?void 0:i.pageChangeState)!==r.pageChangeState&&this.pageChangeState$.emit({documentId:n,state:r.pageChangeState}),this.pushScrollerLayout(n))}}async initialize(){this.logger.info("ScrollPlugin","Initialize","Scroll plugin initialized")}async destroy(){this.strategies.clear(),this.layoutReady.clear(),this.initialLayoutFired.clear();for(const t of this.scrollerLayoutEmitters.values())t.clear();this.scrollerLayoutEmitters.clear(),this.pageChange$.clear(),this.scroll$.clear(),this.layoutChange$.clear(),this.pageChangeState$.clear(),this.layoutReady$.clear(),this.state$.clear(),super.destroy()}};kL.id="scroll";let UM=kL;const VA="scroll",gG={manifest:{id:VA,name:"Scroll Plugin",version:"1.0.0",provides:["scroll"],requires:["viewport"],optional:["spread"],defaultConfig:{defaultPageGap:10,defaultBufferSize:4,defaultStrategy:qr.Vertical}},create:(t,e)=>new UM(VA,t,e),reducer:(t,e)=>{switch(e.type){case IL:{const{documentId:n,state:i}=e.payload;return{...t,documents:{...t.documents,[n]:i}}}case PL:{const{[e.payload]:n,...i}=t.documents;return{...t,documents:i}}case RL:{const{documentId:n,state:i}=e.payload,r=t.documents[n];return r?{...t,documents:{...t.documents,[n]:{...r,...i}}}:t}case DL:{const{documentId:n,strategy:i}=e.payload,r=t.documents[n];return r?{...t,documents:{...t.documents,[n]:{...r,strategy:i}}}:t}default:return t}},initialState:(t,e)=>((n,i)=>({defaultStrategy:i.defaultStrategy??qr.Vertical,defaultPageGap:i.defaultPageGap??10,defaultBufferSize:i.defaultBufferSize??2,documents:{}}))(0,e)},pp=()=>oi(UM.id),NL=t=>{const{provides:e}=pp(),[n,i]=xe(1),[r,o]=xe(1);return ge(()=>{if(!e||!t)return;const s=e.forDocument(t);return i(s.getCurrentPage()),o(s.getTotalPages()),e.onPageChange(a=>{a.documentId===t&&(i(a.pageNumber),o(a.totalPages))})},[e,t]),{provides:(e==null?void 0:e.forDocument(t))??null,state:{currentPage:n,totalPages:r}}};function vG({documentId:t,renderPage:e,...n}){const{plugin:i}=zr(UM.id),[r,o]=xe({layout:null,docId:null});ge(()=>{if(!i||!t)return;const a=i.onScrollerData(t,l=>{o({layout:l,docId:t})});return()=>{a(),o({layout:null,docId:null}),i.clearLayoutReady(t)}},[i,t]);const s=r.docId===t?r.layout:null;return Ny(()=>{i&&t&&s&&i.setLayoutReady(t)},[i,t,s]),s?ee("div",{...n,style:{width:`${s.totalWidth}px`,height:`${s.totalHeight}px`,position:"relative",boxSizing:"border-box",margin:"0 auto",...s.strategy===qr.Horizontal&&{display:"flex",flexDirection:"row"}},children:[ee("div",{style:{...s.strategy===qr.Horizontal?{width:s.startSpacing,height:"100%",flexShrink:0}:{height:s.startSpacing,width:"100%"}}}),ee("div",{style:{gap:s.pageGap,display:"flex",alignItems:"center",position:"relative",boxSizing:"border-box",...s.strategy===qr.Horizontal?{flexDirection:"row",minHeight:"100%"}:{flexDirection:"column",minWidth:"fit-content"}},children:s.items.map(a=>ee("div",{style:{display:"flex",justifyContent:"center",gap:s.pageGap},children:a.pageLayouts.map(l=>ee("div",{style:{width:`${l.rotatedWidth}px`,height:`${l.rotatedHeight}px`},children:e({...l})},l.pageNumber))},a.pageNumbers[0]))}),ee("div",{style:{...s.strategy===qr.Horizontal?{width:s.endSpacing,height:"100%",flexShrink:0}:{height:s.endSpacing,width:"100%"}}})]}):null}var Mr=(t=>(t.None="none",t.Odd="odd",t.Even="even",t))(Mr||{});const LL="SPREAD/INIT_STATE",zL="SPREAD/CLEANUP_STATE",OL="SPREAD/SET_SPREAD_MODE",FL="SPREAD/SET_PAGE_GROUPING";function $A(t,e){return{type:FL,payload:{documentId:t,grouping:e}}}const UL=class extends Ln{constructor(t,e,n){var i;super(t,e),this.spreadEmitter$=Ht(),this.defaultSpreadMode=n.defaultSpreadMode??Mr.None,this.viewport=((i=e.getPlugin("viewport"))==null?void 0:i.provides())??null}onDocumentLoadingStarted(t){var e;const n={spreadMode:this.defaultSpreadMode};this.dispatch(function(i,r){return{type:LL,payload:{documentId:i,state:r}}}(t,n)),(e=this.viewport)==null||e.gate("spread",t),this.logger.debug("SpreadPlugin","DocumentOpened",`Initialized spread state for document: ${t}`)}onDocumentLoaded(t){var e;const n=this.coreState.core.documents[t];if(n!=null&&n.document){const i=this.calculatePageGrouping(t,n.document.pages.length);this.dispatch($A(t,i))}(e=this.viewport)==null||e.releaseGate("spread",t)}onDocumentClosed(t){this.dispatch(function(e){return{type:zL,payload:e}}(t)),this.logger.debug("SpreadPlugin","DocumentClosed",`Cleaned up spread state for document: ${t}`)}buildCapability(){return{setSpreadMode:t=>this.setSpreadModeForDocument(t),getSpreadMode:()=>this.getSpreadModeForDocument(),getSpreadPages:()=>this.getSpreadPages(),forDocument:t=>this.createSpreadScope(t),onSpreadChange:this.spreadEmitter$.on}}createSpreadScope(t){return{setSpreadMode:e=>this.setSpreadModeForDocument(e,t),getSpreadMode:()=>this.getSpreadModeForDocument(t),getSpreadPages:()=>this.getSpreadPages(t),onSpreadChange:e=>this.spreadEmitter$.on(n=>{n.documentId===t&&e(n.spreadMode)})}}getDocumentState(t){const e=t??this.getActiveDocumentId();return this.state.documents[e]??null}getDocumentStateOrThrow(t){const e=this.getDocumentState(t);if(!e)throw new Error(`Spread state not found for document: ${t??"active"}`);return e}setSpreadModeForDocument(t,e){const n=e??this.getActiveDocumentId(),i=this.getDocumentStateOrThrow(n),r=this.coreState.core.documents[n];if(!(r!=null&&r.document))throw new Error(`Document ${n} not loaded`);if(i.spreadMode!==t){this.dispatch(function(s,a){return{type:OL,payload:{documentId:s,spreadMode:a}}}(n,t));const o=this.calculatePageGrouping(n,r.document.pages.length);this.dispatch($A(n,o)),this.spreadEmitter$.emit({documentId:n,spreadMode:t})}}getSpreadModeForDocument(t){return this.getDocumentStateOrThrow(t).spreadMode}calculatePageGrouping(t,e){switch(this.getDocumentStateOrThrow(t).spreadMode){case Mr.None:return Array.from({length:e},(n,i)=>[i]);case Mr.Odd:return Array.from({length:Math.ceil(e/2)},(n,i)=>{const r=[2*i];return 2*i+1<e&&r.push(2*i+1),r});case Mr.Even:return[[0],...Array.from({length:Math.ceil((e-1)/2)},(n,i)=>{const r=[1+2*i];return 1+2*i+1<e&&r.push(1+2*i+1),r})];default:return Array.from({length:e},(n,i)=>[i])}}getSpreadPages(t){const e=t??this.getActiveDocumentId(),n=this.coreState.core.documents[e],i=this.getDocumentStateOrThrow(e);if(!(n!=null&&n.document))throw new Error(`Document ${e} not loaded`);const r=i.pageGrouping??[],o=n.document.pages;return r.map(s=>s.map(a=>o[a]).filter(Boolean))}onStoreUpdated(t,e){for(const n in e.documents){const i=t.documents[n],r=e.documents[n];(i==null?void 0:i.spreadMode)!==r.spreadMode&&this.logger.debug("SpreadPlugin","SpreadModeChanged",`Spread mode changed for document ${n}: ${(i==null?void 0:i.spreadMode)??Mr.None} -> ${r.spreadMode}`)}}async initialize(t){this.logger.info("SpreadPlugin","Initialize","Spread plugin initialized")}async destroy(){this.spreadEmitter$.clear(),super.destroy()}};UL.id="spread";let yG=UL;const BL="spread",xG={id:BL,name:"Spread Plugin",version:"1.0.0",provides:["spread"],requires:[],optional:["viewport"],defaultConfig:{}};Mr.None;const WA={documents:{},activeDocumentId:null},wG={manifest:xG,create:(t,e)=>new yG(BL,t,e),reducer:(t=WA,e)=>{switch(e.type){case LL:{const{documentId:n,state:i}=e.payload;return{...t,documents:{...t.documents,[n]:i},activeDocumentId:t.activeDocumentId??n}}case zL:{const n=e.payload,{[n]:i,...r}=t.documents;return{...t,documents:r,activeDocumentId:t.activeDocumentId===n?null:t.activeDocumentId}}case"SPREAD/SET_ACTIVE_DOCUMENT":return{...t,activeDocumentId:e.payload};case OL:{const{documentId:n,spreadMode:i}=e.payload,r=t.documents[n];return r?{...t,documents:{...t.documents,[n]:{...r,spreadMode:i}}}:t}case FL:{const{documentId:n,grouping:i}=e.payload,r=t.documents[n];return r?{...t,documents:{...t.documents,[n]:{...r,pageGrouping:i}}}:t}default:return t}},initialState:WA},qs="ui",_G={id:qs,name:"UI Plugin",version:"1.0.0",provides:["ui"],requires:["commands"],optional:["i18n"],defaultConfig:{schema:{id:"empty",version:"1.0.0",toolbars:{},menus:{},sidebars:{},modals:{},selectionMenus:{}}}},HL="UI/INIT_STATE",VL="UI/CLEANUP_STATE",$L="UI/SET_ACTIVE_TOOLBAR",WL="UI/CLOSE_TOOLBAR_SLOT",GL="UI/SET_ACTIVE_SIDEBAR",jL="UI/CLOSE_SIDEBAR_SLOT",qL="UI/SET_SIDEBAR_TAB",XL="UI/OPEN_MODAL",YL="UI/CLOSE_MODAL",ZL="UI/CLEAR_MODAL",KL="UI/OPEN_MENU",QL="UI/CLOSE_MENU",JL="UI/CLOSE_ALL_MENUS",ez="UI/SET_DISABLED_CATEGORIES",tz="UI/SET_HIDDEN_ITEMS",GA=(t,e,n,i,r)=>({type:GL,payload:{documentId:t,placement:e,slot:n,sidebarId:i,activeTab:r}}),jA=(t,e,n)=>({type:jL,payload:{documentId:t,placement:e,slot:n}}),qA=(t,e)=>({type:KL,payload:{documentId:t,menuState:e}}),XA=(t,e)=>({type:QL,payload:{documentId:t,menuId:e}}),Km=t=>({type:ez,payload:{categories:t}}),Qm=t=>({type:tz,payload:{hiddenItems:t}});function bG(t,e){if(!e)return t;const n={...t};for(const[i,r]of Object.entries(e))n[i]?n[i]={...n[i],...r,items:r.items??n[i].items,responsive:r.responsive??n[i].responsive}:n[i]=r;return n}function SG(t,e){if(!e)return t;const n={...t};for(const[i,r]of Object.entries(e))n[i]?n[i]={...n[i],...r,items:r.items??n[i].items}:n[i]=r;return n}function MG(t,e){if(!e)return t;const n={...t};for(const[i,r]of Object.entries(e))n[i]?n[i]={...n[i],...r,content:r.content??n[i].content}:n[i]=r;return n}function s0(t,e){var n;if(!((n=t.responsive)!=null&&n.breakpoints))return null;const i=function(l,c,u){if(!u||!(c!=null&&c.groups))return l;const d=c.groups.find(m=>m.locales.includes(u));if(!d)return l;const f={};for(const[m,g]of Object.entries(l)){const y=d.breakpoints[m];y?f[m]={minWidth:g.minWidth,maxWidth:g.maxWidth,hide:y.replaceHide?y.replaceHide:[...g.hide||[],...y.hide||[]],show:y.replaceShow?y.replaceShow:[...g.show||[],...y.show||[]]}:f[m]=g}return f}(t.responsive.breakpoints,t.responsive.localeOverrides,e),r=new Map,o=new Map;for(const[l,c]of Object.entries(i))o.set(l,{minWidth:c.minWidth,maxWidth:c.maxWidth});const s=new Set,a=l=>{l.forEach(c=>{s.add(c.id),c.type==="group"&&c.items&&a(c.items),c.type==="tab-group"&&c.tabs&&a(c.tabs),c.type==="section"&&c.items&&a(c.items)})};a(t.items);for(const l of s){const c=[];let u=!0;Array.from(Object.entries(i)).sort((f,m)=>(f[1].minWidth??0)-(m[1].minWidth??0)).forEach(([f,m],g)=>{var y,x;const v=(y=m.hide)==null?void 0:y.includes(l),w=(x=m.show)==null?void 0:x.includes(l);(v||w)&&(c.push({breakpointId:f,minWidth:m.minWidth,maxWidth:m.maxWidth,visible:w||!v,priority:g}),g===0&&(u=w||!v))}),c.length>0&&r.set(l,{itemId:l,shouldRender:!0,visibilityRules:c,defaultVisible:u})}return{items:r,breakpoints:o}}const nz="data-epdf",iz="data-epdf-s",rz="data-epdf-i",BM="data-epdf-cat",HM="data-epdf-dis",oz="data-epdf-hid",Ys={ROOT:`[${nz}]`,STYLES:`[${iz}]`,ITEM:t=>`[${rz}="${t}"]`,CATEGORIES:t=>`[${BM}~="${t}"]`,DISABLED_CATEGORY:t=>`[${HM}~="${t}"]`,HIDDEN_ITEM:t=>`[${oz}~="${t}"]`},CG={useContainerQueries:!0};function EG(t,e={}){const n={...CG,...e.config},i=e.locale,r=sz(t,i),o=[];o.push(function(c){return`/*  */
/* EmbedPDF UI Stylesheet - Auto-generated${c?` (locale: ${c})`:""}                         */
/* DO NOT EDIT MANUALLY - This file is generated from your UI schema            */
/*  */`}(i));const s=function(c,u){const d=[],f=u.useContainerQueries?"@container":"@media",m=new Set;return c.responsiveItems.forEach((g,y)=>{if(m.has(y))return;m.add(y);const x=function(v,w,_){if(w.visibilityRules.length===0)return null;const S=[],E=Ys.ITEM(v);w.defaultVisible||S.push(`${E} { display: none; }`);for(const T of w.visibilityRules){const P=[];if(T.minWidth!==void 0&&P.push(`(min-width: ${T.minWidth}px)`),T.maxWidth!==void 0&&P.push(`(max-width: ${T.maxWidth}px)`),P.length>0){const D=T.visible?"flex":"none";S.push(`${_} ${P.join(" and ")} {
  ${E} { display: ${D}; }
}`)}}return S.length>0?S.join(`
`):null}(y,g,f);x&&d.push(x)}),d.length===0?"":`/*  Responsive Visibility Rules  */
/* Items show/hide based on container width */

${d.join(`

`)}`}(r,n);s&&o.push(s);const a=function(c){if(c.categories.size===0)return"";const u=[],d=Array.from(c.categories).sort();for(const f of d)u.push(`${Ys.ROOT}[${HM}~="${f}"] [${BM}~="${f}"] {
  display: none !important;
}`);return`/*  Category Visibility Rules  */
/* Items hide when ANY of their categories is disabled */
/* Use: data-disabled-categories="category1 category2" on root element */

${u.join(`

`)}`}(r);a&&o.push(a);const l=function(c,u){if(c.dependencies.length===0)return"";const d=[],f=u.useContainerQueries?"@container":"@media";for(const m of c.dependencies){const g=kG(m,c,f);g.length>0&&d.push(...g)}return d.length===0?"":`/*  Dependency Visibility Rules  */
/* Container elements hide when all their dependencies are hidden */

${d.join(`

`)}`}(r,n);return l&&o.push(l),o.filter(c=>c.trim()).join(`

`)}function Jm(t,e){const n=new Set(e),i=[];return t.forEach((r,o)=>{r.some(s=>n.has(s))&&i.push(o)}),i}function sz(t,e){const n=new Set,i=new Map,r=[],o=new Map,s=new Map;for(const[a,l]of Object.entries(t.menus))TG(a,l,n,i,r,o,s,e);for(const[a,l]of Object.entries(t.toolbars))IG(a,l,n,i,r,s,e);for(const[a,l]of Object.entries(t.sidebars))RG(a,l,n,i,r);for(const[a,l]of Object.entries(t.selectionMenus||{}))DG(a,l,n,i,r,s,e);return{categories:n,itemCategories:i,dependencies:r,menuBreakpoints:o,responsiveItems:s}}function TG(t,e,n,i,r,o,s,a){aa(t,e.categories,e.visibilityDependsOn,n,i,r),az(e.items,n,i,r);const l=s0(e,a);l&&l.items.forEach((u,d)=>{s.set(d,u)});const c=function(u,d,f){var m;const g=[],y=s0(u,f);if((m=u.responsive)!=null&&m.breakpoints&&y){const x=Array.from(y.breakpoints.entries()).sort((v,w)=>(v[1].minWidth??0)-(w[1].minWidth??0));for(const[v,w]of x){const _=AG(y,w),S=new Set;for(const E of _){const T=d.get(E);T&&T.forEach(P=>S.add(P))}g.push({minWidth:w.minWidth,maxWidth:w.maxWidth,visibleItemIds:_,visibleCategories:S})}}else{const x=[],v=new Set;lz(u.items,d,x,v),g.push({visibleItemIds:x,visibleCategories:v})}return g}(e,i,a);o.set(t,c)}function az(t,e,n,i){for(const r of t)aa(r.id,r.categories,r.visibilityDependsOn,e,n,i),r.type==="section"&&az(r.items,e,n,i)}function lz(t,e,n,i){for(const r of t){n.push(r.id);const o=e.get(r.id);o&&o.forEach(s=>i.add(s)),r.type==="section"&&lz(r.items,e,n,i)}}function AG(t,e){const n=[];return t.items.forEach((i,r)=>{let o=i.defaultVisible;for(const s of i.visibilityRules)(s.minWidth===void 0||e.minWidth!==void 0&&e.minWidth>=s.minWidth)&&(s.maxWidth===void 0||e.maxWidth!==void 0&&e.maxWidth<=s.maxWidth)&&(o=s.visible);o&&n.push(r)}),n}function IG(t,e,n,i,r,o,s){aa(t,e.categories,e.visibilityDependsOn,n,i,r);const a=s0(e,s);a&&a.items.forEach((l,c)=>{o.set(c,l)}),cz(e.items,n,i,r)}function cz(t,e,n,i){for(const r of t)aa(r.id,r.categories,r.visibilityDependsOn,e,n,i),r.type==="group"&&r.items&&cz(r.items,e,n,i),r.type==="tab-group"&&r.tabs&&PG(r.tabs,e,n,i)}function PG(t,e,n,i){for(const r of t)aa(r.id,r.categories,r.visibilityDependsOn,e,n,i)}function RG(t,e,n,i,r){if(aa(t,e.categories,e.visibilityDependsOn,n,i,r),e.content.type==="tabs")for(const o of e.content.tabs)aa(o.id,o.categories,o.visibilityDependsOn,n,i,r)}function DG(t,e,n,i,r,o,s){if(aa(t,e.categories,e.visibilityDependsOn,n,i,r),e.responsive){const a=s0(e,s);a&&a.items.forEach((l,c)=>{o.set(c,l)})}uz(e.items,n,i,r)}function uz(t,e,n,i){for(const r of t)aa(r.id,r.categories,r.visibilityDependsOn,e,n,i),r.type==="group"&&r.items&&uz(r.items,e,n,i)}function aa(t,e,n,i,r,o){var s;e!=null&&e.length&&(e.forEach(a=>i.add(a)),r.set(t,e)),n&&(n.menuId||(s=n.itemIds)!=null&&s.length)&&o.push({itemId:t,dependsOnMenuId:n.menuId,dependsOnItemIds:n.itemIds})}function kG(t,e,n,i){var r;const o=[];if(t.dependsOnMenuId){const s=e.menuBreakpoints.get(t.dependsOnMenuId);if(s&&s.length>0){o.push(`/* "${t.itemId}" depends on menu "${t.dependsOnMenuId}" */`);for(const a of s){if(a.visibleItemIds.length===0)continue;const l=a.visibleItemIds.sort().map(d=>Ys.HIDDEN_ITEM(d)).join(""),c=`${Ys.ROOT}${l} ${Ys.ITEM(t.itemId)} {
  display: none !important;
}`,u=[];a.minWidth!==void 0&&u.push(`(min-width: ${a.minWidth}px)`),a.maxWidth!==void 0&&u.push(`(max-width: ${a.maxWidth}px)`),u.length>0?o.push(`${n} ${u.join(" and ")} {
  ${c}
}`):o.push(c)}}}if((r=t.dependsOnItemIds)!=null&&r.length){o.push(`/* "${t.itemId}" depends on items: ${t.dependsOnItemIds.join(", ")} */`);const s=t.dependsOnItemIds.sort().map(a=>Ys.HIDDEN_ITEM(a)).join("");o.push(`${Ys.ROOT}${s} ${Ys.ITEM(t.itemId)} {
  display: none !important;
}`)}return o}function hi(t,e){var n;return{[rz]:t.id,[BM]:((n=t.categories)==null?void 0:n.join(" "))||void 0,...e}}const dz=class extends Ln{constructor(t,e,n){var i,r;if(super(t,e),this.cachedStylesheet=null,this.cachedLocale=null,this.i18n=null,this.i18nCleanup=null,this.categoryChanged$=Ht(),this.stylesheetInvalidated$=Qi(),this.toolbarChanged$=Tr((o,s)=>({documentId:o,...s}),{cache:!1}),this.sidebarChanged$=Tr((o,s)=>({documentId:o,...s}),{cache:!1}),this.modalChanged$=Tr((o,s)=>({documentId:o,...s}),{cache:!1}),this.menuChanged$=Tr((o,s)=>({documentId:o,...s}),{cache:!1}),this.schema=n.schema,this.stylesheetConfig=n.stylesheetConfig||{},this.itemCategories=sz(this.schema).itemCategories,(i=n.disabledCategories)==null?void 0:i.length){this.dispatch(Km(n.disabledCategories));const o=Jm(this.itemCategories,n.disabledCategories);this.dispatch(Qm(o))}this.i18n=((r=e.getPlugin("i18n"))==null?void 0:r.provides())??null,this.i18n&&(this.i18nCleanup=this.i18n.onLocaleChange(({currentLocale:o})=>{this.handleLocaleChange(o)}),this.cachedLocale=this.i18n.getLocale())}async initialize(){this.logger.info("UIPlugin","Initialize","UI plugin initialized")}async destroy(){this.i18nCleanup&&(this.i18nCleanup(),this.i18nCleanup=null),this.toolbarChanged$.clear(),this.sidebarChanged$.clear(),this.modalChanged$.clear(),this.menuChanged$.clear(),this.stylesheetInvalidated$.clear(),super.destroy()}onDocumentLoadingStarted(t){this.dispatch(((e,n)=>({type:HL,payload:{documentId:e,schema:n}}))(t,this.schema))}onDocumentClosed(t){this.dispatch((e=>({type:VL,payload:{documentId:e}}))(t)),this.toolbarChanged$.clearScope(t),this.sidebarChanged$.clearScope(t),this.modalChanged$.clearScope(t),this.menuChanged$.clearScope(t)}handleLocaleChange(t){this.cachedLocale!==t&&(this.logger.debug("UIPlugin","LocaleChange",`Locale changed: ${this.cachedLocale} -> ${t}`),this.cachedLocale=t,this.invalidateStylesheet(),this.stylesheetInvalidated$.emit())}getStylesheet(){var t;const e=((t=this.i18n)==null?void 0:t.getLocale())??null;return this.cachedStylesheet&&this.cachedLocale===e||(this.cachedStylesheet=EG(this.schema,{config:this.stylesheetConfig,locale:e??void 0}),this.cachedLocale=e),this.cachedStylesheet}getLocale(){var t;return((t=this.i18n)==null?void 0:t.getLocale())??null}invalidateStylesheet(){this.cachedStylesheet=null}onStylesheetInvalidated(t){return this.stylesheetInvalidated$.on(t)}disableCategoryImpl(t){const e=new Set(this.state.disabledCategories);if(!e.has(t)){e.add(t);const n=Array.from(e);this.dispatch(Km(n));const i=Jm(this.itemCategories,n);this.dispatch(Qm(i)),this.categoryChanged$.emit({disabledCategories:n,hiddenItems:i})}}enableCategoryImpl(t){const e=new Set(this.state.disabledCategories);if(e.has(t)){e.delete(t);const n=Array.from(e);this.dispatch(Km(n));const i=Jm(this.itemCategories,n);this.dispatch(Qm(i)),this.categoryChanged$.emit({disabledCategories:n,hiddenItems:i})}}toggleCategoryImpl(t){this.state.disabledCategories.includes(t)?this.enableCategoryImpl(t):this.disableCategoryImpl(t)}setDisabledCategoriesImpl(t){this.dispatch(Km(t));const e=Jm(this.itemCategories,t);this.dispatch(Qm(e)),this.categoryChanged$.emit({disabledCategories:t,hiddenItems:e})}buildCapability(){return{setActiveToolbar:(t,e,n,i)=>this.setToolbarForDocument(t,e,n,i),setActiveSidebar:(t,e,n,i,r)=>this.setSidebarForDocument(t,e,n,i,r),toggleSidebar:(t,e,n,i,r)=>this.toggleSidebarForDocument(t,e,n,i,r),openModal:(t,e)=>this.openModalForDocument(t,e),openMenu:(t,e,n,i)=>this.openMenuForDocument(t,e,n,i),toggleMenu:(t,e,n,i)=>this.toggleMenuForDocument(t,e,n,i),forDocument:t=>this.createUIScope(t),getSchema:()=>this.schema,mergeSchema:t=>{var e,n;this.schema=(e=this.schema,n=t,{...e,...n,toolbars:bG(e.toolbars,n.toolbars),menus:SG(e.menus,n.menus),sidebars:MG(e.sidebars,n.sidebars)})},disableCategory:t=>this.disableCategoryImpl(t),enableCategory:t=>this.enableCategoryImpl(t),toggleCategory:t=>this.toggleCategoryImpl(t),setDisabledCategories:t=>this.setDisabledCategoriesImpl(t),getDisabledCategories:()=>this.state.disabledCategories,isCategoryDisabled:t=>this.state.disabledCategories.includes(t),getHiddenItems:()=>this.state.hiddenItems,onToolbarChanged:this.toolbarChanged$.onGlobal,onSidebarChanged:this.sidebarChanged$.onGlobal,onModalChanged:this.modalChanged$.onGlobal,onMenuChanged:this.menuChanged$.onGlobal,onCategoryChanged:this.categoryChanged$.on}}createUIScope(t){return{setActiveToolbar:(e,n,i)=>this.setToolbarForDocument(e,n,i,t),getActiveToolbar:(e,n)=>this.getToolbarForDocument(e,n,t),closeToolbarSlot:(e,n)=>this.closeToolbarForDocument(e,n,t),isToolbarOpen:(e,n,i)=>this.isToolbarOpenForDocument(e,n,i,t),setActiveSidebar:(e,n,i,r)=>this.setSidebarForDocument(e,n,i,t,r),getActiveSidebar:(e,n)=>this.getSidebarForDocument(e,n,t),closeSidebarSlot:(e,n)=>this.closeSidebarForDocument(e,n,t),toggleSidebar:(e,n,i,r)=>this.toggleSidebarForDocument(e,n,i,t,r),isSidebarOpen:(e,n,i)=>this.isSidebarOpenForDocument(e,n,i,t),setSidebarTab:(e,n)=>this.setSidebarTabForDocument(e,n,t),getSidebarTab:e=>this.getSidebarTabForDocument(e,t),openModal:e=>this.openModalForDocument(e,t),closeModal:()=>this.closeModalForDocument(t),clearModal:()=>this.clearModalForDocument(t),getActiveModal:()=>this.getActiveModalForDocument(t),isModalOpen:()=>this.isModalOpenForDocument(t),openMenu:(e,n,i)=>this.openMenuForDocument(e,n,i,t),closeMenu:e=>this.closeMenuForDocument(e,t),toggleMenu:(e,n,i)=>this.toggleMenuForDocument(e,n,i,t),closeAllMenus:()=>this.closeAllMenusForDocument(t),isMenuOpen:e=>this.isMenuOpenForDocument(e,t),getOpenMenus:()=>this.getOpenMenusForDocument(t),getSchema:()=>this.schema,getState:()=>this.getDocumentStateOrThrow(t),onToolbarChanged:this.toolbarChanged$.forScope(t),onSidebarChanged:this.sidebarChanged$.forScope(t),onModalChanged:this.modalChanged$.forScope(t),onMenuChanged:this.menuChanged$.forScope(t)}}getDocumentState(t){const e=t??this.getActiveDocumentId();return this.state.documents[e]??null}getDocumentStateOrThrow(t){const e=this.getDocumentState(t);if(!e)throw new Error(`UI state not found for document: ${t??"active"}`);return e}setToolbarForDocument(t,e,n,i){const r=i??this.getActiveDocumentId();this.dispatch(((o,s,a,l)=>({type:$L,payload:{documentId:o,placement:s,slot:a,toolbarId:l}}))(r,t,e,n)),this.toolbarChanged$.emit(r,{placement:t,slot:e,toolbarId:n})}getToolbarForDocument(t,e,n){const i=`${t}-${e}`,r=this.getDocumentStateOrThrow(n).activeToolbars[i];return r!=null&&r.isOpen?r.toolbarId:null}closeToolbarForDocument(t,e,n){const i=n??this.getActiveDocumentId();this.dispatch(((r,o,s)=>({type:WL,payload:{documentId:r,placement:o,slot:s}}))(i,t,e)),this.toolbarChanged$.emit(i,{placement:t,slot:e,toolbarId:""})}isToolbarOpenForDocument(t,e,n,i){const r=`${t}-${e}`,o=this.getDocumentStateOrThrow(i).activeToolbars[r];return!(!o||!o.isOpen)&&(!n||o.toolbarId===n)}setSidebarForDocument(t,e,n,i,r){const o=i??this.getActiveDocumentId();this.dispatch(GA(o,t,e,n,r)),this.sidebarChanged$.emit(o,{placement:t,slot:e,sidebarId:n})}getSidebarForDocument(t,e,n){const i=`${t}-${e}`,r=this.getDocumentStateOrThrow(n).activeSidebars[i];return r!=null&&r.isOpen?r.sidebarId:null}closeSidebarForDocument(t,e,n){const i=n??this.getActiveDocumentId();this.dispatch(jA(i,t,e)),this.sidebarChanged$.emit(i,{placement:t,slot:e,sidebarId:""})}toggleSidebarForDocument(t,e,n,i,r){const o=i??this.getActiveDocumentId(),s=`${t}-${e}`,a=this.getDocumentStateOrThrow(o).activeSidebars[s];(a==null?void 0:a.sidebarId)===n&&(a!=null&&a.isOpen)?(this.dispatch(jA(o,t,e)),this.sidebarChanged$.emit(o,{placement:t,slot:e,sidebarId:""})):(this.dispatch(GA(o,t,e,n,r)),this.sidebarChanged$.emit(o,{placement:t,slot:e,sidebarId:n}))}isSidebarOpenForDocument(t,e,n,i){const r=`${t}-${e}`,o=this.getDocumentStateOrThrow(i).activeSidebars[r];return!(!o||!o.isOpen)&&(!n||o.sidebarId===n)}setSidebarTabForDocument(t,e,n){const i=n??this.getActiveDocumentId();this.dispatch(((r,o,s)=>({type:qL,payload:{documentId:r,sidebarId:o,tabId:s}}))(i,t,e))}getSidebarTabForDocument(t,e){return this.getDocumentStateOrThrow(e).sidebarTabs[t]??null}openModalForDocument(t,e){const n=e??this.getActiveDocumentId();this.dispatch(((i,r)=>({type:XL,payload:{documentId:i,modalId:r}}))(n,t)),this.modalChanged$.emit(n,{modalId:t,isOpen:!0})}closeModalForDocument(t){const e=t??this.getActiveDocumentId(),n=this.getDocumentStateOrThrow(e).activeModal;this.dispatch((i=>({type:YL,payload:{documentId:i}}))(e)),this.modalChanged$.emit(e,{modalId:(n==null?void 0:n.modalId)??null,isOpen:!1})}clearModalForDocument(t){const e=t??this.getActiveDocumentId();this.dispatch((n=>({type:ZL,payload:{documentId:n}}))(e))}getActiveModalForDocument(t){return this.getDocumentStateOrThrow(t).activeModal}isModalOpenForDocument(t){const e=this.getDocumentStateOrThrow(t).activeModal;return(e==null?void 0:e.isOpen)??!1}openMenuForDocument(t,e,n,i){const r=i??this.getActiveDocumentId();this.dispatch(qA(r,{menuId:t,triggeredByCommandId:e,triggeredByItemId:n})),this.menuChanged$.emit(r,{menuId:t,isOpen:!0})}closeMenuForDocument(t,e){const n=e??this.getActiveDocumentId();this.dispatch(XA(n,t)),this.menuChanged$.emit(n,{menuId:t,isOpen:!1})}toggleMenuForDocument(t,e,n,i){const r=i??this.getActiveDocumentId();this.getDocumentStateOrThrow(r).openMenus[t]?(this.dispatch(XA(r,t)),this.menuChanged$.emit(r,{menuId:t,isOpen:!1})):(this.dispatch(qA(r,{menuId:t,triggeredByCommandId:e,triggeredByItemId:n})),this.menuChanged$.emit(r,{menuId:t,isOpen:!0}))}closeAllMenusForDocument(t){const e=t??this.getActiveDocumentId();this.dispatch((n=>({type:JL,payload:{documentId:n}}))(e))}isMenuOpenForDocument(t,e){return!!this.getDocumentStateOrThrow(e).openMenus[t]}getOpenMenusForDocument(t){return Object.values(this.getDocumentStateOrThrow(t).openMenus)}};dz.id="ui";let VM=dz;const tu={activeToolbars:{},activeSidebars:{},activeModal:null,openMenus:{},sidebarTabs:{}},YA={documents:{},disabledCategories:[],hiddenItems:[]};function hz(t,e){const n=function(i){return i.ui??null}(t);return(n==null?void 0:n.documents[e])??null}function fz(t,e){return`${t}-${e}`}function eg(t,e,n,i,r){const o=function(s,a,l,c){const u=hz(s,a);return u?u.activeToolbars[fz(l,c)]??null:null}(t,e,n,i);return!(!o||!o.isOpen)&&(!r||o.toolbarId===r)}function tg(t,e,n,i,r){const o=function(s,a,l,c){const u=hz(s,a);return u?u.activeSidebars[fz(l,c)]??null:null}(t,e,n,i);return!(!o||!o.isOpen)&&(!r||o.sidebarId===r)}const NG={manifest:_G,create:(t,e)=>new VM(qs,t,e),reducer:(t=YA,e)=>{var n;switch(e.type){case HL:{const{documentId:i,schema:r}=e.payload,o={};return Object.values(r.toolbars).forEach(s=>{if(s.permanent&&s.position){const a=`${s.position.placement}-${s.position.slot}`;o[a]={toolbarId:s.id,isOpen:!0}}}),{...t,documents:{...t.documents,[i]:{...tu,activeToolbars:o}}}}case VL:{const{documentId:i}=e.payload,{[i]:r,...o}=t.documents;return{...t,documents:o}}case $L:{const{documentId:i,placement:r,slot:o,toolbarId:s}=e.payload,a=t.documents[i]||tu,l=`${r}-${o}`;return{...t,documents:{...t.documents,[i]:{...a,activeToolbars:{...a.activeToolbars,[l]:{toolbarId:s,isOpen:!0}}}}}}case WL:{const{documentId:i,placement:r,slot:o}=e.payload,s=t.documents[i];if(!s)return t;const a=`${r}-${o}`,l=s.activeToolbars[a];return l?{...t,documents:{...t.documents,[i]:{...s,activeToolbars:{...s.activeToolbars,[a]:{...l,isOpen:!1}}}}}:t}case GL:{const{documentId:i,placement:r,slot:o,sidebarId:s,activeTab:a}=e.payload,l=t.documents[i]||tu,c=`${r}-${o}`;return{...t,documents:{...t.documents,[i]:{...l,activeSidebars:{...l.activeSidebars,[c]:{sidebarId:s,isOpen:!0}},...a&&{sidebarTabs:{...l.sidebarTabs,[s]:a}}}}}}case jL:{const{documentId:i,placement:r,slot:o}=e.payload,s=t.documents[i];if(!s)return t;const a=`${r}-${o}`,l=s.activeSidebars[a];return l?{...t,documents:{...t.documents,[i]:{...s,activeSidebars:{...s.activeSidebars,[a]:{...l,isOpen:!1}}}}}:t}case qL:{const{documentId:i,sidebarId:r,tabId:o}=e.payload,s=t.documents[i]||tu;return{...t,documents:{...t.documents,[i]:{...s,sidebarTabs:{...s.sidebarTabs,[r]:o}}}}}case XL:{const{documentId:i,modalId:r}=e.payload,o=t.documents[i]||tu;return{...t,documents:{...t.documents,[i]:{...o,activeModal:{modalId:r,isOpen:!0},openMenus:{}}}}}case YL:{const{documentId:i}=e.payload,r=t.documents[i];return r!=null&&r.activeModal?{...t,documents:{...t.documents,[i]:{...r,activeModal:{...r.activeModal,isOpen:!1}}}}:t}case ZL:{const{documentId:i}=e.payload,r=t.documents[i];return r?(n=r.activeModal)!=null&&n.isOpen?t:{...t,documents:{...t.documents,[i]:{...r,activeModal:null}}}:t}case KL:{const{documentId:i,menuState:r}=e.payload,o=t.documents[i]||tu;return{...t,documents:{...t.documents,[i]:{...o,openMenus:{[r.menuId]:r}}}}}case QL:{const{documentId:i,menuId:r}=e.payload,o=t.documents[i];if(!o)return t;const{[r]:s,...a}=o.openMenus;return{...t,documents:{...t.documents,[i]:{...o,openMenus:a}}}}case JL:{const{documentId:i}=e.payload,r=t.documents[i];return r?{...t,documents:{...t.documents,[i]:{...r,openMenus:{}}}}:t}case ez:return{...t,disabledCategories:e.payload.categories};case tz:return{...t,hiddenItems:e.payload.hiddenItems};default:return t}},initialState:YA},Pd=()=>oi(VM.id),pz=t=>{const{provides:e}=Pd(),[n,i]=xe(null);return ge(()=>{if(!e)return;const r=e.forDocument(t);i(r.getState());const o=r.onToolbarChanged(()=>i(r.getState())),s=r.onSidebarChanged(()=>i(r.getState())),a=r.onModalChanged(()=>i(r.getState())),l=r.onMenuChanged(()=>i(r.getState()));return()=>{o(),s(),a(),l()}},[e,t]),n},mz=Pc(null);function gz(){const t=Rc(mz);if(!t)throw new Error("useUIContainer must be used within a UIProvider");return t}const vz=Pc(null);function LG({children:t}){const e=vt(new Map),n={register:Lt((i,r,o)=>{const s=`${i}:${r}`;e.current.set(s,o)},[]),unregister:Lt((i,r)=>{const o=`${i}:${r}`;e.current.delete(o)},[]),getAnchor:Lt((i,r)=>{const o=`${i}:${r}`;return e.current.get(o)||null},[])};return ee(vz.Provider,{value:n,children:t})}function yz(){const t=Rc(vz);if(!t)throw new Error("useAnchorRegistry must be used within UIProvider");return t}function xz(t,e){const n=yz(),i=vt(null),r=vt(t),o=vt(e);return r.current=t,o.current=e,Lt(s=>{const a=i.current;i.current=s,s?s!==a&&n.register(r.current,o.current,s):a&&n.unregister(r.current,o.current)},[n])}const wz=Pc(null);function zG({children:t,initialComponents:e={}}){const n=vt(new Map(Object.entries(e))),i={register:Lt((r,o)=>{n.current.set(r,o)},[]),unregister:Lt(r=>{n.current.delete(r)},[]),get:Lt(r=>n.current.get(r),[]),has:Lt(r=>n.current.has(r),[]),getRegisteredIds:Lt(()=>Array.from(n.current.keys()),[])};return ee(wz.Provider,{value:i,children:t})}function Vy(){const t=function(){const e=Rc(wz);if(!e)throw new Error("useComponentRegistry must be used within UIProvider");return e}();return{renderCustomComponent:(e,n,i)=>{const r=t.get(e);return r?ee(r,{documentId:n,...i||{}}):(console.error(`Component "${e}" not found in registry`),null)}}}const _z=Pc(null);function OG({children:t,renderers:e}){return ee(_z.Provider,{value:e,children:t})}function $M(){const t=Rc(_z);if(!t)throw new Error("useRenderers must be used within UIProvider");return t}function xw(t,e){var n;const{provides:i}=Pd(),r=$M(),o=Lt(a=>{var l;const c=i==null?void 0:i.getSchema(),u=(l=c==null?void 0:c.selectionMenus)==null?void 0:l[t];return!u||!a.selected?null:ee(r.selectionMenu,{schema:u,documentId:e,props:a})},[i,r,t,e]),s=i==null?void 0:i.getSchema();if((n=s==null?void 0:s.selectionMenus)!=null&&n[t])return o}function FG({container:t,documentId:e}){const n=pz(e),{provides:i}=Pd(),r=yz(),o=$M(),[s,a]=xe(null),l=(n==null?void 0:n.openMenus)||{},c=i==null?void 0:i.getSchema();if(ge(()=>{const d=Object.keys(l);if(d.length>0){const f=d[0];if(!f)return void a(null);const m=l[f];if(m&&m.triggeredByItemId){const g=r.getAnchor(e,m.triggeredByItemId);a({menuId:f,anchorEl:g})}else a(null)}else a(null)},[l,r,e]),!s||!c)return null;const u=c.menus[s.menuId];return u?ee(o.menu,{schema:u,documentId:e,anchorEl:s.anchorEl,onClose:()=>{s&&(i==null||i.forDocument(e).closeMenu(s.menuId))},container:t}):(console.warn(`Menu "${s.menuId}" not found in schema`),null)}function UG({children:t,style:e,...n}){const{plugin:i}=zr(VM.id),{provides:r}=Pd(),[o,s]=xe([]),[a,l]=xe([]),c=vt(null),u=vt(null),d=vt(null),f=vt(null),m=Rt(()=>({containerRef:f,getContainer:()=>f.current}),[]),g=Lt(_=>{const S=d.current;if(d.current=_,f.current=_,_&&_!==S&&i){const E=function(A){const R=A.getRootNode();return R instanceof ShadowRoot?R:document.head}(_);u.current=E;const T=E.querySelector(Ys.STYLES);if(T)return c.current=T,void(T.textContent=i.getStylesheet());const P=i.getStylesheet(),D=document.createElement("style");D.setAttribute(iz,""),D.textContent=P,E instanceof ShadowRoot?E.insertBefore(D,E.firstChild):E.appendChild(D),c.current=D}},[i]);ge(()=>()=>{var _;(_=c.current)!=null&&_.parentNode&&!d.current&&c.current.remove(),c.current=null,u.current=null},[]),ge(()=>{if(i)return i.onStylesheetInvalidated(()=>{c.current&&(c.current.textContent=i.getStylesheet())})},[i]),ge(()=>{if(r)return s(r.getDisabledCategories()),l(r.getHiddenItems()),r.onCategoryChanged(({disabledCategories:_,hiddenItems:S})=>{s(_),l(S)})},[r]);const y=Rt(()=>o.length>0?o.join(" "):void 0,[o]),x=Rt(()=>a.length>0?a.join(" "):void 0,[a]),v=Rt(()=>{const _={containerType:"inline-size"};return e&&typeof e=="object"?{..._,...e}:_},[e]),w={[nz]:"",[HM]:y,[oz]:x};return ee(mz.Provider,{value:m,children:ee("div",{ref:g,...w,...n,style:v,children:t})})}function BG({children:t,documentId:e,components:n={},renderers:i,menuContainer:r,...o}){return ee(LG,{children:ee(zG,{initialComponents:n,children:ee(OG,{renderers:i,children:ee(UG,{...o,children:[t,ee(FG,{documentId:e,container:r})]})})})})}const bz=class extends Ln{constructor(t,e,n){super(t,e),this.id=t,this.documentOpened$=Ht(),this.documentClosed$=Ht(),this.activeDocumentChanged$=Ht(),this.documentError$=Ht(),this.documentOrderChanged$=Ht(),this.openFileRequest$=Qi(),this.loadOptions=new Map,this.maxDocuments=n==null?void 0:n.maxDocuments}buildCapability(){return{openFileDialog:t=>this.openFileDialog(t),openDocumentUrl:t=>this.openDocumentUrl(t),openDocumentBuffer:t=>this.openDocumentBuffer(t),retryDocument:(t,e)=>this.retryDocument(t,e),closeDocument:t=>this.closeDocument(t),closeAllDocuments:()=>this.closeAllDocuments(),setActiveDocument:t=>{if(!this.isDocumentOpen(t))throw new Error(`Cannot set active document: ${t} is not open`);this.dispatchCoreAction((e=>({type:LM,payload:e}))(t))},getActiveDocumentId:()=>this.coreState.core.activeDocumentId,getActiveDocument:()=>{var t;const e=this.coreState.core.activeDocumentId;return e?((t=this.coreState.core.documents[e])==null?void 0:t.document)??null:null},getDocumentOrder:()=>this.coreState.core.documentOrder,moveDocument:(t,e)=>{this.dispatchCoreAction(((n,i)=>({type:OM,payload:{documentId:n,toIndex:i}}))(t,e))},swapDocuments:(t,e)=>{const n=this.coreState.core.documentOrder,i=n.indexOf(t),r=n.indexOf(e);if(i===-1||r===-1)throw new Error("One or both documents not found in order");const o=[...n];[o[i],o[r]]=[o[r],o[i]],this.dispatchCoreAction((s=>({type:zM,payload:s}))(o))},getDocument:t=>{var e;return((e=this.coreState.core.documents[t])==null?void 0:e.document)??null},getDocumentState:t=>this.coreState.core.documents[t]??null,getOpenDocuments:()=>this.coreState.core.documentOrder.map(t=>this.coreState.core.documents[t]).filter(t=>t!==null),isDocumentOpen:t=>this.isDocumentOpen(t),getDocumentCount:()=>Object.keys(this.coreState.core.documents).length,getDocumentIndex:t=>this.coreState.core.documentOrder.indexOf(t),onDocumentOpened:this.documentOpened$.on,onDocumentClosed:this.documentClosed$.on,onDocumentError:this.documentError$.on,onActiveDocumentChanged:this.activeDocumentChanged$.on,onDocumentOrderChanged:this.documentOrderChanged$.on}}isDocumentOpen(t){return!!this.coreState.core.documents[t]}onDocumentLoaded(t){const e=this.coreState.core.documents[t];e&&e.status==="loaded"&&(this.loadOptions.delete(t),this.documentOpened$.emit(e),this.logger.info("DocumentManagerPlugin","DocumentOpened",`Document ${t} opened successfully`,{name:e.name}))}onDocumentClosed(t){this.loadOptions.delete(t),this.documentClosed$.emit(t),this.logger.info("DocumentManagerPlugin","DocumentClosed",`Document ${t} closed`)}onActiveDocumentChanged(t,e){this.activeDocumentChanged$.emit({previousDocumentId:t,currentDocumentId:e}),this.logger.info("DocumentManagerPlugin","ActiveDocumentChanged",`Active document changed from ${t} to ${e}`)}onCoreStoreUpdated(t,e){t.core.documentOrder!==e.core.documentOrder&&this.documentOrderChanged$.emit({order:e.core.documentOrder})}onOpenFileRequest(t){return this.openFileRequest$.on(t)}openDocumentUrl(t){const e=new Rn,n=t.documentId||this.generateDocumentId(),i=this.checkDocumentLimit();if(i)return e.reject(i),e;const r=t.name??this.extractNameFromUrl(t.url);this.loadOptions.set(n,t),this.dispatchCoreAction(LA(n,r,t.scale,t.rotation,!!t.password,t.autoActivate)),this.logger.info("DocumentManagerPlugin","OpenDocumentUrl",`Starting to load document from URL: ${t.url}`,{documentId:n,passwordProvided:!!t.password});const o={id:n,url:t.url},s=this.engine.openDocumentUrl(o,{password:t.password,mode:t.mode,requestOptions:t.requestOptions});return e.resolve({documentId:n,task:s}),this.handleLoadTask(n,s,"OpenDocumentUrl"),e}openDocumentBuffer(t){const e=new Rn,n=this.checkDocumentLimit();if(n)return e.reject(n),e;const i=t.documentId||this.generateDocumentId();this.loadOptions.set(i,t),this.dispatchCoreAction(LA(i,t.name,t.scale,t.rotation,!!t.password,t.autoActivate)),this.logger.info("DocumentManagerPlugin","OpenDocumentBuffer",`Starting to load document from buffer: ${t.name}`,{documentId:i,passwordProvided:!!t.password});const r={id:i,content:t.buffer},o=this.engine.openDocumentBuffer(r,{password:t.password});return e.resolve({documentId:i,task:o}),this.handleLoadTask(i,o,"OpenDocumentBuffer"),e}retryDocument(t,e){const n=new Rn,i=this.validateRetry(t);if(!i.valid)return n.reject(i.error),n;const r={...this.loadOptions.get(t),...(e==null?void 0:e.password)&&{password:e.password}};this.loadOptions.set(t,r),this.dispatchCoreAction(((s,a)=>({type:NM,payload:{documentId:s,passwordProvided:a}}))(t,!!(e!=null&&e.password))),this.logger.info("DocumentManagerPlugin","RetryDocument",`Retrying to load document ${t}`,{passwordProvided:!!(e!=null&&e.password)});const o="url"in r?this.retryUrlDocument(t,r):this.retryBufferDocument(t,r);return n.resolve({documentId:t,task:o}),this.handleLoadTask(t,o,"RetryDocument"),n}openFileDialog(t){const e=new Rn;return this.openFileRequest$.emit({task:e,options:t}),e}closeDocument(t){const e=new Rn,n=this.coreState.core.documents[t];return n?(n.status==="loaded"&&n.document?this.engine.closeDocument(n.document).wait(()=>{this.dispatchCoreAction(zA(t)),e.resolve()},i=>{this.logger.error("DocumentManagerPlugin","CloseDocument",`Failed to close document ${t}`,i),e.fail(i)}):(this.logger.info("DocumentManagerPlugin","CloseDocument",`Closing document ${t} in ${n.status} state (skipping engine close)`),this.dispatchCoreAction(zA(t)),e.resolve()),e):(this.logger.warn("DocumentManagerPlugin","CloseDocument",`Cannot close document ${t}: not found in state`),e.resolve(),e)}closeAllDocuments(){const t=Object.keys(this.coreState.core.documents),e=t.map(n=>this.closeDocument(n));return this.logger.info("DocumentManagerPlugin","CloseAllDocuments",`Closing ${t.length} documents`),Rn.all(e)}checkDocumentLimit(){return this.maxDocuments&&Object.keys(this.coreState.core.documents).length>=this.maxDocuments?{code:Xt.Unknown,message:`Maximum number of documents (${this.maxDocuments}) reached`}:null}validateRetry(t){const e=this.coreState.core.documents[t];return e?e.status==="loaded"?{valid:!1,error:{code:Xt.Unknown,message:`Document ${t} is already loaded successfully`}}:e.status!=="error"?{valid:!1,error:{code:Xt.Unknown,message:`Document ${t} is not in error state (current state: ${e.status})`}}:this.loadOptions.has(t)?{valid:!0}:{valid:!1,error:{code:Xt.Unknown,message:`No retry information available for document ${t}`}}:{valid:!1,error:{code:Xt.NotFound,message:`Document ${t} not found`}}}retryUrlDocument(t,e){const n={id:t,url:e.url};return this.engine.openDocumentUrl(n,{password:e.password,mode:e.mode,requestOptions:e.requestOptions})}retryBufferDocument(t,e){const n={id:t,content:e.buffer};return this.engine.openDocumentBuffer(n,{password:e.password})}handleLoadTask(t,e,n){e.wait(i=>{this.dispatchCoreAction(((r,o)=>({type:Oy,payload:{documentId:r,document:o}}))(t,i))},i=>{this.handleLoadError(t,i,n)})}handleLoadError(t,e,n){var i,r,o;const s=((i=e.reason)==null?void 0:i.message)||"Failed to load document";this.logger.error("DocumentManagerPlugin",n,"Failed to load document",e),this.dispatchCoreAction(((a,l,c,u)=>({type:kM,payload:{documentId:a,error:l,errorCode:c,errorDetails:u}}))(t,s,(r=e.reason)==null?void 0:r.code,e.reason)),this.documentError$.emit({documentId:t,message:s,code:(o=e.reason)==null?void 0:o.code,reason:e.reason})}generateDocumentId(){return`doc-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}extractNameFromUrl(t){try{const e=new URL(t),n=e.pathname.split("/").pop();if(!n)return;let i=decodeURIComponent(n);return i.toLowerCase().endsWith(".pdf")||(i+=".pdf"),i}catch{return}}async initialize(t){var e;if(this.logger.info("DocumentManagerPlugin","Initialize","Document Manager Plugin initialized",{maxDocuments:this.maxDocuments,initialDocumentsCount:((e=t.initialDocuments)==null?void 0:e.length)??0}),t.initialDocuments&&t.initialDocuments.length>0)for(const n of t.initialDocuments)try{"buffer"in n?this.openDocumentBuffer(n):"url"in n&&this.openDocumentUrl(n)}catch(i){this.logger.error("DocumentManagerPlugin","Initialize","Failed to initiate initial document load",i)}}async destroy(){await this.closeAllDocuments().toPromise(),this.loadOptions.clear(),this.documentOpened$.clear(),this.documentClosed$.clear(),this.activeDocumentChanged$.clear(),this.documentOrderChanged$.clear(),this.documentError$.clear(),super.destroy()}};bz.id="document-manager";let Bb=bz;const ZA="document-manager";function HG({documentId:t,children:e}){const n=oo(t);return n?ee(Tt,{children:e({documentState:n,isLoading:n.status==="loading",isError:n.status==="error",isLoaded:n.status==="loaded"})}):null}const $y=()=>oi(Bb.id),VG=kc({manifest:{id:ZA,name:"Document Manager Plugin",version:"1.0.0",provides:["document-manager"],requires:[],optional:[],defaultConfig:{maxDocuments:10}},create:(t,e)=>new Bb(ZA,t,e),reducer:t=>t,initialState:{}}).addUtility(function(){const{plugin:t}=zr(Bb.id),{provides:e}=$y(),n=vt(null),i=vt(null),r=vt(void 0);return ge(()=>{if(t!=null&&t.onOpenFileRequest)return t.onOpenFileRequest(({task:o,options:s})=>{var a;i.current=o,r.current=s,(a=n.current)==null||a.click()})},[t]),ee("input",{ref:n,type:"file",accept:"application/pdf",style:{display:"none"},onChange:async o=>{var s,a,l,c,u;const d=(s=o.currentTarget.files)==null?void 0:s[0];if(!d||!e)return;const f=await d.arrayBuffer();e.openDocumentBuffer({name:d.name,buffer:f,documentId:(a=r.current)==null?void 0:a.documentId,scale:(l=r.current)==null?void 0:l.scale,rotation:(c=r.current)==null?void 0:c.rotation,autoActivate:(u=r.current)==null?void 0:u.autoActivate}).wait(m=>{var g;(g=i.current)==null||g.resolve(m)},m=>{var g;(g=i.current)==null||g.fail(m)})}})}).build(),Sz="commands",$G={id:Sz,name:"Commands Plugin",version:"1.0.0",provides:["commands"],requires:[],optional:["i18n"],defaultConfig:{commands:{}}},Mz="COMMANDS/SET_DISABLED_CATEGORIES",ng=t=>({type:Mz,payload:t}),Cz=class extends Ln{constructor(t,e,n){var i;super(t,e),this.commands=new Map,this.i18n=null,this.shortcutMap=new Map,this.commandExecuted$=Qi(),this.commandStateChanged$=Qi(),this.shortcutExecuted$=Qi(),this.categoryChanged$=Ht(),this.previousStates=new Map;const r=e.getPlugin("i18n");this.i18n=(r==null?void 0:r.provides())??null,(i=n.disabledCategories)!=null&&i.length&&this.dispatch(ng(n.disabledCategories)),Object.values(n.commands).forEach(o=>{this.registerCommand(o)}),this.registry.getStore().subscribe((o,s)=>{this.onGlobalStoreChange(s)})}onDocumentClosed(t){this.previousStates.delete(t),this.logger.debug("CommandsPlugin","DocumentClosed",`Cleaned up command state cache for document: ${t}`)}async initialize(){this.logger.info("CommandsPlugin","Initialize","Commands plugin initialized")}async destroy(){this.commandExecuted$.clear(),this.commandStateChanged$.clear(),this.shortcutExecuted$.clear(),this.categoryChanged$.clear(),this.commands.clear(),this.shortcutMap.clear(),this.previousStates.clear(),super.destroy()}disableCategoryImpl(t){const e=new Set(this.state.disabledCategories);e.has(t)||(e.add(t),this.dispatch(ng(Array.from(e))),this.categoryChanged$.emit({disabledCategories:Array.from(e)}))}enableCategoryImpl(t){const e=new Set(this.state.disabledCategories);e.has(t)&&(e.delete(t),this.dispatch(ng(Array.from(e))),this.categoryChanged$.emit({disabledCategories:Array.from(e)}))}toggleCategoryImpl(t){this.state.disabledCategories.includes(t)?this.enableCategoryImpl(t):this.disableCategoryImpl(t)}setDisabledCategoriesImpl(t){this.dispatch(ng(t)),this.categoryChanged$.emit({disabledCategories:t})}isCommandCategoryDisabled(t){var e;return!!((e=t.categories)!=null&&e.length)&&t.categories.some(n=>this.state.disabledCategories.includes(n))}buildCapability(){return{resolve:(t,e)=>this.resolve(t,e),execute:(t,e,n="ui")=>this.execute(t,e,n),getAllCommands:t=>this.getAllCommands(t),getCommandsByCategory:(t,e)=>this.getCommandsByCategory(t,e),getCommandByShortcut:t=>this.getCommandByShortcut(t),getAllShortcuts:()=>new Map(this.shortcutMap),forDocument:t=>this.createCommandScope(t),registerCommand:t=>this.registerCommand(t),unregisterCommand:t=>this.unregisterCommand(t),disableCategory:t=>this.disableCategoryImpl(t),enableCategory:t=>this.enableCategoryImpl(t),toggleCategory:t=>this.toggleCategoryImpl(t),setDisabledCategories:t=>this.setDisabledCategoriesImpl(t),getDisabledCategories:()=>this.state.disabledCategories,isCategoryDisabled:t=>this.state.disabledCategories.includes(t),onCommandExecuted:this.commandExecuted$.on,onCommandStateChanged:this.commandStateChanged$.on,onShortcutExecuted:this.shortcutExecuted$.on,onCategoryChanged:this.categoryChanged$.on}}createCommandScope(t){return{resolve:e=>this.resolve(e,t),execute:(e,n="ui")=>this.execute(e,t,n),getAllCommands:()=>this.getAllCommands(t),getCommandsByCategory:e=>this.getCommandsByCategory(e,t),onCommandStateChanged:e=>this.commandStateChanged$.on(n=>{if(n.documentId===t){const{documentId:i,...r}=n;e(r)}})}}resolve(t,e){const n=e??this.getActiveDocumentId(),i=this.commands.get(t);if(!i)throw new Error(`Command not found: ${t}`);const r=this.registry.getStore().getState(),o=this.resolveLabel(i,r,n),s=i.shortcuts?Array.isArray(i.shortcuts)?i.shortcuts:[i.shortcuts]:void 0,a=this.resolveDynamic(i.disabled,r,n)??!1,l=this.isCommandCategoryDisabled(i),c=a||l;return{id:i.id,label:o,icon:this.resolveDynamic(i.icon,r,n),iconProps:this.resolveDynamic(i.iconProps,r,n),active:this.resolveDynamic(i.active,r,n)??!1,disabled:c,visible:this.resolveDynamic(i.visible,r,n)??!0,shortcuts:s,shortcutLabel:i.shortcutLabel,categories:i.categories,description:i.description,execute:()=>i.action({registry:this.registry,state:r,documentId:n})}}resolveLabel(t,e,n){if(t.labelKey&&this.i18n){const i=this.resolveDynamic(t.labelParams,e,n);return this.i18n.t(t.labelKey,{params:i,documentId:n})}return t.label?t.label:t.id}resolveDynamic(t,e,n){if(t!==void 0)return typeof t=="function"?t({state:e,documentId:n}):t}execute(t,e,n="ui"){const i=e??this.getActiveDocumentId(),r=this.resolve(t,i);r.disabled?this.logger.warn("CommandsPlugin","ExecutionBlocked",`Command '${t}' is disabled for document '${i}'`):r.visible?(r.execute(),this.commandExecuted$.emit({commandId:t,documentId:i,source:n}),this.logger.debug("CommandsPlugin","CommandExecuted",`Command '${t}' executed for document '${i}' (source: ${n})`)):this.logger.warn("CommandsPlugin","ExecutionBlocked",`Command '${t}' is not visible for document '${i}'`)}registerCommand(t){this.commands.has(t.id)&&this.logger.warn("CommandsPlugin","CommandOverwrite",`Command '${t.id}' already exists and will be overwritten`),this.commands.set(t.id,t),t.shortcuts&&(Array.isArray(t.shortcuts)?t.shortcuts:[t.shortcuts]).forEach(e=>{const n=this.normalizeShortcut(e);this.shortcutMap.set(n,t.id)}),this.logger.debug("CommandsPlugin","CommandRegistered",`Command '${t.id}' registered`)}unregisterCommand(t){const e=this.commands.get(t);e&&(e.shortcuts&&(Array.isArray(e.shortcuts)?e.shortcuts:[e.shortcuts]).forEach(n=>{const i=this.normalizeShortcut(n);this.shortcutMap.delete(i)}),this.commands.delete(t),this.logger.debug("CommandsPlugin","CommandUnregistered",`Command '${t}' unregistered`))}getCommandByShortcut(t){const e=this.normalizeShortcut(t),n=this.shortcutMap.get(e);return n?this.commands.get(n)??null:null}normalizeShortcut(t){return t.toLowerCase().split("+").sort().join("+")}getAllCommands(t){const e=t??this.getActiveDocumentId();return Array.from(this.commands.keys()).map(n=>this.resolve(n,e))}getCommandsByCategory(t,e){const n=e??this.getActiveDocumentId();return Array.from(this.commands.values()).filter(i=>{var r;return(r=i.categories)==null?void 0:r.includes(t)}).map(i=>this.resolve(i.id,n))}onGlobalStoreChange(t){Object.keys(t.core.documents).forEach(e=>{this.detectCommandChanges(e,t)})}detectCommandChanges(t,e){const n=this.previousStates.get(t)??new Map;this.commands.forEach((i,r)=>{const o=this.resolve(r,t),s=n.get(r);if(!s)return void n.set(r,o);const a={};s.active!==o.active&&(a.active=o.active),s.disabled!==o.disabled&&(a.disabled=o.disabled),s.visible!==o.visible&&(a.visible=o.visible),s.label!==o.label&&(a.label=o.label),wc(s.iconProps,o.iconProps)||(a.iconProps=o.iconProps),Object.keys(a).length>0&&(n.set(r,o),this.commandStateChanged$.emit({commandId:r,documentId:t,changes:a}))}),this.previousStates.set(t,n)}};Cz.id="commands";let Ez=Cz;const KA={disabledCategories:[]},Tz=()=>oi(Ez.id),Ha=(t,e)=>{const{provides:n}=Tz(),[i,r]=xe(()=>n?n.resolve(t,e):null);return ge(()=>n?(r(n.resolve(t,e)),n.onCommandStateChanged(o=>{o.commandId===t&&o.documentId===e&&r(n.resolve(t,e))})):void r(null),[n,t,e]),i},WG=kc({manifest:$G,create:(t,e)=>new Ez(Sz,t,e),reducer:(t=KA,e)=>e.type===Mz?{...t,disabledCategories:e.payload}:t,initialState:KA}).addUtility(function(){const{provides:t}=Tz();return ge(()=>{if(!t)return;const e=function(n){return i=>{const r=i.composedPath()[0]||i.target;if(r.tagName==="INPUT"||r.tagName==="TEXTAREA"||r.isContentEditable)return;const o=function(l){const c=[];l.ctrlKey&&c.push("ctrl"),l.shiftKey&&c.push("shift"),l.altKey&&c.push("alt"),l.metaKey&&c.push("meta");const u=l.key.toLowerCase();return["control","shift","alt","meta"].includes(u)?null:[...c,u].sort().join("+")}(i);if(!o)return;const s=n.getCommandByShortcut(o);if(!s)return;const a=n.resolve(s.id);!a.disabled&&a.visible&&(i.preventDefault(),i.stopPropagation(),n.execute(s.id,void 0,"keyboard"))}}(t);return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[t]),null}).build(),Az="i18n",GG={id:Az,name:"I18n Plugin",version:"1.0.0",provides:["i18n"],requires:[],optional:[],defaultConfig:{defaultLocale:"en",locales:[{code:"en",name:"English",translations:{commands:{zoom:{in:"Zoom In",out:"Zoom Out",fitWidth:"Fit to Width",fitPage:"Fit to Page",automatic:"Automatic",level:"Zoom Level ({level}%)",inArea:"Zoom In Area"},fullscreen:{enter:"Enter Full Screen",exit:"Exit Full Screen"},rotate:{clockwise:"Rotate Clockwise",counterclockwise:"Rotate Counter-Clockwise"},menu:"Menu",sidebar:"Sidebar",search:"Search",comment:"Comment",download:"Download",print:"Print",openFile:"Open PDF",save:"Save",settings:"Settings",view:"View",annotate:"Annotate",shapes:"Shapes",redact:"Redact",fillAndSign:"Fill and Sign",form:"Form",pan:"Pan",pointer:"Pointer",undo:"Undo",redo:"Redo",copy:"Copy",screenshot:"Screenshot",nextPage:"Next Page",previousPage:"Previous Page"}}},{code:"es",name:"Espaol",translations:{commands:{zoom:{in:"Acercar",out:"Alejar",fitWidth:"Ajustar al ancho",fitPage:"Ajustar a la pgina",automatic:"Automtico",level:"Nivel de zoom ({level}%)",inArea:"Acercar rea"},fullscreen:{enter:"Pantalla completa",exit:"Salir de pantalla completa"},rotate:{clockwise:"Girar a la derecha",counterclockwise:"Girar a la izquierda"},menu:"Men",sidebar:"Barra lateral",search:"Buscar",comment:"Comentario",download:"Descargar",print:"Imprimir",openFile:"Abrir PDF",save:"Guardar",settings:"Configuracin",view:"Ver",annotate:"Anotar",shapes:"Formas",redact:"Redactar",fillAndSign:"Rellenar y firmar",form:"Formulario",pan:"Desplazar",pointer:"Puntero",undo:"Deshacer",redo:"Rehacer",copy:"Copiar",screenshot:"Captura de pantalla",nextPage:"Pgina siguiente",previousPage:"Pgina anterior"}}}]}},Iz="I18N/SET_LOCALE",Pz="I18N/REGISTER_LOCALE",QA=t=>({type:Iz,payload:t}),JA=t=>({type:Pz,payload:t}),Rz=class extends Ln{constructor(t,e,n){super(t,e),this.locales=new Map,this.paramResolvers=new Map,this.paramsCache=new Map,this.localeChange$=Qi(),this.paramsChanged$=Tr((i,r)=>({documentId:i,...r}),{cache:!1}),this.config=n,n.locales.forEach(i=>{this.locales.set(i.code,i),this.dispatch(JA(i.code))}),n.paramResolvers&&Object.entries(n.paramResolvers).forEach(([i,r])=>{this.paramResolvers.set(i,r)}),this.dispatch(QA(n.defaultLocale)),this.registry.getStore().subscribe((i,r)=>{this.detectParamChanges(r)})}async initialize(){this.logger.info("I18nPlugin","Initialize","I18n plugin initialized")}async destroy(){this.localeChange$.clear(),this.paramsChanged$.clear(),this.paramResolvers.clear(),this.paramsCache.clear(),super.destroy()}onDocumentClosed(t){this.paramsCache.delete(t),this.paramsChanged$.clearScope(t),this.logger.debug("I18nPlugin","DocumentClosed",`Cleaned up params cache for document: ${t}`)}buildCapability(){return{t:(t,e)=>this.translate(t,e),forDocument:t=>this.createI18nScope(t),registerParamResolver:(t,e)=>this.registerParamResolver(t,e),unregisterParamResolver:t=>this.unregisterParamResolver(t),setLocale:t=>this.setLocale(t),getLocale:()=>this.state.currentLocale,getAvailableLocales:()=>[...this.state.availableLocales],getLocaleInfo:t=>this.locales.get(t)??null,registerLocale:t=>this.registerLocale(t),hasLocale:t=>this.locales.has(t),onLocaleChange:this.localeChange$.on,onParamsChanged:this.paramsChanged$.onGlobal}}createI18nScope(t){return{t:(e,n)=>this.translate(e,{documentId:t,...n}),onParamsChanged:this.paramsChanged$.forScope(t)}}translate(t,e){const n=this.locales.get(this.state.currentLocale),i=this.config.fallbackLocale?this.locales.get(this.config.fallbackLocale):null;let r=this.getNestedValue(n==null?void 0:n.translations,t);if(!r&&i&&(r=this.getNestedValue(i.translations,t)),!r){if(!(e!=null&&e.fallback))return this.logger.warn("I18nPlugin","MissingTranslation",`Translation not found for key: ${t}`),t;r=e.fallback}let o=e==null?void 0:e.params;return!o&&this.paramResolvers.has(t)&&(o=this.resolveParams(t,e==null?void 0:e.documentId)),this.interpolate(r,o)}resolveParams(t,e){const n=this.paramResolvers.get(t);if(!n)return;const i=this.registry.getStore().getState();try{return n({state:i,documentId:e})}catch(r){return void this.logger.error("I18nPlugin","ParamResolverError",`Error resolving params for key "${t}":`,r)}}getNestedValue(t,e){if(!t)return;const n=e.split(".");let i=t;for(const r of n){if(i==null)return;i=i[r]}return typeof i=="string"?i:void 0}interpolate(t,e){return e?t.replace(/\{(\w+)\}/g,(n,i)=>{const r=e[i];return r!==void 0?String(r):n}):t}detectParamChanges(t){Object.keys(t.core.documents).forEach(e=>{this.detectDocumentParamChanges(e,t)})}detectDocumentParamChanges(t,e){const n=this.paramsCache.get(t),i=[];this.paramResolvers.forEach((r,o)=>{try{const s=r({state:e,documentId:t});wc(n==null?void 0:n.get(o),s)||(i.push(o),this.paramsCache.has(t)||this.paramsCache.set(t,new Map),this.paramsCache.get(t).set(o,s))}catch(s){this.logger.error("I18nPlugin","ParamDetectionError",`Error detecting param changes for key "${o}":`,s)}}),i.length>0&&(this.paramsChanged$.emit(t,{changedKeys:i}),this.logger.debug("I18nPlugin","ParamsChanged",`Translation params changed for document ${t}:`,i))}registerParamResolver(t,e){this.paramResolvers.has(t)&&this.logger.warn("I18nPlugin","ResolverOverwrite",`Param resolver for "${t}" already exists and will be overwritten`),this.paramResolvers.set(t,e),this.paramsCache.forEach(n=>{n.delete(t)}),this.logger.debug("I18nPlugin","ResolverRegistered",`Param resolver registered for: ${t}`)}unregisterParamResolver(t){this.paramResolvers.delete(t)&&(this.paramsCache.forEach(e=>{e.delete(t)}),this.logger.debug("I18nPlugin","ResolverUnregistered",`Param resolver unregistered for: ${t}`))}setLocale(t){if(!this.locales.has(t))return void this.logger.warn("I18nPlugin","LocaleNotFound",`Locale '${t}' is not registered`);const e=this.state.currentLocale;e!==t&&(this.dispatch(QA(t)),this.localeChange$.emit({previousLocale:e,currentLocale:t}),this.logger.info("I18nPlugin","LocaleChanged",`Locale changed to: ${t}`))}registerLocale(t){this.locales.has(t.code)?this.logger.warn("I18nPlugin","LocaleAlreadyRegistered",`Locale '${t.code}' is already registered`):(this.locales.set(t.code,t),this.dispatch(JA(t.code)),this.logger.info("I18nPlugin","LocaleRegistered",`Locale registered: ${t.code}`))}};Rz.id="i18n";let Dz=Rz;const eI={currentLocale:"en",availableLocales:[]},jG={manifest:GG,create:(t,e)=>new Dz(Az,t,e),reducer:(t=eI,e)=>{switch(e.type){case Iz:{const n=e.payload;return t.availableLocales.includes(n)?{...t,currentLocale:n}:(console.warn(`I18nPlugin: Locale '${n}' not available`),t)}case Pz:{const n=e.payload;return t.availableLocales.includes(n)?t:{...t,availableLocales:[...t.availableLocales,n]}}default:return t}},initialState:eI},kn=t=>{const{provides:e}=oi(Dz.id),[,n]=eL(r=>r+1,0),i=Lt((r,o)=>e?e.t(r,{documentId:t,params:o==null?void 0:o.params,fallback:o==null?void 0:o.fallback}):(o==null?void 0:o.fallback)??r,[e,t]);return ge(()=>{if(!e)return;const r=e.onLocaleChange(()=>{n()}),o=t?e.forDocument(t).onParamsChanged(()=>{n()}):e.onParamsChanged(()=>{n()});return()=>{r(),o()}},[e,t]),{translate:i,locale:(e==null?void 0:e.getLocale())??"en"}};var Ni=(t=>(t.Automatic="automatic",t.FitPage="fit-page",t.FitWidth="fit-width",t))(Ni||{}),Xl=(t=>(t[t.Center=0]="Center",t[t.Top=1]="Top",t))(Xl||{});const WM="zoom",qG={id:WM,name:"Zoom Plugin",version:"1.0.0",provides:["zoom"],requires:["viewport","scroll"],optional:["interaction-manager","spread"],defaultConfig:{defaultZoomLevel:Ni.Automatic,minZoom:.2,maxZoom:60,zoomStep:.1,zoomRanges:[{min:.2,max:.5,step:.05},{min:.5,max:1,step:.1},{min:1,max:2,step:.2},{min:2,max:4,step:.4},{min:4,max:10,step:.8},{min:10,max:20,step:1.6},{min:20,max:40,step:3.2},{min:40,max:60,step:6.4}],presets:[{name:"Fit Page",value:Ni.FitPage},{name:"Fit Width",value:Ni.FitWidth},{name:"Automatic",value:Ni.Automatic},{name:"25%",value:.25},{name:"50%",value:.5},{name:"100%",value:1},{name:"125%",value:1.25},{name:"150%",value:1.5},{name:"200%",value:2},{name:"400%",value:4},{name:"800%",value:8},{name:"1600%",value:16}]}},kz="ZOOM/INIT_STATE",Nz="ZOOM/CLEANUP_STATE",Lz="ZOOM/SET_ZOOM_LEVEL",zz="ZOOM/SET_MARQUEE_ZOOM_ACTIVE",Oz={zoomLevel:Ni.Automatic,currentZoomLevel:1,isMarqueeZoomActive:!1},tI={documents:{},activeDocumentId:null},Fz=class extends Ln{constructor(t,e,n){var i,r,o;super(t,e),this.zoom$=Qi(),this.state$=Ht(),this.viewportPlugin=e.getPlugin("viewport"),this.viewport=this.viewportPlugin.provides(),this.scroll=e.getPlugin("scroll").provides();const s=e.getPlugin("interaction-manager");this.interactionManager=(s==null?void 0:s.provides())??null;const a=e.getPlugin("spread");this.spread=(a==null?void 0:a.provides())??null,this.minZoom=n.minZoom??.25,this.maxZoom=n.maxZoom??10,this.zoomStep=n.zoomStep??.1,this.defaultZoomLevel=n.defaultZoomLevel,this.presets=n.presets??[],this.zoomRanges=this.normalizeRanges(n.zoomRanges??[]),this.viewport.onViewportResize(l=>this.recalcAuto(l.documentId,Xl.Top),{mode:"debounce",wait:150,keyExtractor:l=>l.documentId}),(i=this.spread)==null||i.onSpreadChange(l=>{this.recalcAuto(l.documentId,Xl.Top)}),(r=this.interactionManager)==null||r.registerMode({id:"marqueeZoom",scope:"page",exclusive:!0,cursor:"zoom-in"}),(o=this.interactionManager)==null||o.onModeChange(l=>{const c=l.activeMode==="marqueeZoom",u=this.getDocumentState(l.documentId);var d;u&&u.isMarqueeZoomActive!==c&&this.dispatch((d=l.documentId,{type:zz,payload:{documentId:d,isActive:c}}))})}onDocumentLoadingStarted(t){this.viewport.gate("zoom",t);const e={...Oz,zoomLevel:this.defaultZoomLevel};this.dispatch(function(n,i){return{type:kz,payload:{documentId:n,state:i}}}(t,e)),this.logger.debug("ZoomPlugin","DocumentOpened",`Initialized zoom state for document: ${t}`)}onDocumentLoaded(t){this.recalcAuto(t,Xl.Top)}onDocumentClosed(t){this.dispatch(function(e){return{type:Nz,payload:e}}(t)),this.logger.debug("ZoomPlugin","DocumentClosed",`Cleaned up zoom state for document: ${t}`)}onRotationChanged(t){this.recalcAuto(t,Xl.Top)}buildCapability(){return{requestZoom:(t,e)=>this.requestZoom(t,e),requestZoomBy:(t,e)=>this.requestZoomBy(t,e),zoomIn:()=>this.zoomIn(),zoomOut:()=>this.zoomOut(),zoomToArea:(t,e)=>this.zoomToArea(t,e),enableMarqueeZoom:()=>this.enableMarqueeZoom(),disableMarqueeZoom:()=>this.disableMarqueeZoom(),toggleMarqueeZoom:()=>this.toggleMarqueeZoom(),isMarqueeZoomActive:()=>this.isMarqueeZoomActive(),getState:()=>this.getDocumentStateOrThrow(),forDocument:t=>this.createZoomScope(t),registerMarqueeOnPage:t=>this.registerMarqueeOnPage(t),getPresets:()=>this.presets,onZoomChange:this.zoom$.on,onStateChange:this.state$.on}}createZoomScope(t){return{requestZoom:(e,n)=>this.requestZoom(e,n,t),requestZoomBy:(e,n)=>this.requestZoomBy(e,n,t),zoomIn:()=>this.zoomIn(t),zoomOut:()=>this.zoomOut(t),zoomToArea:(e,n)=>this.zoomToArea(e,n,t),enableMarqueeZoom:()=>this.enableMarqueeZoom(t),disableMarqueeZoom:()=>this.disableMarqueeZoom(t),toggleMarqueeZoom:()=>this.toggleMarqueeZoom(t),isMarqueeZoomActive:()=>this.isMarqueeZoomActive(t),getState:()=>this.getDocumentStateOrThrow(t),onZoomChange:e=>this.zoom$.on(n=>{n.documentId===t&&e(n)}),onStateChange:e=>this.state$.on(n=>{n.documentId===t&&e(n.state)})}}getDocumentState(t){const e=t??this.getActiveDocumentId();return this.state.documents[e]??null}getDocumentStateOrThrow(t){const e=this.getDocumentState(t);if(!e)throw new Error(`Zoom state not found for document: ${t??"active"}`);return e}requestZoom(t,e,n){this.handleRequest({level:t,center:e},n)}requestZoomBy(t,e,n){const i=n??this.getActiveDocumentId(),r=this.getDocumentStateOrThrow(i).currentZoomLevel,o=this.toZoom(r+t);this.handleRequest({level:o,center:e},i)}zoomIn(t){const e=t??this.getActiveDocumentId(),n=this.getDocumentStateOrThrow(e).currentZoomLevel;this.handleRequest({level:n,delta:this.stepFor(n)},e)}zoomOut(t){const e=t??this.getActiveDocumentId(),n=this.getDocumentStateOrThrow(e).currentZoomLevel;this.handleRequest({level:n,delta:-this.stepFor(n)},e)}zoomToArea(t,e,n){const i=n??this.getActiveDocumentId();this.handleZoomToArea(i,t,e)}enableMarqueeZoom(t){var e;const n=t??this.getActiveDocumentId();(e=this.interactionManager)==null||e.forDocument(n).activate("marqueeZoom")}disableMarqueeZoom(t){var e;const n=t??this.getActiveDocumentId();(e=this.interactionManager)==null||e.forDocument(n).activateDefaultMode()}toggleMarqueeZoom(t){var e;const n=t??this.getActiveDocumentId(),i=(e=this.interactionManager)==null?void 0:e.forDocument(n);(i==null?void 0:i.getActiveMode())==="marqueeZoom"?i.activateDefaultMode():i==null||i.activate("marqueeZoom")}isMarqueeZoomActive(t){var e;const n=t??this.getActiveDocumentId();return((e=this.interactionManager)==null?void 0:e.forDocument(n).getActiveMode())==="marqueeZoom"}handleRequest({level:t,delta:e=0,center:n,focus:i=Xl.Center,align:r="keep"},o){const s=o??this.getActiveDocumentId(),a=this.getDocumentStateOrThrow(s);if(!this.coreState.core.documents[s])return;const l=this.viewport.forDocument(s),c=l.getMetrics(),u=a.currentZoomLevel;if(c.clientWidth===0||c.clientHeight===0)return;const d=typeof t=="number"?t:this.computeZoomForMode(s,t,c);if(d===!1)return;const f=fn(d+e,this.minZoom,this.maxZoom),m=Math.floor(1e3*f)/1e3,g=n??{vx:c.clientWidth/2,vy:i===Xl.Top?0:c.clientHeight/2},{desiredScrollLeft:y,desiredScrollTop:x}=this.computeScrollForZoomChange(s,c,u,m,g,r);isNaN(y)||isNaN(x)||this.viewportPlugin.setViewportScrollMetrics(s,{scrollLeft:y,scrollTop:x}),this.dispatch(function(w,_,S){return{type:Lz,payload:{documentId:w,zoomLevel:_,currentZoomLevel:S}}}(s,typeof t=="number"?m:t,m)),this.dispatchCoreAction(((w,_)=>({type:Uy,payload:{scale:w,documentId:_}}))(m,s)),this.viewport.isGated(s)&&this.viewport.releaseGate("zoom",s),l.scrollTo({x:y,y:x,behavior:"instant"});const v={documentId:s,oldZoom:u,newZoom:m,level:t,center:g,desiredScrollLeft:y,desiredScrollTop:x,viewport:c};this.zoom$.emit(v)}computeZoomForMode(t,e,n){if(!this.coreState.core.documents[t])return!1;const i=this.scroll.forDocument(t),r=i?this.scroll.getPageGap():0,o=this.viewport.getViewportGap(),s=i.getSpreadPagesWithRotatedSize();if(!s.length||n.clientWidth===0||n.clientHeight===0)return!1;const a=n.clientWidth-2*o,l=n.clientHeight-2*o;if(a<=0||l<=0)return!1;let c=0,u=0;switch(s.forEach(d=>{const f=d.reduce((g,y,x)=>g+y.rotatedSize.width+(x?r:0),0),m=Math.max(...d.map(g=>g.rotatedSize.height));c=Math.max(c,f),u=Math.max(u,m)}),e){case Ni.FitWidth:return a/c;case Ni.FitPage:return Math.min(a/c,l/u);case Ni.Automatic:return Math.min(a/c,1);default:return 1}}computeScrollForZoomChange(t,e,n,i,r,o="keep"){const s=this.scroll.forDocument(t).getLayout(),a=this.viewport.getViewportGap(),l=s.totalContentSize.width,c=s.totalContentSize.height,u=e.clientWidth-2*a,d=e.clientHeight-2*a,f=(E,T,P)=>T*P<E?(E-T*P)/2:0,m=f(u,l,n),g=f(d,c,n),y=f(u,l,i),x=f(d,c,i),v=(e.scrollLeft+r.vx-a-m)/n*i+a+y,w=(e.scrollTop+r.vy-a-g)/n*i+a+x,_=o==="center"?v-e.clientWidth/2:v-r.vx,S=o==="center"?w-e.clientHeight/2:w-r.vy;return{desiredScrollLeft:Math.max(0,_),desiredScrollTop:Math.max(0,S)}}handleZoomToArea(t,e,n){const i=this.coreState.core.documents[t];if(!i)return;const r=i.rotation,o=this.viewport.forDocument(t).getMetrics(),s=this.viewport.getViewportGap(),a=this.getDocumentStateOrThrow(t).currentZoomLevel,l=o.clientWidth-2*s,c=o.clientHeight-2*s,u=this.scroll.forDocument(t).getLayout(),d=u.virtualItems.find(D=>D.pageLayouts.some(A=>A.pageIndex===e));if(!d)return;const f=d.pageLayouts.find(D=>D.pageIndex===e),m=PM({width:f.width,height:f.height},n,r),g=this.toZoom(Math.min(l/m.size.width,c/m.size.height)),y=d.x+f.x,x=d.y+f.y,v=y+m.origin.x+m.size.width/2,w=x+m.origin.y+m.size.height/2,_=(D,A,R)=>A*R<D?(D-A*R)/2:0,S=_(l,u.totalContentSize.width,a),E=_(c,u.totalContentSize.height,a),T=s+S+v*a-o.scrollLeft,P=s+E+w*a-o.scrollTop;this.handleRequest({level:g,center:{vx:T,vy:P},align:"center"},t)}recalcAuto(t,e){const n=this.getDocumentState(t);n&&(n.zoomLevel!==Ni.Automatic&&n.zoomLevel!==Ni.FitPage&&n.zoomLevel!==Ni.FitWidth||this.handleRequest({level:n.zoomLevel,focus:e},t))}normalizeRanges(t){return[...t].filter(e=>e.step>0&&e.max>e.min).sort((e,n)=>e.min-n.min)}stepFor(t){const e=this.zoomRanges.find(n=>t>=n.min&&t<n.max);return e?e.step:this.zoomStep}toZoom(t){return parseFloat(fn(t,this.minZoom,this.maxZoom).toFixed(2))}registerMarqueeOnPage(t){if(!this.interactionManager)return this.logger.warn("ZoomPlugin","MissingDependency","Interaction manager plugin not loaded, marquee zoom disabled"),()=>{};const e=this.coreState.core.documents[t.documentId];if(!e||!e.document)return this.logger.warn("ZoomPlugin","DocumentNotFound","Document not found"),()=>{};const n=e.document.pages[t.pageIndex];if(!n)return this.logger.warn("ZoomPlugin","PageNotFound",`Page ${t.pageIndex} not found`),()=>{};const i=function(r){const{pageSize:o,scale:s,minDragPx:a=5,onPreview:l,onCommit:c,onSmallDrag:u}=r;let d=null,f=null;return{onPointerDown:(m,g)=>{var y;d=m,f={origin:{x:m.x,y:m.y},size:{width:0,height:0}},l==null||l(f),(y=g.setPointerCapture)==null||y.call(g)},onPointerMove:m=>{if(!d)return;const g=fn(m.x,0,o.width),y=fn(m.y,0,o.height);f={origin:{x:Math.min(d.x,g),y:Math.min(d.y,y)},size:{width:Math.abs(g-d.x),height:Math.abs(y-d.y)}},l==null||l(f)},onPointerUp:(m,g)=>{var y;f&&(Math.max(f.size.width,f.size.height)*s>a?c==null||c(f):u==null||u()),d=null,f=null,l==null||l(null),(y=g.releasePointerCapture)==null||y.call(g)},onPointerCancel:(m,g)=>{var y;d=null,f=null,l==null||l(null),(y=g.releasePointerCapture)==null||y.call(g)}}}({pageSize:n.size,scale:t.scale,onPreview:t.callback.onPreview,onCommit:r=>{var o,s;this.zoomToArea(t.pageIndex,r,t.documentId),(s=(o=t.callback).onCommit)==null||s.call(o,r)},onSmallDrag:()=>{var r,o;this.zoomIn(t.documentId),(o=(r=t.callback).onSmallDrag)==null||o.call(r)}});return this.interactionManager.registerHandlers({documentId:t.documentId,modeId:"marqueeZoom",handlers:i,pageIndex:t.pageIndex})}onStoreUpdated(t,e){for(const n in e.documents){const i=t.documents[n],r=e.documents[n];i&&r&&(i.currentZoomLevel!==r.currentZoomLevel||i.zoomLevel!==r.zoomLevel||i.isMarqueeZoomActive!==r.isMarqueeZoomActive)&&this.state$.emit({documentId:n,state:r})}}async initialize(){this.logger.info("ZoomPlugin","Initialize","Zoom plugin initialized")}async destroy(){this.zoom$.clear(),this.state$.clear(),super.destroy()}};Fz.id="zoom";let Uz=Fz;const XG={manifest:qG,create:(t,e)=>new Uz(WM,t,e),reducer:(t=tI,e)=>{switch(e.type){case kz:{const{documentId:n,state:i}=e.payload;return{...t,documents:{...t.documents,[n]:i},activeDocumentId:t.activeDocumentId??n}}case Nz:{const n=e.payload,{[n]:i,...r}=t.documents;return{...t,documents:r,activeDocumentId:t.activeDocumentId===n?null:t.activeDocumentId}}case"ZOOM/SET_ACTIVE_DOCUMENT":return{...t,activeDocumentId:e.payload};case Lz:{const{documentId:n,zoomLevel:i,currentZoomLevel:r}=e.payload,o=t.documents[n];return o?{...t,documents:{...t.documents,[n]:{...o,zoomLevel:i,currentZoomLevel:r}}}:t}case zz:{const{documentId:n,isActive:i}=e.payload,r=t.documents[n];return r?{...t,documents:{...t.documents,[n]:{...r,isMarqueeZoomActive:i}}}:t}default:return t}},initialState:tI},GM=()=>oi(Uz.id);function nI(t){const[e,n]=[t[0],t[1]],i=n.clientX-e.clientX,r=n.clientY-e.clientY;return Math.hypot(i,r)}function YG(t,e={}){const{provides:n}=oi("viewport"),{provides:i}=GM(),r=Rc(TL),o=vt(null);return Ny(()=>{const s=o.current,a=r==null?void 0:r.current;if(s&&a&&i)return function({element:l,container:c,documentId:u,zoomProvides:d,viewportGap:f=0,options:m={}}){const{enablePinch:g=!0,enableWheel:y=!0}=m;if(typeof window>"u")return()=>{};const x=d.forDocument(u),v=()=>x.getState();let w=0,_=1,S=!1,E=0,T=null,P=1,D=0,A=0,R=0,N=0,O=0,H=0,q=0,Z=0,G=0,Y=0,z=0,$=0,X=0;const K=(le,we,ve)=>Math.min(Math.max(le,we),ve),oe=()=>{const le=c.clientWidth-2*f,we=l.offsetWidth,ve=we<le?(le-we)/2:0;l.style.marginLeft=`${ve}px`},pe=le=>{const we=D*le,ve=A*le;let Ae=G*(1-le);const V=Z-we/2-R,mt=Y-X*le-R,$e=Math.max(0,we-q),_t=.3*q,Ne=Math.min(1,$e/_t);let B=V+(mt-V)*Ne;return ve>H-2*$&&(Ae=K(N+Ae,H-$-ve,$)-N),we>O-2*$&&(B=K(R+B,O-$-we,$)-R),{tx:B,ty:Ae,blend:Ne,finalWidth:we}},be=le=>{_=le;const{tx:we,ty:ve}=pe(le);l.style.transformOrigin="0 0",l.style.transform=`translate(${we}px, ${ve}px) scale(${le})`},it=()=>{l.style.transform="none",l.style.transformOrigin="0 0",_=1},ae=()=>{const{tx:le,finalWidth:we}=pe(_),ve=(_-1)*w;let Ae,V=z;if(we<=q)Ae=Z;else{const mt=1-_;Ae=Math.abs(mt)>.001?R+le/mt:Y}x.requestZoomBy(ve,{vx:Ae,vy:V}),it(),w=0},me=(le,we)=>{const ve=c.getBoundingClientRect(),Ae=l.getBoundingClientRect();$=f,D=Ae.width,A=Ae.height,R=Ae.left-ve.left,N=Ae.top-ve.top,O=ve.width,H=ve.height,q=c.clientWidth,Z=c.clientLeft+q/2;const V=le-Ae.left;G=we-Ae.top,Y=le-ve.left,z=we-ve.top,X=D<q?Y*D/q:V},Fe=le=>{if(le.touches.length!==2)return;S=!0,w=v().currentZoomLevel,E=nI(le.touches);const we=function(ve){const[Ae,V]=[ve[0],ve[1]];return{x:(Ae.clientX+V.clientX)/2,y:(Ae.clientY+V.clientY)/2}}(le.touches);me(we.x,we.y),le.preventDefault()},tt=le=>{if(!S||le.touches.length!==2)return;const we=nI(le.touches);be(we/E),le.preventDefault()},Be=le=>{S&&(le.touches.length>=2||(S=!1,ae()))},yt=le=>{if(!le.ctrlKey&&!le.metaKey)return;le.preventDefault(),T===null?(w=v().currentZoomLevel,P=1,me(le.clientX,le.clientY)):clearTimeout(T);const we=1-.01*le.deltaY;P*=we,P=Math.max(.1,Math.min(10,P)),be(P),T=setTimeout(()=>{T=null,ae(),P=1},150)},It=x.onStateChange(()=>oe()),Re=new ResizeObserver(()=>oe());return Re.observe(l),Re.observe(c),oe(),g&&(c.addEventListener("touchstart",Fe,{passive:!1}),c.addEventListener("touchmove",tt,{passive:!1}),c.addEventListener("touchend",Be),c.addEventListener("touchcancel",Be)),y&&c.addEventListener("wheel",yt,{passive:!1}),()=>{g&&(c.removeEventListener("touchstart",Fe),c.removeEventListener("touchmove",tt),c.removeEventListener("touchend",Be),c.removeEventListener("touchcancel",Be)),y&&c.removeEventListener("wheel",yt),T&&clearTimeout(T),It(),Re.disconnect(),it(),l.style.marginLeft=""}}({element:s,container:a,documentId:t,zoomProvides:i,viewportGap:(n==null?void 0:n.getViewportGap())||0,options:e})},[n,i,t,r,e.enablePinch,e.enableWheel]),{elementRef:o}}function ZG({children:t,documentId:e,style:n,enablePinch:i=!0,enableWheel:r=!0,...o}){const s=Rt(()=>({enablePinch:i,enableWheel:r}),[i,r]),{elementRef:a}=YG(e,s);return ee("div",{ref:a,...o,style:{...n,display:"inline-block",overflow:"visible",boxSizing:"border-box"},children:t})}const KG=({documentId:t,pageIndex:e,scale:n,className:i,stroke:r="rgba(33,150,243,0.8)",fill:o="rgba(33,150,243,0.15)"})=>{const{provides:s}=GM(),a=oo(t),[l,c]=xe(null),u=Rt(()=>n!==void 0?n:(a==null?void 0:a.scale)??1,[n,a==null?void 0:a.scale]);return ge(()=>{if(s)return s.registerMarqueeOnPage({documentId:t,pageIndex:e,scale:u,callback:{onPreview:c}})},[s,t,e,u]),l?ee("div",{style:{position:"absolute",pointerEvents:"none",left:l.origin.x*u,top:l.origin.y*u,width:l.size.width*u,height:l.size.height*u,border:`1px solid ${r}`,background:o,boxSizing:"border-box"},className:i}):null},Bz=class extends Ln{constructor(t,e,n){super(t,e),this.config=n}buildCapability(){return{renderPage:t=>this.renderPage(t),renderPageRect:t=>this.renderPageRect(t),forDocument:t=>this.createRenderScope(t)}}createRenderScope(t){return{renderPage:e=>this.renderPage(e,t),renderPageRect:e=>this.renderPageRect(e,t)}}renderPage({pageIndex:t,options:e},n){const i=n??this.getActiveDocumentId(),r=this.coreState.core.documents[i];if(!(r!=null&&r.document))throw new Error(`Document ${i} not loaded`);const o=r.document.pages.find(a=>a.index===t);if(!o)throw new Error(`Page ${t} not found in document ${i}`);const s={...e??{},withForms:(e==null?void 0:e.withForms)??this.config.withForms??!1,withAnnotations:(e==null?void 0:e.withAnnotations)??this.config.withAnnotations??!1,imageType:(e==null?void 0:e.imageType)??this.config.defaultImageType??"image/png",imageQuality:(e==null?void 0:e.imageQuality)??this.config.defaultImageQuality??.92};return this.engine.renderPage(r.document,o,s)}renderPageRect({pageIndex:t,rect:e,options:n},i){const r=i??this.getActiveDocumentId(),o=this.coreState.core.documents[r];if(!(o!=null&&o.document))throw new Error(`Document ${r} not loaded`);const s=o.document.pages.find(l=>l.index===t);if(!s)throw new Error(`Page ${t} not found in document ${r}`);const a={...n??{},withForms:(n==null?void 0:n.withForms)??this.config.withForms??!1,withAnnotations:(n==null?void 0:n.withAnnotations)??this.config.withAnnotations??!1,imageType:(n==null?void 0:n.imageType)??this.config.defaultImageType??"image/png",imageQuality:(n==null?void 0:n.imageQuality)??this.config.defaultImageQuality??.92};return this.engine.renderPageRect(o.document,s,e,a)}async initialize(t){this.logger.info("RenderPlugin","Initialize","Render plugin initialized")}async destroy(){super.destroy()}};Bz.id="render";let Hz=Bz;const iI="render",QG={manifest:{id:iI,name:"Render Plugin",version:"1.0.0",provides:["render"],requires:[],optional:[],defaultConfig:{}},create:(t,e)=>new Hz(iI,t,e),reducer:()=>{},initialState:{}};function JG({documentId:t,pageIndex:e,scale:n,dpr:i,style:r,...o}){const{provides:s}=oi(Hz.id),a=oo(t),[l,c]=xe(null),u=vt(null),d=Rt(()=>a&&a.pageRefreshVersions[e]||0,[a,e]),f=Rt(()=>n!==void 0?n:(a==null?void 0:a.scale)??1,[n,a==null?void 0:a.scale]),m=Rt(()=>i!==void 0?i:window.devicePixelRatio,[i]);return ge(()=>{if(!s)return;const g=s.forDocument(t).renderPage({pageIndex:e,options:{scaleFactor:f,dpr:m}});return g.wait(y=>{const x=URL.createObjectURL(y);c(x),u.current=x},ii),()=>{u.current?(URL.revokeObjectURL(u.current),u.current=null):g.abort({code:Xt.Cancelled,message:"canceled render task"})}},[t,e,f,m,s,d]),ee(Tt,{children:l&&ee("img",{src:l,onLoad:()=>{u.current&&(URL.revokeObjectURL(u.current),u.current=null)},...o,style:{width:"100%",height:"100%",...r||{}}})})}const Vz="rotate",ej={id:Vz,name:"Rotate Plugin",version:"1.0.0",provides:["rotate"],requires:[],optional:[],defaultConfig:{}},$z="ROTATE/INIT_STATE",Wz="ROTATE/CLEANUP_STATE",Gz="ROTATE/SET_ROTATION",jz=class extends Ln{constructor(t,e,n){super(t,e),this.rotate$=Ht(),this.defaultRotation=n.defaultRotation??0}onDocumentLoadingStarted(t){const e={rotation:this.defaultRotation};this.dispatch(function(n,i){return{type:$z,payload:{documentId:n,state:i}}}(t,e)),this.dispatchCoreAction(FA(this.defaultRotation,t)),this.logger.debug("RotatePlugin","DocumentOpened",`Initialized rotation state for document: ${t}`)}onDocumentClosed(t){this.dispatch(function(e){return{type:Wz,payload:e}}(t)),this.logger.debug("RotatePlugin","DocumentClosed",`Cleaned up rotation state for document: ${t}`)}buildCapability(){return{setRotation:t=>this.setRotationForDocument(t),getRotation:()=>this.getRotationForDocument(),rotateForward:()=>this.rotateForward(),rotateBackward:()=>this.rotateBackward(),forDocument:t=>this.createRotateScope(t),onRotateChange:this.rotate$.on}}createRotateScope(t){return{setRotation:e=>this.setRotationForDocument(e,t),getRotation:()=>this.getRotationForDocument(t),rotateForward:()=>this.rotateForward(t),rotateBackward:()=>this.rotateBackward(t),onRotateChange:e=>this.rotate$.on(n=>{n.documentId===t&&e(n.rotation)})}}getDocumentState(t){const e=t??this.getActiveDocumentId();return this.state.documents[e]??null}getDocumentStateOrThrow(t){const e=this.getDocumentState(t);if(!e)throw new Error(`Rotation state not found for document: ${t??"active"}`);return e}setRotationForDocument(t,e){const n=e??this.getActiveDocumentId(),i=this.coreState.core.documents[n];if(!(i!=null&&i.document))throw new Error(`Document ${n} not loaded`);this.dispatch(function(r,o){return{type:Gz,payload:{documentId:r,rotation:o}}}(n,t)),this.dispatchCoreAction(FA(t,n)),this.rotate$.emit({documentId:n,rotation:t})}getRotationForDocument(t){return this.getDocumentStateOrThrow(t).rotation}rotateForward(t){const e=t??this.getActiveDocumentId(),n=this.getRotationForDocument(e),i=(n+1)%4;this.setRotationForDocument(i,e)}rotateBackward(t){const e=t??this.getActiveDocumentId(),n=this.getRotationForDocument(e),i=(n+3)%4;this.setRotationForDocument(i,e)}getMatrixAsString(t){return function(e,n,i){const[r,o,s,a,l,c]=function(u,d,f){let m=1,g=0,y=0,x=1,v=0,w=0;switch(u){case 1:m=0,g=1,y=-1,x=0,v=f;break;case 2:m=-1,g=0,y=0,x=-1,v=d,w=f;break;case 3:m=0,g=-1,y=1,x=0,w=d}return[m,g,y,x,v,w]}(e,n,i);return`matrix(${r},${o},${s},${a},${l},${c})`}(t.rotation,t.width,t.height)}onStoreUpdated(t,e){for(const n in e.documents){const i=t.documents[n],r=e.documents[n];(i==null?void 0:i.rotation)!==r.rotation&&this.logger.debug("RotatePlugin","RotationChanged",`Rotation changed for document ${n}: ${(i==null?void 0:i.rotation)??0} -> ${r.rotation}`)}}async initialize(t){this.logger.info("RotatePlugin","Initialize","Rotate plugin initialized")}async destroy(){this.rotate$.clear(),super.destroy()}};jz.id="rotate";let qz=jz;const rI={documents:{},activeDocumentId:null},tj={manifest:ej,create:(t,e)=>new qz(Vz,t,e),reducer:(t=rI,e)=>{switch(e.type){case $z:{const{documentId:n,state:i}=e.payload;return{...t,documents:{...t.documents,[n]:i},activeDocumentId:t.activeDocumentId??n}}case Wz:{const n=e.payload,{[n]:i,...r}=t.documents;return{...t,documents:r,activeDocumentId:t.activeDocumentId===n?null:t.activeDocumentId}}case"ROTATE/SET_ACTIVE_DOCUMENT":return{...t,activeDocumentId:e.payload};case Gz:{const{documentId:n,rotation:i}=e.payload,r=t.documents[n];return r?{...t,documents:{...t.documents,[n]:{...r,rotation:i}}}:t}default:return t}},initialState:rI};function nj({children:t,documentId:e,pageIndex:n,rotation:i,scale:r,style:o,...s}){var a,l,c,u;const{plugin:d}=zr(qz.id),f=oo(e),m=(l=(a=f==null?void 0:f.document)==null?void 0:a.pages)==null?void 0:l[n],g=((c=m==null?void 0:m.size)==null?void 0:c.width)??0,y=((u=m==null?void 0:m.size)==null?void 0:u.height)??0,x=i??(f==null?void 0:f.rotation)??0,v=r??(f==null?void 0:f.scale)??1,w=(d==null?void 0:d.getMatrixAsString({width:g*v,height:y*v,rotation:x}))??"matrix(1, 0, 0, 1, 0, 0)";return m?ee("div",{...s,style:{position:"absolute",transformOrigin:"0 0",transform:w,...o},children:t}):null}const Xz="SEARCH/INIT_STATE",Yz="SEARCH/CLEANUP_STATE",Zz="SEARCH/START_SEARCH_SESSION",Kz="SEARCH/STOP_SEARCH_SESSION",Qz="SEARCH/SET_SEARCH_FLAGS",Jz="SEARCH/SET_SHOW_ALL_RESULTS",eO="SEARCH/START_SEARCH",tO="SEARCH/SET_SEARCH_RESULTS",nO="SEARCH/APPEND_SEARCH_RESULTS",iO="SEARCH/SET_ACTIVE_RESULT_INDEX";function oI(t,e){return{type:Jz,payload:{documentId:t,showAll:e}}}function ww(t,e,n,i){return{type:tO,payload:{documentId:t,results:e,total:n,activeResultIndex:i}}}function sI(t,e){return{type:iO,payload:{documentId:t,index:e}}}const a0={flags:[],results:[],total:0,activeResultIndex:-1,showAllResults:!0,query:"",loading:!1,active:!1},aI={documents:{}},Ea=(t,e,n)=>{const i=t.documents[e]||a0;return{...t,documents:{...t.documents,[e]:{...i,...n}}}},rO=class extends Ln{constructor(t,e,n){super(t,e),this.searchStop$=Ht(),this.searchStart$=Ht(),this.searchResult$=Ht(),this.searchActiveResultChange$=Ht(),this.searchResultState$=Ht(),this.searchState$=Ht(),this.currentTask=new Map,this.pluginConfig=n}onDocumentLoadingStarted(t){const e={...a0,flags:this.pluginConfig.flags||[],showAllResults:this.pluginConfig.showAllResults??!0};this.dispatch(function(n,i){return{type:Xz,payload:{documentId:n,state:i}}}(t,e))}onDocumentClosed(t){this.stopSearchSession(t),this.dispatch(function(e){return{type:Yz,payload:e}}(t)),this.currentTask.delete(t)}async initialize(){}onStoreUpdated(t,e){for(const n in e.documents){const i=t.documents[n],r=e.documents[n];i!==r&&(this.searchState$.emit({documentId:n,state:r}),i&&i.results===r.results&&i.activeResultIndex===r.activeResultIndex&&i.showAllResults===r.showAllResults&&i.active===r.active||this.searchResultState$.emit({documentId:n,state:{results:r.results,activeResultIndex:r.activeResultIndex,showAllResults:r.showAllResults,active:r.active}}))}}buildCapability(){const t=n=>n??this.getActiveDocumentId(),e=n=>{const i=t(n),r=this.state.documents[i];if(!r)throw new Error(`Search state not found for document ${i}`);return r};return{startSearch:n=>this.startSearchSession(t(n)),stopSearch:n=>this.stopSearchSession(t(n)),searchAllPages:(n,i)=>this.searchAllPages(n,t(i)),nextResult:n=>this.nextResult(t(n)),previousResult:n=>this.previousResult(t(n)),goToResult:(n,i)=>this.goToResult(n,t(i)),setShowAllResults:(n,i)=>this.dispatch(oI(t(i),n)),getShowAllResults:n=>e(n).showAllResults,getFlags:n=>e(n).flags,setFlags:(n,i)=>this.setFlags(n,t(i)),getState:n=>e(n),forDocument:this.createSearchScope.bind(this),onSearchResult:this.searchResult$.on,onSearchStart:this.searchStart$.on,onSearchStop:this.searchStop$.on,onActiveResultChange:this.searchActiveResultChange$.on,onSearchResultStateChange:this.searchResultState$.on,onStateChange:this.searchState$.on}}createSearchScope(t){const e=()=>{const n=this.state.documents[t];if(!n)throw new Error(`Search state not found for document ${t}`);return n};return{startSearch:()=>this.startSearchSession(t),stopSearch:()=>this.stopSearchSession(t),searchAllPages:n=>this.searchAllPages(n,t),nextResult:()=>this.nextResult(t),previousResult:()=>this.previousResult(t),goToResult:n=>this.goToResult(n,t),setShowAllResults:n=>this.dispatch(oI(t,n)),getShowAllResults:()=>e().showAllResults,getFlags:()=>e().flags,setFlags:n=>this.setFlags(n,t),getState:e,onSearchResult:n=>this.searchResult$.on(i=>{i.documentId===t&&n(i.results)}),onSearchStart:n=>this.searchStart$.on(i=>{i.documentId===t&&n()}),onSearchStop:n=>this.searchStop$.on(i=>{i.documentId===t&&n()}),onActiveResultChange:n=>this.searchActiveResultChange$.on(i=>{i.documentId===t&&n(i.index)}),onSearchResultStateChange:n=>this.searchResultState$.on(i=>{i.documentId===t&&n(i.state)}),onStateChange:n=>this.searchState$.on(i=>{i.documentId===t&&n(i.state)})}}setFlags(t,e){this.dispatch(function(i,r){return{type:Qz,payload:{documentId:i,flags:r}}}(e,t));const n=this.state.documents[e];n!=null&&n.active&&this.searchAllPages(n.query,e,!0)}notifySearchStart(t){this.searchStart$.emit({documentId:t})}notifySearchStop(t){this.searchStop$.emit({documentId:t})}notifyActiveResultChange(t,e){this.searchActiveResultChange$.emit({documentId:t,index:e})}startSearchSession(t){this.getCoreDocument(t)&&(this.dispatch(function(e){return{type:Zz,payload:{documentId:e}}}(t)),this.notifySearchStart(t))}stopSearchSession(t){var e;const n=this.state.documents[t];if(!(n!=null&&n.active))return;const i=this.currentTask.get(t);if(i){try{(e=i.abort)==null||e.call(i,{code:Xt.Cancelled,message:"search stopped"})}catch{}this.currentTask.delete(t)}this.dispatch(function(r){return{type:Kz,payload:{documentId:r}}}(t)),this.notifySearchStop(t)}searchAllPages(t,e,n=!1){var i;const r=this.state.documents[e];if(!r)return hn.reject({code:Xt.NotFound,message:"Search state not initialized"});const o=this.getCoreDocument(e);if(!(o!=null&&o.document))return hn.reject({code:Xt.NotFound,message:"Document not loaded"});const s=t.trim();if(r.query===s&&!n)return hn.resolve({results:r.results,total:r.total});const a=this.currentTask.get(e);if(a){try{(i=a.abort)==null||i.call(a,{code:Xt.Cancelled,message:"new search"})}catch{}this.currentTask.delete(e)}if(this.dispatch(function(c,u){return{type:eO,payload:{documentId:c,query:u}}}(e,s)),!s)return this.dispatch(ww(e,[],0,-1)),hn.resolve({results:[],total:0});r.active||this.startSearchSession(e);const l=this.engine.searchAllPages(o.document,s,{flags:r.flags});return this.currentTask.set(e,l),l.onProgress(c=>{var u;(u=c==null?void 0:c.results)!=null&&u.length&&this.currentTask.get(e)===l&&(this.dispatch(function(d,f){return{type:nO,payload:{documentId:d,results:f}}}(e,c.results)),this.state.documents[e].activeResultIndex===-1&&(this.dispatch(sI(e,0)),this.notifyActiveResultChange(e,0)))}),l.wait(c=>{this.currentTask.delete(e);const u=c.total>0?0:-1;this.dispatch(ww(e,c.results,c.total,u)),this.searchResult$.emit({documentId:e,results:c}),c.total>0&&this.notifyActiveResultChange(e,0)},c=>{var u;((u=c==null?void 0:c.reason)==null?void 0:u.code)!==Xt.Cancelled&&(console.error("Error during search:",c),this.dispatch(ww(e,[],0,-1))),this.currentTask.delete(e)}),l}nextResult(t){const e=this.state.documents[t];if(!e||e.results.length===0)return-1;const n=e.activeResultIndex>=e.results.length-1?0:e.activeResultIndex+1;return this.goToResult(n,t)}previousResult(t){const e=this.state.documents[t];if(!e||e.results.length===0)return-1;const n=e.activeResultIndex<=0?e.results.length-1:e.activeResultIndex-1;return this.goToResult(n,t)}goToResult(t,e){const n=this.state.documents[e];return!n||n.results.length===0||t<0||t>=n.results.length?-1:(this.dispatch(sI(e,t)),this.notifyActiveResultChange(e,t),t)}async destroy(){for(const t of Object.keys(this.state.documents))this.stopSearchSession(t);this.searchResult$.clear(),this.searchStart$.clear(),this.searchStop$.clear(),this.searchActiveResultChange$.clear(),this.searchResultState$.clear(),this.searchState$.clear(),super.destroy()}};rO.id="search";let oO=rO;const lI="search",ij={manifest:{id:lI,name:"Search Plugin",version:"1.0.0",provides:["search"],requires:[],optional:[],defaultConfig:{flags:[]}},create:(t,e)=>new oO(lI,t,e),reducer:(t=aI,e)=>{switch(e.type){case Xz:return{...t,documents:{...t.documents,[e.payload.documentId]:e.payload.state}};case Yz:{const n=e.payload,{[n]:i,...r}=t.documents;return{...t,documents:r}}case Zz:return Ea(t,e.payload.documentId,{active:!0});case Kz:return Ea(t,e.payload.documentId,{results:[],total:0,activeResultIndex:-1,query:"",loading:!1,active:!1});case Qz:return Ea(t,e.payload.documentId,{flags:e.payload.flags});case Jz:return Ea(t,e.payload.documentId,{showAllResults:e.payload.showAll});case eO:return Ea(t,e.payload.documentId,{loading:!0,query:e.payload.query,results:[],total:0,activeResultIndex:-1});case nO:{const{documentId:n,results:i}=e.payload,r=t.documents[n];if(!r)return t;const o=[...r.results,...i],s=r.activeResultIndex===-1&&o.length>0?0:r.activeResultIndex;return Ea(t,n,{results:o,total:o.length,activeResultIndex:s,loading:!0})}case tO:{const{documentId:n,results:i,total:r,activeResultIndex:o}=e.payload;return Ea(t,n,{results:i,total:r,activeResultIndex:o,loading:!1})}case iO:return Ea(t,e.payload.documentId,{activeResultIndex:e.payload.index});default:return t}},initialState:aI},sO=()=>oi(oO.id);function rj({documentId:t,pageIndex:e,scale:n,style:i,highlightColor:r="#FFFF00",activeHighlightColor:o="#FFBF00",...s}){const{provides:a}=sO(),[l,c]=xe(null),u=oo(t),d=Rt(()=>a==null?void 0:a.forDocument(t),[a,t]),f=Rt(()=>n!==void 0?n:(u==null?void 0:u.scale)??1,[n,u==null?void 0:u.scale]);return ge(()=>{if(!d)return void c(null);const m=d.getState();return c({results:m.results,activeResultIndex:m.activeResultIndex,showAllResults:m.showAllResults,active:m.active}),d.onSearchResultStateChange(g=>{c(g)})},[d]),!l||!l.active?null:ee("div",{style:{...i,pointerEvents:"none"},...s,children:l.results.map((m,g)=>({result:m,originalIndex:g})).filter(({result:m})=>m.pageIndex===e).filter(({originalIndex:m})=>l.showAllResults||m===l.activeResultIndex).map(({result:m,originalIndex:g})=>m.rects.map((y,x)=>ee("div",{style:{position:"absolute",top:y.origin.y*f,left:y.origin.x*f,width:y.size.width*f,height:y.size.height*f,backgroundColor:g===l.activeResultIndex?o:r,mixBlendMode:"multiply",transform:"scale(1.02)",transformOrigin:"center",transition:"opacity .3s ease-in-out",opacity:1}},`${g}-${x}`)))})}const Kl="selection",oj={id:Kl,name:"Selection Plugin",version:"1.0.0",provides:["selection"],requires:["interaction-manager"],optional:["viewport","scroll"],defaultConfig:{menuHeight:40}},aO="SELECTION/INIT_STATE",lO="SELECTION/CLEANUP_STATE",cO="SELECTION/CACHE_PAGE_GEOMETRY",uO="SELECTION/SET_SELECTION",dO="SELECTION/START_SELECTION",hO="SELECTION/END_SELECTION",fO="SELECTION/CLEAR_SELECTION",pO="SELECTION/SET_RECTS",mO="SELECTION/SET_SLICES",gO={geometry:{},rects:{},slices:{},selection:null,active:!1,selecting:!1},cI={documents:{}},Fs=(t,e,n)=>({...t,documents:{...t.documents,[e]:n}});function Hh(t,e){return t.rects[e]??[]}function Hu(t,e){return rL(Hh(t,e))}function _w(t){const e=[],n=t.rects;for(const i in n){const r=Number(i),o=rL(n[r]);o&&e.push({page:r,rect:o})}return e}function uI(t,e){const n=t.rects[e]||[];if(n.length===0)return null;const i=Hu(t,e);return i?{pageIndex:e,rect:i,segmentRects:n}:null}function dI(t){const e=[],n=Object.keys(t.rects).map(Number);for(const i of n){const r=t.rects[i]||[];if(r.length===0)continue;const o=Hu(t,i);o&&e.push({pageIndex:i,rect:o,segmentRects:r})}return e}function hI(t,e){for(const n of t.runs){if(!(e.y>=n.rect.y&&e.y<=n.rect.y+n.rect.height&&e.x>=n.rect.x&&e.x<=n.rect.x+n.rect.width))continue;const i=n.glyphs.findIndex(r=>e.x>=r.x&&e.x<=r.x+r.width&&e.y>=r.y&&e.y<=r.y+r.height);if(i!==-1)return n.charStart+i}return-1}function sj(t,e,n){if(!t||!e||n<t.start.page||n>t.end.page)return null;const i=n===t.start.page?t.start.index:0,r=e.runs[e.runs.length-1],o=r.charStart+r.glyphs.length-1;return{from:i,to:n===t.end.page?t.end.index:o}}function aj(t,e,n,i=!0){const r=[];for(const o of t.runs){const s=o.charStart,a=s+o.glyphs.length-1;if(a<e||s>n)continue;const l=Math.max(e,s)-s,c=Math.min(n,a)-s;let u=1/0,d=-1/0,f=1/0,m=-1/0,g=0;for(let y=l;y<=c;y++){const x=o.glyphs[y];x.flags!==2&&(u=Math.min(u,x.x),d=Math.max(d,x.x+x.width),f=Math.min(f,x.y),m=Math.max(m,x.y+x.height),g++)}u!==1/0&&g>0&&r.push({rect:{origin:{x:u,y:f},size:{width:d-u,height:m-f}},charCount:g})}return i?function(o){const s=[];let a=null,l=null;for(const c of o)a&&l?cj(a,c)?l=vO(l,c.rect):(s.push(l),l=c.rect):l=c.rect,a=c;return l&&!Hb(l)&&s.push(l),s}(r):r.map(o=>o.rect)}function vO(t,e){const n=Math.min(t.origin.x,e.origin.x),i=Math.min(t.origin.y,e.origin.y);return{origin:{x:n,y:i},size:{width:Math.max(t.origin.x+t.size.width,e.origin.x+e.size.width)-n,height:Math.max(t.origin.y+t.size.height,e.origin.y+e.size.height)-i}}}function Hb(t){return t.size.width<=0||t.size.height<=0}function lj(t,e){if(Hb(t)||Hb(e))return 0;const n=vO(t,e);return n.size.height===t.size.height||n.size.height===e.size.height?1:function(r,o){const s=Math.max(r.origin.x,o.origin.x),a=Math.max(r.origin.y,o.origin.y),l=Math.min(r.origin.x+r.size.width,o.origin.x+o.size.width),c=Math.min(r.origin.y+r.size.height,o.origin.y+o.size.height);return{origin:{x:s,y:a},size:{width:Math.max(0,l-s),height:Math.max(0,c-a)}}}(t,e).size.height/n.size.height}function cj(t,e){const n=t.rect,i=e.rect;if(lj(n,i)<.8)return!1;const r=1*n.size.width/t.charCount,o=1*i.size.width/e.charCount,s=n.origin.x-r,a=n.origin.x+n.size.width+r,l=i.origin.x-o;return s<i.origin.x+i.size.width+o&&a>l}const yO=class extends Ln{constructor(t,e,n){var i,r,o;super(t,e),this.enabledModesPerDoc=new Map,this.selecting=new Map,this.anchor=new Map,this.pageCallbacks=new Map,this.menuPlacement$=Tr((a,l)=>({documentId:a,placement:l})),this.selChange$=Tr((a,l)=>({documentId:a,selection:l})),this.textRetrieved$=Tr((a,l)=>({documentId:a,text:l})),this.copyToClipboard$=Tr((a,l)=>({documentId:a,text:l}),{cache:!1}),this.beginSelection$=Tr((a,l)=>({documentId:a,page:l.page,index:l.index}),{cache:!1}),this.endSelection$=Tr(a=>({documentId:a}),{cache:!1}),this.viewportCapability=null,this.scrollCapability=null,this.menuHeight=n.menuHeight??40;const s=e.getPlugin("interaction-manager");if(!s)throw new Error("SelectionPlugin: InteractionManagerPlugin is required.");this.interactionManagerCapability=s.provides(),this.viewportCapability=((i=e.getPlugin("viewport"))==null?void 0:i.provides())??null,this.scrollCapability=((r=e.getPlugin("scroll"))==null?void 0:r.provides())??null,this.coreStore.onAction(Id,a=>{const{documentId:l,pageIndexes:c}=a.payload,u=c.map(d=>this.getNewPageGeometryAndCache(l,d));Rn.all(u).wait(()=>{c.forEach(d=>{this.notifyPage(l,d)})},ii)}),(o=this.viewportCapability)==null||o.onViewportChange(a=>{this.recalculateMenuPlacement(a.documentId)},{mode:"throttle",wait:100})}onDocumentLoadingStarted(t){this.dispatch(((e,n)=>({type:aO,payload:{documentId:e,state:n}}))(t,gO)),this.enabledModesPerDoc.set(t,new Set(["pointerMode"])),this.pageCallbacks.set(t,new Map),this.selecting.set(t,!1),this.anchor.set(t,void 0)}onDocumentClosed(t){this.dispatch((e=>({type:lO,payload:e}))(t)),this.enabledModesPerDoc.delete(t),this.pageCallbacks.delete(t),this.selecting.delete(t),this.anchor.delete(t),this.selChange$.clearScope(t),this.textRetrieved$.clearScope(t),this.copyToClipboard$.clearScope(t),this.beginSelection$.clearScope(t),this.endSelection$.clearScope(t),this.menuPlacement$.clearScope(t)}async initialize(){}async destroy(){this.selChange$.clear(),this.textRetrieved$.clear(),this.copyToClipboard$.clear(),this.beginSelection$.clear(),this.endSelection$.clear(),this.menuPlacement$.clear(),super.destroy()}buildCapability(){const t=e=>e??this.getActiveDocumentId();return{getFormattedSelection:e=>dI(this.getDocumentState(t(e))),getFormattedSelectionForPage:(e,n)=>uI(this.getDocumentState(t(n)),e),getHighlightRectsForPage:(e,n)=>Hh(this.getDocumentState(t(n)),e),getHighlightRects:e=>this.getDocumentState(t(e)).rects,getBoundingRectForPage:(e,n)=>Hu(this.getDocumentState(t(n)),e),getBoundingRects:e=>_w(this.getDocumentState(t(e))),getSelectedText:e=>this.getSelectedText(t(e)),clear:e=>this.clearSelection(t(e)),copyToClipboard:e=>this.copyToClipboard(t(e)),getState:e=>this.getDocumentState(t(e)),enableForMode:(e,n)=>{var i;return(i=this.enabledModesPerDoc.get(t(n)))==null?void 0:i.add(e)},isEnabledForMode:(e,n)=>{var i;return((i=this.enabledModesPerDoc.get(t(n)))==null?void 0:i.has(e))??!1},forDocument:this.createSelectionScope.bind(this),onCopyToClipboard:this.copyToClipboard$.onGlobal,onSelectionChange:this.selChange$.onGlobal,onTextRetrieved:this.textRetrieved$.onGlobal,onBeginSelection:this.beginSelection$.onGlobal,onEndSelection:this.endSelection$.onGlobal}}createSelectionScope(t){return{getFormattedSelection:()=>dI(this.getDocumentState(t)),getFormattedSelectionForPage:e=>uI(this.getDocumentState(t),e),getHighlightRectsForPage:e=>Hh(this.getDocumentState(t),e),getHighlightRects:()=>this.getDocumentState(t).rects,getBoundingRectForPage:e=>Hu(this.getDocumentState(t),e),getBoundingRects:()=>_w(this.getDocumentState(t)),getSelectedText:()=>this.getSelectedText(t),clear:()=>this.clearSelection(t),copyToClipboard:()=>this.copyToClipboard(t),getState:()=>this.getDocumentState(t),onSelectionChange:this.selChange$.forScope(t),onTextRetrieved:this.textRetrieved$.forScope(t),onCopyToClipboard:this.copyToClipboard$.forScope(t),onBeginSelection:this.beginSelection$.forScope(t),onEndSelection:this.endSelection$.forScope(t)}}getDocumentState(t){const e=this.state.documents[t];if(!e)throw new Error(`Selection state not found for document: ${t}`);return e}onMenuPlacement(t,e){return this.menuPlacement$.forScope(t)(e)}registerSelectionOnPage(t){var e;const{documentId:n,pageIndex:i,onRectsChange:r}=t,o=this.state.documents[n];if(!o)return this.logger.warn("SelectionPlugin","RegisterFailed",`Cannot register selection on page ${i} for document ${n}: document state not initialized.`),()=>{};(e=this.pageCallbacks.get(n))==null||e.set(i,r);const s=this.getOrLoadGeometry(n,i),a=this.interactionManagerCapability.forDocument(n),l=this.enabledModesPerDoc.get(n);r({rects:Hh(o,i),boundingRect:Hu(o,i)});const c={onPointerDown:(d,f,m)=>{if(!(l!=null&&l.has(m)))return;this.clearSelection(n);const g=this.getDocumentState(n).geometry[i];if(g){const y=hI(g,d);y!==-1&&this.beginSelection(n,i,y)}},onPointerMove:(d,f,m)=>{if(!(l!=null&&l.has(m)))return;const g=this.getDocumentState(n).geometry[i];if(g){const y=hI(g,d);y!==-1?a.setCursor("selection-text","text",10):a.removeCursor("selection-text"),this.selecting.get(n)&&y!==-1&&this.updateSelection(n,i,y)}},onPointerUp:(d,f,m)=>{l!=null&&l.has(m)&&this.endSelection(n)},onHandlerActiveEnd:d=>{l!=null&&l.has(d)&&this.clearSelection(n)}},u=this.interactionManagerCapability.registerAlways({scope:{type:"page",documentId:n,pageIndex:i},handlers:c});return()=>{var d;u(),(d=this.pageCallbacks.get(n))==null||d.delete(i),s.abort({code:Xt.Cancelled,message:"Cleanup"})}}getPlacementMetrics(t,e,n,i){var r;const o=(r=this.scrollCapability)==null?void 0:r.forDocument(t),s=o==null?void 0:o.getRectPositionForPage(e,n);if(!s)return null;const a=s.origin.y-i.scrollTop,l=s.origin.y+s.size.height-i.scrollTop;return{pageIndex:e,rect:n,spaceAbove:a,spaceBelow:i.clientHeight-l,isBottomVisible:l>0&&l<=i.clientHeight,isTopVisible:a>=0&&a<i.clientHeight}}recalculateMenuPlacement(t){const e=this.state.documents[t];if(!e)return;if(e.selecting||e.selection===null)return void this.menuPlacement$.emit(t,null);const n=_w(e);if(n.length===0)return void this.menuPlacement$.emit(t,null);const i=n[n.length-1];if(!this.viewportCapability||!this.scrollCapability)return void this.menuPlacement$.emit(t,{pageIndex:i.page,rect:i.rect,spaceAbove:0,spaceBelow:1/0,suggestTop:!1,isVisible:!0});const r=this.viewportCapability.forDocument(t).getMetrics(),o=n[0],s=this.getPlacementMetrics(t,i.page,i.rect,r),a=this.getPlacementMetrics(t,o.page,o.rect,r);s&&s.isBottomVisible&&s.spaceBelow>this.menuHeight?this.menuPlacement$.emit(t,{...s,suggestTop:!1,isVisible:!0}):a&&a.isTopVisible?this.menuPlacement$.emit(t,{...a,suggestTop:!0,isVisible:!0}):s&&s.isBottomVisible?this.menuPlacement$.emit(t,{...s,suggestTop:!1,isVisible:!0}):this.menuPlacement$.emit(t,null)}notifyPage(t,e){var n;const i=(n=this.pageCallbacks.get(t))==null?void 0:n.get(e);if(i){const r=this.getDocumentState(t);i(this.interactionManagerCapability.forDocument(t).getActiveMode()==="pointerMode"?{rects:Hh(r,e),boundingRect:Hu(r,e)}:{rects:[],boundingRect:null})}}notifyAllPages(t){var e;(e=this.pageCallbacks.get(t))==null||e.forEach((n,i)=>{this.notifyPage(t,i)})}getNewPageGeometryAndCache(t,e){const n=this.getCoreDocument(t);if(!n||!n.document)return hn.reject({code:Xt.NotFound,message:"Doc Not Found"});const i=n.document.pages.find(o=>o.index===e),r=this.engine.getPageGeometry(n.document,i);return r.wait(o=>{this.dispatch(((s,a,l)=>({type:cO,payload:{documentId:s,page:a,geo:l}}))(t,e,o))},ii),r}getOrLoadGeometry(t,e){const n=this.getDocumentState(t).geometry[e];return n?hn.resolve(n):this.getNewPageGeometryAndCache(t,e)}beginSelection(t,e,n){this.selecting.set(t,!0),this.anchor.set(t,{page:e,index:n}),this.dispatch((i=>({type:dO,payload:{documentId:i}}))(t)),this.beginSelection$.emit(t,{page:e,index:n}),this.recalculateMenuPlacement(t)}endSelection(t){this.selecting.set(t,!1),this.anchor.set(t,void 0),this.dispatch((e=>({type:hO,payload:{documentId:e}}))(t)),this.endSelection$.emit(t),this.recalculateMenuPlacement(t)}clearSelection(t){this.selecting.set(t,!1),this.anchor.set(t,void 0),this.dispatch((e=>({type:fO,payload:{documentId:e}}))(t)),this.selChange$.emit(t,null),this.menuPlacement$.emit(t,null),this.notifyAllPages(t)}updateSelection(t,e,n){if(!this.selecting.get(t)||!this.anchor.get(t))return;const i=this.anchor.get(t),r=e>i.page||e===i.page&&n>=i.index,o={start:r?i:{page:e,index:n},end:r?{page:e,index:n}:i};this.dispatch(((s,a)=>({type:uO,payload:{documentId:s,selection:a}}))(t,o)),this.updateRectsAndSlices(t,o),this.selChange$.emit(t,o);for(let s=o.start.page;s<=o.end.page;s++)this.notifyPage(t,s)}updateRectsAndSlices(t,e){const n=this.getDocumentState(t),i={},r={};for(let o=e.start.page;o<=e.end.page;o++){const s=n.geometry[o],a=sj(e,s,o);a&&(i[o]=aj(s,a.from,a.to),r[o]={start:a.from,count:a.to-a.from+1})}this.dispatch(((o,s)=>({type:pO,payload:{documentId:o,rects:s}}))(t,i)),this.dispatch(((o,s)=>({type:mO,payload:{documentId:o,slices:s}}))(t,r))}getSelectedText(t){const e=this.getCoreDocument(t),n=this.getDocumentState(t);if(!(e!=null&&e.document)||!n.selection)return hn.reject({code:Xt.NotFound,message:"Doc Not Found or No Selection"});const i=n.selection,r=[];for(let s=i.start.page;s<=i.end.page;s++){const a=n.slices[s];a&&r.push({pageIndex:s,charIndex:a.start,charCount:a.count})}if(r.length===0)return hn.resolve([]);const o=this.engine.getTextSlices(e.document,r);return o.wait(s=>{this.textRetrieved$.emit(t,s)},ii),o}copyToClipboard(t){this.getSelectedText(t).wait(e=>{this.copyToClipboard$.emit(t,e.join(`
`))},ii)}};yO.id="selection";let jM=yO;const uj={manifest:oj,create:(t,e)=>new jM(Kl,t,e),reducer:(t=cI,e)=>{switch(e.type){case aO:{const{documentId:n,state:i}=e.payload;return Fs(t,n,i)}case lO:{const n=e.payload,{[n]:i,...r}=t.documents;return{...t,documents:r}}case cO:{const{documentId:n,page:i,geo:r}=e.payload,o=t.documents[n];return o?Fs(t,n,{...o,geometry:{...o.geometry,[i]:r}}):t}case uO:{const{documentId:n,selection:i}=e.payload,r=t.documents[n];return r?Fs(t,n,{...r,selection:i,active:!0}):t}case dO:{const{documentId:n}=e.payload,i=t.documents[n];return i?Fs(t,n,{...i,selecting:!0,selection:null,rects:{}}):t}case hO:{const{documentId:n}=e.payload,i=t.documents[n];return i?Fs(t,n,{...i,selecting:!1}):t}case fO:{const{documentId:n}=e.payload,i=t.documents[n];return i?Fs(t,n,{...i,selecting:!1,selection:null,rects:{},active:!1}):t}case pO:{const{documentId:n,rects:i}=e.payload,r=t.documents[n];return r?Fs(t,n,{...r,rects:i}):t}case mO:{const{documentId:n,slices:i}=e.payload,r=t.documents[n];return r?Fs(t,n,{...r,slices:i}):t}case"SELECTION/RESET":{const{documentId:n}=e.payload;return t.documents[n]?Fs(t,n,gO):t}default:return t}},initialState:cI},dj="onDblClick";function l0({children:t,...e}){const{rect:n,rotation:i}=e,{matrix:r,width:o,height:s}=function(l,c){const{width:u,height:d}=l.size;switch(c%4){case 1:return{matrix:`matrix(0, -1, 1, 0, 0, ${d})`,width:d,height:u};case 2:return{matrix:`matrix(-1, 0, 0, -1, ${u}, ${d})`,width:u,height:d};case 3:return{matrix:`matrix(0, 1, -1, 0, ${u}, 0)`,width:d,height:u};default:return{matrix:"matrix(1, 0, 0, 1, 0, 0)",width:u,height:d}}}(n,i),a=vt(null);return ge(()=>{const l=a.current;if(!l)return;const c=d=>{d.stopPropagation()},u=d=>{d.stopPropagation()};return l.addEventListener("pointerdown",c,{capture:!0}),l.addEventListener("touchstart",u,{capture:!0}),()=>{l.removeEventListener("pointerdown",c,{capture:!0}),l.removeEventListener("touchstart",u,{capture:!0})}},[]),ee(Tt,{children:t({menuWrapperProps:{style:{position:"absolute",left:n.origin.x,top:n.origin.y,transform:r,transformOrigin:"0 0",width:o,height:s,pointerEvents:"none",zIndex:3},ref:l=>{a.current=l}},matrix:r,rect:{origin:{x:n.origin.x,y:n.origin.y},size:{width:o,height:s}}})})}class hj{constructor(e,n){this.config=e,this.onUpdate=n,this.state="idle",this.startPoint=null,this.startElement=null,this.activeHandle=null,this.currentPosition=null,this.activeVertexIndex=null,this.startVertices=[],this.currentVertices=[],this.currentVertices=e.vertices||[]}updateConfig(e){this.config={...this.config,...e},this.currentVertices=e.vertices||[]}startDrag(e,n){this.state="dragging",this.startPoint={x:e,y:n},this.startElement={...this.config.element},this.currentPosition={...this.config.element},this.onUpdate({state:"start",transformData:{type:"move",changes:{rect:this.startElement}}})}startResize(e,n,i){this.state="resizing",this.activeHandle=e,this.startPoint={x:n,y:i},this.startElement={...this.config.element},this.currentPosition={...this.config.element},this.onUpdate({state:"start",transformData:{type:"resize",changes:{rect:this.startElement},metadata:{handle:this.activeHandle,maintainAspectRatio:this.config.maintainAspectRatio}}})}startVertexEdit(e,n,i){this.currentVertices=[...this.config.vertices??this.currentVertices],e<0||e>=this.currentVertices.length||(this.state="vertex-editing",this.activeVertexIndex=e,this.startPoint={x:n,y:i},this.startVertices=[...this.currentVertices],this.onUpdate({state:"start",transformData:{type:"vertex-edit",changes:{vertices:this.startVertices},metadata:{vertexIndex:e}}}))}move(e,n){if(this.state!=="idle"&&this.startPoint){if(this.state==="dragging"&&this.startElement){const i=this.calculateDelta(e,n),r=this.calculateDragPosition(i);this.currentPosition=r,this.onUpdate({state:"move",transformData:{type:"move",changes:{rect:r}}})}else if(this.state==="resizing"&&this.activeHandle&&this.startElement){const i=this.calculateDelta(e,n),r=this.calculateResizePosition(i,this.activeHandle);this.currentPosition=r,this.onUpdate({state:"move",transformData:{type:"resize",changes:{rect:r},metadata:{handle:this.activeHandle,maintainAspectRatio:this.config.maintainAspectRatio}}})}else if(this.state==="vertex-editing"&&this.activeVertexIndex!==null){const i=this.calculateVertexPosition(e,n);this.currentVertices=i,this.onUpdate({state:"move",transformData:{type:"vertex-edit",changes:{vertices:i},metadata:{vertexIndex:this.activeVertexIndex}}})}}}end(){if(this.state==="idle")return;const e=this.state,n=this.activeHandle,i=this.activeVertexIndex;if(e==="vertex-editing")this.onUpdate({state:"end",transformData:{type:"vertex-edit",changes:{vertices:this.currentVertices},metadata:{vertexIndex:i||void 0}}});else{const r=this.getCurrentPosition();this.onUpdate({state:"end",transformData:{type:e==="dragging"?"move":"resize",changes:{rect:r},metadata:e==="dragging"?void 0:{handle:n||void 0,maintainAspectRatio:this.config.maintainAspectRatio}}})}this.reset()}cancel(){this.state!=="idle"&&(this.state==="vertex-editing"?this.onUpdate({state:"end",transformData:{type:"vertex-edit",changes:{vertices:this.startVertices},metadata:{vertexIndex:this.activeVertexIndex||void 0}}}):this.startElement&&this.onUpdate({state:"end",transformData:{type:this.state==="dragging"?"move":"resize",changes:{rect:this.startElement},metadata:this.state==="dragging"?void 0:{handle:this.activeHandle||void 0,maintainAspectRatio:this.config.maintainAspectRatio}}}),this.reset())}reset(){this.state="idle",this.startPoint=null,this.startElement=null,this.activeHandle=null,this.currentPosition=null,this.activeVertexIndex=null,this.startVertices=[]}getCurrentPosition(){return this.currentPosition||this.config.element}calculateDelta(e,n){if(!this.startPoint)return{x:0,y:0};const i={x:e-this.startPoint.x,y:n-this.startPoint.y};return this.transformDelta(i)}transformDelta(e){const{pageRotation:n=0,scale:i=1}=this.config,r=n*Math.PI/2,o=Math.cos(r),s=Math.sin(r),a=e.x/i,l=e.y/i;return{x:o*a+s*l,y:-s*a+o*l}}clampPoint(e){var n;const i=(n=this.config.constraints)==null?void 0:n.boundingBox;return i?{x:Math.max(0,Math.min(e.x,i.width)),y:Math.max(0,Math.min(e.y,i.height))}:e}calculateVertexPosition(e,n){if(this.activeVertexIndex===null)return this.startVertices;const i=this.calculateDelta(e,n),r=[...this.startVertices],o=r[this.activeVertexIndex],s={x:o.x+i.x,y:o.y+i.y};return r[this.activeVertexIndex]=this.clampPoint(s),r}calculateDragPosition(e){if(!this.startElement)return this.config.element;const n={origin:{x:this.startElement.origin.x+e.x,y:this.startElement.origin.y+e.y},size:{width:this.startElement.size.width,height:this.startElement.size.height}};return this.applyConstraints(n)}calculateResizePosition(e,n){if(!this.startElement)return this.config.element;const i=function(s){return{x:s.includes("e")?"left":s.includes("w")?"right":"center",y:s.includes("s")?"top":s.includes("n")?"bottom":"center"}}(n),r=this.startElement.size.width/this.startElement.size.height||1;let o=this.applyResizeDelta(e,i);return this.config.maintainAspectRatio&&(o=this.enforceAspectRatio(o,i,r)),o=this.clampToBounds(o,i,r),this.applyConstraints(o)}applyResizeDelta(e,n){const i=this.startElement;let r=i.origin.x,o=i.origin.y,s=i.size.width,a=i.size.height;return n.x==="left"?s+=e.x:n.x==="right"&&(r+=e.x,s-=e.x),n.y==="top"?a+=e.y:n.y==="bottom"&&(o+=e.y,a-=e.y),{origin:{x:r,y:o},size:{width:s,height:a}}}enforceAspectRatio(e,n,i){const r=this.startElement;let{x:o,y:s}=e.origin,{width:a,height:l}=e.size;return n.x==="center"||n.y==="center"?n.y==="center"?(l=a/i,s=r.origin.y+(r.size.height-l)/2):(a=l*i,o=r.origin.x+(r.size.width-a)/2):Math.abs(a-r.size.width)>=Math.abs(l-r.size.height)?l=a/i:a=l*i,n.x==="right"&&(o=r.origin.x+r.size.width-a),n.y==="bottom"&&(s=r.origin.y+r.size.height-l),{origin:{x:o,y:s},size:{width:a,height:l}}}clampToBounds(e,n,i){var r;const o=(r=this.config.constraints)==null?void 0:r.boundingBox;if(!o)return e;const s=this.startElement;let{x:a,y:l}=e.origin,{width:c,height:u}=e.size;c=Math.max(1,c),u=Math.max(1,u);const d=n.x==="left"?s.origin.x:s.origin.x+s.size.width,f=n.y==="top"?s.origin.y:s.origin.y+s.size.height,m=n.x==="left"?o.width-d:n.x==="right"?d:2*Math.min(s.origin.x,o.width-s.origin.x-s.size.width)+s.size.width,g=n.y==="top"?o.height-f:n.y==="bottom"?f:2*Math.min(s.origin.y,o.height-s.origin.y-s.size.height)+s.size.height;if(this.config.maintainAspectRatio){const y=c>m?m/c:1,x=u>g?g/u:1,v=Math.min(y,x);v<1&&(c*=v,u*=v)}else c=Math.min(c,m),u=Math.min(u,g);return a=n.x==="left"?d:n.x==="right"?d-c:s.origin.x+(s.size.width-c)/2,l=n.y==="top"?f:n.y==="bottom"?f-u:s.origin.y+(s.size.height-u)/2,a=Math.max(0,Math.min(a,o.width-c)),l=Math.max(0,Math.min(l,o.height-u)),{origin:{x:a,y:l},size:{width:c,height:u}}}applyConstraints(e){const{constraints:n}=this.config;if(!n)return e;let{origin:{x:i,y:r},size:{width:o,height:s}}=e;const a=n.minWidth??1,l=n.minHeight??1,c=n.maxWidth,u=n.maxHeight;if(this.config.maintainAspectRatio&&o>0&&s>0){const d=o/s;o<a&&(o=a,s=o/d),s<l&&(s=l,o=s*d),c!==void 0&&o>c&&(o=c,s=o/d),u!==void 0&&s>u&&(s=u,o=s*d)}else o=Math.max(a,o),s=Math.max(l,s),c!==void 0&&(o=Math.min(c,o)),u!==void 0&&(s=Math.min(u,s));return n.boundingBox&&(i=Math.max(0,Math.min(i,n.boundingBox.width-o)),r=Math.max(0,Math.min(r,n.boundingBox.height-s))),{origin:{x:i,y:r},size:{width:o,height:s}}}}function fj(t,e){return t==="n"||t==="s"?"ns-resize":t==="e"||t==="w"?"ew-resize":e%2==0?{nw:"nwse-resize",ne:"nesw-resize",sw:"nesw-resize",se:"nwse-resize"}[t]:{nw:"nesw-resize",ne:"nwse-resize",sw:"nwse-resize",se:"nesw-resize"}[t]}function pj(t,e,n){const i=-t/2;return n==="center"?i:n==="outside"?i-e:i+e}function mj(t){const{controller:e,resizeUI:n,vertexUI:i,includeVertices:r=!1,handleAttrs:o,vertexAttrs:s}=t,{dragProps:a,createResizeProps:l,createVertexProps:c}=function(f){const{onUpdate:m,enabled:g=!0,...y}=f,x=vt(null),v=vt(m);ge(()=>{v.current=m},[m]),ge(()=>{x.current?x.current.updateConfig(y):x.current=new hj(y,P=>{var D;return(D=v.current)==null?void 0:D.call(v,P)})},[y.element,y.constraints,y.maintainAspectRatio,y.pageRotation,y.scale,y.vertices]);const w=Lt(P=>{var D;g&&(P.preventDefault(),P.stopPropagation(),(D=x.current)==null||D.startDrag(P.clientX,P.clientY),P.currentTarget.setPointerCapture(P.pointerId))},[g]),_=Lt(P=>{var D;P.preventDefault(),P.stopPropagation(),(D=x.current)==null||D.move(P.clientX,P.clientY)},[]),S=Lt(P=>{var D,A,R;P.preventDefault(),P.stopPropagation(),(D=x.current)==null||D.end(),(R=(A=P.currentTarget).releasePointerCapture)==null||R.call(A,P.pointerId)},[]),E=Lt(P=>({onPointerDown:D=>{var A;g&&(D.preventDefault(),D.stopPropagation(),(A=x.current)==null||A.startResize(P,D.clientX,D.clientY),D.currentTarget.setPointerCapture(D.pointerId))},onPointerMove:_,onPointerUp:S,onPointerCancel:S}),[g,_,S]),T=Lt(P=>({onPointerDown:D=>{var A;g&&(D.preventDefault(),D.stopPropagation(),(A=x.current)==null||A.startVertexEdit(P,D.clientX,D.clientY),D.currentTarget.setPointerCapture(D.pointerId))},onPointerMove:_,onPointerUp:S,onPointerCancel:S}),[g,_,S]);return{dragProps:g?{onPointerDown:w,onPointerMove:_,onPointerUp:S,onPointerCancel:S}:{},createResizeProps:E,createVertexProps:T}}(e),u=Rt(()=>function(f,m={}){const{handleSize:g=8,spacing:y=1,offsetMode:x="outside",includeSides:v=!1,zIndex:w=3,rotationAwareCursor:_=!0}=m,S=(f.pageRotation??0)%4,E=T=>({[T]:pj(g,y,x)+"px"});return[["nw",{...E("top"),...E("left")}],["ne",{...E("top"),...E("right")}],["sw",{...E("bottom"),...E("left")}],["se",{...E("bottom"),...E("right")}],...v?[["n",{...E("top"),left:`calc(50% - ${g/2}px)`}],["s",{...E("bottom"),left:`calc(50% - ${g/2}px)`}],["w",{...E("left"),top:`calc(50% - ${g/2}px)`}],["e",{...E("right"),top:`calc(50% - ${g/2}px)`}]]:[]].map(([T,P])=>({handle:T,style:{position:"absolute",width:g+"px",height:g+"px",borderRadius:"50%",zIndex:w,cursor:_?fj(T,S):"default",touchAction:"none",...P},attrs:{"data-epdf-handle":T}}))}(e,n).map(f=>{var m;return{key:(m=f.attrs)==null?void 0:m["data-epdf-handle"],style:f.style,...l(f.handle),...f.attrs??{},...(o==null?void 0:o(f.handle))??{}}}),[e.element.origin.x,e.element.origin.y,e.element.size.width,e.element.size.height,e.scale,e.pageRotation,e.maintainAspectRatio,n==null?void 0:n.handleSize,n==null?void 0:n.spacing,n==null?void 0:n.offsetMode,n==null?void 0:n.includeSides,n==null?void 0:n.zIndex,n==null?void 0:n.rotationAwareCursor,l,o]),d=Rt(()=>r?function(m,g={},y){const{vertexSize:x=12,zIndex:v=4}=g,w=m.element,_=m.scale??1;return(y??m.vertices??[]).map((S,E)=>({handle:"nw",style:{position:"absolute",left:(S.x-w.origin.x)*_-x/2+"px",top:(S.y-w.origin.y)*_-x/2+"px",width:x+"px",height:x+"px",borderRadius:"50%",cursor:"pointer",zIndex:v,touchAction:"none"},attrs:{"data-epdf-vertex":E}}))}(e,i,e.vertices).map((m,g)=>({key:g,style:m.style,...c(g),...m.attrs??{},...(s==null?void 0:s(g))??{}})):[],[r,e.element.origin.x,e.element.origin.y,e.element.size.width,e.element.size.height,e.scale,e.vertices,i==null?void 0:i.vertexSize,i==null?void 0:i.zIndex,c,s]);return{dragProps:a,resize:u,vertices:d}}const qM=()=>oi(jM.id);function gj({documentId:t,pageIndex:e,scale:n,rotation:i,background:r="rgba(33,150,243)",selectionMenu:o}){const{plugin:s}=zr(jM.id),a=oo(t),[l,c]=xe([]),[u,d]=xe(null),[f,m]=xe(null);ge(()=>{if(s&&t)return s.registerSelectionOnPage({documentId:t,pageIndex:e,onRectsChange:({rects:v,boundingRect:w})=>{c(v),d(w)}})},[s,t,e]),ge(()=>{if(s&&t)return s.onMenuPlacement(t,v=>{m(v)})},[s,t]);const g=Rt(()=>n!==void 0?n:(a==null?void 0:a.scale)??1,[n,a==null?void 0:a.scale]),y=Rt(()=>i!==void 0?i:(a==null?void 0:a.rotation)??Dc.Degree0,[i,a==null?void 0:a.rotation]),x=o&&f&&f.pageIndex===e&&f.isVisible;return u?ee(Tt,{children:[ee("div",{style:{position:"absolute",left:u.origin.x*g,top:u.origin.y*g,width:u.size.width*g,height:u.size.height*g,mixBlendMode:"multiply",isolation:"isolate",pointerEvents:"none"},children:l.map((v,w)=>ee("div",{style:{position:"absolute",left:(v.origin.x-u.origin.x)*g,top:(v.origin.y-u.origin.y)*g,width:v.size.width*g,height:v.size.height*g,background:r}},w))}),x&&ee(l0,{rect:{origin:{x:f.rect.origin.x*g,y:f.rect.origin.y*g},size:{width:f.rect.size.width*g,height:f.rect.size.height*g}},rotation:y,children:v=>o({...v,context:{type:"selection",pageIndex:e},selected:!0,placement:f})})]}):null}const vj=kc(uj).addUtility(function(){const{provides:t}=qM();return ge(()=>{if(t)return t.onCopyToClipboard(({text:e})=>{navigator.clipboard.writeText(e)})},[t]),null}).build(),xO="tiling",yj={id:xO,name:"Tiling Plugin",version:"1.0.0",provides:["tiling"],requires:["render","scroll","viewport"],optional:[],defaultConfig:{tileSize:768,overlapPx:2.5,extraRings:0}},wO="TILING/INIT_STATE",_O="TILING/CLEANUP_STATE",bO="TILING/UPDATE_VISIBLE_TILES",SO="TILING/MARK_TILE_STATUS",fI=(t,e)=>({type:bO,payload:{documentId:t,tiles:e}}),pI=(t,e,n,i)=>({type:SO,payload:{documentId:t,pageIndex:e,tileId:n,status:i}}),xj={visibleTiles:{}};function mI({tileSize:t=768,overlapPx:e=2.5,extraRings:n=0,scale:i,rotation:r,page:o,metric:s}){const a=o.size.width*i,l=o.size.height*i,c=t-e,u=function(T,P,D,A){return iL(PM(T,P,(4-D)%4),1/A)}(i0(o.size,r,i),{origin:{x:s.scaled.pageX,y:s.scaled.pageY},size:{width:s.scaled.visibleWidth,height:s.scaled.visibleHeight}},r,1),d=u.origin.x,f=u.origin.y,m=d+u.size.width,g=f+u.size.height,y=Math.floor((a-1)/c),x=Math.floor((l-1)/c),v=Math.max(0,Math.floor(d/c)-n),w=Math.min(y,Math.floor((m-1)/c)+n),_=Math.max(0,Math.floor(f/c)-n),S=Math.min(x,Math.floor((g-1)/c)+n),E=[];for(let T=v;T<=w;T++){const P=T*c,D=Math.min(t,a-P),A=P/i,R=D/i;for(let N=_;N<=S;N++){const O=N*c,H=Math.min(t,l-O),q=O/i,Z=H/i;E.push({id:`p${o.index}-${i}-x${P}-y${O}-w${D}-h${H}`,col:T,row:N,pageRect:{origin:{x:A,y:q},size:{width:R,height:Z}},screenRect:{origin:{x:P,y:O},size:{width:D,height:H}},status:"queued",srcScale:i,isFallback:!1})}}return E}const MO=class extends Ln{constructor(t,e,n){super(t,e),this.tileRendering$=Ht(),this.config=n,this.renderCapability=this.registry.getPlugin("render").provides(),this.scrollCapability=this.registry.getPlugin("scroll").provides(),this.viewportCapability=this.registry.getPlugin("viewport").provides(),this.scrollCapability.onScroll(i=>this.calculateVisibleTiles(i.documentId,i.metrics),{mode:"throttle",wait:50,throttleMode:"trailing"}),this.coreStore.onAction(Id,i=>this.recalculateTiles(i.payload))}onDocumentLoadingStarted(t){this.dispatch(((e,n)=>({type:wO,payload:{documentId:e,state:n}}))(t,xj))}onDocumentClosed(t){this.dispatch((e=>({type:_O,payload:e}))(t))}onScaleChanged(t){this.recalculateTilesForDocument(t)}onRotationChanged(t){this.recalculateTilesForDocument(t)}recalculateTilesForDocument(t){const e=this.scrollCapability.forDocument(t),n=this.viewportCapability.forDocument(t),i=e.getMetrics(n.getMetrics());this.calculateVisibleTiles(t,i)}async recalculateTiles(t){const{documentId:e,pageIndexes:n}=t,i=this.getCoreDocument(e);if(!i||!i.document)return;const r=this.scrollCapability.forDocument(e),o=this.viewportCapability.forDocument(e),s=r.getMetrics(o.getMetrics()),a={},l=Date.now(),c=i.scale,u=i.rotation;for(const d of n){const f=s.pageVisibilityMetrics.find(g=>g.pageNumber===d+1);if(!f)continue;const m=i.document.pages[d];m&&(a[d]=mI({page:m,metric:f,scale:c,rotation:u,tileSize:this.config.tileSize,overlapPx:this.config.overlapPx,extraRings:this.config.extraRings}).map(g=>({...g,id:`${g.id}-r${l}`})))}Object.keys(a).length>0&&this.dispatch(fI(e,a))}async initialize(){}calculateVisibleTiles(t,e){const n=this.getCoreDocument(t);if(!n||!n.document)return;const i=n.scale,r=n.rotation,o={};for(const s of e.pageVisibilityMetrics){const a=s.pageNumber-1,l=n.document.pages[a];if(!l)continue;const c=mI({page:l,metric:s,scale:i,rotation:r,tileSize:this.config.tileSize,overlapPx:this.config.overlapPx,extraRings:this.config.extraRings});o[a]=c}this.dispatch(fI(t,o))}onStoreUpdated(t,e){for(const n in e.documents){const i=t.documents[n],r=e.documents[n];i!==r&&this.tileRendering$.emit({documentId:n,tiles:r.visibleTiles})}}buildCapability(){return{renderTile:this.renderTile.bind(this),forDocument:this.createTilingScope.bind(this),onTileRendering:this.tileRendering$.on}}createTilingScope(t){return{renderTile:e=>this.renderTile(e,t),onTileRendering:e=>this.tileRendering$.on(n=>{n.documentId===t&&e(n.tiles)})}}renderTile(t,e){const n=e??this.getActiveDocumentId();if(!this.renderCapability)throw new Error("Render capability not available.");this.dispatch(pI(n,t.pageIndex,t.tile.id,"rendering"));const i=this.renderCapability.forDocument(n).renderPageRect({pageIndex:t.pageIndex,rect:t.tile.pageRect,options:{scaleFactor:t.tile.srcScale,dpr:t.dpr}});return i.wait(()=>{this.dispatch(pI(n,t.pageIndex,t.tile.id,"ready"))},ii),i}};MO.id="tiling";let CO=MO;const wj={manifest:yj,create:(t,e)=>new CO(xO,t,e),reducer:(t,e)=>((n,i)=>{var r,o;switch(i.type){case wO:{const{documentId:s,state:a}=i.payload;return{...n,documents:{...n.documents,[s]:a}}}case _O:{const s=i.payload,{[s]:a,...l}=n.documents;return{...n,documents:l}}case bO:{const{documentId:s,tiles:a}=i.payload,l=n.documents[s];if(!l)return n;const c={...l.visibleTiles};for(const u in a){const d=Number(u),f=a[d],m=c[d]??[],g=(r=m.find(x=>!x.isFallback))==null?void 0:r.srcScale,y=f.length>0?f[0].srcScale:g;if(g!==void 0&&g!==y){const x=m.filter(w=>!w.isFallback&&w.status==="ready").map(w=>({...w,isFallback:!0})),v=x.length>0?[]:m.filter(w=>w.isFallback);c[d]=[...v,...x,...f]}else{const x=new Set(f.map(_=>_.id)),v=[],w=new Set;for(const _ of m)(_.isFallback||x.has(_.id))&&(v.push(_),w.add(_.id));for(const _ of f)w.has(_.id)||v.push(_);c[d]=v}}return{...n,documents:{...n.documents,[s]:{...l,visibleTiles:c}}}}case SO:{const{documentId:s,pageIndex:a,tileId:l,status:c}=i.payload,u=n.documents[s];if(!u)return n;const d=((o=u.visibleTiles[a])==null?void 0:o.map(y=>y.id===l?{...y,status:c}:y))??[],f=d.filter(y=>!y.isFallback),m=f.length>0&&f.every(y=>y.status==="ready"),g=m?f:d;return{...n,documents:{...n.documents,[s]:{...u,visibleTiles:{...u.visibleTiles,[a]:g}}}}}default:return n}})(t,e),initialState:{documents:{}}},EO=()=>oi(CO.id);function _j({documentId:t,pageIndex:e,tile:n,dpr:i,scale:r}){const{provides:o}=EO(),s=Rt(()=>o==null?void 0:o.forDocument(t),[o,t]),[a,l]=xe(),c=vt(null),u=r/n.srcScale;return ge(()=>{if(n.status==="ready"&&c.current||!s)return;const d=s.renderTile({pageIndex:e,tile:n,dpr:i});return d.wait(f=>{const m=URL.createObjectURL(f);c.current=m,l(m)},ii),()=>{c.current?(URL.revokeObjectURL(c.current),c.current=null):d.abort({code:Xt.Cancelled,message:"canceled render task"})}},[s,e,n.id]),a?ee("img",{src:a,onLoad:()=>{c.current&&(URL.revokeObjectURL(c.current),c.current=null)},style:{position:"absolute",left:n.screenRect.origin.x*u,top:n.screenRect.origin.y*u,width:n.screenRect.size.width*u,height:n.screenRect.size.height*u,display:"block"}}):null}function bj({documentId:t,pageIndex:e,scale:n,style:i,...r}){const{provides:o}=EO(),s=oo(t),[a,l]=xe([]);ge(()=>{if(o)return o.onTileRendering(u=>{u.documentId===t&&l(u.tiles[e]??[])})},[o,t,e]);const c=Rt(()=>n!==void 0?n:(s==null?void 0:s.scale)??1,[n,s==null?void 0:s.scale]);return ee("div",{style:{...i},...r,children:a==null?void 0:a.map(u=>ee(_j,{documentId:t,pageIndex:e,tile:u,dpr:window.devicePixelRatio,scale:c},u.id))})}const TO="thumbnail",Sj={id:TO,name:"Thumbnail Plugin",version:"1.0.0",provides:["thumbnail"],requires:["render"],optional:["scroll"],defaultConfig:{width:150,gap:10,buffer:3,labelHeight:16,autoScroll:!0,scrollBehavior:"smooth",imagePadding:0,paddingY:0}},AO="THUMBNAIL/INIT_STATE",IO="THUMBNAIL/CLEANUP_STATE",PO="THUMBNAIL/SET_WINDOW_STATE",RO="THUMBNAIL/UPDATE_VIEWPORT_METRICS";function gI(t,e){return{type:AO,payload:{documentId:t,state:e}}}const Mj={thumbs:[],window:null,viewportH:0,scrollY:0},vI={documents:{},activeDocumentId:null},DO=class extends Ln{constructor(t,e,n){var i;super(t,e),this.cfg=n,this.scrollCapability=null,this.taskCaches=new Map,this.canAutoScroll=new Map,this.window$=Tr((r,o)=>({documentId:r,window:o})),this.scrollTo$=Tr((r,o)=>({documentId:r,options:o})),this.refreshPages$=Tr((r,o)=>({documentId:r,pages:o}),{cache:!1}),this.renderCapability=this.registry.getPlugin("render").provides(),this.scrollCapability=((i=this.registry.getPlugin("scroll"))==null?void 0:i.provides())??null,this.coreStore.onAction(Id,r=>{const o=r.payload.documentId??this.getActiveDocumentId(),s=r.payload.pageIndexes;this.refreshPages$.emit(o,s);const a=this.taskCaches.get(o);if(a)for(const l of s)a.delete(l)}),this.scrollCapability&&this.cfg.autoScroll!==!1&&(this.scrollCapability.onPageChangeState(({documentId:r,state:o})=>{this.canAutoScroll.set(r,!o.isChanging),o.isChanging||this.scrollToThumb(o.targetPage-1,r)}),this.scrollCapability.onPageChange(({documentId:r,pageNumber:o})=>{this.canAutoScroll.get(r)!==!1&&this.scrollToThumb(o-1,r)}))}onDocumentLoadingStarted(t){this.dispatch(gI(t,{...Mj})),this.taskCaches.set(t,new Map),this.canAutoScroll.set(t,!0),this.logger.debug("ThumbnailPlugin","DocumentOpened",`Initialized thumbnail state for document: ${t}`)}onDocumentLoaded(t){this.calculateWindowState(t)}onDocumentClosed(t){this.dispatch(function(n){return{type:IO,payload:n}}(t));const e=this.taskCaches.get(t);e&&(e.forEach(n=>{n.abort({code:"cancelled",message:"Document closed"})}),e.clear(),this.taskCaches.delete(t)),this.canAutoScroll.delete(t),this.window$.clearScope(t),this.scrollTo$.clearScope(t),this.refreshPages$.clearScope(t),this.logger.debug("ThumbnailPlugin","DocumentClosed",`Cleaned up thumbnail state for document: ${t}`)}onRotationChanged(t){this.calculateWindowState(t)}buildCapability(){return{scrollToThumb:t=>this.scrollToThumb(t),renderThumb:(t,e)=>this.renderThumb(t,e),updateWindow:(t,e)=>this.updateWindow(t,e),getWindow:()=>this.getWindow(),forDocument:t=>this.createThumbnailScope(t),onWindow:this.window$.onGlobal,onScrollTo:this.scrollTo$.onGlobal,onRefreshPages:this.refreshPages$.onGlobal}}createThumbnailScope(t){return{scrollToThumb:e=>this.scrollToThumb(e,t),renderThumb:(e,n)=>this.renderThumb(e,n,t),updateWindow:(e,n)=>this.updateWindow(e,n,t),getWindow:()=>this.getWindow(t),onWindow:this.window$.forScope(t),onScrollTo:this.scrollTo$.forScope(t),onRefreshPages:this.refreshPages$.forScope(t)}}getDocumentState(t){const e=t??this.getActiveDocumentId();return this.state.documents[e]??null}calculateWindowState(t){const e=this.coreState.core.documents[t];if(!(e!=null&&e.document))return;const n=this.cfg.width??120,i=this.cfg.labelHeight??16,r=this.cfg.gap??8,o=this.cfg.imagePadding??0,s=this.cfg.paddingY??0,a=Math.max(1,n-2*o);let l=s;const c=e.document.pages.map(f=>{const m=f.size.height/f.size.width,g=Math.round(a*m),y=o+g+o+i,x={pageIndex:f.index,width:a,height:g,wrapperHeight:y,top:l,labelHeight:i,padding:o};return l+=y+r,x}),u={start:-1,end:-1,items:[],totalHeight:l-r+s},d=this.getDocumentState(t);d&&(this.dispatch(gI(t,{...d,thumbs:c,window:u})),d.viewportH>0?this.updateWindow(d.scrollY,d.viewportH,t):this.window$.emit(t,u))}updateWindow(t,e,n){const i=n??this.getActiveDocumentId(),r=this.getDocumentState(i);if(!r||!r.window||r.thumbs.length===0)return;const o=this.cfg.buffer??3;this.dispatch(function(m,g,y){return{type:RO,payload:{documentId:m,scrollY:g,viewportH:y}}}(i,t,e));let s=0,a=r.thumbs.length-1,l=0;for(;s<=a;){const m=s+a>>1,g=r.thumbs[m];g.top+g.wrapperHeight<t?s=m+1:(l=m,a=m-1)}let c=l;const u=t+e;for(;c+1<r.thumbs.length&&r.thumbs[c].top<u;)c++;c=Math.min(r.thumbs.length-1,c+o);const d=Math.max(0,l-o);if(d===r.window.start&&c===r.window.end)return;const f={start:d,end:c,items:r.thumbs.slice(d,c+1),totalHeight:r.window.totalHeight};this.dispatch(function(m,g){return{type:PO,payload:{documentId:m,window:g}}}(i,f)),this.window$.emit(i,f)}getWindow(t){const e=this.getDocumentState(t);return(e==null?void 0:e.window)??null}scrollToThumb(t,e){const n=e??this.getActiveDocumentId(),i=this.getDocumentState(n);if(!i||!i.window)return;const r=i.thumbs[t];if(!r)return;const o=this.cfg.scrollBehavior??"smooth",s=this.cfg.paddingY??0;if(i.viewportH<=0){const d=Math.max(s,r.top-r.wrapperHeight);return void this.scrollTo$.emit(n,{top:d,behavior:o})}const a=r.top,l=r.top+r.wrapperHeight,c=a<i.scrollY+8+s,u=l>i.scrollY+i.viewportH-8;c?this.scrollTo$.emit(n,{top:Math.max(0,a-s),behavior:o}):u&&this.scrollTo$.emit(n,{top:Math.max(0,l-i.viewportH+s),behavior:o})}renderThumb(t,e,n){const i=n??this.getActiveDocumentId(),r=this.taskCaches.get(i);if(!r)throw new Error(`Task cache not found for document: ${i}`);if(r.has(t))return r.get(t);const o=this.coreState.core.documents[i];if(!(o!=null&&o.document))throw new Error(`Document not found: ${i}`);const s=o.document.pages[t];if(!s)throw new Error(`Page ${t} not found in document: ${i}`);const a=this.cfg.width??120,l=this.cfg.imagePadding??0,c=Math.max(1,a-2*l)/s.size.width,u=this.renderCapability.forDocument(i).renderPageRect({pageIndex:t,rect:{origin:{x:0,y:0},size:s.size},options:{scaleFactor:c,dpr:e}});return r.set(t,u),u.wait(ii,()=>r.delete(t)),u}async initialize(){this.logger.info("ThumbnailPlugin","Initialize","Thumbnail plugin initialized")}async destroy(){this.window$.clear(),this.refreshPages$.clear(),this.scrollTo$.clear(),this.taskCaches.forEach(t=>{t.forEach(e=>{e.abort({code:"cancelled",message:"Plugin destroyed"})}),t.clear()}),this.taskCaches.clear(),this.canAutoScroll.clear(),super.destroy()}};DO.id="thumbnail";let XM=DO;const Cj={manifest:Sj,create:(t,e)=>new XM(TO,t,e),reducer:(t=vI,e)=>{switch(e.type){case AO:{const{documentId:n,state:i}=e.payload;return{...t,documents:{...t.documents,[n]:i},activeDocumentId:t.activeDocumentId??n}}case IO:{const n=e.payload,{[n]:i,...r}=t.documents;return{...t,documents:r,activeDocumentId:t.activeDocumentId===n?null:t.activeDocumentId}}case"THUMBNAIL/SET_ACTIVE_DOCUMENT":return{...t,activeDocumentId:e.payload};case PO:{const{documentId:n,window:i}=e.payload,r=t.documents[n];return r?{...t,documents:{...t.documents,[n]:{...r,window:i}}}:t}case RO:{const{documentId:n,scrollY:i,viewportH:r}=e.payload,o=t.documents[n];return o?{...t,documents:{...t.documents,[n]:{...o,scrollY:i,viewportH:r}}}:t}default:return t}},initialState:vI},kO=()=>zr(XM.id);function Ej({documentId:t,style:e,children:n,...i}){const{plugin:r}=kO(),o=vt(null),[s,a]=xe({window:null,docId:null}),l=s.docId===t?s.window:null;ge(()=>{if(!r)return;const u=r.provides().forDocument(t),d=u.getWindow();d&&a({window:d,docId:t});const f=u.onWindow(m=>{a({window:m,docId:t})});return()=>{f(),a({window:null,docId:null})}},[r,t]),ge(()=>{const u=o.current;if(!u||!r)return;const d=r.provides().forDocument(t),f=()=>d.updateWindow(u.scrollTop,u.clientHeight);return u.addEventListener("scroll",f),()=>u.removeEventListener("scroll",f)},[r,t]),ge(()=>{const u=o.current;if(!u||!r)return;const d=r.provides().forDocument(t),f=new ResizeObserver(()=>{d.updateWindow(u.scrollTop,u.clientHeight)});return f.observe(u),()=>f.disconnect()},[r,t]),ge(()=>{const u=o.current;!u||!r||r.provides().forDocument(t).updateWindow(u.scrollTop,u.clientHeight)},[l,r,t]),ge(()=>{const u=o.current;if(!(!u||!r||!l))return r.provides().forDocument(t).onScrollTo(({top:d,behavior:f})=>{u.scrollTo({top:d,behavior:f})})},[r,t,!!l]);const c=(r==null?void 0:r.cfg.paddingY)??0;return ee("div",{ref:o,style:{overflowY:"auto",position:"relative",paddingTop:c,paddingBottom:c,height:"100%",...e},...i,children:ee("div",{style:{height:(l==null?void 0:l.totalHeight)??0,position:"relative"},children:l==null?void 0:l.items.map(u=>n(u))})})}function Tj({documentId:t,meta:e,style:n,...i}){const{provides:r}=oi(XM.id),{plugin:o}=kO(),[s,a]=xe(),l=vt(null),[c,u]=xe(0);return ge(()=>{if(o)return o.provides().forDocument(t).onRefreshPages(d=>{d.includes(e.pageIndex)&&u(f=>f+1)})},[o,t,e.pageIndex]),ge(()=>{const d=r==null?void 0:r.forDocument(t),f=d==null?void 0:d.renderThumb(e.pageIndex,window.devicePixelRatio);return f==null||f.wait(m=>{const g=URL.createObjectURL(m);l.current=g,a(g)},ii),()=>{l.current?(URL.revokeObjectURL(l.current),l.current=null):f==null||f.abort({code:Xt.Cancelled,message:"canceled render task"})}},[r,t,e.pageIndex,c]),s?ee("img",{src:s,onLoad:()=>{l.current&&(URL.revokeObjectURL(l.current),l.current=null)},style:n,...i}):null}const mn="annotation",Aj={id:mn,name:"Annotation Plugin",version:"1.0.0",provides:["annotation"],requires:["interaction-manager","selection"],optional:["history"],defaultConfig:{autoCommit:!0,annotationAuthor:"Guest",deactivateToolAfterCreate:!1,selectAfterCreate:!0}},NO="ANNOTATION/INIT_STATE",LO="ANNOTATION/CLEANUP_STATE",zO="ANNOTATION/SET_ANNOTATIONS",OO="ANNOTATION/SELECT_ANNOTATION",FO="ANNOTATION/DESELECT_ANNOTATION",UO="ANNOTATION/SET_ACTIVE_TOOL_ID",BO="ANNOTATION/CREATE_ANNOTATION",HO="ANNOTATION/PATCH_ANNOTATION",VO="ANNOTATION/DELETE_ANNOTATION",$O="ANNOTATION/COMMIT",WO="ANNOTATION/PURGE_ANNOTATION",GO="ANNOTATION/ADD_COLOR_PRESET",jO="ANNOTATION/SET_TOOL_DEFAULTS",qO="ANNOTATION/ADD_TOOL",bw=t=>({type:FO,payload:{documentId:t}}),yI=(t,e)=>({type:UO,payload:{documentId:t,toolId:e}}),Sw=(t,e,n)=>({type:BO,payload:{documentId:t,pageIndex:e,annotation:n}}),xI=(t,e,n,i)=>({type:HO,payload:{documentId:t,pageIndex:e,id:n,patch:i}}),wI=(t,e,n)=>({type:VO,payload:{documentId:t,pageIndex:e,id:n}}),_I=(t,e)=>({type:WO,payload:{documentId:t,uid:e}});function XO(t){return t.object.type===_e.INK}function YO(t){return t.object.type===_e.CIRCLE}function ZO(t){return t.object.type===_e.POLYGON}function KO(t){return t.object.type===_e.SQUARE}function QO(t){return t.object.type===_e.LINE}function JO(t){return t.object.type===_e.POLYLINE}function e4(t){return t.object.type===_e.HIGHLIGHT}function t4(t){return t.object.type===_e.UNDERLINE}function n4(t){return t.object.type===_e.STRIKEOUT}function i4(t){return t.object.type===_e.SQUIGGLY}function r4(t){return t.object.type===_e.FREETEXT}function o4(t){return t.object.type===_e.STAMP}function Ij(t){return t.object.type===_e.TEXT}function s4(t){return function(e){return e4(e)||t4(e)||n4(e)||i4(e)}(t)||XO(t)||KO(t)||YO(t)||ZO(t)||QO(t)||JO(t)||r4(t)||o4(t)}const bI=(t,e)=>(t.pages[e]??[]).map(n=>t.byUid[n]),YM=(t,e)=>t.byUid[e]??null,SI=(t,e)=>t.selectedUid&&(t.pages[e]??[]).includes(t.selectedUid)?t.byUid[t.selectedUid]:null;function or(t,e){const n=t.tools.find(i=>i.id===e);return n==null?void 0:n.defaults}const Pj=[{id:"highlight",name:"Highlight",matchScore:t=>t.type===_e.HIGHLIGHT?1:0,interaction:{exclusive:!1,textSelection:!0,isDraggable:!1,isResizable:!1},defaults:{type:_e.HIGHLIGHT,color:"#FFCD45",opacity:1,blendMode:Mt.Multiply}},{id:"underline",name:"Underline",matchScore:t=>t.type===_e.UNDERLINE?1:0,interaction:{exclusive:!1,textSelection:!0,isDraggable:!1,isResizable:!1},defaults:{type:_e.UNDERLINE,color:"#E44234",opacity:1}},{id:"strikeout",name:"Strikeout",matchScore:t=>t.type===_e.STRIKEOUT?1:0,interaction:{exclusive:!1,textSelection:!0},defaults:{type:_e.STRIKEOUT,color:"#E44234",opacity:1}},{id:"squiggly",name:"Squiggly",matchScore:t=>t.type===_e.SQUIGGLY?1:0,interaction:{exclusive:!1,textSelection:!0,isDraggable:!1,isResizable:!1},defaults:{type:_e.SQUIGGLY,color:"#E44234",opacity:1}},{id:"ink",name:"Pen",matchScore:t=>t.type===_e.INK&&t.intent!=="InkHighlight"?5:0,interaction:{exclusive:!1,cursor:"crosshair",isDraggable:!0,isResizable:!0,lockAspectRatio:!1},defaults:{type:_e.INK,color:"#E44234",opacity:1,strokeWidth:6}},{id:"inkHighlighter",name:"Ink Highlighter",matchScore:t=>t.type===_e.INK&&t.intent==="InkHighlight"?10:0,interaction:{exclusive:!1,cursor:"crosshair",isDraggable:!0,isResizable:!0,lockAspectRatio:!1},defaults:{type:_e.INK,intent:"InkHighlight",color:"#FFCD45",opacity:1,strokeWidth:14,blendMode:Mt.Multiply}},{id:"circle",name:"Circle",matchScore:t=>t.type===_e.CIRCLE?1:0,interaction:{exclusive:!1,cursor:"crosshair",isDraggable:!0,isResizable:!0,lockAspectRatio:!1},defaults:{type:_e.CIRCLE,color:"transparent",opacity:1,strokeWidth:6,strokeColor:"#E44234",strokeStyle:xn.SOLID},clickBehavior:{enabled:!0,defaultSize:{width:100,height:100}}},{id:"square",name:"Square",matchScore:t=>t.type===_e.SQUARE?1:0,interaction:{exclusive:!1,cursor:"crosshair",isDraggable:!0,isResizable:!0,lockAspectRatio:!1},defaults:{type:_e.SQUARE,color:"transparent",opacity:1,strokeWidth:6,strokeColor:"#E44234",strokeStyle:xn.SOLID},clickBehavior:{enabled:!0,defaultSize:{width:100,height:100}}},{id:"line",name:"Line",matchScore:t=>t.type===_e.LINE&&t.intent!=="LineArrow"?5:0,interaction:{exclusive:!1,cursor:"crosshair",isDraggable:!0,isResizable:!1,lockAspectRatio:!1},defaults:{type:_e.LINE,color:"transparent",opacity:1,strokeWidth:6,strokeColor:"#E44234"},clickBehavior:{enabled:!0,defaultLength:100,defaultAngle:0}},{id:"lineArrow",name:"Arrow",matchScore:t=>t.type===_e.LINE&&t.intent==="LineArrow"?10:0,interaction:{exclusive:!1,cursor:"crosshair",isDraggable:!0,isResizable:!1,lockAspectRatio:!1},defaults:{type:_e.LINE,intent:"LineArrow",color:"transparent",opacity:1,strokeWidth:6,strokeColor:"#E44234",lineEndings:{start:Pt.None,end:Pt.OpenArrow}},clickBehavior:{enabled:!0,defaultLength:100,defaultAngle:0}},{id:"polyline",name:"Polyline",matchScore:t=>t.type===_e.POLYLINE?1:0,interaction:{exclusive:!1,cursor:"crosshair",isDraggable:!0,isResizable:!1,lockAspectRatio:!1},defaults:{type:_e.POLYLINE,color:"transparent",opacity:1,strokeWidth:6,strokeColor:"#E44234"}},{id:"polygon",name:"Polygon",matchScore:t=>t.type===_e.POLYGON?1:0,interaction:{exclusive:!1,cursor:"crosshair",isDraggable:!0,isResizable:!1,lockAspectRatio:!1},defaults:{type:_e.POLYGON,color:"transparent",opacity:1,strokeWidth:6,strokeColor:"#E44234"}},{id:"freeText",name:"Free Text",matchScore:t=>t.type===_e.FREETEXT?1:0,interaction:{exclusive:!1,cursor:"crosshair",isDraggable:!0,isResizable:!0,lockAspectRatio:!1},defaults:{type:_e.FREETEXT,contents:"Insert text",fontSize:14,fontColor:"#E44234",fontFamily:vi.Helvetica,textAlign:Sr.Left,verticalAlign:yo.Top,backgroundColor:"transparent",opacity:1},clickBehavior:{enabled:!0,defaultSize:{width:100,height:20},defaultContent:"Insert text"}},{id:"stamp",name:"Image",matchScore:t=>t.type===_e.STAMP?1:0,interaction:{exclusive:!1,cursor:"copy",isDraggable:!0,isResizable:!0,lockAspectRatio:!0},defaults:{type:_e.STAMP}}],Rj=["#E44234","#FF8D00","#FFCD45","#5CC96E","#25D2D1","#597CE2","#C544CE","#7D2E25","#000000","#FFFFFF"],Dj=(t,e,n)=>{const i=t.byUid[e];return i?{...t,byUid:{...t.byUid,[e]:{...i,commitState:i.commitState==="synced"?"dirty":i.commitState,object:{...i.object,...n}}},hasPendingChanges:!0}:t};function To(t){let e=t;return[()=>e,n=>{e=n}]}const kj={annotationType:_e.INK,create(t){const{onCommit:e,onPreview:n,getTool:i,pageSize:r}=t,[o,s]=To([]),[a,l]=To(!1),c={current:null},u=m=>({x:fn(m.x,0,r.width),y:fn(m.y,0,r.height)}),d=()=>{const m=i();return m?{...m.defaults,strokeWidth:m.defaults.strokeWidth??1,color:m.defaults.color??"#000000",opacity:m.defaults.opacity??1,flags:m.defaults.flags??["print"]}:null},f=()=>{const m=o();if(m.length===0||m[0].points.length===0)return null;const g=d();if(!g)return null;const y=m.flatMap(v=>v.points),x=ll(al(y),g.strokeWidth/2);return{type:_e.INK,bounds:x,data:{...g,rect:x,inkList:m}}};return{onPointerDown:(m,g)=>{var y;const x=u(m);l(!0),c.current&&clearTimeout(c.current);const v=[...o(),{points:[x]}];s(v),n(f()),(y=g.setPointerCapture)==null||y.call(g)},onPointerMove:m=>{if(!a())return;const g=o();if(g.length===0)return;const y=u(m);g[g.length-1].points.push(y),s(g),n(f())},onPointerUp:(m,g)=>{var y;l(!1),(y=g.releasePointerCapture)==null||y.call(g),c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{const x=o();if(x.length>0&&x[0].points.length>1){const v=d();if(!v)return;const w=x.flatMap(S=>S.points),_=ll(al(w),v.strokeWidth/2);e({...v,inkList:x,rect:_,type:_e.INK,pageIndex:t.pageIndex,id:ni(),created:new Date})}s([]),n(null)},800)},onPointerCancel:(m,g)=>{var y;s([]),l(!1),n(null),c.current&&clearTimeout(c.current),(y=g.releasePointerCapture)==null||y.call(g)}}}};function Wy({threshold:t=5,getTool:e,onClickDetected:n}){const[i,r]=To(null),[o,s]=To(!1);return{onStart:a=>{r(a),s(!1)},onMove:a=>{const l=i();!l||o()||Math.sqrt(Math.pow(a.x-l.x,2)+Math.pow(a.y-l.y,2))>t&&s(!0)},onEnd:a=>{var l;if(i()&&!o()){const c=e();c&&"clickBehavior"in c&&((l=c.clickBehavior)!=null&&l.enabled)&&n(a,c)}r(null),s(!1)},hasMoved:o,reset:()=>{r(null),s(!1)}}}const Nj={annotationType:_e.FREETEXT,create(t){const{onCommit:e,onPreview:n,getTool:i,pageSize:r,pageIndex:o}=t,[s,a]=To(null),l=f=>({x:fn(f.x,0,r.width),y:fn(f.y,0,r.height)}),c=()=>{const f=i();return f?{...f.defaults,fontColor:f.defaults.fontColor??"#000000",opacity:f.defaults.opacity??1,fontSize:f.defaults.fontSize??12,fontFamily:f.defaults.fontFamily??vi.Helvetica,backgroundColor:f.defaults.backgroundColor??"transparent",textAlign:f.defaults.textAlign??Sr.Left,verticalAlign:f.defaults.verticalAlign??yo.Top,contents:f.defaults.contents??"Insert text here",flags:f.defaults.flags??["print"]}:null},u=Wy({threshold:5,getTool:i,onClickDetected:(f,m)=>{const g=c();if(!g)return;const y=m.clickBehavior;if(!(y!=null&&y.enabled))return;const{width:x,height:v}=y.defaultSize,w=x/2,_=v/2,S={origin:{x:fn(f.x-w,0,r.width-x),y:fn(f.y-_,0,r.height-v)},size:{width:x,height:v}},E=y.defaultContent??g.contents,T={...g,contents:E,type:_e.FREETEXT,rect:S,pageIndex:o,id:ni(),created:new Date};e(T)}}),d=f=>{const m=s();if(!m)return null;const g=c();if(!g)return null;const y={origin:{x:Math.min(m.x,f.x),y:Math.min(m.y,f.y)},size:{width:Math.abs(m.x-f.x),height:Math.abs(m.y-f.y)}};return{type:_e.FREETEXT,bounds:y,data:{...g,rect:y}}};return{onPointerDown:(f,m)=>{var g;const y=l(f);a(y),u.onStart(y),n(d(y)),(g=m.setPointerCapture)==null||g.call(m)},onPointerMove:f=>{const m=l(f);u.onMove(m),s()&&u.hasMoved()&&n(d(m))},onPointerUp:(f,m)=>{var g;const y=s();if(!y)return;const x=c();if(!x)return;const v=l(f);if(u.hasMoved()){const w={origin:{x:Math.min(y.x,v.x),y:Math.min(y.y,v.y)},size:{width:Math.abs(y.x-v.x),height:Math.abs(y.y-v.y)}},_={...x,type:_e.FREETEXT,rect:w,pageIndex:t.pageIndex,id:ni(),created:new Date};e(_)}else u.onEnd(v);a(null),n(null),u.reset(),(g=m.releasePointerCapture)==null||g.call(m)},onPointerLeave:(f,m)=>{var g;a(null),n(null),u.reset(),(g=m.releasePointerCapture)==null||g.call(m)},onPointerCancel:(f,m)=>{var g;a(null),n(null),u.reset(),(g=m.releasePointerCapture)==null||g.call(m)}}}};function a4(t){const e=n=>{const i=9*n,r=Math.PI/6;return{x:-i*Math.cos(r),y:i*Math.sin(r)}};return{getSvgPath:n=>{const{x:i,y:r}=e(n);return t?`M 0 0 L ${i} ${r} L ${i} ${-r} Z`:`M ${i} ${r} L 0 0 L ${i} ${-r}`},getLocalPoints:n=>{const{x:i,y:r}=e(n);return[{x:0,y:0},{x:i,y:r},{x:i,y:-r}]},getRotation:n=>n,filled:t}}function MI(t,e){const n=i=>i*t/2;return{getSvgPath:i=>{const r=n(i);return`M ${-r} 0 L ${r} 0`},getLocalPoints:i=>{const r=n(i);return[{x:-r,y:0},{x:r,y:0}]},getRotation:e,filled:!1}}const CI=a4(!1),EI=a4(!0),Vb={[Pt.OpenArrow]:CI,[Pt.ClosedArrow]:EI,[Pt.ROpenArrow]:{...CI,getRotation:t=>t+Math.PI},[Pt.RClosedArrow]:{...EI,getRotation:t=>t+Math.PI},[Pt.Circle]:{getSvgPath:t=>{const e=5*t/2;return`M ${e} 0 A ${e} ${e} 0 1 1 ${-e} 0 A ${e} ${e} 0 1 1 ${e} 0`},getLocalPoints:t=>{const e=5*t/2;return[{x:-e,y:-e},{x:e,y:e}]},getRotation:()=>0,filled:!0},[Pt.Square]:{getSvgPath:t=>{const e=6*t/2;return`M ${-e} ${-e} L ${e} ${-e} L ${e} ${e} L ${-e} ${e} Z`},getLocalPoints:t=>{const e=6*t/2;return[{x:-e,y:-e},{x:e,y:-e},{x:e,y:e},{x:-e,y:e}]},getRotation:t=>t,filled:!0},[Pt.Diamond]:{getSvgPath:t=>{const e=6*t/2;return`M 0 ${-e} L ${e} 0 L 0 ${e} L ${-e} 0 Z`},getLocalPoints:t=>{const e=6*t/2;return[{x:0,y:-e},{x:e,y:0},{x:0,y:e},{x:-e,y:0}]},getRotation:t=>t,filled:!0},[Pt.Butt]:MI(6,t=>t+Math.PI/2),[Pt.Slash]:MI(18,t=>t+Math.PI/1.5)};function ws(t,e,n){if(!t||t.length===0)return{origin:{x:0,y:0},size:{width:0,height:0}};const i=[...t],r=(s,a)=>Math.atan2(a.y-s.y,a.x-s.x),o=(s,a,l)=>{if(!s)return;const c=Vb[s];if(!c)return;const u=c.getLocalPoints(e),d=c.getRotation(l),f=u.map(m=>function(g,y,x){const v=Math.cos(y),w=Math.sin(y),_=g.x*v-g.y*w,S=g.x*w+g.y*v;return{x:_+x.x,y:S+x.y}}(m,d,a));i.push(...f)};if(t.length>=2){const s=r(t[1],t[0]);o(n==null?void 0:n.start,t[0],s);const a=t.length-1,l=r(t[a-1],t[a]);o(n==null?void 0:n.end,t[a],l)}if(i.length<=1){const s=t[0]||{x:0,y:0},a=e;return{origin:{x:s.x-a,y:s.y-a},size:{width:2*a,height:2*a}}}return ll(al(i),e/2+1.2*e)}class ZM{constructor(){this.patches=new Map}register(e,n){this.patches.set(e,n)}transform(e,n){const i=this.patches.get(e.type);return i?i(e,n):n.changes}}const Lj=new ZM,c0=Object.freeze(Object.defineProperty({__proto__:null,LINE_ENDING_HANDLERS:Vb,PatchRegistry:ZM,createEnding:function(t,e,n,i,r){if(!t)return null;const o=Vb[t];if(!o)return null;const s=o.getRotation(n);return{d:o.getSvgPath(e),transform:`translate(${i} ${r}) rotate(${(a=>180*a/Math.PI)(s)})`,filled:o.filled}},lineRectWithEndings:ws,patchRegistry:Lj},Symbol.toStringTag,{value:"Module"})),zj={annotationType:_e.LINE,create(t){const{pageIndex:e,onCommit:n,onPreview:i,getTool:r,pageSize:o}=t,[s,a]=To(null),l=f=>({x:fn(f.x,0,o.width),y:fn(f.y,0,o.height)}),c=()=>{const f=r();return f?{...f.defaults,strokeWidth:f.defaults.strokeWidth??1,lineEndings:f.defaults.lineEndings??{start:Pt.None,end:Pt.None},color:f.defaults.color??"#000000",opacity:f.defaults.opacity??1,strokeStyle:f.defaults.strokeStyle??xn.SOLID,strokeDashArray:f.defaults.strokeDashArray??[],strokeColor:f.defaults.strokeColor??"#000000",flags:f.defaults.flags??["print"]}:null},u=Wy({threshold:5,getTool:r,onClickDetected:(f,m)=>{const g=c();if(!g)return;const y=m.clickBehavior;if(!(y!=null&&y.enabled))return;const x=y.defaultAngle??0,v=y.defaultLength/2,w=f.x-v*Math.cos(x),_=f.y-v*Math.sin(x),S=f.x+v*Math.cos(x),E=f.y+v*Math.sin(x),T=l({x:w,y:_}),P=l({x:S,y:E}),D=ws([T,P],g.strokeWidth,g.lineEndings);n({...g,rect:D,linePoints:{start:T,end:P},pageIndex:e,id:ni(),created:new Date,type:_e.LINE})}}),d=f=>{const m=s();if(!m)return null;const g=c();if(!g)return null;const y=ws([m,f],g.strokeWidth,g.lineEndings);return{type:_e.LINE,bounds:y,data:{...g,rect:y,linePoints:{start:m,end:f}}}};return{onPointerDown:(f,m)=>{var g;const y=l(f);a(y),u.onStart(y),i(d(y)),(g=m.setPointerCapture)==null||g.call(m)},onPointerMove:f=>{const m=l(f);u.onMove(m),s()&&u.hasMoved()&&i(d(m))},onPointerUp:(f,m)=>{var g;const y=s();if(!y)return;const x=l(f);if(u.hasMoved()){const v=c();if(!v)return;if(Math.abs(x.x-y.x)>2||Math.abs(x.y-y.y)>2){const w=ws([y,x],v.strokeWidth,v.lineEndings);n({...v,rect:w,linePoints:{start:y,end:x},pageIndex:e,id:ni(),flags:["print"],created:new Date,type:_e.LINE})}}else u.onEnd(x);a(null),i(null),u.reset(),(g=m.releasePointerCapture)==null||g.call(m)},onPointerLeave:(f,m)=>{var g;a(null),i(null),u.reset(),(g=m.releasePointerCapture)==null||g.call(m)},onPointerCancel:(f,m)=>{var g;a(null),i(null),u.reset(),(g=m.releasePointerCapture)==null||g.call(m)}}}},Oj={annotationType:_e.POLYLINE,create(t){const{onCommit:e,onPreview:n,getTool:i,pageSize:r}=t,[o,s]=To([]),[a,l]=To(null),c=f=>({x:fn(f.x,0,r.width),y:fn(f.y,0,r.height)}),u=()=>{const f=i();return f?{...f.defaults,strokeWidth:f.defaults.strokeWidth??1,lineEndings:f.defaults.lineEndings??{start:Pt.None,end:Pt.None},color:f.defaults.color??"#000000",opacity:f.defaults.opacity??1,strokeColor:f.defaults.strokeColor??"#000000",strokeStyle:f.defaults.strokeStyle??xn.SOLID,strokeDashArray:f.defaults.strokeDashArray??[],flags:f.defaults.flags??["print"]}:null},d=()=>{const f=o(),m=a();if(f.length===0||!m)return null;const g=u();if(!g)return null;const y=[...f,m],x=ws(y,g.strokeWidth,g.lineEndings);return{type:_e.POLYLINE,bounds:x,data:{...g,rect:x,vertices:y,currentVertex:m}}};return{onClick:f=>{const m=c(f),g=o(),y=g[g.length-1];y&&Math.abs(y.x-m.x)<1&&Math.abs(y.y-m.y)<1||(s([...g,m]),l(m),n(d()))},onDoubleClick:()=>{(()=>{const f=o();if(f.length<2)return;const m=u();if(!m)return;const g=ws(f,m.strokeWidth,m.lineEndings),y={...m,vertices:f,rect:g,type:_e.POLYLINE,pageIndex:t.pageIndex,id:ni(),created:new Date};e(y),s([]),l(null),n(null)})()},onPointerMove:f=>{if(o().length>0){const m=c(f);l(m),n(d())}},onPointerCancel:()=>{s([]),l(null),n(null)}}}},Fj={annotationType:_e.POLYGON,create(t){const{onCommit:e,onPreview:n,getTool:i,scale:r,pageSize:o}=t,[s,a]=To([]),[l,c]=To(null),u=g=>({x:fn(g.x,0,o.width),y:fn(g.y,0,o.height)}),d=()=>{const g=i();return g?{...g.defaults,color:g.defaults.color??"#000000",opacity:g.defaults.opacity??1,strokeWidth:g.defaults.strokeWidth??1,strokeColor:g.defaults.strokeColor??"#000000",strokeStyle:g.defaults.strokeStyle??xn.SOLID,strokeDashArray:g.defaults.strokeDashArray??[],flags:g.defaults.flags??["print"]}:null},f=()=>{const g=s();if(g.length<3)return;const y=d();if(!y)return;const x=ll(al(g),y.strokeWidth/2),v={...y,vertices:g,rect:x,type:_e.POLYGON,pageIndex:t.pageIndex,id:ni(),created:new Date};e(v),a([]),c(null),n(null)},m=()=>{const g=s(),y=l();if(g.length===0||!y)return null;const x=d();if(!x)return null;const v=ll(al([...g,y]),x.strokeWidth/2);return{type:_e.POLYGON,bounds:v,data:{...x,rect:v,vertices:g,currentVertex:y}}};return{onClick:g=>{const y=u(g);if((w=>{const _=s();if(_.length<2)return!1;const S=14/r/2,E=_[0];return w.x>=E.x-S&&w.x<=E.x+S&&w.y>=E.y-S&&w.y<=E.y+S})(y)&&s().length>=3)return void f();const x=s(),v=x[x.length-1];v&&Math.abs(v.x-y.x)<1&&Math.abs(v.y-y.y)<1||(a([...x,y]),c(y),n(m()))},onDoubleClick:g=>{f()},onPointerMove:g=>{if(s().length>0){const y=u(g);c(y),n(m())}},onPointerCancel:g=>{a([]),c(null),n(null)}}}},Uj={annotationType:_e.SQUARE,create(t){const{pageIndex:e,onCommit:n,onPreview:i,getTool:r,pageSize:o}=t,[s,a]=To(null),l=f=>({x:fn(f.x,0,o.width),y:fn(f.y,0,o.height)}),c=()=>{const f=r();return f?{...f.defaults,flags:f.defaults.flags??["print"],strokeWidth:f.defaults.strokeWidth??2,strokeColor:f.defaults.strokeColor??"#000000",strokeStyle:f.defaults.strokeStyle??xn.SOLID,strokeDashArray:f.defaults.strokeDashArray??[],color:f.defaults.color??"#000000",opacity:f.defaults.opacity??1}:null},u=Wy({threshold:5,getTool:r,onClickDetected:(f,m)=>{const g=c();if(!g)return;const y=m.clickBehavior;if(!(y!=null&&y.enabled))return;const{width:x,height:v}=y.defaultSize,w=x/2,_=v/2,S=fn(f.x-w,0,o.width-x),E=fn(f.y-_,0,o.height-v),T=g.strokeWidth,P=T/2,D={origin:{x:S-P,y:E-P},size:{width:x+T,height:v+T}},A={...g,type:_e.SQUARE,created:new Date,id:ni(),pageIndex:e,rect:D};n(A)}}),d=f=>{const m=s();if(!m)return null;const g=Math.min(m.x,f.x),y=Math.min(m.y,f.y),x=Math.abs(m.x-f.x),v=Math.abs(m.y-f.y),w=c();if(!w)return null;const _=w.strokeWidth,S=_/2,E={origin:{x:g-S,y:y-S},size:{width:x+_,height:v+_}};return{type:_e.SQUARE,bounds:E,data:{rect:E,...w}}};return{onPointerDown:(f,m)=>{var g;const y=l(f);a(y),u.onStart(y),i(d(y)),(g=m.setPointerCapture)==null||g.call(m)},onPointerMove:f=>{const m=l(f);u.onMove(m),s()&&u.hasMoved()&&i(d(m))},onPointerUp:(f,m)=>{var g;if(!s()||!c())return;const y=l(f);if(u.hasMoved()){const x=c();if(!x)return;const v=d(y);if(v){const w={...x,type:_e.SQUARE,created:new Date,id:ni(),pageIndex:e,rect:v.data.rect};n(w)}}else u.onEnd(y);a(null),i(null),u.reset(),(g=m.releasePointerCapture)==null||g.call(m)},onPointerLeave:(f,m)=>{var g;a(null),i(null),u.reset(),(g=m.releasePointerCapture)==null||g.call(m)},onPointerCancel:(f,m)=>{var g;a(null),i(null),u.reset(),(g=m.releasePointerCapture)==null||g.call(m)}}}},Bj={annotationType:_e.STAMP,create(t){const{services:e,onCommit:n,getTool:i,pageSize:r}=t;return{onPointerDown:o=>{const s=i();if(!s)return;const{imageSrc:a,imageSize:l}=s.defaults,c=(u,d,f)=>{const m=o.x-d/2,g=o.y-f/2,y={origin:{x:fn(m,0,r.width-d),y:fn(g,0,r.height-f)},size:{width:d,height:f}},x={...s.defaults,rect:y,type:_e.STAMP,icon:s.defaults.icon??RM.Draft,subject:s.defaults.subject??"Stamp",flags:s.defaults.flags??["print"],pageIndex:t.pageIndex,id:ni(),created:new Date};n(x,{imageData:u})};a?e.processImage({source:a,maxWidth:r.width,maxHeight:r.height,onComplete:u=>c(u.imageData,(l==null?void 0:l.width)??u.width,(l==null?void 0:l.height)??u.height)}):e.requestFile({accept:"image/png,image/jpeg",onFile:u=>{e.processImage({source:u,maxWidth:r.width,maxHeight:r.height,onComplete:d=>c(d.imageData,d.width,d.height)})}})}}}},Hj={annotationType:_e.CIRCLE,create(t){const{pageIndex:e,onCommit:n,onPreview:i,getTool:r,pageSize:o}=t,[s,a]=To(null),l=f=>({x:fn(f.x,0,o.width),y:fn(f.y,0,o.height)}),c=()=>{const f=r();return f?{...f.defaults,strokeWidth:f.defaults.strokeWidth??2,strokeColor:f.defaults.strokeColor??"#000000",strokeStyle:f.defaults.strokeStyle??xn.SOLID,strokeDashArray:f.defaults.strokeDashArray??[],color:f.defaults.color??"#000000",opacity:f.defaults.opacity??1,flags:f.defaults.flags??["print"]}:null},u=Wy({threshold:5,getTool:r,onClickDetected:(f,m)=>{const g=c();if(!g)return;const y=m.clickBehavior;if(!(y!=null&&y.enabled))return;const{width:x,height:v}=y.defaultSize,w=x/2,_=v/2,S=fn(f.x-w,0,o.width-x),E=fn(f.y-_,0,o.height-v),T=g.strokeWidth,P=T/2,D={origin:{x:S-P,y:E-P},size:{width:x+T,height:v+T}},A={...g,type:_e.CIRCLE,created:new Date,id:ni(),pageIndex:e,rect:D};n(A)}}),d=f=>{const m=s();if(!m)return null;const g=Math.min(m.x,f.x),y=Math.min(m.y,f.y),x=Math.abs(m.x-f.x),v=Math.abs(m.y-f.y),w=c();if(!w)return null;const _=w.strokeWidth,S=_/2,E={origin:{x:g-S,y:y-S},size:{width:x+_,height:v+_}};return{type:_e.CIRCLE,bounds:E,data:{rect:E,...w}}};return{onPointerDown:(f,m)=>{var g;const y=l(f);a(y),u.onStart(y),i(d(y)),(g=m.setPointerCapture)==null||g.call(m)},onPointerMove:f=>{const m=l(f);u.onMove(m),s()&&u.hasMoved()&&i(d(m))},onPointerUp:(f,m)=>{var g;if(!s()||!c())return;const y=l(f);if(u.hasMoved()){const x=c();if(!x)return;const v=d(y);if(v){const w={...x,type:_e.CIRCLE,flags:["print"],created:new Date,id:ni(),pageIndex:e,rect:v.data.rect};n(w)}}else u.onEnd(y);a(null),i(null),u.reset(),(g=m.releasePointerCapture)==null||g.call(m)},onPointerLeave:(f,m)=>{var g;a(null),i(null),u.reset(),(g=m.releasePointerCapture)==null||g.call(m)},onPointerCancel:(f,m)=>{var g;a(null),i(null),u.reset(),(g=m.releasePointerCapture)==null||g.call(m)}}}},Vj=(t,e)=>{var n;switch(e.type){case"vertex-edit":default:return e.changes;case"move":if(e.changes.rect){const i=e.changes.rect.origin.x-t.rect.origin.x,r=e.changes.rect.origin.y-t.rect.origin.y,o=t.inkList.map(s=>({points:s.points.map(a=>({x:a.x+i,y:a.y+r}))}));return{rect:e.changes.rect,inkList:o}}return e.changes;case"resize":if(e.changes.rect){const i=t.rect,r=e.changes.rect;let o=r.size.width/i.size.width,s=r.size.height/i.size.height;const a=10;if((r.size.width<a||r.size.height<a)&&(o=Math.max(o,a/i.size.width),s=Math.max(s,a/i.size.height),e.changes.rect={origin:r.origin,size:{width:i.size.width*o,height:i.size.height*s}}),(n=e.metadata)==null?void 0:n.maintainAspectRatio){const x=Math.min(o,s);o=x,s=x,e.changes.rect.size={width:i.size.width*x,height:i.size.height*x}}const l=(x,v)=>({origin:{x:x.origin.x+v,y:x.origin.y+v},size:{width:Math.max(1,x.size.width-2*v),height:Math.max(1,x.size.height-2*v)}}),c=Math.min(e.changes.rect.size.width/i.size.width,e.changes.rect.size.height/i.size.height),u=Math.max(1,Math.round(t.strokeWidth*c)),d=l(i,t.strokeWidth/2),f=l(e.changes.rect,u/2),m=f.size.width/Math.max(d.size.width,1e-6),g=f.size.height/Math.max(d.size.height,1e-6),y=t.inkList.map(x=>({points:x.points.map(v=>({x:f.origin.x+(v.x-d.origin.x)*m,y:f.origin.y+(v.y-d.origin.y)*g}))}));return{rect:e.changes.rect,inkList:y,strokeWidth:u}}return e.changes;case"property-update":if(e.changes.strokeWidth!==void 0){const i={...t,...e.changes},r=i.inkList.flatMap(s=>s.points),o=ll(al(r),i.strokeWidth/2);return{...e.changes,rect:o}}return e.changes}},$j=(t,e)=>{var n;switch(e.type){case"vertex-edit":if(e.changes.linePoints){const{start:i,end:r}=e.changes.linePoints;return{rect:ws([i,r],t.strokeWidth,t.lineEndings),linePoints:{start:i,end:r}}}return e.changes;case"move":if(e.changes.rect){const i=e.changes.rect.origin.x-t.rect.origin.x,r=e.changes.rect.origin.y-t.rect.origin.y;return{rect:e.changes.rect,linePoints:{start:{x:t.linePoints.start.x+i,y:t.linePoints.start.y+r},end:{x:t.linePoints.end.x+i,y:t.linePoints.end.y+r}}}}return e.changes;case"resize":if(e.changes.rect){const i=t.rect,r=e.changes.rect;let o=r.size.width/i.size.width,s=r.size.height/i.size.height;const a=10;if((r.size.width<a||r.size.height<a)&&(o=Math.max(o,a/i.size.width),s=Math.max(s,a/i.size.height),e.changes.rect={origin:r.origin,size:{width:i.size.width*o,height:i.size.height*s}}),(n=e.metadata)==null?void 0:n.maintainAspectRatio){const c=Math.min(o,s);o=c,s=c,e.changes.rect.size={width:i.size.width*c,height:i.size.height*c}}const l={start:{x:e.changes.rect.origin.x+(t.linePoints.start.x-i.origin.x)*o,y:e.changes.rect.origin.y+(t.linePoints.start.y-i.origin.y)*s},end:{x:e.changes.rect.origin.x+(t.linePoints.end.x-i.origin.x)*o,y:e.changes.rect.origin.y+(t.linePoints.end.y-i.origin.y)*s}};return{rect:e.changes.rect,linePoints:l}}return e.changes;case"property-update":if(e.changes.strokeWidth||e.changes.lineEndings){const i={...t,...e.changes},r=ws([i.linePoints.start,i.linePoints.end],i.strokeWidth,i.lineEndings);return{...e.changes,rect:r}}return e.changes;default:return e.changes}},Wj=(t,e)=>{var n;switch(e.type){case"vertex-edit":return e.changes.vertices&&e.changes.vertices.length?{rect:ws(e.changes.vertices,t.strokeWidth,t.lineEndings),vertices:e.changes.vertices}:e.changes;case"move":if(e.changes.rect){const i=e.changes.rect.origin.x-t.rect.origin.x,r=e.changes.rect.origin.y-t.rect.origin.y,o=t.vertices.map(s=>({x:s.x+i,y:s.y+r}));return{rect:e.changes.rect,vertices:o}}return e.changes;case"resize":if(e.changes.rect){const i=t.rect,r=e.changes.rect;let o=r.size.width/i.size.width,s=r.size.height/i.size.height;const a=10;if((r.size.width<a||r.size.height<a)&&(o=Math.max(o,a/i.size.width),s=Math.max(s,a/i.size.height),e.changes.rect={origin:r.origin,size:{width:i.size.width*o,height:i.size.height*s}}),(n=e.metadata)==null?void 0:n.maintainAspectRatio){const c=Math.min(o,s);o=c,s=c,e.changes.rect.size={width:i.size.width*c,height:i.size.height*c}}const l=t.vertices.map(c=>({x:e.changes.rect.origin.x+(c.x-i.origin.x)*o,y:e.changes.rect.origin.y+(c.y-i.origin.y)*s}));return{rect:e.changes.rect,vertices:l}}return e.changes;case"property-update":if(e.changes.strokeWidth!==void 0||e.changes.lineEndings!==void 0){const i={...t,...e.changes},r=ws(i.vertices,i.strokeWidth,i.lineEndings);return{...e.changes,rect:r}}return e.changes;default:return e.changes}},Gj=(t,e)=>{var n;switch(e.type){case"vertex-edit":if(e.changes.vertices&&e.changes.vertices.length){const i=t.strokeWidth/2;return{rect:ll(al(e.changes.vertices),i),vertices:e.changes.vertices}}return e.changes;case"move":if(e.changes.rect){const i=e.changes.rect.origin.x-t.rect.origin.x,r=e.changes.rect.origin.y-t.rect.origin.y,o=t.vertices.map(s=>({x:s.x+i,y:s.y+r}));return{rect:e.changes.rect,vertices:o}}return e.changes;case"resize":if(e.changes.rect){const i=t.rect,r=e.changes.rect;let o=r.size.width/i.size.width,s=r.size.height/i.size.height;const a=10;if((r.size.width<a||r.size.height<a)&&(o=Math.max(o,a/i.size.width),s=Math.max(s,a/i.size.height),e.changes.rect={origin:r.origin,size:{width:i.size.width*o,height:i.size.height*s}}),(n=e.metadata)==null?void 0:n.maintainAspectRatio){const c=Math.min(o,s);o=c,s=c,e.changes.rect.size={width:i.size.width*c,height:i.size.height*c}}const l=t.vertices.map(c=>({x:e.changes.rect.origin.x+(c.x-i.origin.x)*o,y:e.changes.rect.origin.y+(c.y-i.origin.y)*s}));return{rect:e.changes.rect,vertices:l}}return e.changes;case"property-update":if(e.changes.strokeWidth!==void 0){const i={...t,...e.changes},r=i.strokeWidth/2,o=ll(al(i.vertices),r);return{...e.changes,rect:o}}return e.changes;default:return e.changes}},l4=class extends Ln{constructor(t,e,n){var i,r,o;super(t,e),this.ANNOTATION_HISTORY_TOPIC="annotations",this.state$=Ht(),this.pendingContexts=new Map,this.isInitialLoadComplete=new Map,this.importQueue=new Map,this.handlerFactories=new Map,this.activeTool$=Ht(),this.events$=Ht(),this.toolsChange$=Ht(),this.patchRegistry=new ZM,this.config=n,this.selection=((i=e.getPlugin("selection"))==null?void 0:i.provides())??null,this.history=((r=e.getPlugin("history"))==null?void 0:r.provides())??null,this.interactionManager=((o=e.getPlugin("interaction-manager"))==null?void 0:o.provides())??null,this.registerHandlerFactories(),this.registerBuiltInPatches()}onDocumentLoadingStarted(t){this.dispatch(function(e,n){return{type:NO,payload:{documentId:e,state:n}}}(t,{pages:{},byUid:{},selectedUid:null,activeToolId:null,hasPendingChanges:!1})),this.pendingContexts.set(t,new Map),this.isInitialLoadComplete.set(t,!1),this.importQueue.set(t,[]),this.logger.debug("AnnotationPlugin","DocumentOpened",`Initialized annotation state for document: ${t}`)}onDocumentLoaded(t){const e=this.getCoreDocument(t);if(e!=null&&e.document&&this.getAllAnnotations(t,e.document),this.selection)for(const n of this.state.tools)n.interaction.textSelection&&this.selection.enableForMode(n.interaction.mode??n.id)}onDocumentClosed(t){this.dispatch(function(e){return{type:LO,payload:e}}(t)),this.pendingContexts.delete(t),this.isInitialLoadComplete.delete(t),this.importQueue.delete(t),this.logger.debug("AnnotationPlugin","DocumentClosed",`Cleaned up annotation state for document: ${t}`)}registerHandlerFactories(){this.handlerFactories.set(_e.CIRCLE,Hj),this.handlerFactories.set(_e.SQUARE,Uj),this.handlerFactories.set(_e.STAMP,Bj),this.handlerFactories.set(_e.POLYGON,Fj),this.handlerFactories.set(_e.POLYLINE,Oj),this.handlerFactories.set(_e.LINE,zj),this.handlerFactories.set(_e.INK,kj),this.handlerFactories.set(_e.FREETEXT,Nj)}registerBuiltInPatches(){this.patchRegistry.register(_e.INK,Vj),this.patchRegistry.register(_e.LINE,$j),this.patchRegistry.register(_e.POLYLINE,Wj),this.patchRegistry.register(_e.POLYGON,Gj)}async initialize(){var t,e;this.state.tools.forEach(n=>this.registerInteractionForTool(n)),this.history&&this.history.onHistoryChange(n=>{n.topic===this.ANNOTATION_HISTORY_TOPIC&&this.config.autoCommit!==!1&&this.commit(n.documentId)}),(t=this.interactionManager)==null||t.onModeChange(n=>{var i,r;const o=((i=this.state.tools.find(s=>(s.interaction.mode??s.id)===n.activeMode))==null?void 0:i.id)??null;o!==(((r=this.state.documents[n.documentId])==null?void 0:r.activeToolId)??null)&&n.documentId&&this.dispatch(yI(n.documentId,o))}),(e=this.selection)==null||e.onEndSelection(({documentId:n})=>{var i,r,o;const s=this.getActiveTool(n);if(!s||!s.interaction.textSelection)return;const a=(i=this.selection)==null?void 0:i.getFormattedSelection(),l=(r=this.selection)==null?void 0:r.getSelectedText();if(a&&l){for(const c of a)l.wait(u=>{const d=ni();this.createAnnotation(c.pageIndex,{...s.defaults,rect:c.rect,segmentRects:c.segmentRects,pageIndex:c.pageIndex,created:new Date,id:d,custom:{text:u.join(`
`)}},void 0,n),this.getToolBehavior(s,"deactivateToolAfterCreate")&&this.setActiveTool(null,n),this.getToolBehavior(s,"selectAfterCreate")&&this.selectAnnotation(c.pageIndex,d,n)},ii);(o=this.selection)==null||o.clear()}})}registerInteractionForTool(t){var e;(e=this.interactionManager)==null||e.registerMode({id:t.interaction.mode??t.id,scope:"page",exclusive:t.interaction.exclusive,cursor:t.interaction.cursor})}buildCapability(){return{getActiveTool:()=>this.getActiveTool(),setActiveTool:t=>this.setActiveTool(t),getState:()=>this.getDocumentState(),getPageAnnotations:t=>this.getPageAnnotations(t),getSelectedAnnotation:()=>this.getSelectedAnnotation(),getAnnotationById:t=>this.getAnnotationById(t),selectAnnotation:(t,e)=>this.selectAnnotation(t,e),deselectAnnotation:()=>this.deselectAnnotation(),importAnnotations:t=>this.importAnnotations(t),createAnnotation:(t,e,n)=>this.createAnnotation(t,e,n),updateAnnotation:(t,e,n)=>this.updateAnnotation(t,e,n),deleteAnnotation:(t,e)=>this.deleteAnnotation(t,e),renderAnnotation:t=>this.renderAnnotation(t),commit:()=>this.commit(),forDocument:t=>this.createAnnotationScope(t),getTools:()=>this.state.tools,getTool:t=>this.getTool(t),addTool:t=>{this.dispatch((e=>({type:qO,payload:e}))(t)),this.registerInteractionForTool(t)},findToolForAnnotation:t=>this.findToolForAnnotation(t),setToolDefaults:(t,e)=>this.dispatch(((n,i)=>({type:jO,payload:{toolId:n,patch:i}}))(t,e)),getColorPresets:()=>[...this.state.colorPresets],addColorPreset:t=>this.dispatch((e=>({type:GO,payload:e}))(t)),transformAnnotation:(t,e)=>this.transformAnnotation(t,e),registerPatchFunction:(t,e)=>this.registerPatchFunction(t,e),onStateChange:this.state$.on,onActiveToolChange:this.activeTool$.on,onAnnotationEvent:this.events$.on,onToolsChange:this.toolsChange$.on}}createAnnotationScope(t){return{getState:()=>this.getDocumentState(t),getPageAnnotations:e=>this.getPageAnnotations(e,t),getSelectedAnnotation:()=>this.getSelectedAnnotation(t),getAnnotationById:e=>this.getAnnotationById(e,t),selectAnnotation:(e,n)=>this.selectAnnotation(e,n,t),deselectAnnotation:()=>this.deselectAnnotation(t),getActiveTool:()=>this.getActiveTool(t),setActiveTool:e=>this.setActiveTool(e,t),findToolForAnnotation:e=>this.findToolForAnnotation(e),importAnnotations:e=>this.importAnnotations(e,t),createAnnotation:(e,n,i)=>this.createAnnotation(e,n,i,t),updateAnnotation:(e,n,i)=>this.updateAnnotation(e,n,i,t),deleteAnnotation:(e,n)=>this.deleteAnnotation(e,n,t),renderAnnotation:e=>this.renderAnnotation(e,t),commit:()=>this.commit(t),onStateChange:e=>this.state$.on(n=>{n.documentId===t&&e(n.state)}),onAnnotationEvent:e=>this.events$.on(n=>{n.documentId===t&&e(n)}),onActiveToolChange:e=>this.activeTool$.on(n=>{n.documentId===t&&e(n.tool)})}}onStoreUpdated(t,e){for(const n in e.documents){const i=t.documents[n],r=e.documents[n];i!==r&&(this.state$.emit({documentId:n,state:r}),i&&i.activeToolId!==r.activeToolId&&this.activeTool$.emit({documentId:n,tool:this.getActiveTool(n)}))}if(t.tools!==e.tools){for(const n in e.documents)this.activeTool$.emit({documentId:n,tool:this.getActiveTool(n)});this.toolsChange$.emit({tools:e.tools})}}registerPatchFunction(t,e){this.patchRegistry.register(t,e)}transformAnnotation(t,e){const n={type:e.type,changes:e.changes,metadata:e.metadata};return this.patchRegistry.transform(t,n)}registerPageHandlers(t,e,n,i){var r;const o=this.getCoreDocument(t),s=(r=o==null?void 0:o.document)==null?void 0:r.pages[e];if(!s)return()=>{};if(!this.interactionManager)return()=>{};const a=[];for(const l of this.state.tools){if(!l.defaults.type)continue;const c=this.handlerFactories.get(l.defaults.type);if(!c)continue;const u={pageIndex:e,pageSize:s.size,scale:n,services:i.services,onPreview:f=>i.onPreview(l.id,f),onCommit:(f,m)=>{this.createAnnotation(e,f,m,t),this.getToolBehavior(l,"deactivateToolAfterCreate")&&this.setActiveTool(null,t),this.getToolBehavior(l,"selectAfterCreate")&&this.selectAnnotation(e,f.id,t)},getTool:()=>this.state.tools.find(f=>f.id===l.id)},d=this.interactionManager.registerHandlers({documentId:t,modeId:l.interaction.mode??l.id,handlers:c.create(u),pageIndex:e});a.push(d)}return()=>a.forEach(l=>l())}getDocumentState(t){const e=t??this.getActiveDocumentId(),n=this.state.documents[e];if(!n)throw new Error(`Annotation state not found for document: ${e}`);return n}getAllAnnotations(t,e){this.engine.getAllAnnotations(e).wait(n=>{this.dispatch(((r,o)=>({type:zO,payload:{documentId:r,annotations:o}}))(t,n)),this.isInitialLoadComplete.set(t,!0);const i=this.importQueue.get(t);i&&i.length>0&&this.processImportQueue(t),this.events$.emit({type:"loaded",documentId:t,total:Object.values(n).reduce((r,o)=>r+o.length,0)})},ii)}getPageAnnotations(t,e){const{pageIndex:n}=t,i=e??this.getActiveDocumentId(),r=this.getCoreDocument(i),o=r==null?void 0:r.document;if(!o)return hn.reject({code:Xt.NotFound,message:"Document not found"});const s=o.pages.find(a=>a.index===n);return s?this.engine.getPageAnnotations(o,s):hn.reject({code:Xt.NotFound,message:"Page not found"})}getSelectedAnnotation(t){return(e=>e.selectedUid?e.byUid[e.selectedUid]:null)(this.getDocumentState(t))}getAnnotationById(t,e){const n=this.getDocumentState(e);return YM(n,t)}renderAnnotation({pageIndex:t,annotation:e,options:n},i){const r=i??this.getActiveDocumentId(),o=this.getCoreDocument(r),s=o==null?void 0:o.document;if(!s)return hn.reject({code:Xt.NotFound,message:"Document not found"});const a=s.pages.find(l=>l.index===t);return a?this.engine.renderPageAnnotation(s,a,e,n):hn.reject({code:Xt.NotFound,message:"Page not found"})}importAnnotations(t,e){const n=e??this.getActiveDocumentId();if(!this.isInitialLoadComplete.get(n)){const i=this.importQueue.get(n)||[];return i.push(...t),void this.importQueue.set(n,i)}this.processImportItems(n,t)}processImportQueue(t){const e=this.importQueue.get(t);if(!e||e.length===0)return;const n=[...e];this.importQueue.set(t,[]),this.processImportItems(t,n)}processImportItems(t,e){const n=this.pendingContexts.get(t);if(n){for(const i of e){const{annotation:r,ctx:o}=i,s=r.pageIndex,a=r.id;this.dispatch(Sw(t,s,r)),o&&n.set(a,o)}this.config.autoCommit!==!1&&this.commit(t)}}createAnnotation(t,e,n,i){const r=e.id,o=i??this.getActiveDocumentId(),s=this.pendingContexts.get(o);if(!s)return;const a={...e,author:e.author??this.config.annotationAuthor},l=()=>{this.dispatch(Sw(o,t,a)),n&&s.set(r,n),this.events$.emit({type:"create",documentId:o,annotation:a,pageIndex:t,ctx:n,committed:!1})};if(!this.history)return l(),void(this.config.autoCommit&&this.commit(o));const c={execute:l,undo:()=>{s.delete(r),this.dispatch(bw(o)),this.dispatch(wI(o,t,r)),this.events$.emit({type:"delete",documentId:o,annotation:a,pageIndex:t,committed:!1})}};this.history.forDocument(o).register(c,this.ANNOTATION_HISTORY_TOPIC)}buildPatch(t,e){return"rect"in e?e:this.transformAnnotation(t,{type:"property-update",changes:e})}updateAnnotation(t,e,n,i){const r=i??this.getActiveDocumentId(),o=this.getDocumentState(r).byUid[e].object,s=this.buildPatch(o,{...n,author:n.author??this.config.annotationAuthor}),a=()=>{this.dispatch(xI(r,t,e,s)),this.events$.emit({type:"update",documentId:r,annotation:o,pageIndex:t,patch:s,committed:!1})};if(!this.history)return a(),void(this.config.autoCommit!==!1&&this.commit(r));const l=Object.fromEntries(Object.keys(n).map(u=>[u,o[u]])),c={execute:a,undo:()=>{this.dispatch(xI(r,t,e,l)),this.events$.emit({type:"update",documentId:r,annotation:o,pageIndex:t,patch:l,committed:!1})}};this.history.forDocument(r).register(c,this.ANNOTATION_HISTORY_TOPIC)}deleteAnnotation(t,e,n){var i;const r=n??this.getActiveDocumentId(),o=(i=this.getDocumentState(r).byUid[e])==null?void 0:i.object;if(!o)return;const s=()=>{this.dispatch(bw(r)),this.dispatch(wI(r,t,e)),this.events$.emit({type:"delete",documentId:r,annotation:o,pageIndex:t,committed:!1})};if(!this.history)return s(),void(this.config.autoCommit!==!1&&this.commit(r));const a={execute:s,undo:()=>{this.dispatch(Sw(r,t,o)),this.events$.emit({type:"create",documentId:r,annotation:o,pageIndex:t,committed:!1})}};this.history.forDocument(r).register(a,this.ANNOTATION_HISTORY_TOPIC)}selectAnnotation(t,e,n){const i=n??this.getActiveDocumentId();this.dispatch(((r,o,s)=>({type:OO,payload:{documentId:r,pageIndex:o,id:s}}))(i,t,e))}deselectAnnotation(t){const e=t??this.getActiveDocumentId();this.dispatch(bw(e))}getActiveTool(t){const e=this.getDocumentState(t);return e.activeToolId?this.state.tools.find(n=>n.id===e.activeToolId)??null:null}setActiveTool(t,e){var n,i;const r=e??this.getActiveDocumentId(),o=this.getDocumentState(r);if(t===o.activeToolId)return;this.dispatch(yI(r,t));const s=this.state.tools.find(a=>a.id===t);s?(n=this.interactionManager)==null||n.forDocument(r).activate(s.interaction.mode??s.id):(i=this.interactionManager)==null||i.forDocument(r).activateDefaultMode()}getTool(t){return this.state.tools.find(e=>e.id===t)}findToolForAnnotation(t){let e=null,n=0;for(const i of this.state.tools){const r=i.matchScore(t);r>n&&(n=r,e=i)}return e}commit(t){const e=new Rn,n=t??this.getActiveDocumentId(),i=this.getDocumentState(n);if(!i.hasPendingChanges)return hn.resolve(!0);const r=this.getCoreDocument(n),o=r==null?void 0:r.document;if(!o)return hn.reject({code:Xt.NotFound,message:"Document not found"});const s=this.pendingContexts.get(n);if(!s)return hn.resolve(!0);const a=[],l=[],c=[];for(const[f,m]of Object.entries(i.byUid)){if(m.commitState==="synced")continue;const g=o.pages.find(y=>y.index===m.object.pageIndex);if(g)switch(m.commitState){case"new":const y=s.get(m.object.id),x=this.engine.createPageAnnotation(o,g,m.object,y);x.wait(()=>{this.events$.emit({type:"create",documentId:n,annotation:m.object,pageIndex:m.object.pageIndex,ctx:y,committed:!0}),s.delete(m.object.id)},ii),a.push(x);break;case"dirty":const v=this.engine.updatePageAnnotation(o,g,m.object);v.wait(()=>{this.events$.emit({type:"update",documentId:n,annotation:m.object,pageIndex:m.object.pageIndex,patch:m.object,committed:!0})},ii),l.push(v);break;case"deleted":c.push({ta:m,uid:f})}}const u=[];for(const{ta:f,uid:m}of c){const g=o.pages.find(y=>y.index===f.object.pageIndex);if(f.commitState==="deleted"&&f.object.id){const y=new Rn;this.engine.removePageAnnotation(o,g,f.object).wait(()=>{this.dispatch(_I(n,m)),this.events$.emit({type:"delete",documentId:n,annotation:f.object,pageIndex:f.object.pageIndex,committed:!0}),y.resolve(!0)},y.fail),u.push(y)}else this.dispatch(_I(n,m))}const d=[...a,...l,...u];return Rn.allSettled(d).wait(()=>{this.dispatch((f=>({type:$O,payload:{documentId:f}}))(n)),e.resolve(!0)},e.fail),e}getToolBehavior(t,e){var n;return((n=t.behavior)==null?void 0:n[e])!==void 0?t.behavior[e]:this.config[e]!==!1}};l4.id="annotation";let KM=l4;function Gy(t){return e=>(e==null?void 0:e.id)===t}const jj=Gy("highlight"),qj=Gy("squiggly"),Xj=Gy("underline"),Yj=Gy("strikeout"),Zj={manifest:Aj,create:(t,e)=>new KM(mn,t,e),reducer:(t,e)=>{switch(e.type){case NO:{const{documentId:n,state:i}=e.payload;return{...t,documents:{...t.documents,[n]:i},activeDocumentId:t.activeDocumentId??n}}case LO:{const n=e.payload,{[n]:i,...r}=t.documents;return{...t,documents:r,activeDocumentId:t.activeDocumentId===n?null:t.activeDocumentId}}case"ANNOTATION/SET_ACTIVE_DOCUMENT":return{...t,activeDocumentId:e.payload};case zO:{const{documentId:n,annotations:i}=e.payload,r=t.documents[n];if(!r)return t;const o={},s={};for(const[a,l]of Object.entries(i)){const c=Number(a),u=r.pages[c]||[];for(const f of u)delete s[f];const d=l.map(f=>{const m=f.id;return s[m]={commitState:"synced",object:f},m});o[c]=d}return{...t,documents:{...t.documents,[n]:{...r,pages:o,byUid:s}}}}case OO:{const{documentId:n,id:i}=e.payload,r=t.documents[n];return r?{...t,documents:{...t.documents,[n]:{...r,selectedUid:i}}}:t}case FO:{const{documentId:n}=e.payload,i=t.documents[n];return i?{...t,documents:{...t.documents,[n]:{...i,selectedUid:null}}}:t}case UO:{const{documentId:n,toolId:i}=e.payload,r=t.documents[n];return r?{...t,documents:{...t.documents,[n]:{...r,activeToolId:i}}}:t}case BO:{const{documentId:n,pageIndex:i,annotation:r}=e.payload,o=t.documents[n];if(!o)return t;const s=r.id;return{...t,documents:{...t.documents,[n]:{...o,pages:{...o.pages,[i]:[...o.pages[i]??[],s]},byUid:{...o.byUid,[s]:{commitState:"new",object:r}},hasPendingChanges:!0}}}}case VO:{const{documentId:n,pageIndex:i,id:r}=e.payload,o=t.documents[n];return o&&o.byUid[r]?{...t,documents:{...t.documents,[n]:{...o,pages:{...o.pages,[i]:(o.pages[i]??[]).filter(s=>s!==r)},byUid:{...o.byUid,[r]:{...o.byUid[r],commitState:"deleted"}},hasPendingChanges:!0}}}:t}case HO:{const{documentId:n,id:i,patch:r}=e.payload,o=t.documents[n];return o?{...t,documents:{...t.documents,[n]:Dj(o,i,r)}}:t}case $O:{const{documentId:n}=e.payload,i=t.documents[n];if(!i)return t;const r={};for(const[o,s]of Object.entries(i.byUid))r[o]={...s,commitState:s.commitState==="dirty"||s.commitState==="new"?"synced":s.commitState};return{...t,documents:{...t.documents,[n]:{...i,byUid:r,hasPendingChanges:!1}}}}case WO:{const{documentId:n,uid:i}=e.payload,r=t.documents[n];if(!r)return t;const{[i]:o,...s}=r.byUid;return{...t,documents:{...t.documents,[n]:{...r,byUid:s}}}}case qO:{const n=new Map(t.tools.map(i=>[i.id,i]));return n.set(e.payload.id,e.payload),{...t,tools:Array.from(n.values())}}case jO:{const{toolId:n,patch:i}=e.payload;return{...t,tools:t.tools.map(r=>r.id===n?{...r,defaults:{...r.defaults,...i}}:r)}}case GO:return t.colorPresets.includes(e.payload)?t:{...t,colorPresets:[...t.colorPresets,e.payload]};default:return t}},initialState:(t,e)=>(n=>{const i=new Map;return Pj.forEach(r=>i.set(r.id,r)),(n.tools||[]).forEach(r=>i.set(r.id,r)),{documents:{},activeDocumentId:null,tools:Array.from(i.values()),colorPresets:n.colorPresets??Rj}})(e)},c4="INTERACTION/INIT_STATE",u4="INTERACTION/CLEANUP_STATE",d4="INTERACTION/ACTIVATE_MODE",h4="INTERACTION/PAUSE",f4="INTERACTION/RESUME",p4="INTERACTION/SET_CURSOR",m4="INTERACTION/SET_DEFAULT_MODE",g4="INTERACTION/SET_EXCLUSION_RULES",v4="INTERACTION/ADD_EXCLUSION_CLASS",y4="INTERACTION/REMOVE_EXCLUSION_CLASS",x4="INTERACTION/ADD_EXCLUSION_ATTRIBUTE",w4="INTERACTION/REMOVE_EXCLUSION_ATTRIBUTE";function TI(t){return{type:m4,payload:{mode:t}}}function AI(t){return{type:g4,payload:{rules:t}}}const II="pointerMode",_4=class extends Ln{constructor(t,e,n){super(t,e),this.modes=new Map,this.cursorClaims=new Map,this.buckets=new Map,this.alwaysGlobal=new Map,this.alwaysPage=new Map,this.onModeChange$=Qi(),this.onHandlerChange$=Qi(),this.onCursorChange$=Qi(),this.onStateChange$=Ht(),this.registerMode({id:II,scope:"page",exclusive:!1,cursor:"auto"}),this.dispatch(TI(II)),n.exclusionRules&&this.dispatch(AI(n.exclusionRules))}onDocumentLoadingStarted(t){const e={activeMode:this.state.defaultMode,cursor:"auto",paused:!1};this.dispatch(function(i,r){return{type:c4,payload:{documentId:i,state:r}}}(t,e)),this.cursorClaims.set(t,new Map),this.buckets.set(t,new Map),this.alwaysGlobal.set(t,new Set),this.alwaysPage.set(t,new Map);const n=this.buckets.get(t);for(const i of this.modes.keys())n.set(i,{global:new Set,page:new Map});this.logger.debug("InteractionManagerPlugin","DocumentOpened",`Initialized interaction state for document: ${t}`)}onDocumentClosed(t){this.cursorClaims.delete(t),this.buckets.delete(t),this.alwaysGlobal.delete(t),this.alwaysPage.delete(t),this.dispatch(function(e){return{type:u4,payload:e}}(t)),this.logger.debug("InteractionManagerPlugin","DocumentClosed",`Cleaned up interaction state for document: ${t}`)}buildCapability(){return{getActiveMode:()=>this.getActiveMode(),getActiveInteractionMode:()=>this.getActiveInteractionMode(),activate:t=>this.activate(t),activateDefaultMode:()=>this.activateDefaultMode(),setCursor:(t,e,n)=>this.setCursor(t,e,n),getCurrentCursor:()=>this.getCurrentCursor(),removeCursor:t=>this.removeCursor(t),getHandlersForScope:t=>this.getHandlersForScope(t),activeModeIsExclusive:()=>this.activeModeIsExclusive(),pause:()=>this.pause(),resume:()=>this.resume(),isPaused:()=>this.registry.isDestroyed()||this.isPaused(),getState:()=>this.getDocumentStateOrThrow(),forDocument:t=>this.createInteractionScope(t),registerMode:t=>this.registerMode(t),registerHandlers:t=>this.registerHandlers(t),registerAlways:t=>this.registerAlways(t),setDefaultMode:t=>this.setDefaultMode(t),getDefaultMode:()=>this.state.defaultMode,getExclusionRules:()=>this.state.exclusionRules,setExclusionRules:t=>this.dispatch(AI(t)),addExclusionClass:t=>this.dispatch(function(e){return{type:v4,payload:{className:e}}}(t)),removeExclusionClass:t=>this.dispatch(function(e){return{type:y4,payload:{className:e}}}(t)),addExclusionAttribute:t=>this.dispatch(function(e){return{type:x4,payload:{attribute:e}}}(t)),removeExclusionAttribute:t=>this.dispatch(function(e){return{type:w4,payload:{attribute:e}}}(t)),onModeChange:this.onModeChange$.on,onCursorChange:this.onCursorChange$.on,onHandlerChange:this.onHandlerChange$.on,onStateChange:this.onStateChange$.on}}createInteractionScope(t){return{getActiveMode:()=>this.getActiveMode(t),getActiveInteractionMode:()=>this.getActiveInteractionMode(t),activate:e=>this.activate(e,t),activateDefaultMode:()=>this.activateDefaultMode(t),setCursor:(e,n,i)=>this.setCursor(e,n,i,t),getCurrentCursor:()=>this.getCurrentCursor(t),removeCursor:e=>this.removeCursor(e,t),getHandlersForScope:e=>this.getHandlersForScope(e),activeModeIsExclusive:()=>this.activeModeIsExclusive(t),pause:()=>this.pause(t),resume:()=>this.resume(t),isPaused:()=>this.isPaused(t),getState:()=>this.getDocumentStateOrThrow(t),onModeChange:e=>this.onModeChange$.on(n=>{n.documentId===t&&e(n.activeMode)}),onCursorChange:e=>this.onCursorChange$.on(n=>{n.documentId===t&&e(n.cursor)}),onStateChange:e=>this.onStateChange$.on(n=>{n.documentId===t&&e(n.state)})}}getDocumentState(t){const e=t??this.getActiveDocumentId();return this.state.documents[e]??null}getDocumentStateOrThrow(t){const e=this.getDocumentState(t);if(!e)throw new Error(`Interaction state not found for document: ${t??"active"}`);return e}activate(t,e){var n;const i=e??this.getActiveDocumentId(),r=this.getDocumentStateOrThrow(i);if(!this.modes.has(t))throw new Error(`[interaction] unknown mode '${t}'`);if(t===r.activeMode)return;const o=r.activeMode;(n=this.cursorClaims.get(i))==null||n.clear(),this.notifyHandlersInactive(i,o),this.dispatch(function(s,a){return{type:d4,payload:{documentId:s,mode:a}}}(i,t)),this.emitCursor(i),this.notifyHandlersActive(i,t),this.onModeChange$.emit({documentId:i,activeMode:t,previousMode:o})}activateDefaultMode(t){const e=t??this.getActiveDocumentIdOrNull();e&&this.activate(this.state.defaultMode,e)}setDefaultMode(t){if(!this.modes.has(t))throw new Error(`[interaction] cannot set unknown mode '${t}' as default`);this.dispatch(TI(t))}getActiveMode(t){return this.getDocumentStateOrThrow(t).activeMode}getActiveInteractionMode(t){const e=this.getDocumentState(t);return e?this.modes.get(e.activeMode)??null:null}activeModeIsExclusive(t){const e=this.getActiveInteractionMode(t);return!!(e!=null&&e.exclusive)}pause(t){const e=t??this.getActiveDocumentId();this.dispatch(function(n){return{type:h4,payload:n}}(e))}resume(t){const e=t??this.getActiveDocumentId();this.dispatch(function(n){return{type:f4,payload:n}}(e))}isPaused(t){return this.getDocumentStateOrThrow(t).paused}registerMode(t){this.modes.set(t.id,t);for(const e of this.buckets.keys()){const n=this.buckets.get(e);n.has(t.id)||n.set(t.id,{global:new Set,page:new Map})}}registerHandlers({documentId:t,modeId:e,handlers:n,pageIndex:i}){const r=Array.isArray(e)?e:[e],o=[],s=this.buckets.get(t);if(!s)throw new Error(`No buckets found for document: ${t}`);for(const a of r){const l=s.get(a);if(!l)throw new Error(`unknown mode '${a}'`);if(i==null)l.global.add(n);else{const c=l.page.get(i)??new Set;c.add(n),l.page.set(i,c)}o.push(()=>{if(i==null)l.global.delete(n);else{const c=l.page.get(i);c&&(c.delete(n),c.size===0&&l.page.delete(i))}})}return this.onHandlerChange$.emit({...this.state}),()=>{o.forEach(a=>a()),this.onHandlerChange$.emit({...this.state})}}registerAlways({scope:t,handlers:e}){if(t.type==="global"){const r=this.alwaysGlobal.get(t.documentId)??new Set;return r.add(e),this.alwaysGlobal.set(t.documentId,r),this.onHandlerChange$.emit({...this.state}),()=>{r.delete(e),this.onHandlerChange$.emit({...this.state})}}const n=this.alwaysPage.get(t.documentId)??new Map,i=n.get(t.pageIndex)??new Set;return i.add(e),n.set(t.pageIndex,i),this.alwaysPage.set(t.documentId,n),this.onHandlerChange$.emit({...this.state}),()=>{i.delete(e),this.onHandlerChange$.emit({...this.state})}}getHandlersForScope(t){var e;const n=this.getDocumentState(t.documentId);if(!n)return null;const i=this.modes.get(n.activeMode);if(!i)return null;const r=this.buckets.get(t.documentId);if(!r)return null;const o=r.get(i.id);if(!o)return null;const s=(a,l)=>a.size||l.size?function(c){const u=["onPointerDown","onPointerUp","onPointerMove","onPointerEnter","onPointerLeave","onPointerCancel","onMouseDown","onMouseUp","onMouseMove","onMouseEnter","onMouseLeave","onMouseCancel","onClick","onDoubleClick"],d={};for(const f of u)d[f]=(m,g,y)=>{var x;for(const v of c)(x=v[f])==null||x.call(v,m,g,y)};return d}([...a,...l]):null;return t.type==="global"?s(this.alwaysGlobal.get(t.documentId)??new Set,i.scope==="global"?o.global:new Set):s(((e=this.alwaysPage.get(t.documentId))==null?void 0:e.get(t.pageIndex))??new Set,i.scope==="page"?o.page.get(t.pageIndex)??new Set:new Set)}setCursor(t,e,n=0,i){const r=i??this.getActiveDocumentId(),o=this.cursorClaims.get(r);o&&(o.set(t,{cursor:e,priority:n}),this.emitCursor(r))}removeCursor(t,e){const n=e??this.getActiveDocumentId(),i=this.cursorClaims.get(n);i&&(i.delete(t),this.emitCursor(n))}getCurrentCursor(t){return this.getDocumentStateOrThrow(t).cursor}emitCursor(t){var e;const n=this.cursorClaims.get(t);if(!n)return;const i=this.getDocumentState(t);if(!i)return;const r=[...n.values()].sort((o,s)=>s.priority-o.priority)[0]??{cursor:((e=this.modes.get(i.activeMode))==null?void 0:e.cursor)??"auto"};r.cursor!==i.cursor&&(this.dispatch(function(o,s){return{type:p4,payload:{documentId:o,cursor:s}}}(t,r.cursor)),this.onCursorChange$.emit({documentId:t,cursor:r.cursor}))}notifyHandlersActive(t,e){var n,i;(n=this.alwaysGlobal.get(t))==null||n.forEach(a=>{var l;(l=a.onHandlerActiveStart)==null||l.call(a,e)}),(i=this.alwaysPage.get(t))==null||i.forEach(a=>{a.forEach(l=>{var c;(c=l.onHandlerActiveStart)==null||c.call(l,e)})});const r=this.modes.get(e);if(!r)return;const o=this.buckets.get(t);if(!o)return;const s=o.get(e);s&&(r.scope==="global"&&s.global.forEach(a=>{var l;(l=a.onHandlerActiveStart)==null||l.call(a,e)}),r.scope==="page"&&s.page.forEach(a=>{a.forEach(l=>{var c;(c=l.onHandlerActiveStart)==null||c.call(l,e)})}))}notifyHandlersInactive(t,e){var n,i;(n=this.alwaysGlobal.get(t))==null||n.forEach(a=>{var l;(l=a.onHandlerActiveEnd)==null||l.call(a,e)}),(i=this.alwaysPage.get(t))==null||i.forEach(a=>{a.forEach(l=>{var c;(c=l.onHandlerActiveEnd)==null||c.call(l,e)})});const r=this.modes.get(e);if(!r)return;const o=this.buckets.get(t);if(!o)return;const s=o.get(e);s&&(r.scope==="global"&&s.global.forEach(a=>{var l;(l=a.onHandlerActiveEnd)==null||l.call(a,e)}),r.scope==="page"&&s.page.forEach(a=>{a.forEach(l=>{var c;(c=l.onHandlerActiveEnd)==null||c.call(l,e)})}))}onStoreUpdated(t,e){for(const n in e.documents){const i=t.documents[n],r=e.documents[n];i!==r&&this.onStateChange$.emit({documentId:n,state:r})}}async initialize(t){this.logger.info("InteractionManagerPlugin","Initialize","Interaction Manager Plugin initialized")}async destroy(){this.onModeChange$.clear(),this.onCursorChange$.clear(),this.onHandlerChange$.clear(),this.onStateChange$.clear(),await super.destroy()}};_4.id="interaction-manager";let QM=_4;const PI="interaction-manager",RI={defaultMode:"pointerMode",exclusionRules:{classes:[],dataAttributes:["data-no-interaction"]},documents:{},activeDocumentId:null},Kj={manifest:{id:PI,name:"Interaction Manager Plugin",version:"1.0.0",provides:["interaction-manager"],requires:[],optional:[],defaultConfig:{exclusionRules:{classes:[],dataAttributes:["data-no-interaction"]}}},create:(t,e)=>new QM(PI,t,e),reducer:(t=RI,e)=>{switch(e.type){case c4:{const{documentId:n,state:i}=e.payload;return{...t,documents:{...t.documents,[n]:i},activeDocumentId:t.activeDocumentId??n}}case u4:{const n=e.payload,{[n]:i,...r}=t.documents;return{...t,documents:r,activeDocumentId:t.activeDocumentId===n?null:t.activeDocumentId}}case"INTERACTION/SET_ACTIVE_DOCUMENT":return{...t,activeDocumentId:e.payload};case d4:{const{documentId:n,mode:i}=e.payload,r=t.documents[n];return r?{...t,documents:{...t.documents,[n]:{...r,activeMode:i}}}:t}case p4:{const{documentId:n,cursor:i}=e.payload,r=t.documents[n];return r?{...t,documents:{...t.documents,[n]:{...r,cursor:i}}}:t}case h4:{const n=e.payload,i=t.documents[n];return i?{...t,documents:{...t.documents,[n]:{...i,paused:!0}}}:t}case f4:{const n=e.payload,i=t.documents[n];return i?{...t,documents:{...t.documents,[n]:{...i,paused:!1}}}:t}case m4:return{...t,defaultMode:e.payload.mode};case g4:return{...t,exclusionRules:e.payload.rules};case v4:return{...t,exclusionRules:{...t.exclusionRules,classes:[...t.exclusionRules.classes||[],e.payload.className].filter((n,i,r)=>r.indexOf(n)===i)}};case y4:return{...t,exclusionRules:{...t.exclusionRules,classes:(t.exclusionRules.classes||[]).filter(n=>n!==e.payload.className)}};case x4:return{...t,exclusionRules:{...t.exclusionRules,dataAttributes:[...t.exclusionRules.dataAttributes||[],e.payload.attribute].filter((n,i,r)=>r.indexOf(n)===i)}};case w4:return{...t,exclusionRules:{...t.exclusionRules,dataAttributes:(t.exclusionRules.dataAttributes||[]).filter(n=>n!==e.payload.attribute)}};default:return t}},initialState:RI},Rf=()=>oi(QM.id),Qj={pointerdown:"onPointerDown",pointerup:"onPointerUp",pointermove:"onPointerMove",pointerenter:"onPointerEnter",pointerleave:"onPointerLeave",pointercancel:"onPointerCancel",mousedown:"onMouseDown",mouseup:"onMouseUp",mousemove:"onMouseMove",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousecancel:"onMouseCancel",click:"onClick",dblclick:"onDoubleClick",touchstart:"onPointerDown",touchend:"onPointerUp",touchmove:"onPointerMove",touchcancel:"onPointerCancel"},DI=["pointerdown","pointerup","pointermove","pointerenter","pointerleave","pointercancel","mousedown","mouseup","mousemove","mouseenter","mouseleave","mousecancel","click","dblclick"],kI=typeof PointerEvent<"u"?DI:[...DI,"touchstart","touchend","touchmove","touchcancel"];function NI(t){return typeof TouchEvent<"u"&&t instanceof TouchEvent}function b4(t,e,n,i){const r=t.forDocument(e.documentId);let o=t.getHandlersForScope(e);const s=()=>{var w;return((w=r.getActiveInteractionMode())==null?void 0:w.wantsRawTouch)!==!1},a={};let l=s();const c=w=>{kI.forEach(_=>{const S=a[_]??(a[_]=v);var E;n.addEventListener(_,S,(E=w,_.startsWith("touch")?{passive:!E}:{passive:!1}))})},u=()=>{kI.forEach(w=>{const _=a[w];_&&n.removeEventListener(w,_)})};c(l),n.style.touchAction=l?"none":"";const d=r.onModeChange(()=>{if(e.type==="global"){const _=r.getActiveInteractionMode();n.style.cursor=(_==null?void 0:_.scope)==="global"?_.cursor??"auto":"auto"}o=t.getHandlersForScope(e);const w=s();w!==l&&(u(),c(w),l=w,n.style.touchAction=l?"none":"")}),f=t.onHandlerChange(()=>{o=t.getHandlersForScope(e)}),m=r.getActiveInteractionMode(),g=r.getCurrentCursor();n.style.cursor=e.type==="global"&&(m==null?void 0:m.scope)!=="global"?"auto":g;const y=r.onCursorChange(w=>{var _;e.type==="global"&&((_=r.getActiveInteractionMode())==null?void 0:_.scope)!=="global"||(n.style.cursor=w)}),x=(w,_)=>{if(i)return i(w,_);const S=_.getBoundingClientRect();return{x:w.clientX-S.left,y:w.clientY-S.top}};function v(w){var _;if(t.isPaused())return;const S=t.getExclusionRules();if(w.target&&function(D,A){var R,N,O;if(!D)return!1;let H=D;for(;H;){if((R=A.classes)!=null&&R.length){for(const q of A.classes)if((N=H.classList)!=null&&N.contains(q))return!0}if((O=A.dataAttributes)!=null&&O.length){for(const q of A.dataAttributes)if(H.hasAttribute(q))return!0}H=H.parentElement}return!1}(w.target,S))return;const E=Qj[w.type];if(!E||!(o!=null&&o[E]))return;let T,P;if(NI(w)&&l&&(w.type==="touchmove"||w.type==="touchcancel")&&w.preventDefault(),NI(w)){const D=w.type==="touchend"||w.type==="touchcancel"?w.changedTouches[0]:w.touches[0];if(!D)return;T=x(D,n),P={clientX:D.clientX,clientY:D.clientY,ctrlKey:w.ctrlKey,shiftKey:w.shiftKey,altKey:w.altKey,metaKey:w.metaKey,target:w.target,currentTarget:w.currentTarget,setPointerCapture:()=>{},releasePointerCapture:()=>{}}}else{const D=w;T=x(D,n),P={clientX:D.clientX,clientY:D.clientY,ctrlKey:D.ctrlKey,shiftKey:D.shiftKey,altKey:D.altKey,metaKey:D.metaKey,target:D.target,currentTarget:D.currentTarget,setPointerCapture:()=>{var A,R;(R=(A=D.target)==null?void 0:A.setPointerCapture)==null||R.call(A,D.pointerId)},releasePointerCapture:()=>{var A,R;(R=(A=D.target)==null?void 0:A.releasePointerCapture)==null||R.call(A,D.pointerId)}}}(_=o[E])==null||_.call(o,T,P,r.getActiveMode())}return()=>{u(),d(),y(),f()}}const Jj=({children:t,documentId:e,style:n,...i})=>{const r=vt(null),{provides:o}=Rf();return ge(()=>{if(o&&r.current)return b4(o,{type:"global",documentId:e},r.current)},[o,e]),ee("div",{ref:r,style:{width:"100%",height:"100%",...n},...i,children:t})},e9=({documentId:t,pageIndex:e,children:n,rotation:i,scale:r,convertEventToPoint:o,style:s,...a})=>{var l,c;const u=vt(null),{provides:d}=Rf(),f=function(S){const{provides:E}=Rf(),[T,P]=xe(()=>{if(!E)return!1;const D=E.forDocument(S).getActiveInteractionMode();return(D==null?void 0:D.scope)==="page"&&!!D.exclusive});return ge(()=>{if(!E)return;const D=E.forDocument(S);return D.onModeChange(()=>{const A=D.getActiveInteractionMode();P((A==null?void 0:A.scope)==="page"&&!!(A!=null&&A.exclusive))})},[E,S]),T}(t),m=oo(t),g=(c=(l=m==null?void 0:m.document)==null?void 0:l.pages)==null?void 0:c[e],y=(g==null?void 0:g.size)??{width:0,height:0},x=i??(m==null?void 0:m.rotation)??0,v=r??(m==null?void 0:m.scale)??1,w=i0(y,0,v),_=Lt((S,E)=>{const T=E.getBoundingClientRect(),P={x:S.clientX-T.left,y:S.clientY-T.top};return function(D,A,R,N){return vv(nL(D,A,(4-R)%4),1/N)}(i0({width:w.width,height:w.height},x,1),P,x,v)},[y,x,v]);return ge(()=>{if(d&&u.current)return b4(d,{type:"page",documentId:t,pageIndex:e},u.current,o||_)},[d,t,e,o,_]),ee("div",{ref:u,style:{position:"relative",width:w.width,height:w.height,...s},...a,children:[n,f&&ee("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:10}})]})},t9={},Nr=()=>oi(KM.id),S4=t=>{var e;const{provides:n}=Nr(),[i,r]=xe(((e=n==null?void 0:n.forDocument(t))==null?void 0:e.getState())??{pages:{},byUid:{},selectedUid:null,activeToolId:null,hasPendingChanges:!1});return ge(()=>{if(!n)return;const o=n.forDocument(t);return r(o.getState()),o.onStateChange(s=>{r(s)})},[n,t]),{state:i,provides:(n==null?void 0:n.forDocument(t))??null}};function mo({scale:t,documentId:e,pageIndex:n,rotation:i,pageWidth:r,pageHeight:o,trackedAnnotation:s,children:a,isSelected:l,isDraggable:c,isResizable:u,lockAspectRatio:d=!1,style:f={},vertexConfig:m,selectionMenu:g,outlineOffset:y=1,onDoubleClick:x,onSelect:v,zIndex:w=1,resizeUI:_,vertexUI:S,selectionOutlineColor:E="#007ACC",customAnnotationRenderer:T,...P}){const[D,A]=xe(s.object),{provides:R}=Nr(),N=vt(null),O=Rt(()=>R?R.forDocument(e):null,[R,e]),H=D?{...s.object,...D}:s.object,q=(_==null?void 0:_.color)??"#007ACC",Z=(S==null?void 0:S.color)??"#007ACC",G=(_==null?void 0:_.size)??12,Y=(S==null?void 0:S.size)??12,{dragProps:z,vertices:$,resize:X}=mj({controller:{element:H.rect,vertices:m==null?void 0:m.extractVertices(H),constraints:{minWidth:10,minHeight:10,boundingBox:{width:r,height:o}},maintainAspectRatio:d,pageRotation:i,scale:t,enabled:l,onUpdate:oe=>{var pe;if(!((pe=oe.transformData)!=null&&pe.type))return;oe.state==="start"&&(N.current=H);const be=oe.transformData.type,it=N.current??H,ae=oe.transformData.changes.vertices?m==null?void 0:m.transformAnnotation(it,oe.transformData.changes.vertices):{rect:oe.transformData.changes.rect},me=R==null?void 0:R.transformAnnotation(it,{type:be,changes:ae,metadata:oe.transformData.metadata});me&&A(Fe=>({...Fe,...me})),oe.state==="end"&&me&&(N.current=null,O==null||O.updateAnnotation(n,s.object.id,me))}},resizeUI:{handleSize:G,spacing:y,offsetMode:"outside",includeSides:!d,zIndex:w+1},vertexUI:{vertexSize:Y,zIndex:w+2},includeVertices:!!m}),K=function(oe,{delay:pe=300,tolerancePx:be=18}={}){const it=vt({t:0,x:0,y:0}),ae=Lt(Fe=>{if(!oe||Fe.pointerType==="mouse"||Fe.isPrimary===!1)return;const tt=performance.now(),Be=Fe.clientX,yt=Fe.clientY,It=tt-it.current.t<=pe,Re=Be-it.current.x,le=yt-it.current.y;It&&Re*Re+le*le<=be*be&&(oe==null||oe(Fe)),it.current={t:tt,x:Be,y:yt}},[oe,pe,be]),me=Lt(Fe=>{oe==null||oe(Fe)},[oe]);return oe?{[dj]:me,onPointerUpCapture:ae}:{}}(x);return ge(()=>{A(s.object)},[s.object]),ee("div",{"data-no-interaction":!0,children:[ee("div",{...c&&l?z:{},...K,style:{position:"absolute",left:H.rect.origin.x*t,top:H.rect.origin.y*t,width:H.rect.size.width*t,height:H.rect.size.height*t,outline:l?`1px solid ${E}`:"none",outlineOffset:l?`${y}px`:"0px",pointerEvents:l?"auto":"none",touchAction:"none",cursor:l&&c?"move":"default",zIndex:w,...f},...P,children:[(()=>{const oe=typeof a=="function"?a(H):a,pe=T==null?void 0:T({annotation:H,children:oe,isSelected:l,scale:t,rotation:i,pageWidth:r,pageHeight:o,pageIndex:n,onSelect:v});return pe??oe})(),l&&u&&X.map(({key:oe,...pe})=>_!=null&&_.component?_.component({key:oe,...pe,backgroundColor:q}):ee("div",{...pe,style:{...pe.style,backgroundColor:q}},oe)),l&&$.map(({key:oe,...pe})=>S!=null&&S.component?S.component({key:oe,...pe,backgroundColor:Z}):ee("div",{...pe,style:{...pe.style,backgroundColor:Z}},oe))]}),g&&ee(l0,{rect:{origin:{x:H.rect.origin.x*t,y:H.rect.origin.y*t},size:{width:H.rect.size.width*t,height:H.rect.size.height*t}},rotation:i,children:oe=>g({...oe,context:{type:"annotation",annotation:s,pageIndex:n},selected:l,placement:{suggestTop:!1}})})]})}function M4({color:t="#FFFF00",opacity:e=.5,segmentRects:n,rect:i,scale:r,onClick:o,style:s}){return ee(Tt,{children:n.map((a,l)=>ee("div",{onPointerDown:o,onTouchStart:o,style:{position:"absolute",left:(i?a.origin.x-i.origin.x:a.origin.x)*r,top:(i?a.origin.y-i.origin.y:a.origin.y)*r,width:a.size.width*r,height:a.size.height*r,background:t,opacity:e,pointerEvents:o?"auto":"none",cursor:o?"pointer":"default",zIndex:o?1:void 0,...s}},l))})}function C4({color:t="#FFFF00",opacity:e=.5,segmentRects:n,rect:i,scale:r,onClick:o,style:s}){const a=2*r;return ee(Tt,{children:n.map((l,c)=>ee("div",{onPointerDown:o,onTouchStart:o,style:{position:"absolute",left:(i?l.origin.x-i.origin.x:l.origin.x)*r,top:(i?l.origin.y-i.origin.y:l.origin.y)*r,width:l.size.width*r,height:l.size.height*r,background:"transparent",pointerEvents:o?"auto":"none",cursor:o?"pointer":"default",zIndex:o?1:0,...s},children:ee("div",{style:{position:"absolute",left:0,bottom:0,width:"100%",height:a,background:t,opacity:e,pointerEvents:"none"}})},c))})}function E4({color:t="#FFFF00",opacity:e=.5,segmentRects:n,rect:i,scale:r,onClick:o,style:s}){const a=2*r;return ee(Tt,{children:n.map((l,c)=>ee("div",{onPointerDown:o,onTouchStart:o,style:{position:"absolute",left:(i?l.origin.x-i.origin.x:l.origin.x)*r,top:(i?l.origin.y-i.origin.y:l.origin.y)*r,width:l.size.width*r,height:l.size.height*r,background:"transparent",pointerEvents:o?"auto":"none",cursor:o?"pointer":"default",zIndex:o?1:0,...s},children:ee("div",{style:{position:"absolute",left:0,top:"50%",width:"100%",height:a,background:t,opacity:e,transform:"translateY(-50%)",pointerEvents:"none"}})},c))})}function T4({color:t="#FFFF00",opacity:e=.5,segmentRects:n,rect:i,scale:r,onClick:o,style:s}){const a=2*r,l=6*r,c=`url("data:image/svg+xml;utf8,${encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" width="${l}" height="${2*a}" viewBox="0 0 ${l} ${2*a}">
      <path d="M0 ${a} Q ${l/4} 0 ${l/2} ${a} T ${l} ${a}"
            fill="none" stroke="${t}" stroke-width="${a}" stroke-linecap="round"/>
    </svg>`)}")`;return ee(Tt,{children:n.map((u,d)=>ee("div",{onPointerDown:o,onTouchStart:o,style:{position:"absolute",left:(i?u.origin.x-i.origin.x:u.origin.x)*r,top:(i?u.origin.y-i.origin.y:u.origin.y)*r,width:u.size.width*r,height:u.size.height*r,background:"transparent",pointerEvents:o?"auto":"none",cursor:o?"pointer":"default",zIndex:o?1:0,...s},children:ee("div",{style:{position:"absolute",left:0,bottom:0,width:"100%",height:2*a,backgroundImage:c,backgroundRepeat:"repeat-x",backgroundSize:`${l}px ${2*a}px`,opacity:e,pointerEvents:"none"}})},d))})}function A4({isSelected:t,color:e="#000000",opacity:n=1,strokeWidth:i,inkList:r,rect:o,scale:s,onClick:a}){const l=Rt(()=>r.map(({points:d})=>{let f="";return d.forEach(({x:m,y:g},y)=>{const x=m-o.origin.x,v=g-o.origin.y;f+=(y===0?"M":"L")+x+" "+v+" "}),f.trim()}),[r,o]),c=o.size.width*s,u=o.size.height*s;return ee("svg",{style:{position:"absolute",width:c,height:u,pointerEvents:"none",zIndex:2,overflow:"visible"},width:c,height:u,viewBox:`0 0 ${o.size.width} ${o.size.height}`,children:l.map((d,f)=>ee("path",{d,fill:"none",opacity:n,onPointerDown:a,onTouchStart:a,style:{cursor:t?"move":"pointer",pointerEvents:t?"none":"visibleStroke",stroke:e,strokeWidth:i,strokeLinecap:"round",strokeLinejoin:"round"}},f))})}function I4({isSelected:t,color:e="#000000",strokeColor:n,opacity:i=1,strokeWidth:r,strokeStyle:o=xn.SOLID,strokeDashArray:s,rect:a,scale:l,onClick:c}){const{width:u,height:d,x:f,y:m}=Rt(()=>{const x=a.size.width,v=a.size.height;return{width:Math.max(x-r,0),height:Math.max(v-r,0),x:r/2,y:r/2}},[a,r]),g=(u+r)*l,y=(d+r)*l;return ee("svg",{style:{position:"absolute",width:g,height:y,pointerEvents:"none",zIndex:2},width:g,height:y,viewBox:`0 0 ${u+r} ${d+r}`,children:ee("rect",{x:f,y:m,width:u,height:d,fill:e,opacity:i,onPointerDown:c,onTouchStart:c,style:{cursor:t?"move":"pointer",pointerEvents:t?"none":e==="transparent"?"visibleStroke":"visible",stroke:n??e,strokeWidth:r,...o===xn.DASHED&&{strokeDasharray:s==null?void 0:s.join(",")}}})})}function P4({color:t="#000000",strokeColor:e,opacity:n=1,strokeWidth:i,strokeStyle:r=xn.SOLID,strokeDashArray:o,rect:s,scale:a,onClick:l,isSelected:c}){const{width:u,height:d,cx:f,cy:m,rx:g,ry:y}=Rt(()=>{const w=s.size.width,_=s.size.height,S=Math.max(w-i,0),E=Math.max(_-i,0);return{width:w,height:_,cx:i/2+S/2,cy:i/2+E/2,rx:S/2,ry:E/2}},[s,i]),x=u*a,v=d*a;return ee("svg",{style:{position:"absolute",width:x,height:v,pointerEvents:"none",zIndex:2},width:x,height:v,viewBox:`0 0 ${u} ${d}`,children:ee("ellipse",{cx:f,cy:m,rx:g,ry:y,fill:t,opacity:n,onPointerDown:l,onTouchStart:l,style:{cursor:c?"move":"pointer",pointerEvents:c?"none":t==="transparent"?"visibleStroke":"visible",stroke:e??t,strokeWidth:i,...r===xn.DASHED&&{strokeDasharray:o==null?void 0:o.join(",")}}})})}function R4({color:t="transparent",opacity:e=1,strokeWidth:n,strokeColor:i="#000000",strokeStyle:r=xn.SOLID,strokeDashArray:o,rect:s,linePoints:a,lineEndings:l,scale:c,onClick:u,isSelected:d}){const{x1:f,y1:m,x2:g,y2:y}=Rt(()=>({x1:a.start.x-s.origin.x,y1:a.start.y-s.origin.y,x2:a.end.x-s.origin.x,y2:a.end.y-s.origin.y}),[a,s]),x=Rt(()=>{const _=Math.atan2(y-m,g-f);return{start:c0.createEnding(l==null?void 0:l.start,n,_+Math.PI,f,m),end:c0.createEnding(l==null?void 0:l.end,n,_,g,y)}},[l,n,f,m,g,y]),v=s.size.width*c,w=s.size.height*c;return ee("svg",{style:{position:"absolute",width:v,height:w,pointerEvents:"none",zIndex:2,overflow:"visible"},width:v,height:w,viewBox:`0 0 ${s.size.width} ${s.size.height}`,children:[ee("line",{x1:f,y1:m,x2:g,y2:y,opacity:e,onPointerDown:u,onTouchStart:u,style:{cursor:d?"move":"pointer",pointerEvents:d?"none":"visibleStroke",stroke:i,strokeWidth:n,strokeLinecap:"butt",...r===xn.DASHED&&{strokeDasharray:o==null?void 0:o.join(",")}}}),x.start&&ee("path",{d:x.start.d,transform:x.start.transform,onPointerDown:u,onTouchStart:u,stroke:i,style:{cursor:d?"move":"pointer",strokeWidth:n,strokeLinecap:"butt",pointerEvents:d?"none":x.start.filled?"visible":"visibleStroke",...r===xn.DASHED&&{strokeDasharray:o==null?void 0:o.join(",")}},fill:x.start.filled?t:"none"}),x.end&&ee("path",{d:x.end.d,transform:x.end.transform,stroke:i,onPointerDown:u,onTouchStart:u,style:{cursor:d?"move":"pointer",strokeWidth:n,strokeLinecap:"butt",pointerEvents:d?"none":x.end.filled?"visible":"visibleStroke",...r===xn.DASHED&&{strokeDasharray:o==null?void 0:o.join(",")}},fill:x.end.filled?t:"none"})]})}function D4({rect:t,vertices:e,color:n="transparent",strokeColor:i="#000000",opacity:r=1,strokeWidth:o,scale:s,isSelected:a,onClick:l,lineEndings:c}){const u=Rt(()=>e.map(({x:y,y:x})=>({x:y-t.origin.x,y:x-t.origin.y})),[e,t]),d=Rt(()=>{if(!u.length)return"";const[y,...x]=u;return`M ${y.x} ${y.y} `+x.map(v=>`L ${v.x} ${v.y} `).join("").trim()},[u]),f=Rt(()=>{if(u.length<2)return{start:null,end:null};const y=(w,_)=>Math.atan2(_.y-w.y,_.x-w.x),x=y(u[0],u[1]),v=y(u[u.length-2],u[u.length-1]);return{start:c0.createEnding(c==null?void 0:c.start,o,x+Math.PI,u[0].x,u[0].y),end:c0.createEnding(c==null?void 0:c.end,o,v,u[u.length-1].x,u[u.length-1].y)}},[u,c,o]),m=t.size.width*s,g=t.size.height*s;return ee("svg",{style:{position:"absolute",width:m,height:g,pointerEvents:"none",zIndex:2,overflow:"visible"},width:m,height:g,viewBox:`0 0 ${t.size.width} ${t.size.height}`,children:[ee("path",{d,onPointerDown:l,onTouchStart:l,opacity:r,style:{fill:"none",stroke:i??n,strokeWidth:o,cursor:a?"move":"pointer",pointerEvents:a?"none":"visibleStroke",strokeLinecap:"butt",strokeLinejoin:"miter"}}),f.start&&ee("path",{d:f.start.d,transform:f.start.transform,stroke:i,fill:f.start.filled?n:"none",onPointerDown:l,onTouchStart:l,style:{cursor:a?"move":"pointer",strokeWidth:o,pointerEvents:a?"none":f.start.filled?"visible":"visibleStroke",strokeLinecap:"butt"}}),f.end&&ee("path",{d:f.end.d,transform:f.end.transform,stroke:i,fill:f.end.filled?n:"none",onPointerDown:l,onTouchStart:l,style:{cursor:a?"move":"pointer",strokeWidth:o,pointerEvents:a?"none":f.end.filled?"visible":"visibleStroke",strokeLinecap:"butt"}})]})}function k4({rect:t,vertices:e,color:n="transparent",strokeColor:i="#000000",opacity:r=1,strokeWidth:o,strokeStyle:s=xn.SOLID,strokeDashArray:a,scale:l,isSelected:c,onClick:u,currentVertex:d,handleSize:f=14}){const m=d?[...e,d]:e,g=Rt(()=>m.map(({x:_,y:S})=>({x:_-t.origin.x,y:S-t.origin.y})),[m,t]),y=Rt(()=>{if(!g.length)return"";const[_,...S]=g,E=!!d;return(`M ${_.x} ${_.y} `+S.map(T=>`L ${T.x} ${T.y}`).join(" ")+(E?"":" Z")).trim()},[g,d]),x=d&&e.length>0,v=t.size.width*l,w=t.size.height*l;return ee("svg",{style:{position:"absolute",width:v,height:w,pointerEvents:"none",zIndex:2,overflow:"visible"},width:v,height:w,viewBox:`0 0 ${t.size.width} ${t.size.height}`,children:[ee("path",{d:y,onPointerDown:u,onTouchStart:u,opacity:r,style:{fill:d?"none":n,stroke:i??n,strokeWidth:o,cursor:c?"move":"pointer",pointerEvents:c?"none":n==="transparent"?"visibleStroke":"visible",strokeLinecap:"butt",strokeLinejoin:"miter",...s===xn.DASHED&&{strokeDasharray:a==null?void 0:a.join(",")}}}),x&&e.length>1&&ee("path",{d:`M ${g[g.length-1].x} ${g[g.length-1].y} L ${g[0].x} ${g[0].y}`,fill:"none",style:{stroke:i,strokeWidth:o,strokeDasharray:"4,4",opacity:.7}}),x&&e.length>=2&&ee("rect",{x:g[0].x-f/l/2,y:g[0].y-f/l/2,width:f/l,height:f/l,fill:i,opacity:.4,stroke:i,strokeWidth:o/2})]})}function n9({isSelected:t,isEditing:e,annotation:n,pageIndex:i,scale:r,onClick:o}){const s=vt(null),{provides:a}=Nr(),[l,c]=xe(!1);ge(()=>{if(e&&s.current){const x=s.current;x.focus();const v=window.getSelection();if(v){const w=document.createRange();w.selectNodeContents(x),w.collapse(!1),v.removeAllRanges(),v.addRange(w)}}},[e]),Ny(()=>{try{const x=navigator,v=/iPad|iPhone|iPod/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&(x==null?void 0:x.maxTouchPoints)>1;c(v)}catch{c(!1)}},[]);const u=n.object.fontSize*r,d=l&&e&&u>0&&u<16,f=d?16:u,m=d?u/16:1,g=d?100/m:100;return ee("div",{style:{position:"absolute",width:n.object.rect.size.width*r,height:n.object.rect.size.height*r,cursor:t&&!e?"move":"default",pointerEvents:t&&!e?"none":"auto",zIndex:2},onPointerDown:o,onTouchStart:o,children:ee("span",{ref:s,onBlur:()=>{a&&s.current&&a.updateAnnotation(i,n.object.id,{contents:s.current.innerText})},tabIndex:0,style:{color:n.object.fontColor,fontSize:f,fontFamily:(y=n.object.fontFamily,Ly(y).css),textAlign:VW(n.object.textAlign),flexDirection:"column",justifyContent:n.object.verticalAlign===yo.Top?"flex-start":n.object.verticalAlign===yo.Middle?"center":"flex-end",display:"flex",backgroundColor:n.object.backgroundColor,opacity:n.object.opacity,width:d?`${g}%`:"100%",height:d?`${g}%`:"100%",lineHeight:"1.18",overflow:"hidden",cursor:e?"text":"pointer",outline:"none",transform:d?`scale(${m})`:void 0,transformOrigin:"top left"},contentEditable:e,...t9,children:n.object.contents})});var y}function i9({documentId:t,pageIndex:e,annotation:n,scaleFactor:i=1,style:r,...o}){const{provides:s}=Nr(),[a,l]=xe(null),c=vt(null),{width:u,height:d}=n.rect.size;return ge(()=>{if(s){const f=s.forDocument(t).renderAnnotation({pageIndex:e,annotation:n,options:{scaleFactor:i,dpr:window.devicePixelRatio}});return f.wait(m=>{const g=URL.createObjectURL(m);l(g),c.current=g},ii),()=>{c.current?(URL.revokeObjectURL(c.current),c.current=null):f.abort({code:Xt.Cancelled,message:"canceled render task"})}}},[e,i,s,t,n.id,u,d]),ee(Tt,{children:a&&ee("img",{src:a,onLoad:()=>{c.current&&(URL.revokeObjectURL(c.current),c.current=null)},...o,style:{width:"100%",height:"100%",display:"block",...r||{}}})})}function r9({isSelected:t,annotation:e,documentId:n,pageIndex:i,scale:r,onClick:o}){return ee("div",{style:{position:"absolute",width:"100%",height:"100%",zIndex:2,pointerEvents:t?"none":"auto",cursor:"pointer"},onPointerDown:o,onTouchStart:o,children:ee(i9,{documentId:n,pageIndex:i,annotation:{...e.object,id:e.object.id},scaleFactor:r})})}function o9(t){const{documentId:e,pageIndex:n,scale:i,selectionMenu:r}=t,{provides:o}=Nr(),{provides:s}=qM(),[a,l]=xe([]),{register:c}=function({modeId:v,pageIndex:w,documentId:_}){const{provides:S}=Rf();return{register:(E,T)=>{const P=(T==null?void 0:T.modeId)??v,D=(T==null?void 0:T.pageIndex)??w,A=(T==null?void 0:T.documentId)??_;return P?S==null?void 0:S.registerHandlers({modeId:P,handlers:E,pageIndex:D,documentId:A}):S==null?void 0:S.registerAlways({scope:D!==void 0?{type:"page",documentId:A,pageIndex:D}:{type:"global",documentId:A},handlers:E})}}}({documentId:e,pageIndex:n}),[u,d]=xe(null),[f,m]=xe(null),g=Rt(()=>o?o.forDocument(e):null,[o,e]);ge(()=>{if(g){const v=g.getState();return l(bI(v,n)),d(SI(v,n)),g.onStateChange(w=>{l(bI(w,n)),d(SI(w,n))})}},[g,n]);const y=Rt(()=>({onPointerDown:(v,w)=>{w.target===w.currentTarget&&g&&(g.deselectAnnotation(),m(null))}}),[g]),x=Lt((v,w)=>{v.stopPropagation(),g&&s&&(g.selectAnnotation(n,w.object.id),s.clear(),w.object.id!==f&&m(null))},[g,s,f,n]);return ge(()=>c(y,{documentId:e}),[c,y]),ee(Tt,{children:a.map(v=>{const w=(u==null?void 0:u.object.id)===v.object.id,_=f===v.object.id,S=g==null?void 0:g.findToolForAnnotation(v.object);return XO(v)?ee(mo,{trackedAnnotation:v,isSelected:w,isDraggable:(S==null?void 0:S.interaction.isDraggable)??!0,isResizable:(S==null?void 0:S.interaction.isResizable)??!0,lockAspectRatio:(S==null?void 0:S.interaction.lockAspectRatio)??!1,selectionMenu:r,onSelect:E=>x(E,v),style:{mixBlendMode:Xi(v.object.blendMode??Mt.Normal)},...t,children:E=>ee(A4,{...E,isSelected:w,scale:i,onClick:T=>x(T,v)})},v.object.id):KO(v)?ee(mo,{trackedAnnotation:v,isSelected:w,isDraggable:(S==null?void 0:S.interaction.isDraggable)??!0,isResizable:(S==null?void 0:S.interaction.isResizable)??!0,lockAspectRatio:(S==null?void 0:S.interaction.lockAspectRatio)??!1,selectionMenu:r,onSelect:E=>x(E,v),style:{mixBlendMode:Xi(v.object.blendMode??Mt.Normal)},...t,children:E=>ee(I4,{...E,isSelected:w,scale:i,onClick:T=>x(T,v)})},v.object.id):YO(v)?ee(mo,{trackedAnnotation:v,isSelected:w,isDraggable:(S==null?void 0:S.interaction.isDraggable)??!0,isResizable:(S==null?void 0:S.interaction.isResizable)??!0,lockAspectRatio:(S==null?void 0:S.interaction.lockAspectRatio)??!1,selectionMenu:r,onSelect:E=>x(E,v),style:{mixBlendMode:Xi(v.object.blendMode??Mt.Normal)},...t,children:E=>ee(P4,{...E,isSelected:w,scale:i,onClick:T=>x(T,v)})},v.object.id):t4(v)?ee(mo,{trackedAnnotation:v,isSelected:w,isDraggable:(S==null?void 0:S.interaction.isDraggable)??!1,isResizable:(S==null?void 0:S.interaction.isResizable)??!1,lockAspectRatio:(S==null?void 0:S.interaction.lockAspectRatio)??!1,selectionMenu:r,onSelect:E=>x(E,v),zIndex:0,style:{mixBlendMode:Xi(v.object.blendMode??Mt.Normal)},...t,children:E=>ee(C4,{...E,scale:i,onClick:T=>x(T,v)})},v.object.id):n4(v)?ee(mo,{trackedAnnotation:v,isSelected:w,isDraggable:(S==null?void 0:S.interaction.isDraggable)??!1,isResizable:(S==null?void 0:S.interaction.isResizable)??!1,lockAspectRatio:(S==null?void 0:S.interaction.lockAspectRatio)??!1,selectionMenu:r,onSelect:E=>x(E,v),zIndex:0,style:{mixBlendMode:Xi(v.object.blendMode??Mt.Normal)},...t,children:E=>ee(E4,{...E,scale:i,onClick:T=>x(T,v)})},v.object.id):i4(v)?ee(mo,{trackedAnnotation:v,isSelected:w,isDraggable:(S==null?void 0:S.interaction.isDraggable)??!1,isResizable:(S==null?void 0:S.interaction.isResizable)??!1,lockAspectRatio:(S==null?void 0:S.interaction.lockAspectRatio)??!1,selectionMenu:r,onSelect:E=>x(E,v),zIndex:0,style:{mixBlendMode:Xi(v.object.blendMode??Mt.Normal)},...t,children:E=>ee(T4,{...E,scale:i,onClick:T=>x(T,v)})},v.object.id):e4(v)?ee(mo,{trackedAnnotation:v,isSelected:w,isDraggable:(S==null?void 0:S.interaction.isDraggable)??!1,isResizable:(S==null?void 0:S.interaction.isResizable)??!1,lockAspectRatio:(S==null?void 0:S.interaction.lockAspectRatio)??!1,selectionMenu:r,onSelect:E=>x(E,v),zIndex:0,style:{mixBlendMode:Xi(v.object.blendMode??Mt.Multiply)},...t,children:E=>ee(M4,{...E,scale:i,onClick:T=>x(T,v)})},v.object.id):QO(v)?ee(mo,{trackedAnnotation:v,isSelected:w,isDraggable:(S==null?void 0:S.interaction.isDraggable)??!0,isResizable:(S==null?void 0:S.interaction.isResizable)??!1,lockAspectRatio:(S==null?void 0:S.interaction.lockAspectRatio)??!1,selectionMenu:r,onSelect:E=>x(E,v),vertexConfig:{extractVertices:E=>[E.linePoints.start,E.linePoints.end],transformAnnotation:(E,T)=>({...E,linePoints:{start:T[0],end:T[1]}})},style:{mixBlendMode:Xi(v.object.blendMode??Mt.Normal)},...t,children:E=>ee(Tt,{children:ee(R4,{...E,isSelected:w,scale:i,onClick:T=>x(T,v)})})},v.object.id):JO(v)?ee(mo,{trackedAnnotation:v,isSelected:w,isDraggable:(S==null?void 0:S.interaction.isDraggable)??!0,isResizable:(S==null?void 0:S.interaction.isResizable)??!1,lockAspectRatio:(S==null?void 0:S.interaction.lockAspectRatio)??!1,selectionMenu:r,onSelect:E=>x(E,v),vertexConfig:{extractVertices:E=>E.vertices,transformAnnotation:(E,T)=>({...E,vertices:T})},style:{mixBlendMode:Xi(v.object.blendMode??Mt.Normal)},...t,children:E=>ee(Tt,{children:ee(D4,{...E,isSelected:w,scale:i,onClick:T=>x(T,v)})})},v.object.id):ZO(v)?ee(mo,{trackedAnnotation:v,isSelected:w,isDraggable:(S==null?void 0:S.interaction.isDraggable)??!0,isResizable:(S==null?void 0:S.interaction.isResizable)??!1,lockAspectRatio:(S==null?void 0:S.interaction.lockAspectRatio)??!1,selectionMenu:r,onSelect:E=>x(E,v),vertexConfig:{extractVertices:E=>E.vertices,transformAnnotation:(E,T)=>({...E,vertices:T})},style:{mixBlendMode:Xi(v.object.blendMode??Mt.Normal)},...t,children:E=>ee(Tt,{children:ee(k4,{...E,isSelected:w,scale:i,onClick:T=>x(T,v)})})},v.object.id):r4(v)?ee(mo,{trackedAnnotation:v,isSelected:w,isDraggable:((S==null?void 0:S.interaction.isDraggable)??!0)&&!_,isResizable:(S==null?void 0:S.interaction.isResizable)??!0,lockAspectRatio:(S==null?void 0:S.interaction.lockAspectRatio)??!1,selectionMenu:r,onSelect:E=>x(E,v),style:{mixBlendMode:Xi(v.object.blendMode??Mt.Normal)},onDoubleClick:E=>{E.stopPropagation(),m(v.object.id)},...t,children:E=>ee(n9,{isSelected:w,isEditing:_,annotation:{...v,object:E},pageIndex:n,scale:i,onClick:T=>x(T,v)})},v.object.id):o4(v)?ee(mo,{trackedAnnotation:v,isSelected:w,isDraggable:(S==null?void 0:S.interaction.isDraggable)??!0,isResizable:(S==null?void 0:S.interaction.isResizable)??!0,lockAspectRatio:(S==null?void 0:S.interaction.lockAspectRatio)??!1,selectionMenu:r,onSelect:E=>x(E,v),style:{mixBlendMode:Xi(v.object.blendMode??Mt.Normal)},...t,children:E=>ee(r9,{isSelected:w,annotation:v,documentId:e,pageIndex:n,scale:i,onClick:T=>x(T,v)})},v.object.id):null})})}function s9({documentId:t,pageIndex:e,scale:n}){var i,r,o,s,a,l,c,u,d,f,m,g;const{provides:y}=qM(),{provides:x}=Nr(),[v,w]=xe([]),[_,S]=xe(null),[E,T]=xe(null);if(ge(()=>{if(y)return y.forDocument(t).onSelectionChange(()=>{w(y.forDocument(t).getHighlightRectsForPage(e)),S(y.forDocument(t).getBoundingRectForPage(e))})},[y,t,e]),ge(()=>{if(x)return T(x.forDocument(t).getActiveTool()),x.forDocument(t).onActiveToolChange(P=>T(P))},[x,t]),!_||!E||!E.defaults)return null;switch(E.defaults.type){case _e.UNDERLINE:return ee("div",{style:{mixBlendMode:Xi(((i=E.defaults)==null?void 0:i.blendMode)??Mt.Normal),pointerEvents:"none",position:"absolute",inset:0},children:ee(C4,{color:(r=E.defaults)==null?void 0:r.color,opacity:(o=E.defaults)==null?void 0:o.opacity,segmentRects:v,scale:n})});case _e.HIGHLIGHT:return ee("div",{style:{mixBlendMode:Xi(((s=E.defaults)==null?void 0:s.blendMode)??Mt.Multiply),pointerEvents:"none",position:"absolute",inset:0},children:ee(M4,{color:(a=E.defaults)==null?void 0:a.color,opacity:(l=E.defaults)==null?void 0:l.opacity,segmentRects:v,scale:n})});case _e.STRIKEOUT:return ee("div",{style:{mixBlendMode:Xi(((c=E.defaults)==null?void 0:c.blendMode)??Mt.Normal),pointerEvents:"none",position:"absolute",inset:0},children:ee(E4,{color:(u=E.defaults)==null?void 0:u.color,opacity:(d=E.defaults)==null?void 0:d.opacity,segmentRects:v,scale:n})});case _e.SQUIGGLY:return ee("div",{style:{mixBlendMode:Xi(((f=E.defaults)==null?void 0:f.blendMode)??Mt.Normal),pointerEvents:"none",position:"absolute",inset:0},children:ee(T4,{color:(m=E.defaults)==null?void 0:m.color,opacity:(g=E.defaults)==null?void 0:g.opacity,segmentRects:v,scale:n})});default:return null}}function a9({preview:t,scale:e}){const{bounds:n}=t,i={position:"absolute",left:n.origin.x*e,top:n.origin.y*e,width:n.size.width*e,height:n.size.height*e,pointerEvents:"none",zIndex:10};return t.type===_e.CIRCLE?ee("div",{style:i,children:ee(P4,{isSelected:!1,scale:e,...t.data})}):t.type===_e.SQUARE?ee("div",{style:i,children:ee(I4,{isSelected:!1,scale:e,...t.data})}):t.type===_e.POLYGON?ee("div",{style:i,children:ee(k4,{isSelected:!1,scale:e,...t.data})}):t.type===_e.POLYLINE?ee("div",{style:i,children:ee(D4,{isSelected:!1,scale:e,...t.data})}):t.type===_e.LINE?ee("div",{style:i,children:ee(R4,{isSelected:!1,scale:e,...t.data})}):t.type===_e.INK?ee("div",{style:i,children:ee(A4,{isSelected:!1,scale:e,...t.data})}):t.type===_e.FREETEXT?ee("div",{style:i,children:ee("div",{style:{width:"100%",height:"100%",border:`1px dashed ${t.data.fontColor||"#000000"}`,backgroundColor:"transparent"}})}):null}function l9({documentId:t,pageIndex:e,scale:n}){const{plugin:i}=zr(KM.id),[r,o]=xe(new Map),s=vt(null),a=vt(null),l=Rt(()=>({requestFile:({accept:c,onFile:u})=>{if(!s.current)return;const d=s.current;d.accept=c,d.onchange=f=>{var m;const g=(m=f.target.files)==null?void 0:m[0];g&&(u(g),d.value="")},d.click()},processImage:({source:c,maxWidth:u,maxHeight:d,onComplete:f})=>{const m=a.current;if(!m||!m.getContext)return;const g=m.getContext("2d");if(!g)return;const y=new Image;y.crossOrigin="Anonymous",y.onload=()=>{let{naturalWidth:x,naturalHeight:v}=y;const w=u?u/x:1,_=d?d/v:1,S=Math.min(w,_,1),E=x*S,T=v*S;m.width=E,m.height=T,g.drawImage(y,0,0,E,T);const P=g.getImageData(0,0,E,T);typeof c!="string"&&URL.revokeObjectURL(y.src),f({imageData:P,width:E,height:T})},y.src=typeof c=="string"?c:URL.createObjectURL(c)}}),[]);return ge(()=>{if(i)return i.registerPageHandlers(t,e,n,{services:l,onPreview:(c,u)=>{o(d=>{const f=new Map(d);return u?f.set(c,u):f.delete(c),f})}})},[t,e,n,i,l]),ee(Tt,{children:[ee("input",{ref:s,type:"file",style:{display:"none"}}),ee("canvas",{ref:a,style:{display:"none"}}),Array.from(r.entries()).map(([c,u])=>ee(a9,{preview:u,scale:n},c))]})}function c9({style:t,documentId:e,pageIndex:n,scale:i,rotation:r,selectionMenu:o,resizeUI:s,vertexUI:a,selectionOutlineColor:l,customAnnotationRenderer:c,...u}){var d,f,m,g;const y=oo(e),x=(f=(d=y==null?void 0:y.document)==null?void 0:d.pages)==null?void 0:f[n],v=((m=x==null?void 0:x.size)==null?void 0:m.width)??0,w=((g=x==null?void 0:x.size)==null?void 0:g.height)??0,_=Rt(()=>i!==void 0?i:(y==null?void 0:y.scale)??1,[i,y==null?void 0:y.scale]);return ee("div",{style:{...t},...u,children:[ee(o9,{documentId:e,selectionMenu:o,pageIndex:n,scale:_,rotation:Rt(()=>r!==void 0?r:(y==null?void 0:y.rotation)??Dc.Degree0,[r,y==null?void 0:y.rotation]),pageWidth:v,pageHeight:w,resizeUI:s,vertexUI:a,selectionOutlineColor:l,customAnnotationRenderer:c}),ee(s9,{documentId:e,pageIndex:n,scale:_}),ee(l9,{documentId:e,pageIndex:n,scale:_})]})}const N4="print",u9={id:N4,name:"Print Plugin",version:"1.0.0",provides:["print"],requires:[],optional:[],defaultConfig:{}},L4=class extends Ln{constructor(t,e,n){super(t,e),this.printReady$=Qi()}buildCapability(){return{print:t=>this.print(t),forDocument:t=>this.createPrintScope(t)}}createPrintScope(t){return{print:e=>this.print(e,t)}}print(t,e){const n=e??this.getActiveDocumentId(),i=t??{},r=new Rn;return r.progress({stage:"preparing",message:"Preparing document..."}),this.preparePrintDocument(i,n).wait(o=>{r.progress({stage:"document-ready",message:"Document prepared successfully"}),this.printReady$.emit({documentId:n,options:i,buffer:o,task:r})},o=>r.fail(o)),r}preparePrintDocument(t,e){const n=this.coreState.core.documents[e];return n!=null&&n.document?this.engine.preparePrintDocument(n.document,t):hn.reject({code:Xt.DocNotOpen,message:`Document ${e} not found`})}onPrintRequest(t){return this.printReady$.on(t)}async initialize(t){this.logger.info("PrintPlugin","Initialize","Print plugin initialized")}async destroy(){this.printReady$.clear(),await super.destroy()}};L4.id="print";let $b=L4;const z4=()=>oi($b.id),d9=kc({manifest:u9,create:(t,e)=>new $b(N4,t,e),reducer:()=>{},initialState:{}}).addUtility(function(){const{provides:t}=z4(),{plugin:e}=zr($b.id),n=vt(null),i=vt(null);return ge(()=>{if(!t||!e)return;const r=e.onPrintRequest(({buffer:o,task:s})=>{const a=n.current;if(!a)return;i.current&&(URL.revokeObjectURL(i.current),i.current=null);const l=URL.createObjectURL(new Blob([o],{type:"application/pdf"}));i.current=l,a.onload=()=>{var c,u;a.src===l&&(s.progress({stage:"iframe-ready",message:"Ready to print"}),(c=a.contentWindow)==null||c.focus(),(u=a.contentWindow)==null||u.print(),s.progress({stage:"printing",message:"Print dialog opened"}),s.resolve(o))},a.src=l});return()=>{r(),i.current&&URL.revokeObjectURL(i.current)}},[t,e]),ee("iframe",{ref:n,style:{position:"absolute",display:"none"},title:"Print Document",src:"about:blank"})}).build(),O4="fullscreen",h9={id:O4,name:"Fullscreen Plugin",version:"1.0.0",provides:["fullscreen"],requires:[],optional:[],defaultConfig:{}},F4="SET_FULLSCREEN",U4=class extends Ln{constructor(t,e,n){super(t,e),this.onStateChange$=Ht(),this.fullscreenRequest$=Qi(),this.config=n}async initialize(t){}buildCapability(){return{isFullscreen:()=>this.state.isFullscreen,enableFullscreen:t=>this.enableFullscreen(t),exitFullscreen:()=>this.exitFullscreen(),toggleFullscreen:t=>this.toggleFullscreen(t),onRequest:this.fullscreenRequest$.on,onStateChange:this.onStateChange$.on}}getTargetSelector(){return this.currentTargetElement??this.config.targetElement}toggleFullscreen(t){this.state.isFullscreen?this.exitFullscreen():this.enableFullscreen(t)}enableFullscreen(t){this.currentTargetElement=t??this.config.targetElement,this.fullscreenRequest$.emit({action:"enter",targetElement:this.currentTargetElement})}exitFullscreen(){this.fullscreenRequest$.emit({action:"exit"}),this.currentTargetElement=void 0}onStoreUpdated(t,e){this.onStateChange$.emit(e)}setFullscreenState(t){this.dispatch({type:F4,payload:t})}async destroy(){this.fullscreenRequest$.clear(),super.destroy()}};U4.id="fullscreen";let Wb=U4;const LI=()=>zr(Wb.id);async function f9(t,e,n){if(t.action==="enter"){const i=function(r,o,s){if(!o||r.action!=="enter")return o;let a=null;return s&&(a=o.querySelector(s),a||console.warn(`Fullscreen: Could not find element with selector "${s}" within the wrapper. Falling back to wrapper element.`)),a||(a=o),a}(t,e,n);i&&!document.fullscreenElement&&await i.requestFullscreen()}else document.fullscreenElement&&await document.exitFullscreen()}const p9=kc({manifest:h9,create:(t,e)=>new Wb(O4,t,e),reducer:(t,e)=>e.type===F4?{...t,isFullscreen:e.payload}:t,initialState:{isFullscreen:!1}}).addWrapper(function({children:t,...e}){const{provides:n}=oi(Wb.id),{plugin:i}=LI(),{plugin:r}=LI(),o=vt(null);return ge(()=>{if(!(!n||!i))return n.onRequest(async s=>{const a=i.getTargetSelector();await f9(s,o.current,a)})},[n,i]),ge(()=>{if(!r)return;const s=()=>r.setFullscreenState(!!document.fullscreenElement);return document.addEventListener("fullscreenchange",s),()=>document.removeEventListener("fullscreenchange",s)},[r]),ee("div",{...e,style:{position:"relative",width:"100%",height:"100%",...e.style},ref:o,children:t})}).build(),B4="bookmark",m9={id:B4,name:"Bookmark Plugin",version:"1.0.0",provides:["bookmark"],requires:[],optional:[],defaultConfig:{}},H4=class extends Ln{constructor(t,e){super(t,e)}async initialize(t){}buildCapability(){return{getBookmarks:()=>this.getBookmarks(),forDocument:t=>this.createBookmarkScope(t)}}createBookmarkScope(t){return{getBookmarks:()=>this.getBookmarks(t)}}getBookmarks(t){const e=t??this.getActiveDocumentId(),n=this.coreState.core.documents[e];if(!(n!=null&&n.document))throw new Error(`Document ${e} not loaded`);return this.engine.getBookmarks(n.document)}};H4.id="bookmark";let V4=H4;const g9={manifest:m9,create:t=>new V4(B4,t),reducer:()=>{},initialState:{}},$4=class extends Ln{constructor(t,e,n){super(t,e),this.downloadRequest$=Qi(),this.config=n}buildCapability(){return{saveAsCopy:()=>this.saveAsCopy(),download:()=>this.download(),forDocument:t=>this.createExportScope(t)}}createExportScope(t){return{saveAsCopy:()=>this.saveAsCopy(t),download:()=>this.download(t)}}download(t){const e=t??this.getActiveDocumentId();this.downloadRequest$.emit({documentId:e})}saveAsCopy(t){const e=t??this.getActiveDocumentId(),n=this.coreState.core.documents[e];return n!=null&&n.document?this.engine.saveAsCopy(n.document):hn.reject({code:Xt.DocNotOpen,message:`Document ${e} not found`})}saveAsCopyAndGetBufferAndName(t){const e=new Rn,n=this.coreState.core.documents[t];return n!=null&&n.document?(this.saveAsCopy(t).wait(i=>{e.resolve({buffer:i,name:n.name??this.config.defaultFileName})},i=>e.fail(i)),e):hn.reject({code:Xt.DocNotOpen,message:`Document ${t} not found`})}onRequest(t){return this.downloadRequest$.on(t)}async initialize(t){this.logger.info("ExportPlugin","Initialize","Export plugin initialized")}async destroy(){this.downloadRequest$.clear(),await super.destroy()}};$4.id="export";let zI=$4;const OI="export",v9=kc({manifest:{id:OI,name:"Export Plugin",version:"1.0.0",provides:["export"],requires:[],optional:[],defaultConfig:{defaultFileName:"document.pdf"}},create:(t,e)=>new zI(OI,t,e),reducer:()=>{},initialState:{}}).addUtility(function(){const{plugin:t}=zr(zI.id),e=vt(null);return ge(()=>{if(t)return t.onRequest(n=>{const i=e.current;i&&t.saveAsCopyAndGetBufferAndName(n.documentId).wait(({buffer:r,name:o})=>{const s=URL.createObjectURL(new Blob([r]));i.href=s,i.download=o,i.click(),URL.revokeObjectURL(s)},ii)})},[t]),ee("a",{style:{display:"none"},ref:e})}).build(),W4="PAN/INIT_STATE",G4="PAN/CLEANUP_STATE",j4="PAN/SET_PAN_MODE",q4=class extends Ln{constructor(t,e,n){var i,r,o;super(t,e),this.panMode$=Ht(),this.documentHandlers=new Map,this.config=n,this.interactionManager=(i=e.getPlugin(QM.id))==null?void 0:i.provides(),this.viewport=(r=e.getPlugin(Hy.id))==null?void 0:r.provides(),this.interactionManager&&(this.interactionManager.registerMode({id:"panMode",scope:"global",exclusive:!1,cursor:"grab",wantsRawTouch:!1}),(o=this.interactionManager)==null||o.onModeChange(s=>{const a=s.activeMode==="panMode",l=this.getDocumentState(s.documentId);l&&l.isPanMode!==a&&this.dispatch(function(c,u){return{type:j4,payload:{documentId:c,isPanMode:u}}}(s.documentId,a))}))}onDocumentLoadingStarted(t){this.dispatch(function(e,n){return{type:W4,payload:{documentId:e,state:n}}}(t,{isPanMode:!1})),this.registerPanHandlersForDocument(t),this.config.defaultMode==="always"&&this.makePanDefault(!0),this.logger.debug("PanPlugin","DocumentOpened",`Initialized pan state for document: ${t}`)}onDocumentClosed(t){const e=this.documentHandlers.get(t);e&&(e(),this.documentHandlers.delete(t)),this.dispatch(function(n){return{type:G4,payload:n}}(t)),this.logger.debug("PanPlugin","DocumentClosed",`Cleaned up pan state for document: ${t}`)}buildCapability(){return{enablePan:()=>this.enablePan(),disablePan:()=>this.disablePan(),togglePan:()=>this.togglePan(),makePanDefault:t=>this.makePanDefault(t),isPanMode:()=>this.isPanMode(),forDocument:t=>this.createPanScope(t),onPanModeChange:this.panMode$.on}}createPanScope(t){return{enablePan:()=>this.enablePan(t),disablePan:()=>this.disablePan(t),togglePan:()=>this.togglePan(t),isPanMode:()=>this.isPanMode(t),onPanModeChange:e=>this.panMode$.on(n=>{n.documentId===t&&e(n.isPanMode)})}}getDocumentState(t){const e=t??this.getActiveDocumentId();return this.state.documents[e]??null}getDocumentStateOrThrow(t){const e=this.getDocumentState(t);if(!e)throw new Error(`Pan state not found for document: ${t??"active"}`);return e}enablePan(t){const e=t??this.getActiveDocumentId();this.interactionManager.forDocument(e).activate("panMode")}disablePan(t){const e=t??this.getActiveDocumentId();this.interactionManager.forDocument(e).activateDefaultMode()}togglePan(t){const e=t??this.getActiveDocumentId(),n=this.interactionManager.forDocument(e);n.getActiveMode()==="panMode"?n.activateDefaultMode():n.activate("panMode")}makePanDefault(t=!0){this.interactionManager&&(this.interactionManager.setDefaultMode("panMode"),t&&this.interactionManager.activateDefaultMode())}isPanMode(t){return this.getDocumentStateOrThrow(t).isPanMode}registerPanHandlersForDocument(t){if(!this.interactionManager||!this.viewport)return;let e=null;const n=this.interactionManager.forDocument(t),i=this.viewport.forDocument(t),r={onMouseDown:(s,a)=>{const l=i.getMetrics();e={startX:a.clientX,startY:a.clientY,startLeft:l.scrollLeft,startTop:l.scrollTop},n.setCursor("panMode","grabbing",10)},onMouseMove:(s,a)=>{if(!e)return;const l=a.clientX-e.startX,c=a.clientY-e.startY;i.scrollTo({x:e.startLeft-l,y:e.startTop-c})},onMouseUp:()=>{e&&(e=null,n.removeCursor("panMode"))},onMouseLeave:()=>{e&&(e=null,n.removeCursor("panMode"))},onMouseCancel:()=>{e&&(e=null,n.removeCursor("panMode"))}},o=this.interactionManager.registerHandlers({documentId:t,modeId:"panMode",handlers:r});this.documentHandlers.set(t,o)}onStoreUpdated(t,e){for(const n in e.documents){const i=t.documents[n],r=e.documents[n];(i==null?void 0:i.isPanMode)!==r.isPanMode&&(this.panMode$.emit({documentId:n,isPanMode:r.isPanMode}),this.logger.debug("PanPlugin","PanModeChanged",`Pan mode changed for document ${n}: ${(i==null?void 0:i.isPanMode)??!1} -> ${r.isPanMode}`))}}async initialize(t){this.logger.info("PanPlugin","Initialize","Pan plugin initialized")}async destroy(){this.documentHandlers.forEach(t=>t()),this.documentHandlers.clear(),this.panMode$.clear(),await super.destroy()}};q4.id="pan";let Mw=q4;const FI={documents:{},activeDocumentId:null},y9=kc({manifest:{id:"pan",name:"Pan Plugin",version:"1.0.0",provides:["pan"],requires:["interaction-manager","viewport"],optional:[],defaultConfig:{defaultMode:"mobile"}},create:(t,e)=>new Mw("pan",t,e),reducer:(t=FI,e)=>{switch(e.type){case W4:{const{documentId:n,state:i}=e.payload;return{...t,documents:{...t.documents,[n]:i},activeDocumentId:t.activeDocumentId??n}}case G4:{const n=e.payload,{[n]:i,...r}=t.documents;return{...t,documents:r,activeDocumentId:t.activeDocumentId===n?null:t.activeDocumentId}}case"PAN/SET_ACTIVE_DOCUMENT":return{...t,activeDocumentId:e.payload};case j4:{const{documentId:n,isPanMode:i}=e.payload,r=t.documents[n];return r?{...t,documents:{...t.documents,[n]:{...r,isPanMode:i}}}:t}default:return t}},initialState:FI}).addUtility(()=>{const{provides:t}=oi(Mw.id),{plugin:e}=zr(Mw.id);return ge(()=>{var n;if(!t||!e)return;const i=((n=e.config)==null?void 0:n.defaultMode)??"never",r=typeof window<"u"&&("ontouchstart"in window||navigator.maxTouchPoints>0);i==="mobile"&&r&&t.makePanDefault()},[t,e]),null}).build(),X4="capture",x9={id:X4,name:"Capture Plugin",version:"1.0.0",provides:["capture"],requires:["render"],optional:["interaction-manager"],defaultConfig:{scale:1,imageType:"image/png",withAnnotations:!1}},Y4="CAPTURE/INIT_STATE",Z4="CAPTURE/CLEANUP_STATE",K4="CAPTURE/SET_MARQUEE_CAPTURE_ACTIVE",w9={isMarqueeCaptureActive:!1},UI={documents:{},activeDocumentId:null},Q4=class extends Ln{constructor(t,e,n){var i;super(t,e),this.captureArea$=Qi(),this.state$=Ht(),this.config=n,this.renderCapability=this.registry.getPlugin("render").provides(),this.interactionManagerCapability=(i=this.registry.getPlugin("interaction-manager"))==null?void 0:i.provides(),this.interactionManagerCapability&&(this.interactionManagerCapability.registerMode({id:"marqueeCapture",scope:"page",exclusive:!0,cursor:"crosshair"}),this.interactionManagerCapability.onModeChange(r=>{const o=r.activeMode==="marqueeCapture",s=this.getDocumentState(r.documentId);var a;s&&s.isMarqueeCaptureActive!==o&&this.dispatch((a=r.documentId,{type:K4,payload:{documentId:a,isActive:o}}))}))}onDocumentLoadingStarted(t){const e={...w9};this.dispatch(function(n,i){return{type:Y4,payload:{documentId:n,state:i}}}(t,e)),this.logger.debug("CapturePlugin","DocumentOpened",`Initialized capture state for document: ${t}`)}onDocumentClosed(t){this.dispatch(function(e){return{type:Z4,payload:e}}(t)),this.logger.debug("CapturePlugin","DocumentClosed",`Cleaned up capture state for document: ${t}`)}async initialize(t){}buildCapability(){return{captureArea:(t,e)=>this.captureArea(t,e),enableMarqueeCapture:()=>this.enableMarqueeCapture(),disableMarqueeCapture:()=>this.disableMarqueeCapture(),toggleMarqueeCapture:()=>this.toggleMarqueeCapture(),isMarqueeCaptureActive:()=>this.isMarqueeCaptureActive(),getState:()=>this.getDocumentStateOrThrow(),forDocument:t=>this.createCaptureScope(t),registerMarqueeOnPage:t=>this.registerMarqueeOnPage(t),onCaptureArea:this.captureArea$.on,onStateChange:this.state$.on}}createCaptureScope(t){return{captureArea:(e,n)=>this.captureArea(e,n,t),enableMarqueeCapture:()=>this.enableMarqueeCapture(t),disableMarqueeCapture:()=>this.disableMarqueeCapture(t),toggleMarqueeCapture:()=>this.toggleMarqueeCapture(t),isMarqueeCaptureActive:()=>this.isMarqueeCaptureActive(t),getState:()=>this.getDocumentStateOrThrow(t),onCaptureArea:e=>this.captureArea$.on(n=>{n.documentId===t&&e(n)}),onStateChange:e=>this.state$.on(n=>{n.documentId===t&&e(n.state)})}}getDocumentState(t){const e=t??this.getActiveDocumentId();return this.state.documents[e]??null}getDocumentStateOrThrow(t){const e=this.getDocumentState(t);if(!e)throw new Error(`Capture state not found for document: ${t??"active"}`);return e}registerMarqueeOnPage(t){if(!this.interactionManagerCapability)return this.logger.warn("CapturePlugin","MissingDependency","Interaction manager plugin not loaded, marquee capture disabled"),()=>{};const e=this.coreState.core.documents[t.documentId];if(!e||!e.document)return this.logger.warn("CapturePlugin","DocumentNotFound","Document not found"),()=>{};const n=e.document.pages[t.pageIndex];if(!n)return this.logger.warn("CapturePlugin","PageNotFound",`Page ${t.pageIndex} not found`),()=>{};const i=function(r){const{pageSize:o,scale:s,minDragPx:a=5,onPreview:l,onCommit:c}=r;let u=null,d=null;return{onPointerDown:(f,m)=>{var g;u=f,d={origin:{x:f.x,y:f.y},size:{width:0,height:0}},l==null||l(d),(g=m.setPointerCapture)==null||g.call(m)},onPointerMove:f=>{if(!u)return;const m=fn(f.x,0,o.width),g=fn(f.y,0,o.height);d={origin:{x:Math.min(u.x,m),y:Math.min(u.y,g)},size:{width:Math.abs(m-u.x),height:Math.abs(g-u.y)}},l==null||l(d)},onPointerUp:(f,m)=>{var g;d&&Math.max(d.size.width,d.size.height)*s>a&&(c==null||c(d)),u=null,d=null,l==null||l(null),(g=m.releasePointerCapture)==null||g.call(m)},onPointerCancel:(f,m)=>{var g;u=null,d=null,l==null||l(null),(g=m.releasePointerCapture)==null||g.call(m)}}}({pageSize:n.size,scale:t.scale,onPreview:t.callback.onPreview,onCommit:r=>{var o,s;this.captureArea(t.pageIndex,r,t.documentId),(s=(o=t.callback).onCommit)==null||s.call(o,r)}});return this.interactionManagerCapability.registerHandlers({documentId:t.documentId,modeId:"marqueeCapture",handlers:i,pageIndex:t.pageIndex})}captureArea(t,e,n){const i=n??this.getActiveDocumentId();this.disableMarqueeCapture(i),this.renderCapability.forDocument(i).renderPageRect({pageIndex:t,rect:e,options:{imageType:this.config.imageType,scaleFactor:this.config.scale,withAnnotations:this.config.withAnnotations||!1}}).wait(r=>{this.captureArea$.emit({documentId:i,pageIndex:t,rect:e,blob:r,imageType:this.config.imageType||"image/png",scale:this.config.scale||1,withAnnotations:this.config.withAnnotations||!1})},ii)}enableMarqueeCapture(t){var e;const n=t??this.getActiveDocumentId();(e=this.interactionManagerCapability)==null||e.forDocument(n).activate("marqueeCapture")}disableMarqueeCapture(t){var e;const n=t??this.getActiveDocumentId();(e=this.interactionManagerCapability)==null||e.forDocument(n).activateDefaultMode()}toggleMarqueeCapture(t){var e;const n=t??this.getActiveDocumentId(),i=(e=this.interactionManagerCapability)==null?void 0:e.forDocument(n);(i==null?void 0:i.getActiveMode())==="marqueeCapture"?i.activateDefaultMode():i==null||i.activate("marqueeCapture")}isMarqueeCaptureActive(t){var e;const n=t??this.getActiveDocumentId();return((e=this.interactionManagerCapability)==null?void 0:e.forDocument(n).getActiveMode())==="marqueeCapture"}onStoreUpdated(t,e){for(const n in e.documents){const i=t.documents[n],r=e.documents[n];i&&r&&i.isMarqueeCaptureActive!==r.isMarqueeCaptureActive&&this.state$.emit({documentId:n,state:r})}}async destroy(){this.captureArea$.clear(),this.state$.clear(),super.destroy()}};Q4.id="capture";let J4=Q4;const _9={manifest:x9,create:(t,e)=>new J4(X4,t,e),reducer:(t=UI,e)=>{switch(e.type){case Y4:{const{documentId:n,state:i}=e.payload;return{...t,documents:{...t.documents,[n]:i},activeDocumentId:t.activeDocumentId??n}}case Z4:{const n=e.payload,{[n]:i,...r}=t.documents;return{...t,documents:r,activeDocumentId:t.activeDocumentId===n?null:t.activeDocumentId}}case"CAPTURE/SET_ACTIVE_DOCUMENT":return{...t,activeDocumentId:e.payload};case K4:{const{documentId:n,isActive:i}=e.payload,r=t.documents[n];return r?{...t,documents:{...t.documents,[n]:{...r,isMarqueeCaptureActive:i}}}:t}default:return t}},initialState:UI},eF=()=>oi(J4.id),b9=({documentId:t,pageIndex:e,scale:n,className:i,stroke:r="rgba(33,150,243,0.8)",fill:o="rgba(33,150,243,0.15)"})=>{const{provides:s}=eF(),a=oo(t),[l,c]=xe(null),u=Rt(()=>n!==void 0?n:(a==null?void 0:a.scale)??1,[n,a==null?void 0:a.scale]);return ge(()=>{if(s)return s.registerMarqueeOnPage({documentId:t,pageIndex:e,scale:u,callback:{onPreview:c}})},[s,t,e,u]),l?ee("div",{style:{position:"absolute",pointerEvents:"none",left:l.origin.x*u,top:l.origin.y*u,width:l.size.width*u,height:l.size.height*u,border:`1px solid ${r}`,background:o,boxSizing:"border-box"},className:i}):null},Vu="history",S9={id:Vu,name:"History Plugin",version:"1.0.0",provides:["history"],requires:[],optional:[],defaultConfig:{}},tF="HISTORY/INIT_STATE",nF="HISTORY/CLEANUP_STATE",iF="HISTORY/SET_DOCUMENT_STATE",rF=class extends Ln{constructor(t,e){super(t,e),this.documentHistories=new Map,this.historyChange$=Qi()}async initialize(t){this.logger.info("HistoryPlugin","Initialize","History plugin initialized")}onDocumentLoadingStarted(t){this.dispatch((e=>({type:tF,payload:{documentId:e}}))(t)),this.documentHistories.set(t,{topicHistories:new Map,globalTimeline:[],globalIndex:-1}),this.logger.debug("HistoryPlugin","DocumentOpened",`Initialized history state for document: ${t}`)}onDocumentClosed(t){this.dispatch((e=>({type:nF,payload:{documentId:e}}))(t)),this.documentHistories.delete(t),this.logger.debug("HistoryPlugin","DocumentClosed",`Cleaned up history state for document: ${t}`)}getDocumentHistoryData(t){const e=t??this.getActiveDocumentId(),n=this.documentHistories.get(e);if(!n)throw new Error(`History data not found for document: ${e}`);return n}getDocumentHistoryState(t){const e=this.documentHistories.get(t);if(!e)throw new Error(`History data not found for document: ${t}`);const n={};return Array.from(e.topicHistories.entries()).forEach(([i,r])=>{n[i]={canUndo:r.currentIndex>-1,canRedo:r.currentIndex<r.commands.length-1}}),{global:{canUndo:e.globalIndex>-1,canRedo:e.globalIndex<e.globalTimeline.length-1},topics:n}}emitHistoryChange(t,e){const n=this.getDocumentHistoryState(t);this.dispatch(((i,r)=>({type:iF,payload:{documentId:i,state:r}}))(t,n)),this.historyChange$.emit({documentId:t,topic:e,state:n})}register(t,e,n){const i=this.getDocumentHistoryData(n);i.topicHistories.has(e)||i.topicHistories.set(e,{commands:[],currentIndex:-1});const r=i.topicHistories.get(e);r.commands.splice(r.currentIndex+1),r.commands.push(t),r.currentIndex++;const o={command:t,topic:e};i.globalTimeline.splice(i.globalIndex+1),i.globalTimeline.push(o),i.globalIndex++,t.execute(),this.emitHistoryChange(n,e)}undo(t,e){const n=this.getDocumentHistoryData(e);let i;if(t){const r=n.topicHistories.get(t);r&&r.currentIndex>-1&&(r.commands[r.currentIndex].undo(),r.currentIndex--,i=t)}else if(n.globalIndex>-1){const r=n.globalTimeline[n.globalIndex];r.command.undo(),n.topicHistories.get(r.topic).currentIndex--,n.globalIndex--,i=r.topic}i&&this.emitHistoryChange(e,i)}redo(t,e){const n=this.getDocumentHistoryData(e);let i;if(t){const r=n.topicHistories.get(t);r&&r.currentIndex<r.commands.length-1&&(r.currentIndex++,r.commands[r.currentIndex].execute(),i=t)}else if(n.globalIndex<n.globalTimeline.length-1){n.globalIndex++;const r=n.globalTimeline[n.globalIndex];r.command.execute(),n.topicHistories.get(r.topic).currentIndex++,i=r.topic}i&&this.emitHistoryChange(e,i)}canUndo(t,e){const n=this.getDocumentHistoryData(e);if(t){const i=n.topicHistories.get(t);return!!i&&i.currentIndex>-1}return n.globalIndex>-1}canRedo(t,e){const n=this.getDocumentHistoryData(e);if(t){const i=n.topicHistories.get(t);return!!i&&i.currentIndex<i.commands.length-1}return n.globalIndex<n.globalTimeline.length-1}createHistoryScope(t){return{register:(e,n)=>this.register(e,n,t),undo:e=>this.undo(e,t),redo:e=>this.redo(e,t),canUndo:e=>this.canUndo(e,t),canRedo:e=>this.canRedo(e,t),getHistoryState:()=>this.getDocumentHistoryState(t),onHistoryChange:e=>this.historyChange$.on(n=>{n.documentId===t&&e(n.topic)})}}buildCapability(){return{register:(t,e)=>{const n=this.getActiveDocumentId();this.register(t,e,n)},undo:t=>{const e=this.getActiveDocumentId();this.undo(t,e)},redo:t=>{const e=this.getActiveDocumentId();this.redo(t,e)},canUndo:t=>{const e=this.getActiveDocumentId();return this.canUndo(t,e)},canRedo:t=>{const e=this.getActiveDocumentId();return this.canRedo(t,e)},getHistoryState:()=>{const t=this.getActiveDocumentId();return this.getDocumentHistoryState(t)},forDocument:t=>this.createHistoryScope(t),onHistoryChange:this.historyChange$.on}}async destroy(){this.historyChange$.clear(),this.documentHistories.clear(),super.destroy()}};rF.id="history";let M9=rF;const C9={global:{canUndo:!1,canRedo:!1},topics:{}},BI={documents:{},activeDocumentId:null},E9={manifest:S9,create:t=>new M9(Vu,t),reducer:(t=BI,e)=>{switch(e.type){case tF:{const{documentId:n}=e.payload;return{...t,documents:{...t.documents,[n]:{...C9}}}}case nF:{const{documentId:n}=e.payload,{[n]:i,...r}=t.documents;return{...t,documents:r,activeDocumentId:t.activeDocumentId===n?null:t.activeDocumentId}}case iF:{const{documentId:n,state:i}=e.payload;return t.documents[n]?{...t,documents:{...t.documents,[n]:i}}:t}case"HISTORY/SET_ACTIVE_DOCUMENT":return{...t,activeDocumentId:e.payload};default:return t}},initialState:BI};var ui=(t=>(t.MarqueeRedact="marqueeRedact",t.RedactSelection="redactSelection",t))(ui||{});const oF="REDACTION/INIT_STATE",sF="REDACTION/CLEANUP_STATE",aF="START_REDACTION",lF="END_REDACTION",cF="ADD_PENDING",uF="REMOVE_PENDING",dF="CLEAR_PENDING",hF="SELECT_PENDING",fF="DESELECT_PENDING",ig=(t,e)=>({type:cF,payload:{documentId:t,items:e}}),HI=(t,e,n)=>({type:uF,payload:{documentId:t,page:e,id:n}}),VI=t=>({type:dF,payload:t}),$I=(t,e)=>({type:aF,payload:{documentId:t,mode:e}}),WI=t=>Object.values(t).reduce((e,n)=>e+n.length,0),T9={isRedacting:!1,activeType:null,pending:{},pendingCount:0,selected:null},GI={documents:{},activeDocumentId:null},pF=class extends Ln{constructor(t,e,n){var i,r,o;super(t,e),this.redactionSelection$=new Map,this.pending$=Ht(),this.selected$=Ht(),this.state$=Ht(),this.events$=Ht(),this.documentUnsubscribers=new Map,this.config=n,this.selectionCapability=(i=this.registry.getPlugin("selection"))==null?void 0:i.provides(),this.interactionManagerCapability=(r=this.registry.getPlugin("interaction-manager"))==null?void 0:r.provides(),this.interactionManagerCapability&&(this.interactionManagerCapability.registerMode({id:ui.MarqueeRedact,scope:"page",exclusive:!0,cursor:"crosshair"}),this.interactionManagerCapability.registerMode({id:ui.RedactSelection,scope:"page",exclusive:!1})),(o=this.interactionManagerCapability)==null||o.onModeChange(s=>{const a=s.documentId;if(s.activeMode===ui.RedactSelection)this.dispatch($I(a,ui.RedactSelection));else if(s.activeMode===ui.MarqueeRedact)this.dispatch($I(a,ui.MarqueeRedact));else{const l=this.getDocumentState(a);l!=null&&l.isRedacting&&this.dispatch((c=>({type:lF,payload:c}))(a))}})}onDocumentLoadingStarted(t){this.dispatch(function(n,i){return{type:oF,payload:{documentId:n,state:i}}}(t,{...T9})),this.redactionSelection$.set(t,Ht());const e=[];if(this.selectionCapability){const n=this.selectionCapability.forDocument(t),i=n.onSelectionChange(()=>{const o=this.getDocumentState(t);if(!(o!=null&&o.isRedacting))return;const s=n.getFormattedSelection(),a=this.redactionSelection$.get(t);a==null||a.emit(s)}),r=n.onEndSelection(()=>{const o=this.getDocumentState(t);if(!(o!=null&&o.isRedacting))return;const s=n.getFormattedSelection().map(l=>({id:ni(),kind:"text",page:l.pageIndex,rect:l.rect,rects:l.segmentRects}));this.dispatch(ig(t,s));const a=this.redactionSelection$.get(t);a==null||a.emit([]),n.clear(),this.emitPendingChange(t),s.length&&this.selectPending(s[s.length-1].page,s[s.length-1].id,t)});e.push(i,r)}this.documentUnsubscribers.set(t,e),this.logger.debug("RedactionPlugin","DocumentOpened",`Initialized redaction state for document: ${t}`)}onDocumentLoaded(t){var e;(e=this.selectionCapability)==null||e.enableForMode(ui.RedactSelection,t)}onDocumentClosed(t){this.dispatch(function(i){return{type:sF,payload:i}}(t));const e=this.redactionSelection$.get(t);e==null||e.clear(),this.redactionSelection$.delete(t);const n=this.documentUnsubscribers.get(t);n&&(n.forEach(i=>i()),this.documentUnsubscribers.delete(t)),this.logger.debug("RedactionPlugin","DocumentClosed",`Cleaned up redaction state for document: ${t}`)}async initialize(t){this.logger.info("RedactionPlugin","Initialize","Redaction plugin initialized")}buildCapability(){return{queueCurrentSelectionAsPending:()=>this.queueCurrentSelectionAsPending(),enableMarqueeRedact:()=>this.enableMarqueeRedact(),toggleMarqueeRedact:()=>this.toggleMarqueeRedact(),isMarqueeRedactActive:()=>this.isMarqueeRedactActive(),enableRedactSelection:()=>this.enableRedactSelection(),toggleRedactSelection:()=>this.toggleRedactSelection(),isRedactSelectionActive:()=>this.isRedactSelectionActive(),addPending:t=>this.addPendingItems(t),removePending:(t,e)=>this.removePendingItem(t,e),clearPending:()=>this.clearPendingItems(),commitAllPending:()=>this.commitAllPending(),commitPending:(t,e)=>this.commitPendingOne(t,e),endRedaction:()=>this.endRedactionMode(),startRedaction:()=>this.startRedactionMode(),selectPending:(t,e)=>this.selectPending(t,e),getSelectedPending:()=>this.getSelectedPending(),deselectPending:()=>this.deselectPending(),getState:()=>this.getDocumentStateOrThrow(),forDocument:t=>this.createRedactionScope(t),onPendingChange:this.pending$.on,onSelectedChange:this.selected$.on,onRedactionEvent:this.events$.on,onStateChange:this.state$.on}}createRedactionScope(t){return{queueCurrentSelectionAsPending:()=>this.queueCurrentSelectionAsPending(t),enableMarqueeRedact:()=>this.enableMarqueeRedact(t),toggleMarqueeRedact:()=>this.toggleMarqueeRedact(t),isMarqueeRedactActive:()=>this.isMarqueeRedactActive(t),enableRedactSelection:()=>this.enableRedactSelection(t),toggleRedactSelection:()=>this.toggleRedactSelection(t),isRedactSelectionActive:()=>this.isRedactSelectionActive(t),addPending:e=>this.addPendingItems(e,t),removePending:(e,n)=>this.removePendingItem(e,n,t),clearPending:()=>this.clearPendingItems(t),commitAllPending:()=>this.commitAllPending(t),commitPending:(e,n)=>this.commitPendingOne(e,n,t),endRedaction:()=>this.endRedactionMode(t),startRedaction:()=>this.startRedactionMode(t),selectPending:(e,n)=>this.selectPending(e,n,t),getSelectedPending:()=>this.getSelectedPending(t),deselectPending:()=>this.deselectPending(t),getState:()=>this.getDocumentStateOrThrow(t),onPendingChange:e=>this.pending$.on(n=>{n.documentId===t&&e(n.pending)}),onSelectedChange:e=>this.selected$.on(n=>{n.documentId===t&&e(n.selected)}),onRedactionEvent:e=>this.events$.on(n=>{n.documentId===t&&e(n)}),onStateChange:e=>this.state$.on(n=>{n.documentId===t&&e(n.state)})}}getDocumentState(t){const e=t??this.getActiveDocumentId();return this.state.documents[e]??null}getDocumentStateOrThrow(t){const e=this.getDocumentState(t);if(!e)throw new Error(`Redaction state not found for document: ${t??"active"}`);return e}addPendingItems(t,e){const n=e??this.getActiveDocumentId();this.dispatch(ig(n,t)),this.emitPendingChange(n),this.events$.emit({type:"add",documentId:n,items:t})}removePendingItem(t,e,n){const i=n??this.getActiveDocumentId();this.dispatch(HI(i,t,e)),this.emitPendingChange(i),this.events$.emit({type:"remove",documentId:i,page:t,id:e})}clearPendingItems(t){const e=t??this.getActiveDocumentId();this.dispatch(VI(e)),this.emitPendingChange(e),this.events$.emit({type:"clear",documentId:e})}selectPending(t,e,n){var i;const r=n??this.getActiveDocumentId();this.dispatch(((o,s,a)=>({type:hF,payload:{documentId:o,page:s,id:a}}))(r,t,e)),(i=this.selectionCapability)==null||i.forDocument(r).clear(),this.emitSelectedChange(r)}getSelectedPending(t){var e;const n=t??this.getActiveDocumentId();return((e=this.getDocumentState(n))==null?void 0:e.selected)??null}deselectPending(t){const e=t??this.getActiveDocumentId();this.dispatch((n=>({type:fF,payload:n}))(e)),this.emitSelectedChange(e)}enableRedactSelection(t){var e;const n=t??this.getActiveDocumentId();(e=this.interactionManagerCapability)==null||e.forDocument(n).activate(ui.RedactSelection)}toggleRedactSelection(t){var e;const n=t??this.getActiveDocumentId(),i=(e=this.interactionManagerCapability)==null?void 0:e.forDocument(n);(i==null?void 0:i.getActiveMode())===ui.RedactSelection?i.activateDefaultMode():i==null||i.activate(ui.RedactSelection)}isRedactSelectionActive(t){var e;const n=t??this.getActiveDocumentId();return((e=this.interactionManagerCapability)==null?void 0:e.forDocument(n).getActiveMode())===ui.RedactSelection}enableMarqueeRedact(t){var e;const n=t??this.getActiveDocumentId();(e=this.interactionManagerCapability)==null||e.forDocument(n).activate(ui.MarqueeRedact)}toggleMarqueeRedact(t){var e;const n=t??this.getActiveDocumentId(),i=(e=this.interactionManagerCapability)==null?void 0:e.forDocument(n);(i==null?void 0:i.getActiveMode())===ui.MarqueeRedact?i.activateDefaultMode():i==null||i.activate(ui.MarqueeRedact)}isMarqueeRedactActive(t){var e;const n=t??this.getActiveDocumentId();return((e=this.interactionManagerCapability)==null?void 0:e.forDocument(n).getActiveMode())===ui.MarqueeRedact}startRedactionMode(t){var e;const n=t??this.getActiveDocumentId();(e=this.interactionManagerCapability)==null||e.forDocument(n).activate(ui.RedactSelection)}endRedactionMode(t){var e;const n=t??this.getActiveDocumentId();(e=this.interactionManagerCapability)==null||e.forDocument(n).activateDefaultMode()}onRedactionSelectionChange(t,e){const n=this.redactionSelection$.get(t);return(n==null?void 0:n.on(e))??(()=>{})}registerMarqueeOnPage(t){if(!this.interactionManagerCapability)return this.logger.warn("RedactionPlugin","MissingDependency","Interaction manager plugin not loaded, marquee redaction disabled"),()=>{};const e=this.coreState.core.documents[t.documentId];if(!(e!=null&&e.document))return this.logger.warn("RedactionPlugin","DocumentNotFound","Document not found"),()=>{};const n=e.document.pages[t.pageIndex];if(!n)return this.logger.warn("RedactionPlugin","PageNotFound",`Page ${t.pageIndex} not found`),()=>{};const i=function(s){const{pageSize:a,scale:l,minDragPx:c=5,onPreview:u,onCommit:d}=s;let f=null,m=null;return{onPointerDown:(g,y)=>{var x;f=g,m={origin:{x:g.x,y:g.y},size:{width:0,height:0}},u==null||u(m),(x=y.setPointerCapture)==null||x.call(y)},onPointerMove:g=>{if(!f)return;const y=fn(g.x,0,a.width),x=fn(g.y,0,a.height);m={origin:{x:Math.min(f.x,y),y:Math.min(f.y,x)},size:{width:Math.abs(y-f.x),height:Math.abs(x-f.y)}},u==null||u(m)},onPointerUp:(g,y)=>{var x;m&&Math.max(m.size.width,m.size.height)*l>c&&(d==null||d(m)),f=null,m=null,u==null||u(null),(x=y.releasePointerCapture)==null||x.call(y)},onPointerCancel:(g,y)=>{var x;f=null,m=null,u==null||u(null),(x=y.releasePointerCapture)==null||x.call(y)}}}({pageSize:n.size,scale:t.scale,onPreview:t.callback.onPreview,onCommit:s=>{var a,l;const c={id:ni(),kind:"area",page:t.pageIndex,rect:s};this.dispatch(ig(t.documentId,[c])),this.emitPendingChange(t.documentId),(l=(a=t.callback).onCommit)==null||l.call(a,s),this.enableRedactSelection(t.documentId),this.selectPending(t.pageIndex,c.id,t.documentId)}}),r=this.interactionManagerCapability.registerAlways({handlers:{onPointerDown:(s,a)=>{a.target===a.currentTarget&&this.deselectPending(t.documentId)}},scope:{type:"page",documentId:t.documentId,pageIndex:t.pageIndex}}),o=this.interactionManagerCapability.registerHandlers({documentId:t.documentId,modeId:ui.MarqueeRedact,handlers:i,pageIndex:t.pageIndex});return()=>{r(),o()}}queueCurrentSelectionAsPending(t){const e=t??this.getActiveDocumentId();if(!this.selectionCapability)return hn.reject({code:Xt.NotFound,message:"[RedactionPlugin] selection plugin required"});const n=this.coreState.core.documents[e];if(!(n!=null&&n.document))return hn.reject({code:Xt.NotFound,message:"Document not found"});const i=this.selectionCapability.forDocument(e),r=i.getFormattedSelection();if(!r.length)return hn.resolve(!0);const o=ni(),s=r.map(c=>({id:o,kind:"text",page:c.pageIndex,rect:c.rect,rects:c.segmentRects}));this.enableRedactSelection(e),this.dispatch(ig(e,s)),this.emitPendingChange(e);const a=s[s.length-1];this.selectPending(a.page,a.id,e);const l=this.redactionSelection$.get(e);return l==null||l.emit([]),i.clear(),hn.resolve(!0)}commitPendingOne(t,e,n){const i=n??this.getActiveDocumentId(),r=this.coreState.core.documents[i];if(!(r!=null&&r.document))return hn.reject({code:Xt.NotFound,message:"Document not found"});const o=this.getDocumentState(i);if(!o)return hn.reject({code:Xt.NotFound,message:"Document state not found"});const s=(o.pending[t]??[]).find(u=>u.id===e);if(!s)return hn.resolve(!0);const a=s.kind==="text"?s.rects:[s.rect],l=r.document.pages[t];if(!l)return hn.reject({code:Xt.NotFound,message:"Page not found"});const c=new Rn;return this.engine.redactTextInRects(r.document,l,a,{drawBlackBoxes:this.config.drawBlackBoxes}).wait(()=>{this.dispatch(HI(i,t,e)),this.emitPendingChange(i),this.dispatchCoreAction(OA(i,[t])),this.events$.emit({type:"commit",documentId:i,success:!0}),c.resolve(!0)},u=>{this.events$.emit({type:"commit",documentId:i,success:!1,error:u.reason}),c.reject({code:Xt.Unknown,message:"Failed to commit redactions"})}),c}commitAllPending(t){const e=t??this.getActiveDocumentId(),n=this.coreState.core.documents[e];if(!(n!=null&&n.document))return hn.reject({code:Xt.NotFound,message:"Document not found"});const i=this.getDocumentState(e);if(!i)return hn.reject({code:Xt.NotFound,message:"Document state not found"});const r=new Map;for(const[l,c]of Object.entries(i.pending)){const u=Number(l),d=r.get(u)??[];for(const f of c)f.kind==="text"?d.push(...f.rects):d.push(f.rect);r.set(u,d)}const o=Array.from(r.entries()).filter(([l,c])=>c.length>0).map(([l])=>l),s=[];for(const[l,c]of r){const u=n.document.pages[l];u&&c.length&&s.push(this.engine.redactTextInRects(n.document,u,c,{drawBlackBoxes:this.config.drawBlackBoxes}))}const a=new Rn;return Rn.all(s).wait(()=>{this.dispatch(VI(e)),this.dispatchCoreAction(OA(e,o)),this.emitPendingChange(e),this.events$.emit({type:"commit",documentId:e,success:!0}),a.resolve(!0)},l=>{this.events$.emit({type:"commit",documentId:e,success:!1,error:l.reason}),a.reject({code:Xt.Unknown,message:"Failed to commit redactions"})}),a}emitPendingChange(t){const e=this.getDocumentState(t);e&&this.pending$.emit({documentId:t,pending:e.pending})}emitSelectedChange(t){const e=this.getDocumentState(t);e&&this.selected$.emit({documentId:t,selected:e.selected})}emitStateChange(t){const e=this.getDocumentState(t);e&&this.state$.emit({documentId:t,state:e})}onStoreUpdated(t,e){for(const n in e.documents)e.documents[n]&&(this.emitPendingChange(n),this.emitSelectedChange(n),this.emitStateChange(n))}async destroy(){this.pending$.clear(),this.selected$.clear(),this.state$.clear(),this.events$.clear(),this.redactionSelection$.forEach(t=>t.clear()),this.redactionSelection$.clear(),this.documentUnsubscribers.forEach(t=>{t.forEach(e=>e())}),this.documentUnsubscribers.clear(),await super.destroy()}};pF.id="redaction";let JM=pF;const $u="redaction",A9={manifest:{id:$u,name:"Redaction Plugin",version:"1.0.0",provides:["redaction"],requires:[],optional:["interaction-manager","selection"],defaultConfig:{drawBlackBoxes:!0}},create:(t,e)=>new JM($u,t,e),reducer:(t=GI,e)=>{switch(e.type){case oF:{const{documentId:n,state:i}=e.payload;return{...t,documents:{...t.documents,[n]:i},activeDocumentId:t.activeDocumentId??n}}case sF:{const n=e.payload,{[n]:i,...r}=t.documents;return{...t,documents:r,activeDocumentId:t.activeDocumentId===n?null:t.activeDocumentId}}case"REDACTION/SET_ACTIVE_DOCUMENT":return{...t,activeDocumentId:e.payload};case cF:{const{documentId:n,items:i}=e.payload,r=t.documents[n];if(!r)return t;const o={...r.pending};for(const s of i)o[s.page]=(o[s.page]??[]).concat(s);return{...t,documents:{...t.documents,[n]:{...r,pending:o,pendingCount:WI(o)}}}}case uF:{const{documentId:n,page:i,id:r}=e.payload,o=t.documents[n];if(!o)return t;const s=(o.pending[i]??[]).filter(c=>c.id!==r),a={...o.pending,[i]:s},l=o.selected&&!(o.selected.page===i&&o.selected.id===r);return{...t,documents:{...t.documents,[n]:{...o,pending:a,pendingCount:WI(a),selected:l?o.selected:null}}}}case dF:{const n=e.payload,i=t.documents[n];return i?{...t,documents:{...t.documents,[n]:{...i,pending:{},pendingCount:0,selected:null}}}:t}case hF:{const{documentId:n,page:i,id:r}=e.payload,o=t.documents[n];return o?{...t,documents:{...t.documents,[n]:{...o,selected:{page:i,id:r}}}}:t}case fF:{const n=e.payload,i=t.documents[n];return i?{...t,documents:{...t.documents,[n]:{...i,selected:null}}}:t}case aF:{const{documentId:n,mode:i}=e.payload,r=t.documents[n];return r?{...t,documents:{...t.documents,[n]:{...r,isRedacting:!0,activeType:i}}}:t}case lF:{const n=e.payload,i=t.documents[n];return i?{...t,documents:{...t.documents,[n]:{...i,pending:{},pendingCount:0,selected:null,isRedacting:!1,activeType:null}}}:t}case"SET_ACTIVE_TYPE":{const{documentId:n,mode:i}=e.payload,r=t.documents[n];return r?{...t,documents:{...t.documents,[n]:{...r,activeType:i}}}:t}default:return t}},initialState:GI},mF=()=>zr(JM.id),I9=({documentId:t,pageIndex:e,scale:n,className:i,stroke:r="red",fill:o="transparent"})=>{const{plugin:s}=mF(),a=oo(t),[l,c]=xe(null),u=Rt(()=>n!==void 0?n:(a==null?void 0:a.scale)??1,[n,a==null?void 0:a.scale]);return ge(()=>{if(s&&t)return s.registerMarqueeOnPage({documentId:t,pageIndex:e,scale:u,callback:{onPreview:c}})},[s,t,e,u]),l?ee("div",{style:{position:"absolute",pointerEvents:"none",left:l.origin.x*u,top:l.origin.y*u,width:l.size.width*u,height:l.size.height*u,border:`1px solid ${r}`,background:o,boxSizing:"border-box"},className:i}):null};function gF({color:t="#FFFF00",opacity:e=1,border:n="1px solid red",rects:i,rect:r,scale:o,onClick:s,style:a,...l}){return ee(Tt,{children:i.map((c,u)=>ee("div",{onPointerDown:s,onTouchStart:s,style:{position:"absolute",border:n,left:(r?c.origin.x-r.origin.x:c.origin.x)*o,top:(r?c.origin.y-r.origin.y:c.origin.y)*o,width:c.size.width*o,height:c.size.height*o,background:t,opacity:e,pointerEvents:s?"auto":"none",cursor:s?"pointer":"default",zIndex:s?1:void 0,...a},...l},u))})}function P9({documentId:t,pageIndex:e,scale:n}){const{plugin:i}=mF(),[r,o]=xe([]),[s,a]=xe(null);return ge(()=>{if(i)return i.onRedactionSelectionChange(t,l=>{const c=l.find(u=>u.pageIndex===e);o((c==null?void 0:c.segmentRects)??[]),a((c==null?void 0:c.rect)??null)})},[i,t,e]),s?ee("div",{style:{mixBlendMode:"normal",pointerEvents:"none",position:"absolute",inset:0},children:ee(gF,{color:"transparent",opacity:1,rects:r,scale:n,border:"1px solid red"})}):null}function R9({documentId:t,pageIndex:e,scale:n,bboxStroke:i="rgba(0,0,0,0.8)",rotation:r=Dc.Degree0,selectionMenu:o}){const{provides:s}=oi(JM.id),[a,l]=xe([]),[c,u]=xe(null);ge(()=>{if(!s)return;const f=s.forDocument(t),m=f.getState();l(m.pending[e]??[]),u(m.selected&&m.selected.page===e?m.selected.id:null);const g=f.onPendingChange(x=>l(x[e]??[])),y=f.onSelectedChange(x=>{u(x&&x.page===e?x.id:null)});return()=>{g==null||g(),y==null||y()}},[s,t,e]);const d=Lt((f,m)=>{f.stopPropagation(),s&&s.forDocument(t).selectPending(e,m)},[s,t,e]);return a.length?ee("div",{style:{position:"absolute",inset:0,pointerEvents:"none"},children:a.map(f=>{if(f.kind==="area"){const g=f.rect;return ee(Tt,{children:[ee("div",{style:{position:"absolute",left:g.origin.x*n,top:g.origin.y*n,width:g.size.width*n,height:g.size.height*n,background:"transparent",outline:c===f.id?`1px solid ${i}`:"none",outlineOffset:"2px",border:"1px solid red",pointerEvents:"auto",cursor:"pointer"},onPointerDown:y=>d(y,f.id),onTouchStart:y=>d(y,f.id)}),o&&ee(l0,{rect:{origin:{x:g.origin.x*n,y:g.origin.y*n},size:{width:g.size.width*n,height:g.size.height*n}},rotation:r,children:y=>o({...y,context:{type:"redaction",item:f,pageIndex:e},selected:c===f.id,placement:{suggestTop:!1}})})]},f.id)}const m=f.rect;return ee(Tt,{children:[ee("div",{style:{position:"absolute",left:m.origin.x*n,top:m.origin.y*n,width:m.size.width*n,height:m.size.height*n,background:"transparent",outline:c===f.id?`1px solid ${i}`:"none",outlineOffset:"2px",pointerEvents:"auto",cursor:c===f.id?"pointer":"default"},children:ee(gF,{rect:m,rects:f.rects,color:"transparent",border:"1px solid red",scale:n,onClick:g=>d(g,f.id)})}),o&&ee(l0,{rect:{origin:{x:m.origin.x*n,y:m.origin.y*n},size:{width:m.size.width*n,height:m.size.height*n}},rotation:r,children:g=>o({...g,context:{type:"redaction",item:f,pageIndex:e},selected:c===f.id,placement:{suggestTop:!1}})})]},f.id)})}):null}const D9=({documentId:t,pageIndex:e,scale:n,rotation:i,selectionMenu:r})=>{const o=oo(t),s=Rt(()=>n!==void 0?n:(o==null?void 0:o.scale)??1,[n,o==null?void 0:o.scale]);return ee(Tt,{children:[ee(R9,{documentId:t,pageIndex:e,scale:s,rotation:Rt(()=>i!==void 0?i:(o==null?void 0:o.rotation)??Dc.Degree0,[i,o==null?void 0:o.rotation]),selectionMenu:r}),ee(I9,{documentId:t,pageIndex:e,scale:s}),ee(P9,{documentId:t,pageIndex:e,scale:s})]})},vF=class extends Ln{constructor(t,e){super(t,e)}async initialize(t){}buildCapability(){return{getAttachments:()=>this.getAttachments(),downloadAttachment:t=>this.downloadAttachment(t),forDocument:t=>this.createAttachmentScope(t)}}createAttachmentScope(t){return{getAttachments:()=>this.getAttachments(t),downloadAttachment:e=>this.downloadAttachment(e,t)}}downloadAttachment(t,e){const n=e??this.getActiveDocumentId(),i=this.coreState.core.documents[n];return i!=null&&i.document?this.engine.readAttachmentContent(i.document,t):hn.reject({code:Xt.NotFound,message:`Document ${n} not found`})}getAttachments(t){const e=t??this.getActiveDocumentId(),n=this.coreState.core.documents[e];return n!=null&&n.document?this.engine.getAttachments(n.document):hn.reject({code:Xt.NotFound,message:`Document ${e} not found`})}};vF.id="attachment";let k9=vF;const jI="attachment",N9={manifest:{id:jI,name:"Attachment Plugin",version:"1.0.0",provides:["attachment"],requires:[],optional:[],defaultConfig:{}},create:t=>new k9(jI,t),reducer:()=>{},initialState:{}},yF=(t=new Map,e=null,n)=>({nextPart:t,validators:e,classGroupId:n}),u0="-",qI=[],L9=t=>{const e=O9(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:i}=t;return{getClassGroupId:r=>{if(r.startsWith("[")&&r.endsWith("]"))return z9(r);const o=r.split(u0),s=o[0]===""&&o.length>1?1:0;return xF(o,s,e)},getConflictingClassGroupIds:(r,o)=>{if(o){const s=i[r],a=n[r];return s?a?((l,c)=>{const u=new Array(l.length+c.length);for(let d=0;d<l.length;d++)u[d]=l[d];for(let d=0;d<c.length;d++)u[l.length+d]=c[d];return u})(a,s):s:a||qI}return n[r]||qI}}},xF=(t,e,n)=>{if(t.length-e===0)return n.classGroupId;const i=t[e],r=n.nextPart.get(i);if(r){const l=xF(t,e+1,r);if(l)return l}const o=n.validators;if(o===null)return;const s=e===0?t.join(u0):t.slice(e).join(u0),a=o.length;for(let l=0;l<a;l++){const c=o[l];if(c.validator(s))return c.classGroupId}},z9=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=t.slice(1,-1),n=e.indexOf(":"),i=e.slice(0,n);return i?"arbitrary.."+i:void 0})(),O9=t=>{const{theme:e,classGroups:n}=t;return F9(n,e)},F9=(t,e)=>{const n=yF();for(const i in t){const r=t[i];eC(r,n,i,e)}return n},eC=(t,e,n,i)=>{const r=t.length;for(let o=0;o<r;o++){const s=t[o];U9(s,e,n,i)}},U9=(t,e,n,i)=>{typeof t!="string"?typeof t!="function"?V9(t,e,n,i):H9(t,e,n,i):B9(t,e,n)},B9=(t,e,n)=>{(t===""?e:wF(e,t)).classGroupId=n},H9=(t,e,n,i)=>{$9(t)?eC(t(i),e,n,i):(e.validators===null&&(e.validators=[]),e.validators.push(((r,o)=>({classGroupId:r,validator:o}))(n,t)))},V9=(t,e,n,i)=>{const r=Object.entries(t),o=r.length;for(let s=0;s<o;s++){const[a,l]=r[s];eC(l,wF(e,a),n,i)}},wF=(t,e)=>{let n=t;const i=e.split(u0),r=i.length;for(let o=0;o<r;o++){const s=i[o];let a=n.nextPart.get(s);a||(a=yF(),n.nextPart.set(s,a)),n=a}return n},$9=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,W9=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=Object.create(null),i=Object.create(null);const r=(o,s)=>{n[o]=s,e++,e>t&&(e=0,i=n,n=Object.create(null))};return{get(o){let s=n[o];return s!==void 0?s:(s=i[o])!==void 0?(r(o,s),s):void 0},set(o,s){o in n?n[o]=s:r(o,s)}}},G9=[],XI=(t,e,n,i,r)=>({modifiers:t,hasImportantModifier:e,baseClassName:n,maybePostfixModifierPosition:i,isExternal:r}),j9=t=>{const{prefix:e,experimentalParseClassName:n}=t;let i=r=>{const o=[];let s,a=0,l=0,c=0;const u=r.length;for(let g=0;g<u;g++){const y=r[g];if(a===0&&l===0){if(y===":"){o.push(r.slice(c,g)),c=g+1;continue}if(y==="/"){s=g;continue}}y==="["?a++:y==="]"?a--:y==="("?l++:y===")"&&l--}const d=o.length===0?r:r.slice(c);let f=d,m=!1;return d.endsWith("!")?(f=d.slice(0,-1),m=!0):d.startsWith("!")&&(f=d.slice(1),m=!0),XI(o,m,f,s&&s>c?s-c:void 0)};if(e){const r=e+":",o=i;i=s=>s.startsWith(r)?o(s.slice(r.length)):XI(G9,!1,s,void 0,!0)}if(n){const r=i;i=o=>n({className:o,parseClassName:r})}return i},q9=t=>{const e=new Map;return t.orderSensitiveModifiers.forEach((n,i)=>{e.set(n,1e6+i)}),n=>{const i=[];let r=[];for(let o=0;o<n.length;o++){const s=n[o],a=s[0]==="[",l=e.has(s);a||l?(r.length>0&&(r.sort(),i.push(...r),r=[]),i.push(s)):r.push(s)}return r.length>0&&(r.sort(),i.push(...r)),i}},X9=/\s+/,_F=t=>{if(typeof t=="string")return t;let e,n="";for(let i=0;i<t.length;i++)t[i]&&(e=_F(t[i]))&&(n&&(n+=" "),n+=e);return n},Y9=(t,...e)=>{let n,i,r,o;const s=a=>{const l=i(a);if(l)return l;const c=((u,d)=>{const{parseClassName:f,getClassGroupId:m,getConflictingClassGroupIds:g,sortModifiers:y}=d,x=[],v=u.trim().split(X9);let w="";for(let _=v.length-1;_>=0;_-=1){const S=v[_],{isExternal:E,modifiers:T,hasImportantModifier:P,baseClassName:D,maybePostfixModifierPosition:A}=f(S);if(E){w=S+(w.length>0?" "+w:w);continue}let R=!!A,N=m(R?D.substring(0,A):D);if(!N){if(!R){w=S+(w.length>0?" "+w:w);continue}if(N=m(D),!N){w=S+(w.length>0?" "+w:w);continue}R=!1}const O=T.length===0?"":T.length===1?T[0]:y(T).join(":"),H=P?O+"!":O,q=H+N;if(x.indexOf(q)>-1)continue;x.push(q);const Z=g(N,R);for(let G=0;G<Z.length;++G){const Y=Z[G];x.push(H+Y)}w=S+(w.length>0?" "+w:w)}return w})(a,n);return r(a,c),c};return o=a=>{const l=e.reduce((c,u)=>u(c),t());return n=(c=>({cache:W9(c.cacheSize),parseClassName:j9(c),sortModifiers:q9(c),...L9(c)}))(l),i=n.cache.get,r=n.cache.set,o=s,s(a)},(...a)=>o(((...l)=>{let c,u,d=0,f="";for(;d<l.length;)(c=l[d++])&&(u=_F(c))&&(f&&(f+=" "),f+=u);return f})(...a))},Z9=[],gi=t=>{const e=n=>n[t]||Z9;return e.isThemeGetter=!0,e},bF=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,SF=/^\((?:(\w[\w-]*):)?(.+)\)$/i,K9=/^\d+\/\d+$/,Q9=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,J9=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,e7=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,t7=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,n7=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,nu=t=>K9.test(t),qt=t=>!!t&&!Number.isNaN(Number(t)),Ta=t=>!!t&&Number.isInteger(Number(t)),Cw=t=>t.endsWith("%")&&qt(t.slice(0,-1)),Us=t=>Q9.test(t),i7=()=>!0,r7=t=>J9.test(t)&&!e7.test(t),MF=()=>!1,o7=t=>t7.test(t),s7=t=>n7.test(t),a7=t=>!ht(t)&&!ft(t),l7=t=>Rd(t,TF,MF),ht=t=>bF.test(t),Rl=t=>Rd(t,AF,r7),Ew=t=>Rd(t,f7,qt),YI=t=>Rd(t,CF,MF),c7=t=>Rd(t,EF,s7),rg=t=>Rd(t,IF,o7),ft=t=>SF.test(t),vh=t=>Dd(t,AF),u7=t=>Dd(t,p7),ZI=t=>Dd(t,CF),d7=t=>Dd(t,TF),h7=t=>Dd(t,EF),og=t=>Dd(t,IF,!0),Rd=(t,e,n)=>{const i=bF.exec(t);return!!i&&(i[1]?e(i[1]):n(i[2]))},Dd=(t,e,n=!1)=>{const i=SF.exec(t);return!!i&&(i[1]?e(i[1]):n)},CF=t=>t==="position"||t==="percentage",EF=t=>t==="image"||t==="url",TF=t=>t==="length"||t==="size"||t==="bg-size",AF=t=>t==="length",f7=t=>t==="number",p7=t=>t==="family-name",IF=t=>t==="shadow",mp=Y9(()=>{const t=gi("color"),e=gi("font"),n=gi("text"),i=gi("font-weight"),r=gi("tracking"),o=gi("leading"),s=gi("breakpoint"),a=gi("container"),l=gi("spacing"),c=gi("radius"),u=gi("shadow"),d=gi("inset-shadow"),f=gi("text-shadow"),m=gi("drop-shadow"),g=gi("blur"),y=gi("perspective"),x=gi("aspect"),v=gi("ease"),w=gi("animate"),_=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",ft,ht],S=()=>[ft,ht,l],E=()=>[nu,"full","auto",...S()],T=()=>[Ta,"none","subgrid",ft,ht],P=()=>["auto",{span:["full",Ta,ft,ht]},Ta,ft,ht],D=()=>[Ta,"auto",ft,ht],A=()=>["auto","min","max","fr",ft,ht],R=()=>["auto",...S()],N=()=>[nu,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...S()],O=()=>[t,ft,ht],H=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",ZI,YI,{position:[ft,ht]}],q=()=>["auto","cover","contain",d7,l7,{size:[ft,ht]}],Z=()=>[Cw,vh,Rl],G=()=>["","none","full",c,ft,ht],Y=()=>["",qt,vh,Rl],z=()=>[qt,Cw,ZI,YI],$=()=>["","none",g,ft,ht],X=()=>["none",qt,ft,ht],K=()=>["none",qt,ft,ht],oe=()=>[qt,ft,ht],pe=()=>[nu,"full",...S()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Us],breakpoint:[Us],color:[i7],container:[Us],"drop-shadow":[Us],ease:["in","out","in-out"],font:[a7],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Us],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Us],shadow:[Us],spacing:["px",qt],text:[Us],"text-shadow":[Us],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",nu,ht,ft,x]}],container:["container"],columns:[{columns:[qt,ht,ft,a]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:_()}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:E()}],"inset-x":[{"inset-x":E()}],"inset-y":[{"inset-y":E()}],start:[{start:E()}],end:[{end:E()}],top:[{top:E()}],right:[{right:E()}],bottom:[{bottom:E()}],left:[{left:E()}],visibility:["visible","invisible","collapse"],z:[{z:[Ta,"auto",ft,ht]}],basis:[{basis:[nu,"full","auto",a,...S()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[qt,nu,"auto","initial","none",ht]}],grow:[{grow:["",qt,ft,ht]}],shrink:[{shrink:["",qt,ft,ht]}],order:[{order:[Ta,"first","last","none",ft,ht]}],"grid-cols":[{"grid-cols":T()}],"col-start-end":[{col:P()}],"col-start":[{"col-start":D()}],"col-end":[{"col-end":D()}],"grid-rows":[{"grid-rows":T()}],"row-start-end":[{row:P()}],"row-start":[{"row-start":D()}],"row-end":[{"row-end":D()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":A()}],"auto-rows":[{"auto-rows":A()}],gap:[{gap:S()}],"gap-x":[{"gap-x":S()}],"gap-y":[{"gap-y":S()}],"justify-content":[{justify:["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe","normal"]}],"justify-items":[{"justify-items":["start","end","center","stretch","center-safe","end-safe","normal"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"align-items":[{items:["start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"align-self":[{self:["auto","start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"place-items":[{"place-items":["start","end","center","stretch","center-safe","end-safe","baseline"]}],"place-self":[{"place-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],p:[{p:S()}],px:[{px:S()}],py:[{py:S()}],ps:[{ps:S()}],pe:[{pe:S()}],pt:[{pt:S()}],pr:[{pr:S()}],pb:[{pb:S()}],pl:[{pl:S()}],m:[{m:R()}],mx:[{mx:R()}],my:[{my:R()}],ms:[{ms:R()}],me:[{me:R()}],mt:[{mt:R()}],mr:[{mr:R()}],mb:[{mb:R()}],ml:[{ml:R()}],"space-x":[{"space-x":S()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":S()}],"space-y-reverse":["space-y-reverse"],size:[{size:N()}],w:[{w:[a,"screen",...N()]}],"min-w":[{"min-w":[a,"screen","none",...N()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[s]},...N()]}],h:[{h:["screen","lh",...N()]}],"min-h":[{"min-h":["screen","lh","none",...N()]}],"max-h":[{"max-h":["screen","lh",...N()]}],"font-size":[{text:["base",n,vh,Rl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[i,ft,Ew]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Cw,ht]}],"font-family":[{font:[u7,ht,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[r,ft,ht]}],"line-clamp":[{"line-clamp":[qt,"none",ft,Ew]}],leading:[{leading:[o,...S()]}],"list-image":[{"list-image":["none",ft,ht]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ft,ht]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:O()}],"text-color":[{text:O()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","wavy"]}],"text-decoration-thickness":[{decoration:[qt,"from-font","auto",ft,Rl]}],"text-decoration-color":[{decoration:O()}],"underline-offset":[{"underline-offset":[qt,"auto",ft,ht]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:S()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ft,ht]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ft,ht]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:H()}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:q()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ta,ft,ht],radial:["",ft,ht],conic:[Ta,ft,ht]},h7,c7]}],"bg-color":[{bg:O()}],"gradient-from-pos":[{from:Z()}],"gradient-via-pos":[{via:Z()}],"gradient-to-pos":[{to:Z()}],"gradient-from":[{from:O()}],"gradient-via":[{via:O()}],"gradient-to":[{to:O()}],rounded:[{rounded:G()}],"rounded-s":[{"rounded-s":G()}],"rounded-e":[{"rounded-e":G()}],"rounded-t":[{"rounded-t":G()}],"rounded-r":[{"rounded-r":G()}],"rounded-b":[{"rounded-b":G()}],"rounded-l":[{"rounded-l":G()}],"rounded-ss":[{"rounded-ss":G()}],"rounded-se":[{"rounded-se":G()}],"rounded-ee":[{"rounded-ee":G()}],"rounded-es":[{"rounded-es":G()}],"rounded-tl":[{"rounded-tl":G()}],"rounded-tr":[{"rounded-tr":G()}],"rounded-br":[{"rounded-br":G()}],"rounded-bl":[{"rounded-bl":G()}],"border-w":[{border:Y()}],"border-w-x":[{"border-x":Y()}],"border-w-y":[{"border-y":Y()}],"border-w-s":[{"border-s":Y()}],"border-w-e":[{"border-e":Y()}],"border-w-t":[{"border-t":Y()}],"border-w-r":[{"border-r":Y()}],"border-w-b":[{"border-b":Y()}],"border-w-l":[{"border-l":Y()}],"divide-x":[{"divide-x":Y()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Y()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:["solid","dashed","dotted","double","hidden","none"]}],"divide-style":[{divide:["solid","dashed","dotted","double","hidden","none"]}],"border-color":[{border:O()}],"border-color-x":[{"border-x":O()}],"border-color-y":[{"border-y":O()}],"border-color-s":[{"border-s":O()}],"border-color-e":[{"border-e":O()}],"border-color-t":[{"border-t":O()}],"border-color-r":[{"border-r":O()}],"border-color-b":[{"border-b":O()}],"border-color-l":[{"border-l":O()}],"divide-color":[{divide:O()}],"outline-style":[{outline:["solid","dashed","dotted","double","none","hidden"]}],"outline-offset":[{"outline-offset":[qt,ft,ht]}],"outline-w":[{outline:["",qt,vh,Rl]}],"outline-color":[{outline:O()}],shadow:[{shadow:["","none",u,og,rg]}],"shadow-color":[{shadow:O()}],"inset-shadow":[{"inset-shadow":["none",d,og,rg]}],"inset-shadow-color":[{"inset-shadow":O()}],"ring-w":[{ring:Y()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:O()}],"ring-offset-w":[{"ring-offset":[qt,Rl]}],"ring-offset-color":[{"ring-offset":O()}],"inset-ring-w":[{"inset-ring":Y()}],"inset-ring-color":[{"inset-ring":O()}],"text-shadow":[{"text-shadow":["none",f,og,rg]}],"text-shadow-color":[{"text-shadow":O()}],opacity:[{opacity:[qt,ft,ht]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[qt]}],"mask-image-linear-from-pos":[{"mask-linear-from":z()}],"mask-image-linear-to-pos":[{"mask-linear-to":z()}],"mask-image-linear-from-color":[{"mask-linear-from":O()}],"mask-image-linear-to-color":[{"mask-linear-to":O()}],"mask-image-t-from-pos":[{"mask-t-from":z()}],"mask-image-t-to-pos":[{"mask-t-to":z()}],"mask-image-t-from-color":[{"mask-t-from":O()}],"mask-image-t-to-color":[{"mask-t-to":O()}],"mask-image-r-from-pos":[{"mask-r-from":z()}],"mask-image-r-to-pos":[{"mask-r-to":z()}],"mask-image-r-from-color":[{"mask-r-from":O()}],"mask-image-r-to-color":[{"mask-r-to":O()}],"mask-image-b-from-pos":[{"mask-b-from":z()}],"mask-image-b-to-pos":[{"mask-b-to":z()}],"mask-image-b-from-color":[{"mask-b-from":O()}],"mask-image-b-to-color":[{"mask-b-to":O()}],"mask-image-l-from-pos":[{"mask-l-from":z()}],"mask-image-l-to-pos":[{"mask-l-to":z()}],"mask-image-l-from-color":[{"mask-l-from":O()}],"mask-image-l-to-color":[{"mask-l-to":O()}],"mask-image-x-from-pos":[{"mask-x-from":z()}],"mask-image-x-to-pos":[{"mask-x-to":z()}],"mask-image-x-from-color":[{"mask-x-from":O()}],"mask-image-x-to-color":[{"mask-x-to":O()}],"mask-image-y-from-pos":[{"mask-y-from":z()}],"mask-image-y-to-pos":[{"mask-y-to":z()}],"mask-image-y-from-color":[{"mask-y-from":O()}],"mask-image-y-to-color":[{"mask-y-to":O()}],"mask-image-radial":[{"mask-radial":[ft,ht]}],"mask-image-radial-from-pos":[{"mask-radial-from":z()}],"mask-image-radial-to-pos":[{"mask-radial-to":z()}],"mask-image-radial-from-color":[{"mask-radial-from":O()}],"mask-image-radial-to-color":[{"mask-radial-to":O()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"]}],"mask-image-conic-pos":[{"mask-conic":[qt]}],"mask-image-conic-from-pos":[{"mask-conic-from":z()}],"mask-image-conic-to-pos":[{"mask-conic-to":z()}],"mask-image-conic-from-color":[{"mask-conic-from":O()}],"mask-image-conic-to-color":[{"mask-conic-to":O()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:H()}],"mask-repeat":[{mask:["no-repeat",{repeat:["","x","y","space","round"]}]}],"mask-size":[{mask:q()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ft,ht]}],filter:[{filter:["","none",ft,ht]}],blur:[{blur:$()}],brightness:[{brightness:[qt,ft,ht]}],contrast:[{contrast:[qt,ft,ht]}],"drop-shadow":[{"drop-shadow":["","none",m,og,rg]}],"drop-shadow-color":[{"drop-shadow":O()}],grayscale:[{grayscale:["",qt,ft,ht]}],"hue-rotate":[{"hue-rotate":[qt,ft,ht]}],invert:[{invert:["",qt,ft,ht]}],saturate:[{saturate:[qt,ft,ht]}],sepia:[{sepia:["",qt,ft,ht]}],"backdrop-filter":[{"backdrop-filter":["","none",ft,ht]}],"backdrop-blur":[{"backdrop-blur":$()}],"backdrop-brightness":[{"backdrop-brightness":[qt,ft,ht]}],"backdrop-contrast":[{"backdrop-contrast":[qt,ft,ht]}],"backdrop-grayscale":[{"backdrop-grayscale":["",qt,ft,ht]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[qt,ft,ht]}],"backdrop-invert":[{"backdrop-invert":["",qt,ft,ht]}],"backdrop-opacity":[{"backdrop-opacity":[qt,ft,ht]}],"backdrop-saturate":[{"backdrop-saturate":[qt,ft,ht]}],"backdrop-sepia":[{"backdrop-sepia":["",qt,ft,ht]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":S()}],"border-spacing-x":[{"border-spacing-x":S()}],"border-spacing-y":[{"border-spacing-y":S()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ft,ht]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[qt,"initial",ft,ht]}],ease:[{ease:["linear","initial",v,ft,ht]}],delay:[{delay:[qt,ft,ht]}],animate:[{animate:["none",w,ft,ht]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[y,ft,ht]}],"perspective-origin":[{"perspective-origin":_()}],rotate:[{rotate:X()}],"rotate-x":[{"rotate-x":X()}],"rotate-y":[{"rotate-y":X()}],"rotate-z":[{"rotate-z":X()}],scale:[{scale:K()}],"scale-x":[{"scale-x":K()}],"scale-y":[{"scale-y":K()}],"scale-z":[{"scale-z":K()}],"scale-3d":["scale-3d"],skew:[{skew:oe()}],"skew-x":[{"skew-x":oe()}],"skew-y":[{"skew-y":oe()}],transform:[{transform:[ft,ht,"","none","gpu","cpu"]}],"transform-origin":[{origin:_()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:pe()}],"translate-x":[{"translate-x":pe()}],"translate-y":[{"translate-y":pe()}],"translate-z":[{"translate-z":pe()}],"translate-none":["translate-none"],accent:[{accent:O()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:O()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ft,ht]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":S()}],"scroll-mx":[{"scroll-mx":S()}],"scroll-my":[{"scroll-my":S()}],"scroll-ms":[{"scroll-ms":S()}],"scroll-me":[{"scroll-me":S()}],"scroll-mt":[{"scroll-mt":S()}],"scroll-mr":[{"scroll-mr":S()}],"scroll-mb":[{"scroll-mb":S()}],"scroll-ml":[{"scroll-ml":S()}],"scroll-p":[{"scroll-p":S()}],"scroll-px":[{"scroll-px":S()}],"scroll-py":[{"scroll-py":S()}],"scroll-ps":[{"scroll-ps":S()}],"scroll-pe":[{"scroll-pe":S()}],"scroll-pt":[{"scroll-pt":S()}],"scroll-pr":[{"scroll-pr":S()}],"scroll-pb":[{"scroll-pb":S()}],"scroll-pl":[{"scroll-pl":S()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ft,ht]}],fill:[{fill:["none",...O()]}],"stroke-w":[{stroke:[qt,vh,Rl,Ew]}],stroke:[{stroke:["none",...O()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}});var m7=["children","onClick","active","disabled","className","anchorRef"];function g7(t){var e=t.children,n=t.onClick,i=t.active,r=i!==void 0&&i,o=t.disabled,s=o!==void 0&&o,a=t.className,l=a===void 0?"":a,c=t.anchorRef,u=Dy(t,m7);return M("button",Ee({ref:c,onClick:n,disabled:s,className:mp("flex h-[32px] w-auto min-w-[32px] items-center justify-center rounded-md p-[5px] transition-colors hover:bg-interactive-hover hover:ring hover:ring-accent cursor-pointer rounded-none px-2 py-1 text-sm hover:bg-transparent border-b-2 hover:border-b-fg-muted hover:ring-transparent",r?"border-b-accent text-accent hover:border-b-accent":"border-b-transparent",s?"cursor-not-allowed opacity-50":"",l)},u),e)}var Df=function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M9 6l6 6l-6 6"}))},tC=function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M15 6l-6 6l6 6"}))},PF=function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M6 9l6 6l6 -6"}))},RF=function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"}),M("path",{d:"M21 21l-6 -6"}))},DF=function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M18 6l-12 12"}),M("path",{d:"M6 6l12 12"}))},v7={download:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"}),M("path",{d:"M7 11l5 5l5 -5"}),M("path",{d:"M12 4l0 12"}))},menu:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M4 8l16 0"}),M("path",{d:"M4 16l16 0"}))},fullscreen:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M4 8v-2a2 2 0 0 1 2 -2h2"}),M("path",{d:"M4 16v2a2 2 0 0 0 2 2h2"}),M("path",{d:"M16 4h2a2 2 0 0 1 2 2v2"}),M("path",{d:"M16 20h2a2 2 0 0 0 2 -2v-2"}))},fullscreenExit:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M4 8v-2c0 -.551 .223 -1.05 .584 -1.412"}),M("path",{d:"M4 16v2a2 2 0 0 0 2 2h2"}),M("path",{d:"M16 4h2a2 2 0 0 1 2 2v2"}),M("path",{d:"M16 20h2c.545 0 1.04 -.218 1.4 -.572"}),M("path",{d:"M3 3l18 18"}))},save:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2"}),M("path",{d:"M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),M("path",{d:"M14 4l0 4l-6 0l0 -4"}))},print:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M17 17h2a2 2 0 0 0 2 -2v-4a2 2 0 0 0 -2 -2h-14a2 2 0 0 0 -2 2v4a2 2 0 0 0 2 2h2"}),M("path",{d:"M17 9v-4a2 2 0 0 0 -2 -2h-6a2 2 0 0 0 -2 2v4"}),M("path",{d:"M7 13m0 2a2 2 0 0 1 2 -2h6a2 2 0 0 1 2 2v4a2 2 0 0 1 -2 2h-6a2 2 0 0 1 -2 -2z"}))},settings:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z"}),M("path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0"}))},viewSettings:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),M("path",{d:"M12 10.5v1.5"}),M("path",{d:"M12 16v1.5"}),M("path",{d:"M15.031 12.25l-1.299 .75"}),M("path",{d:"M10.268 15l-1.3 .75"}),M("path",{d:"M15 15.803l-1.285 -.773"}),M("path",{d:"M10.285 12.97l-1.285 -.773"}),M("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),M("path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"}))},rotateClockwise:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M4.05 11a8 8 0 1 1 .5 4m-.5 5v-5h5"}))},rotateCounterClockwise:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M19.95 11a8 8 0 1 0 -.5 4m.5 5v-5h-5"}))},singlePage:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M5 3m0 1a1 1 0 0 1 1 -1h12a1 1 0 0 1 1 1v16a1 1 0 0 1 -1 1h-12a1 1 0 0 1 -1 -1z"}))},doublePage:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M3 3m0 1a1 1 0 0 1 1 -1h16a1 1 0 0 1 1 1v16a1 1 0 0 1 -1 1h-16a1 1 0 0 1 -1 -1zm9 -1v18"}))},zoomIn:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0"}),M("path",{d:"M9 12h6"}),M("path",{d:"M12 9v6"}))},zoomOut:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}),M("path",{d:"M9 12l6 0"}))},fitToWidth:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M4 12v-6a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v6"}),M("path",{d:"M10 18h-7"}),M("path",{d:"M21 18h-7"}),M("path",{d:"M6 15l-3 3l3 3"}),M("path",{d:"M18 15l3 3l-3 3"}))},fitToPage:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M12 20h-6a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h6"}),M("path",{d:"M18 14v7"}),M("path",{d:"M18 3v7"}),M("path",{d:"M15 18l3 3l3 -3"}),M("path",{d:"M15 6l3 -3l3 3"}))},chevronRight:Df,chevronLeft:tC,chevronDown:PF,search:RF,comment:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M12 11v.01"}),M("path",{d:"M8 11v.01"}),M("path",{d:"M16 11v.01"}),M("path",{d:"M18 4a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-5l-5 3v-3h-2a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3z"}))},sidebar:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M4 18v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z"}),M("path",{d:"M14 18v-12a2 2 0 0 0 -2 -2h-6a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h6a2 2 0 0 0 2 -2z"}))},dots:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),M("path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),M("path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}))},vertical:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M8 7l4 -4l4 4"}),M("path",{d:"M8 17l4 4l4 -4"}),M("path",{d:"M12 3l0 18"}))},horizontal:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M7 8l-4 4l4 4"}),M("path",{d:"M17 8l4 4l-4 4"}),M("path",{d:"M3 12l18 0"}))},book:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0"}),M("path",{d:"M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0"}),M("path",{d:"M3 6l0 13"}),M("path",{d:"M12 6l0 13"}),M("path",{d:"M21 6l0 13"}))},book2:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M19 4v16h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12z"}),M("path",{d:"M19 16h-12a2 2 0 0 0 -2 2"}),M("path",{d:"M9 8h6"}))},squares:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M8 10a2 2 0 0 1 2 -2h9a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-9a2 2 0 0 1 -2 -2z"}),M("path",{d:"M16 8v-3a2 2 0 0 0 -2 -2h-9a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h3"}))},listTree:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M9 6h11"}),M("path",{d:"M12 12h8"}),M("path",{d:"M15 18h5"}),M("path",{d:"M5 6v.01"}),M("path",{d:"M8 12v.01"}),M("path",{d:"M11 18v.01"}))},paperclip:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M15 7l-6.5 6.5a1.5 1.5 0 0 0 3 3l6.5 -6.5a3 3 0 0 0 -6 -6l-6.5 6.5a4.5 4.5 0 0 0 9 9l6.5 -6.5"}))},copy:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z"}),M("path",{d:"M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1"}))},underline:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor,s=o===void 0?"currentColor":o;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none","stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M4 20h16",stroke:s}),M("path",{d:"M8 16v-8a4 4 0 1 1 8 0v8",stroke:"currentColor"}),M("path",{d:"M8 10h8",stroke:"currentColor"}))},squiggly:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor,s=o===void 0?"currentColor":o;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none","stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M8 16v-8a4 4 0 1 1 8 0v8",stroke:"currentColor"}),M("path",{d:"M8 10h8",stroke:"currentColor"}),M("path",{d:"M4 20c1.5 -1.5 3.5 -1.5 5 0s3.5 1.5 5 0 3.5 -1.5 5 0",stroke:s}))},strikethrough:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor,s=o===void 0?"currentColor":o;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none","stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M8 16v-8a4 4 0 1 1 8 0v8",stroke:"currentColor"}),M("path",{d:"M4 10h16",stroke:s}))},highlight:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor,s=o===void 0?"currentColor":o;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none","stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("rect",{x:"2",y:"6",width:"20",height:"16",rx:"2",fill:s,stroke:"none"}),M("path",{d:"M8 16v-8a4 4 0 1 1 8 0v8",stroke:"currentColor"}),M("path",{d:"M8 10h8",stroke:"currentColor"}))},palette:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M12 21a9 9 0 0 1 0 -18c4.97 0 9 3.582 9 8c0 1.06 -.474 2.078 -1.318 2.828c-.844 .75 -1.989 1.172 -3.182 1.172h-2.5a2 2 0 0 0 -1 3.75a1.3 1.3 0 0 1 -1 2.25"}),M("path",{d:"M8.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),M("path",{d:"M12.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),M("path",{d:"M16.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}))},x:DF,fileImport:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),M("path",{d:"M5 13v-8a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2h-5.5m-9.5 -2h7m-3 -3l3 3l-3 3"}))},hand:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M8 13v-7.5a1.5 1.5 0 0 1 3 0v6.5"}),M("path",{d:"M11 5.5v-2a1.5 1.5 0 1 1 3 0v8.5"}),M("path",{d:"M14 5.5a1.5 1.5 0 0 1 3 0v6.5"}),M("path",{d:"M17 7.5a1.5 1.5 0 0 1 3 0v8.5a6 6 0 0 1 -6 6h-2h.208a6 6 0 0 1 -5.012 -2.7a69.74 69.74 0 0 1 -.196 -.3c-.312 -.479 -1.407 -2.388 -3.286 -5.728a1.5 1.5 0 0 1 .536 -2.022a1.867 1.867 0 0 1 2.28 .28l1.47 1.47"}))},zoomInArea:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M15 13v4"}),M("path",{d:"M13 15h4"}),M("path",{d:"M15 15m-5 0a5 5 0 1 0 10 0a5 5 0 1 0 -10 0"}),M("path",{d:"M22 22l-3 -3"}),M("path",{d:"M6 18h-1a2 2 0 0 1 -2 -2v-1"}),M("path",{d:"M3 11v-1"}),M("path",{d:"M3 6v-1a2 2 0 0 1 2 -2h1"}),M("path",{d:"M10 3h1"}),M("path",{d:"M15 3h1a2 2 0 0 1 2 2v1"}))},screenshot:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M7 19a2 2 0 0 1 -2 -2"}),M("path",{d:"M5 13v-2"}),M("path",{d:"M5 7a2 2 0 0 1 2 -2"}),M("path",{d:"M11 5h2"}),M("path",{d:"M17 5a2 2 0 0 1 2 2"}),M("path",{d:"M19 11v2"}),M("path",{d:"M19 17v4"}),M("path",{d:"M21 19h-4"}),M("path",{d:"M13 19h-2"}))},arrowBackUp:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M9 14l-4 -4l4 -4"}),M("path",{d:"M5 10h11a4 4 0 1 1 0 8h-1"}))},arrowForwardUp:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M15 14l4 -4l-4 -4"}),M("path",{d:"M19 10h-11a4 4 0 1 0 0 8h1"}))},trash:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M4 7l16 0"}),M("path",{d:"M10 11l0 6"}),M("path",{d:"M14 11l0 6"}),M("path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"}),M("path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"}))},deviceFloppy:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2"}),M("path",{d:"M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),M("path",{d:"M14 4l0 4l-6 0l0 -4"}))},pencilMarker:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor,s=o===void 0?"currentColor":o;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":r,class:t.className,role:"img","aria-label":t.title},M("path",{d:"m9.109 16.275 8.856-8.097c.812-.743.87-2.014.127-2.826s-2.014-.869-2.826-.127L6.41 13.322l-.127 2.826zM13.79 6.575l2.7 2.952",stroke:"currentColor"}),M("path",{stroke:s,d:"M19.375 20.125c.569.063-4.05-.562-6.412-.437s-4.759 1.229-6.857 1.625c-1.764.687-3.404-.938-1.981-2.5"}))},circle:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor,s=o===void 0?"currentColor":o,a=t.secondaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:a===void 0?"none":a,stroke:s,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}))},square:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor,s=o===void 0?"currentColor":o,a=t.secondaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:a===void 0?"none":a,stroke:s,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z"}))},line:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2.2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M20 4l-16 16"}))},lineArrow:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2.2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M20 4l-16 16"}),M("path",{d:"M16 3h5v5"}))},polygon:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor,s=o===void 0?"currentColor":o,a=t.secondaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:a===void 0?"none":a,stroke:s,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M13.163 2.168l8.021 5.828c.694 .504 .984 1.397 .719 2.212l-3.064 9.43a1.978 1.978 0 0 1 -1.881 1.367h-9.916a1.978 1.978 0 0 1 -1.881 -1.367l-3.064 -9.43a1.978 1.978 0 0 1 .719 -2.212l8.021 -5.828a1.978 1.978 0 0 1 2.326 0z"}))},zigzag:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{d:"M12 2.4L21.36 11.76L2.64 12.24L12 21.6"}))},text:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M6.5 15.5m-3.5 0a3.5 3.5 0 1 0 7 0a3.5 3.5 0 1 0 -7 0"}),M("path",{d:"M14 19v-10.5a3.5 3.5 0 0 1 7 0v10.5"}),M("path",{d:"M14 13h7"}),M("path",{d:"M10 12v7"}))},italic:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M11 5l6 0"}),M("path",{d:"M7 19l6 0"}),M("path",{d:"M14 5l-4 14"}))},bold:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M7 5h6a3.5 3.5 0 0 1 0 7h-6z"}),M("path",{d:"M13 12h1a3.5 3.5 0 0 1 0 7h-7v-7"}))},alignLeft:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M4 6l16 0"}),M("path",{d:"M4 12l10 0"}),M("path",{d:"M4 18l14 0"}))},alignCenter:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M4 6l16 0"}),M("path",{d:"M8 12l8 0"}),M("path",{d:"M6 18l12 0"}))},alignRight:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M4 6l16 0"}),M("path",{d:"M10 12l10 0"}),M("path",{d:"M6 18l14 0"}))},alignTop:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M3 19v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z"}),M("path",{d:"M11 13h2"}),M("path",{d:"M9 10h6"}),M("path",{d:"M10 7h4"}))},alignMiddle:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M3 19v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z"}),M("path",{d:"M11 15h2"}),M("path",{d:"M9 12h6"}),M("path",{d:"M10 9h4"}))},alignBottom:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M3 19v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z"}),M("path",{d:"M11 17h2"}),M("path",{d:"M9 14h6"}),M("path",{d:"M10 11h4"}))},photo:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M15 8h.01"}),M("path",{d:"M3 6a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v12a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3v-12z"}),M("path",{d:"M3 16l5 -5c.928 -.893 2.072 -.893 3 0l5 5"}),M("path",{d:"M14 14l1 -1c.928 -.893 2.072 -.893 3 0l3 3"}))},pointer:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M7.904 17.563a1.2 1.2 0 0 0 2.228 .308l2.09 -3.093l4.907 4.907a1.067 1.067 0 0 0 1.509 0l1.047 -1.047a1.067 1.067 0 0 0 0 -1.509l-4.907 -4.907l3.113 -2.09a1.2 1.2 0 0 0 -.309 -2.228l-13.582 -3.904l3.904 13.563z"}))},redact:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M7 4h10"}),M("path",{d:"M12 4v8"}),M("defs",null,M("clipPath",{id:"stripeClip"},M("rect",{x:"2",y:"12",width:"20",height:"10",rx:"2"}))),M("rect",{x:"2",y:"12",width:"20",height:"10",rx:"2",fill:"none"}),M("g",{"clip-path":"url(#stripeClip)"},M("path",{d:"M-7 24l12 -12"}),M("path",{d:"M-3 24l12 -12"}),M("path",{d:"M1 24l12 -12"}),M("path",{d:"M5 24l12 -12"}),M("path",{d:"M9 24l12 -12"}),M("path",{d:"M13 24l12 -12"}),M("path",{d:"M17 24l12 -12"}),M("path",{d:"M21 24l12 -12"}),M("path",{d:"M25 24l12 -12"})))},redactArea:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M6 20h-1a2 2 0 0 1 -2 -2v-1"}),M("path",{d:"M3 13v-3"}),M("path",{d:"M3 6v-1a2 2 0 0 1 2 -2h1"}),M("path",{d:"M10 3h3"}),M("path",{d:"M17 3h1a2 2 0 0 1 2 2v1"}),M("defs",null,M("clipPath",{id:"redactClip"},M("rect",{x:"10",y:"10",width:"12",height:"12",rx:"2"}))),M("rect",{x:"10",y:"10",width:"12",height:"12",rx:"2",fill:"none"}),M("g",{"clip-path":"url(#redactClip)"},M("path",{d:"M-2 24l14 -14"}),M("path",{d:"M2 24l14 -14"}),M("path",{d:"M6 24l14 -14"}),M("path",{d:"M10 24l15 -15"}),M("path",{d:"M14 24l15 -15"}),M("path",{d:"M18 24l15 -15"})))},check:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor;return M("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:o===void 0?"currentColor":o,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:t.className,role:"img","aria-label":t.title},M("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M("path",{d:"M5 12l5 5l10 -10"}))},file:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor,s=o===void 0?"currentColor":o,a=t.className,l=t.title;return M("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:s,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:a,"aria-hidden":!l,role:l?"img":"presentation"},l&&M("title",null,l),M("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),M("polyline",{points:"14 2 14 8 20 8"}))},plus:function(t){var e=t.size,n=e===void 0?24:e,i=t.strokeWidth,r=i===void 0?2:i,o=t.primaryColor,s=o===void 0?"currentColor":o,a=t.className,l=t.title;return M("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:s,"stroke-width":r,"stroke-linecap":"round","stroke-linejoin":"round",class:a,"aria-hidden":!l,role:l?"img":"presentation"},l&&M("title",null,l),M("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),M("line",{x1:"5",y1:"12",x2:"19",y2:"12"}))},lock:function(t){var e=t.size,n=e===void 0?24:e,i=t.className;return M("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i===void 0?"":i,style:t.style},M("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),M("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"}))},alertTriangle:function(t){var e=t.size,n=e===void 0?24:e,i=t.className;return M("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i===void 0?"":i,style:t.style},M("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),M("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),M("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"}))}},Gb=new Map,y7=/^[MmZzLlHhVvCcSsQqTtAa0-9\s,.\-eE]+$/;function x7(t){return y7.test(t.trim())}function kF(t,e){for(var n=function(o){var s,a;return"path"in o?{viewBox:o.viewBox||"0 0 24 24",paths:[{d:o.path,stroke:(s=o.stroke)!==null&&s!==void 0?s:"primary",fill:(a=o.fill)!==null&&a!==void 0?a:"none",strokeWidth:o.strokeWidth}],strokeLinecap:o.strokeLinecap||"round",strokeLinejoin:o.strokeLinejoin||"round",strokeWidth:o.strokeWidth}:{viewBox:o.viewBox||"0 0 24 24",paths:o.paths,strokeLinecap:o.strokeLinecap||"round",strokeLinejoin:o.strokeLinejoin||"round",strokeWidth:o.strokeWidth}}(e),i=0;i<n.paths.length;i++){var r=n.paths[i];if(!r.d||!x7(r.d))throw new Error('Invalid path data for icon "'.concat(t,'" at path index ').concat(i,". ")+"Path must only contain valid SVG path commands.")}Gb.set(t,n)}function KI(t){for(var e=0,n=Object.entries(t);e<n.length;e++){var i=Ge(n[e],2);kF(i[0],i[1])}}function QI(t,e,n){return t&&t!=="none"?t==="primary"?e:t==="secondary"?n:t==="currentColor"?"currentColor":t:"none"}function Mn(t){var e,n=t.icon,i=t.title,r=t.size,o=r===void 0?24:r,s=t.strokeWidth,a=s===void 0?2:s,l=t.primaryColor,c=l===void 0?"currentColor":l,u=t.secondaryColor,d=u===void 0?"none":u,f=t.className,m=v7[n];if(m)return M(m,{size:o,strokeWidth:a,primaryColor:c,secondaryColor:d,className:f,title:i});if(e=n,Gb.has(e)){var g=function(y){return Gb.get(y)}(n);return function(y,x){var v,w=x.size,_=x.strokeWidth,S=x.primaryColor,E=x.secondaryColor,T=x.className,P=x.title,D=(v=y.strokeWidth)!==null&&v!==void 0?v:_;return M("svg",{width:w,height:w,viewBox:y.viewBox,"stroke-linecap":y.strokeLinecap,"stroke-linejoin":y.strokeLinejoin,class:T,role:"img","aria-label":P},y.paths.map(function(A,R){var N,O=QI(A.stroke,S,E),H=QI(A.fill,S,E),q=(N=A.strokeWidth)!==null&&N!==void 0?N:D;return M("path",{key:R,d:A.d,stroke:O,fill:H,"stroke-width":O!=="none"?q:void 0,opacity:A.opacity})}))}(g,{size:o,strokeWidth:a,primaryColor:c,secondaryColor:d,className:f,title:i})}return console.warn("Icon not found: ".concat(n)),null}var w7=["id","children","onClick","active","disabled","className","tooltip","elementRef"];function la(t){var e=t.id,n=t.children,i=t.onClick,r=t.active,o=r!==void 0&&r,s=t.disabled,a=s!==void 0&&s,l=t.className,c=l===void 0?"":l,u=t.tooltip,d=t.elementRef,f=Dy(t,w7);return M("button",Ee({id:e,ref:d,onClick:i,className:"flex h-[32px] w-auto min-w-[32px] items-center justify-center rounded-md p-[5px] transition-colors ".concat(o?"bg-interactive-selected text-accent ring-accent border-none shadow ring":"hover:bg-interactive-hover hover:ring-accent hover:ring"," ").concat(a?"cursor-not-allowed opacity-50 hover:bg-transparent hover:ring-0":"cursor-pointer"," ").concat(c),title:u},f),n)}const fd=Math.min,lc=Math.max,d0=Math.round,sg=Math.floor,_s=t=>({x:t,y:t}),_7={left:"right",right:"left",bottom:"top",top:"bottom"},b7={start:"end",end:"start"};function jb(t,e,n){return lc(t,fd(e,n))}function gp(t,e){return typeof t=="function"?t(e):t}function _c(t){return t.split("-")[0]}function vp(t){return t.split("-")[1]}function NF(t){return t==="x"?"y":"x"}function nC(t){return t==="y"?"height":"width"}const S7=new Set(["top","bottom"]);function ja(t){return S7.has(_c(t))?"y":"x"}function iC(t){return NF(ja(t))}function qb(t){return t.replace(/start|end/g,e=>b7[e])}const JI=["left","right"],eP=["right","left"],M7=["top","bottom"],C7=["bottom","top"];function E7(t,e,n,i){const r=vp(t);let o=function(s,a,l){switch(s){case"top":case"bottom":return l?a?eP:JI:a?JI:eP;case"left":case"right":return a?M7:C7;default:return[]}}(_c(t),n==="start",i);return r&&(o=o.map(s=>s+"-"+r),e&&(o=o.concat(o.map(qb)))),o}function ag(t){return t.replace(/left|right|bottom|top/g,e=>_7[e])}function LF(t){return typeof t!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(t):{top:t,right:t,bottom:t,left:t}}function h0(t){const{x:e,y:n,width:i,height:r}=t;return{width:i,height:r,top:n,left:e,right:e+i,bottom:n+r,x:e,y:n}}function tP(t,e,n){let{reference:i,floating:r}=t;const o=ja(e),s=iC(e),a=nC(s),l=_c(e),c=o==="y",u=i.x+i.width/2-r.width/2,d=i.y+i.height/2-r.height/2,f=i[a]/2-r[a]/2;let m;switch(l){case"top":m={x:u,y:i.y-r.height};break;case"bottom":m={x:u,y:i.y+i.height};break;case"right":m={x:i.x+i.width,y:d};break;case"left":m={x:i.x-r.width,y:d};break;default:m={x:i.x,y:i.y}}switch(vp(e)){case"start":m[s]-=f*(n&&c?-1:1);break;case"end":m[s]+=f*(n&&c?-1:1)}return m}async function zF(t,e){var n;e===void 0&&(e={});const{x:i,y:r,platform:o,rects:s,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:m=0}=gp(e,t),g=LF(m),y=a[f?d==="floating"?"reference":"floating":d],x=h0(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(y)))==null||n?y:y.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),v=d==="floating"?{x:i,y:r,width:s.floating.width,height:s.floating.height}:s.reference,w=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),_=await(o.isElement==null?void 0:o.isElement(w))&&await(o.getScale==null?void 0:o.getScale(w))||{x:1,y:1},S=h0(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:w,strategy:l}):v);return{top:(x.top-S.top+g.top)/_.y,bottom:(S.bottom-x.bottom+g.bottom)/_.y,left:(x.left-S.left+g.left)/_.x,right:(S.right-x.right+g.right)/_.x}}const T7=new Set(["left","top"]);function jy(){return typeof window<"u"}function pd(t){return OF(t)?(t.nodeName||"").toLowerCase():"#document"}function Yr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function bs(t){var e;return(e=(OF(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function OF(t){return!!jy()&&(t instanceof Node||t instanceof Yr(t).Node)}function qo(t){return!!jy()&&(t instanceof Element||t instanceof Yr(t).Element)}function Ms(t){return!!jy()&&(t instanceof HTMLElement||t instanceof Yr(t).HTMLElement)}function nP(t){return!(!jy()||typeof ShadowRoot>"u")&&(t instanceof ShadowRoot||t instanceof Yr(t).ShadowRoot)}const A7=new Set(["inline","contents"]);function kf(t){const{overflow:e,overflowX:n,overflowY:i,display:r}=Xo(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!A7.has(r)}const I7=new Set(["table","td","th"]);function P7(t){return I7.has(pd(t))}const R7=[":popover-open",":modal"];function f0(t){return R7.some(e=>{try{return t.matches(e)}catch{return!1}})}const D7=["transform","translate","scale","rotate","perspective"],k7=["transform","translate","scale","rotate","perspective","filter"],N7=["paint","layout","strict","content"];function Xb(t){const e=rC(),n=qo(t)?Xo(t):t;return D7.some(i=>!!n[i]&&n[i]!=="none")||!!n.containerType&&n.containerType!=="normal"||!e&&!!n.backdropFilter&&n.backdropFilter!=="none"||!e&&!!n.filter&&n.filter!=="none"||k7.some(i=>(n.willChange||"").includes(i))||N7.some(i=>(n.contain||"").includes(i))}function rC(){return!(typeof CSS>"u"||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}const L7=new Set(["html","body","#document"]);function ed(t){return L7.has(pd(t))}function Xo(t){return Yr(t).getComputedStyle(t)}function qy(t){return qo(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function qa(t){if(pd(t)==="html")return t;const e=t.assignedSlot||t.parentNode||nP(t)&&t.host||bs(t);return nP(e)?e.host:e}function FF(t){const e=qa(t);return ed(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ms(e)&&kf(e)?e:FF(e)}function Nf(t,e,n){var i;e===void 0&&(e=[]),n===void 0&&(n=!0);const r=FF(t),o=r===((i=t.ownerDocument)==null?void 0:i.body),s=Yr(r);if(o){const a=Yb(s);return e.concat(s,s.visualViewport||[],kf(r)?r:[],a&&n?Nf(a):[])}return e.concat(r,Nf(r,[],n))}function Yb(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function UF(t){const e=Xo(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=Ms(t),o=r?t.offsetWidth:n,s=r?t.offsetHeight:i,a=d0(n)!==o||d0(i)!==s;return a&&(n=o,i=s),{width:n,height:i,$:a}}function oC(t){return qo(t)?t:t.contextElement}function td(t){const e=oC(t);if(!Ms(e))return _s(1);const n=e.getBoundingClientRect(),{width:i,height:r,$:o}=UF(e);let s=(o?d0(n.width):n.width)/i,a=(o?d0(n.height):n.height)/r;return s&&Number.isFinite(s)||(s=1),a&&Number.isFinite(a)||(a=1),{x:s,y:a}}const z7=_s(0);function BF(t){const e=Yr(t);return rC()&&e.visualViewport?{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}:z7}function bc(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),o=oC(t);let s=_s(1);e&&(i?qo(i)&&(s=td(i)):s=td(t));const a=function(f,m,g){return m===void 0&&(m=!1),!(!g||m&&g!==Yr(f))&&m}(o,n,i)?BF(o):_s(0);let l=(r.left+a.x)/s.x,c=(r.top+a.y)/s.y,u=r.width/s.x,d=r.height/s.y;if(o){const f=Yr(o),m=i&&qo(i)?Yr(i):i;let g=f,y=Yb(g);for(;y&&i&&m!==g;){const x=td(y),v=y.getBoundingClientRect(),w=Xo(y),_=v.left+(y.clientLeft+parseFloat(w.paddingLeft))*x.x,S=v.top+(y.clientTop+parseFloat(w.paddingTop))*x.y;l*=x.x,c*=x.y,u*=x.x,d*=x.y,l+=_,c+=S,g=Yr(y),y=Yb(g)}}return h0({width:u,height:d,x:l,y:c})}function p0(t,e){const n=qy(t).scrollLeft;return e?e.left+n:bc(bs(t)).left+n}function HF(t,e){const n=t.getBoundingClientRect();return{x:n.left+e.scrollLeft-p0(t,n),y:n.top+e.scrollTop}}const O7=new Set(["absolute","fixed"]);function iP(t,e,n){let i;if(e==="viewport")i=function(r,o){const s=Yr(r),a=bs(r),l=s.visualViewport;let c=a.clientWidth,u=a.clientHeight,d=0,f=0;if(l){c=l.width,u=l.height;const g=rC();(!g||g&&o==="fixed")&&(d=l.offsetLeft,f=l.offsetTop)}const m=p0(a);if(m<=0){const g=a.ownerDocument,y=g.body,x=getComputedStyle(y),v=g.compatMode==="CSS1Compat"&&parseFloat(x.marginLeft)+parseFloat(x.marginRight)||0,w=Math.abs(a.clientWidth-y.clientWidth-v);w<=25&&(c-=w)}else m<=25&&(c+=m);return{width:c,height:u,x:d,y:f}}(t,n);else if(e==="document")i=function(r){const o=bs(r),s=qy(r),a=r.ownerDocument.body,l=lc(o.scrollWidth,o.clientWidth,a.scrollWidth,a.clientWidth),c=lc(o.scrollHeight,o.clientHeight,a.scrollHeight,a.clientHeight);let u=-s.scrollLeft+p0(r);const d=-s.scrollTop;return Xo(a).direction==="rtl"&&(u+=lc(o.clientWidth,a.clientWidth)-l),{width:l,height:c,x:u,y:d}}(bs(t));else if(qo(e))i=function(r,o){const s=bc(r,!0,o==="fixed"),a=s.top+r.clientTop,l=s.left+r.clientLeft,c=Ms(r)?td(r):_s(1);return{width:r.clientWidth*c.x,height:r.clientHeight*c.y,x:l*c.x,y:a*c.y}}(e,n);else{const r=BF(t);i={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return h0(i)}function VF(t,e){const n=qa(t);return!(n===e||!qo(n)||ed(n))&&(Xo(n).position==="fixed"||VF(n,e))}function F7(t,e,n){const i=Ms(e),r=bs(e),o=n==="fixed",s=bc(t,!0,o,e);let a={scrollLeft:0,scrollTop:0};const l=_s(0);function c(){l.x=p0(r)}if(i||!i&&!o)if((pd(e)!=="body"||kf(r))&&(a=qy(e)),i){const d=bc(e,!0,o,e);l.x=d.x+e.clientLeft,l.y=d.y+e.clientTop}else r&&c();o&&!i&&r&&c();const u=!r||i||o?_s(0):HF(r,a);return{x:s.left+a.scrollLeft-l.x-u.x,y:s.top+a.scrollTop-l.y-u.y,width:s.width,height:s.height}}function Tw(t){return Xo(t).position==="static"}function rP(t,e){if(!Ms(t)||Xo(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return bs(t)===n&&(n=n.ownerDocument.body),n}function oP(t,e){const n=Yr(t);if(f0(t))return n;if(!Ms(t)){let r=qa(t);for(;r&&!ed(r);){if(qo(r)&&!Tw(r))return r;r=qa(r)}return n}let i=rP(t,e);for(;i&&P7(i)&&Tw(i);)i=rP(i,e);return i&&ed(i)&&Tw(i)&&!Xb(i)?n:i||function(r){let o=qa(r);for(;Ms(o)&&!ed(o);){if(Xb(o))return o;if(f0(o))return null;o=qa(o)}return null}(t)||n}const U7={convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{elements:e,rect:n,offsetParent:i,strategy:r}=t;const o=r==="fixed",s=bs(i),a=!!e&&f0(e.floating);if(i===s||a&&o)return n;let l={scrollLeft:0,scrollTop:0},c=_s(1);const u=_s(0),d=Ms(i);if((d||!d&&!o)&&((pd(i)!=="body"||kf(s))&&(l=qy(i)),Ms(i))){const m=bc(i);c=td(i),u.x=m.x+i.clientLeft,u.y=m.y+i.clientTop}const f=!s||d||o?_s(0):HF(s,l);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:n.y*c.y-l.scrollTop*c.y+u.y+f.y}},getDocumentElement:bs,getClippingRect:function(t){let{element:e,boundary:n,rootBoundary:i,strategy:r}=t;const o=[...n==="clippingAncestors"?f0(e)?[]:function(l,c){const u=c.get(l);if(u)return u;let d=Nf(l,[],!1).filter(y=>qo(y)&&pd(y)!=="body"),f=null;const m=Xo(l).position==="fixed";let g=m?qa(l):l;for(;qo(g)&&!ed(g);){const y=Xo(g),x=Xb(g);x||y.position!=="fixed"||(f=null),(m?!x&&!f:!x&&y.position==="static"&&f&&O7.has(f.position)||kf(g)&&!x&&VF(l,g))?d=d.filter(v=>v!==g):f=y,g=qa(g)}return c.set(l,d),d}(e,this._c):[].concat(n),i],s=o[0],a=o.reduce((l,c)=>{const u=iP(e,c,r);return l.top=lc(u.top,l.top),l.right=fd(u.right,l.right),l.bottom=fd(u.bottom,l.bottom),l.left=lc(u.left,l.left),l},iP(e,s,r));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},getOffsetParent:oP,getElementRects:async function(t){const e=this.getOffsetParent||oP,n=this.getDimensions,i=await n(t.floating);return{reference:F7(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}},getClientRects:function(t){return Array.from(t.getClientRects())},getDimensions:function(t){const{width:e,height:n}=UF(t);return{width:e,height:n}},getScale:td,isElement:qo,isRTL:function(t){return Xo(t).direction==="rtl"}};function sP(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function B7(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:o=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,c=oC(t),u=r||o?[...c?Nf(c):[],...Nf(e)]:[];u.forEach(x=>{r&&x.addEventListener("scroll",n,{passive:!0}),o&&x.addEventListener("resize",n)});const d=c&&a?function(x,v){let w,_=null;const S=bs(x);function E(){var T;clearTimeout(w),(T=_)==null||T.disconnect(),_=null}return function T(P,D){P===void 0&&(P=!1),D===void 0&&(D=1),E();const A=x.getBoundingClientRect(),{left:R,top:N,width:O,height:H}=A;if(P||v(),!O||!H)return;const q={rootMargin:-sg(N)+"px "+-sg(S.clientWidth-(R+O))+"px "+-sg(S.clientHeight-(N+H))+"px "+-sg(R)+"px",threshold:lc(0,fd(1,D))||1};let Z=!0;function G(Y){const z=Y[0].intersectionRatio;if(z!==D){if(!Z)return T();z?T(!1,z):w=setTimeout(()=>{T(!1,1e-7)},1e3)}z!==1||sP(A,x.getBoundingClientRect())||T(),Z=!1}try{_=new IntersectionObserver(G,{...q,root:S.ownerDocument})}catch{_=new IntersectionObserver(G,q)}_.observe(x)}(!0),E}(c,n):null;let f,m=-1,g=null;s&&(g=new ResizeObserver(x=>{let[v]=x;v&&v.target===c&&g&&(g.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var w;(w=g)==null||w.observe(e)})),n()}),c&&!l&&g.observe(c),g.observe(e));let y=l?bc(t):null;return l&&function x(){const v=bc(t);y&&!sP(y,v)&&n(),y=v,f=requestAnimationFrame(x)}(),n(),()=>{var x;u.forEach(v=>{r&&v.removeEventListener("scroll",n),o&&v.removeEventListener("resize",n)}),d==null||d(),(x=g)==null||x.disconnect(),g=null,l&&cancelAnimationFrame(f)}}const H7=function(t){return{name:"offset",options:t,async fn(e){var n,i;const{x:r,y:o,placement:s,middlewareData:a}=e,l=await async function(c,u){const{placement:d,platform:f,elements:m}=c,g=await(f.isRTL==null?void 0:f.isRTL(m.floating)),y=_c(d),x=vp(d),v=ja(d)==="y",w=T7.has(y)?-1:1,_=g&&v?-1:1,S=gp(u,c);let{mainAxis:E,crossAxis:T,alignmentAxis:P}=typeof S=="number"?{mainAxis:S,crossAxis:0,alignmentAxis:null}:{mainAxis:S.mainAxis||0,crossAxis:S.crossAxis||0,alignmentAxis:S.alignmentAxis};return x&&typeof P=="number"&&(T=x==="end"?-1*P:P),v?{x:T*_,y:E*w}:{x:E*w,y:T*_}}(e,t);return s===((n=a.offset)==null?void 0:n.placement)&&(i=a.arrow)!=null&&i.alignmentOffset?{}:{x:r+l.x,y:o+l.y,data:{...l,placement:s}}}}},V7=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:r}=e,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:x=>{let{x:v,y:w}=x;return{x:v,y:w}}},...l}=gp(t,e),c={x:n,y:i},u=await zF(e,l),d=ja(_c(r)),f=NF(d);let m=c[f],g=c[d];if(o){const x=f==="y"?"bottom":"right";m=jb(m+u[f==="y"?"top":"left"],m,m-u[x])}if(s){const x=d==="y"?"bottom":"right";g=jb(g+u[d==="y"?"top":"left"],g,g-u[x])}const y=a.fn({...e,[f]:m,[d]:g});return{...y,data:{x:y.x-n,y:y.y-i,enabled:{[f]:o,[d]:s}}}}}},$7=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,i;const{placement:r,middlewareData:o,rects:s,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:y=!0,...x}=gp(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const v=_c(r),w=ja(a),_=_c(a)===a,S=await(l.isRTL==null?void 0:l.isRTL(c.floating)),E=f||(_||!y?[ag(a)]:function(q){const Z=ag(q);return[qb(q),Z,qb(Z)]}(a)),T=g!=="none";!f&&T&&E.push(...E7(a,y,g,S));const P=[a,...E],D=await zF(e,x),A=[];let R=((i=o.flip)==null?void 0:i.overflows)||[];if(u&&A.push(D[v]),d){const q=function(Z,G,Y){Y===void 0&&(Y=!1);const z=vp(Z),$=iC(Z),X=nC($);let K=$==="x"?z===(Y?"end":"start")?"right":"left":z==="start"?"bottom":"top";return G.reference[X]>G.floating[X]&&(K=ag(K)),[K,ag(K)]}(r,s,S);A.push(D[q[0]],D[q[1]])}if(R=[...R,{placement:r,overflows:A}],!A.every(q=>q<=0)){var N,O;const q=(((N=o.flip)==null?void 0:N.index)||0)+1,Z=P[q];if(Z&&(!(d==="alignment"&&w!==ja(Z))||R.every(Y=>ja(Y.placement)!==w||Y.overflows[0]>0)))return{data:{index:q,overflows:R},reset:{placement:Z}};let G=(O=R.filter(Y=>Y.overflows[0]<=0).sort((Y,z)=>Y.overflows[1]-z.overflows[1])[0])==null?void 0:O.placement;if(!G)switch(m){case"bestFit":{var H;const Y=(H=R.filter(z=>{if(T){const $=ja(z.placement);return $===w||$==="y"}return!0}).map(z=>[z.placement,z.overflows.filter($=>$>0).reduce(($,X)=>$+X,0)]).sort((z,$)=>z[1]-$[1])[0])==null?void 0:H[0];Y&&(G=Y);break}case"initialPlacement":G=a}if(r!==G)return{reset:{placement:G}}}return{}}}},W7=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:r,rects:o,platform:s,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=gp(t,e)||{};if(c==null)return{};const d=LF(u),f={x:n,y:i},m=iC(r),g=nC(m),y=await s.getDimensions(c),x=m==="y",v=x?"top":"left",w=x?"bottom":"right",_=x?"clientHeight":"clientWidth",S=o.reference[g]+o.reference[m]-f[m]-o.floating[g],E=f[m]-o.reference[m],T=await(s.getOffsetParent==null?void 0:s.getOffsetParent(c));let P=T?T[_]:0;P&&await(s.isElement==null?void 0:s.isElement(T))||(P=a.floating[_]||o.floating[g]);const D=S/2-E/2,A=P/2-y[g]/2-1,R=fd(d[v],A),N=fd(d[w],A),O=R,H=P-y[g]-N,q=P/2-y[g]/2+D,Z=jb(O,q,H),G=!l.arrow&&vp(r)!=null&&q!==Z&&o.reference[g]/2-(q<O?R:N)-y[g]/2<0,Y=G?q<O?q-O:q-H:0;return{[m]:f[m]+Y,data:{[m]:Z,centerOffset:q-Z-Y,...G&&{alignmentOffset:Y}},reset:G}}}),G7=(t,e,n)=>{const i=new Map,r={platform:U7,...n},o={...r.platform,_c:i};return(async(s,a,l)=>{const{placement:c="bottom",strategy:u="absolute",middleware:d=[],platform:f}=l,m=d.filter(Boolean),g=await(f.isRTL==null?void 0:f.isRTL(a));let y=await f.getElementRects({reference:s,floating:a,strategy:u}),{x,y:v}=tP(y,c,g),w=c,_={},S=0;for(let E=0;E<m.length;E++){const{name:T,fn:P}=m[E],{x:D,y:A,data:R,reset:N}=await P({x,y:v,initialPlacement:c,placement:w,strategy:u,middlewareData:_,rects:y,platform:f,elements:{reference:s,floating:a}});x=D??x,v=A??v,_={..._,[T]:{..._[T],...R}},N&&S<=50&&(S++,typeof N=="object"&&(N.placement&&(w=N.placement),N.rects&&(y=N.rects===!0?await f.getElementRects({reference:s,floating:a,strategy:u}):N.rects),{x,y:v}=tP(y,w,g)),E=-1)}return{x,y:v,placement:w,strategy:u,middlewareData:_}})(t,e,{...r,platform:o})};var j7=function(){function t(){return bM(this,t),zN(this,t,arguments)}return ON(t,xs),SM(t,[{key:"render",value:function(){return this.props.children}}])}();function q7(t){var e=t.children,n=t.content,i=t.position,r=i===void 0?"top":i,o=t.className,s=o===void 0?"":o,a=t.delay,l=a===void 0?200:a,c=t.style,u=c===void 0?"dark":c,d=t.trigger,f=d===void 0?"hover":d,m=vt(null),g=vt(null),y=vt(null),x=Ge(xe(!1),2),v=x[0],w=x[1],_=vt(null);return ge(function(){var S;if((S=m.current)!==null&&S!==void 0&&S.base&&g.current)return B7(m.current.base,g.current,function(){G7(m.current.base,g.current,{placement:r,middleware:[H7(8),$7(),V7({padding:8}),W7({element:y.current,padding:6})]}).then(function(E){var T,P=E.x,D=E.y,A=E.placement,R=E.middlewareData;Object.assign(g.current.style,{left:"".concat(P,"px"),top:"".concat(D,"px")});var N=(T=R.arrow)!==null&&T!==void 0?T:{},O=N.x,H=N.y,q={top:"bottom",bottom:"top",left:"right",right:"left"}[A.split("-")[0]];Object.assign(y.current.style,pt({left:O!=null?"".concat(O,"px"):"",top:H!=null?"".concat(H,"px"):"",right:"",bottom:""},q,"-4px"))})})},[r,v]),ge(function(){var S,E=(S=m.current)===null||S===void 0?void 0:S.base,T=g.current;if(E&&T){var P=function(){_.current&&clearTimeout(_.current)},D=function(){P(),_.current=setTimeout(function(){return w(!0)},l)},A=function(){P(),w(!1)},R=function(){return w(function(N){return!N})};return f==="hover"?(E.addEventListener("mouseenter",D),E.addEventListener("mouseleave",A),T.addEventListener("mouseenter",D),T.addEventListener("mouseleave",A),E.addEventListener("pointerdown",A)):f==="click"&&E.addEventListener("click",R),f==="none"&&(_.current&&clearTimeout(_.current),w(!1)),function(){P(),f==="hover"?(E.removeEventListener("mouseenter",D),E.removeEventListener("mouseleave",A),T.removeEventListener("mouseenter",D),T.removeEventListener("mouseleave",A),E.removeEventListener("pointerdown",A)):f==="click"&&E.removeEventListener("click",R)}}},[f,l]),M(Tt,null,M("div",{ref:g,role:"tooltip",className:"z-100 pointer-events-none absolute select-none whitespace-nowrap rounded-lg px-3 py-2 text-sm shadow-md transition-opacity duration-150 ".concat(u==="dark"?"bg-tooltip-bg text-tooltip-fg":"border-border-subtle bg-bg-elevated text-fg-primary border"," ").concat(v?"opacity-100":"opacity-0"," ").concat(s," "),style:{visibility:v?"visible":"hidden"}},n,M("div",{ref:y,className:"absolute h-2 w-2 rotate-45 bg-inherit ".concat(u==="light"?"border-border-subtle border":""," ")})),M(j7,{ref:m},e))}function cc(t){var e=t.commandId,n=t.documentId,i=t.variant,r=i===void 0?"icon":i,o=t.itemId,s=t.className,a=Ha(e,n),l=xz(n,o||e);if(!a||!a.visible)return null;var c=a.iconProps||{};return M(q7,{content:a.label,position:"bottom",delay:500,trigger:a.active?"none":"hover"},M(la,{elementRef:l,onClick:function(){a.disabled||a.execute()},active:a.active,disabled:a.disabled,className:s||"p-1","aria-label":a.label},r==="text"?M("span",{className:"text-sm"},a.label):r==="icon-text"?M(Tt,null,a.icon&&M(Mn,{icon:a.icon,className:"mr-2 h-5 w-5",primaryColor:c.primaryColor,secondaryColor:c.secondaryColor}),M("span",null,a.label)):r==="tab"?M("span",{className:"px-3 py-1"},a.label):a.icon?M(Mn,{icon:a.icon,className:mp("h-5 w-5",c.className),primaryColor:c.primaryColor,secondaryColor:c.secondaryColor}):M("span",null,a.label)))}function X7(t){var e=t.schema,n=t.documentId,i=t.isOpen,r=t.className,o=r===void 0?"":r;if(!i)return null;var s=e.position.slot==="secondary",a=function(l){switch(l){case"top":return"border-b border-border-default bg-bg-surface px-4 py-2";case"bottom":return"border-t border-border-default bg-bg-surface px-4 py-2";case"left":return"border-r border-border-default bg-bg-surface px-2 py-3 flex-col";case"right":return"border-l border-border-default bg-bg-surface px-2 py-3 flex-col"}}(e.position.placement);return M("div",Ee({className:mp("flex items-center gap-2",a,s?"bg-bg-surface-alt":"",o)},hi(e)),e.items.map(function(l){return M($F,{key:l.id,item:l,documentId:n})}))}function $F(t){var e=t.item,n=t.documentId;switch(e.type){case"command-button":return M(Y7,{item:e,documentId:n});case"tab-group":return M(Z7,{item:e,documentId:n});case"divider":return M(Q7,{item:e});case"spacer":return M(J7,{item:e});case"group":return M(eq,{item:e,documentId:n});case"custom":return M(tq,{item:e,documentId:n});default:return console.warn("Unknown toolbar item type:",e),null}}function Y7(t){var e=t.item,n=t.documentId;return M("div",Ee({},hi(e)),M(cc,{commandId:e.commandId,documentId:n,itemId:e.id,variant:e.variant}))}function Z7(t){var e=t.item,n=t.documentId;return M("div",Ee(Ee({className:"flex items-center gap-2"},hi(e)),{},{role:"tablist"}),e.tabs.map(function(i){return M(K7,{key:i.id,tab:i,documentId:n})}))}function K7(t){var e=t.tab,n=t.documentId,i=Ha(e.commandId,n),r=xz(n,e.id);return!i||!i.visible?null:M("div",Ee({},hi(e)),M(g7,{anchorRef:r,active:i.active,onClick:function(){i.disabled||i.execute()},disabled:i.disabled},e.variant==="text"&&i.label,e.variant==="icon"&&i.icon&&M(aP,{icon:i.icon,iconProps:i.iconProps}),e.variant==="icon-text"&&M(Tt,null,i.icon&&M(aP,{icon:i.icon,iconProps:i.iconProps}),i.label)))}function aP(t){var e=t.icon,n=t.iconProps;return M(Mn,{icon:e,className:"h-5 w-5",primaryColor:n==null?void 0:n.primaryColor,secondaryColor:n==null?void 0:n.secondaryColor})}function Q7(t){var e=t.item;return M("div",Ee({},hi(e)),M("div",{className:e.orientation==="vertical"?"bg-border-default h-6 w-px":"bg-border-default h-px w-6","aria-hidden":"true"}))}function J7(t){var e=t.item;return M("div",Ee(Ee({className:e.flex?"flex-1":"w-4"},hi(e)),{},{"aria-hidden":"true"}))}function eq(t){var e=t.item,n=t.documentId,i=e.gap?"gap-".concat(e.gap):"gap-2",r=function(o){switch(o){case"start":default:return"justify-start";case"center":return"justify-center";case"end":return"justify-end"}}(e.alignment);return M("div",Ee({className:mp("flex items-center",i,r)},hi(e)),e.items.map(function(o){return M($F,{key:o.id,item:o,documentId:n})}))}function tq(t){var e=t.item,n=t.documentId,i=Vy().renderCustomComponent;return M("div",Ee({},hi(e)),i(e.componentId,n,e.props))}function lP(t,e){for(var n in t)if(n!=="__source"&&!(n in e))return!0;for(var i in e)if(i!=="__source"&&t[i]!==e[i])return!0;return!1}function cP(t,e){this.props=t,this.context=e}(cP.prototype=new xs).isPureReactComponent=!0,cP.prototype.shouldComponentUpdate=function(t,e){return lP(this.props,t)||lP(this.state,e)};var uP=Wt.__b;Wt.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),uP&&uP(t)};var nq=Wt.__e;Wt.__e=function(t,e,n,i){if(t.then){for(var r,o=e;o=o.__;)if((r=o.__c)&&r.__c)return e.__e==null&&(e.__e=n.__e,e.__k=n.__k),r.__c(t,e)}nq(t,e,n,i)};var dP=Wt.unmount;function WF(t,e,n){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(i){typeof i.__c=="function"&&i.__c()}),t.__c.__H=null),(t=function(i,r){for(var o in r)i[o]=r[o];return i}({},t)).__c!=null&&(t.__c.__P===n&&(t.__c.__P=e),t.__c.__e=!0,t.__c=null),t.__k=t.__k&&t.__k.map(function(i){return WF(i,e,n)})),t}function GF(t,e,n){return t&&n&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(i){return GF(i,e,n)}),t.__c&&t.__c.__P===e&&(t.__e&&n.appendChild(t.__e),t.__c.__e=!0,t.__c.__P=n)),t}function Aw(){this.__u=0,this.o=null,this.__b=null}function jF(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function lg(){this.i=null,this.l=null}Wt.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&32&t.__u&&(t.type=null),dP&&dP(t)},(Aw.prototype=new xs).__c=function(t,e){var n=e.__c,i=this;i.o==null&&(i.o=[]),i.o.push(n);var r=jF(i.__v),o=!1,s=function(){o||(o=!0,n.__R=null,r?r(a):a())};n.__R=s;var a=function(){if(!--i.__u){if(i.state.__a){var l=i.state.__a;i.__v.__k[0]=GF(l,l.__c.__P,l.__c.__O)}var c;for(i.setState({__a:i.__b=null});c=i.o.pop();)c.forceUpdate()}};i.__u++||32&e.__u||i.setState({__a:i.__b=i.__v.__k[0]}),t.then(s,s)},Aw.prototype.componentWillUnmount=function(){this.o=[]},Aw.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),i=this.__v.__k[0].__c;this.__v.__k[0]=WF(this.__b,n,i.__O=i.__P)}this.__b=null}var r=e.__a&&M(Tt,null,t.fallback);return r&&(r.__u&=-33),[M(Tt,null,e.__a?null:t.children),r]};var hP=function(t,e,n){if(++n[1]===n[0]&&t.l.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.l.size))for(n=t.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.i=n=n[2]}};function iq(t){return this.getChildContext=function(){return t.context},t.children}function rq(t){var e=this,n=t.h;if(e.componentWillUnmount=function(){Rb(null,e.v),e.v=null,e.h=null},e.h&&e.h!==n&&e.componentWillUnmount(),!e.v){for(var i=e.__v;i!==null&&!i.__m&&i.__!==null;)i=i.__;e.h=n,e.v={nodeType:1,parentNode:n,childNodes:[],__k:{__m:i.__m},contains:function(){return!0},insertBefore:function(r,o){this.childNodes.push(r),e.h.insertBefore(r,o)},removeChild:function(r){this.childNodes.splice(this.childNodes.indexOf(r)>>>1,1),e.h.removeChild(r)}}}Rb(M(iq,{context:e.context},t.__v),e.v)}function qF(t,e){var n=M(rq,{__v:t,h:e});return n.containerInfo=e,n}(lg.prototype=new xs).__a=function(t){var e=this,n=jF(e.__v),i=e.l.get(t);return i[0]++,function(r){var o=function(){e.props.revealOrder?(i.push(r),hP(e,t,i)):r()};n?n(o):o()}},lg.prototype.render=function(t){this.i=null,this.l=new Map;var e=n0(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var n=e.length;n--;)this.l.set(e[n],this.i=[1,0,this.i]);return t.children},lg.prototype.componentDidUpdate=lg.prototype.componentDidMount=function(){var t=this;this.l.forEach(function(e,n){hP(t,n,e)})};var oq=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,sq=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,aq=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,lq=/[A-Z0-9]/g,cq=typeof document<"u",uq=function(t){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(t)};xs.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(xs.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var fP=Wt.event;function dq(){}function hq(){return this.cancelBubble}function fq(){return this.defaultPrevented}Wt.event=function(t){return fP&&(t=fP(t)),t.persist=dq,t.isPropagationStopped=hq,t.isDefaultPrevented=fq,t.nativeEvent=t};var pq={enumerable:!1,configurable:!0,get:function(){return this.class}},pP=Wt.vnode;Wt.vnode=function(t){typeof t.type=="string"&&function(e){var n=e.props,i=e.type,r={},o=i.indexOf("-")===-1;for(var s in n){var a=n[s];if(!(s==="value"&&"defaultValue"in n&&a==null||cq&&s==="children"&&i==="noscript"||s==="class"||s==="className")){var l=s.toLowerCase();s==="defaultValue"&&"value"in n&&n.value==null?s="value":s==="download"&&a===!0?a="":l==="translate"&&a==="no"?a=!1:l[0]==="o"&&l[1]==="n"?l==="ondoubleclick"?s="ondblclick":l!=="onchange"||i!=="input"&&i!=="textarea"||uq(n.type)?l==="onfocus"?s="onfocusin":l==="onblur"?s="onfocusout":aq.test(s)&&(s=l):l=s="oninput":o&&sq.test(s)?s=s.replace(lq,"-$&").toLowerCase():a===null&&(a=void 0),l==="oninput"&&r[s=l]&&(s="oninputCapture"),r[s]=a}}i=="select"&&r.multiple&&Array.isArray(r.value)&&(r.value=n0(n.children).forEach(function(c){c.props.selected=r.value.indexOf(c.props.value)!=-1})),i=="select"&&r.defaultValue!=null&&(r.value=n0(n.children).forEach(function(c){c.props.selected=r.multiple?r.defaultValue.indexOf(c.props.value)!=-1:r.defaultValue==c.props.value})),n.class&&!n.className?(r.class=n.class,Object.defineProperty(r,"className",pq)):(n.className&&!n.class||n.class&&n.className)&&(r.class=r.className=n.className),e.props=r}(t),t.$$typeof=oq,pP&&pP(t)};var mP=Wt.__r;Wt.__r=function(t){mP&&mP(t),t.__c};var gP=Wt.diffed;Wt.diffed=function(t){gP&&gP(t);var e=t.props,n=t.__e;n!=null&&t.type==="textarea"&&"value"in e&&e.value!==n.value&&(n.value=e.value==null?"":e.value)};function mq(t){var e=t.schema,n=t.documentId,i=t.isOpen,r=t.onClose,o=gz().getContainer,s=xe(function(){var v=o();return!!v&&v.clientWidth<768}),a=Ge(s,2),l=a[0],c=a[1];ge(function(){var v=o();if(v){var w=new ResizeObserver(function(){var _=v.clientWidth;c(_<768)});return w.observe(v),function(){return w.disconnect()}}},[o]);var u=e.position,d=e.content,f=e.width,m=Vy().renderCustomComponent,g=o();if(l&&g)return qF(M(gq,{schema:e,documentId:n,isOpen:i,onClose:r,renderCustomComponent:m,content:d,rootElement:g}),g);if(!i)return null;var y=function(v){switch(v){case"left":return"border-r";case"right":return"border-l";case"top":return"border-b";case"bottom":return"border-t"}}(u.placement),x=f?{width:f}:void 0;return M("div",{className:"".concat(y," border-border-default bg-bg-surface flex flex-col shadow-lg"),style:x,"data-sidebar-id":e.id},M("div",{className:"min-h-0 flex-1"},d.type==="tabs"&&M(XF,{content:d,documentId:n,renderCustomComponent:m}),d.type==="component"&&M(Tt,null,m(d.componentId,n,{}))))}function gq(t){var e=t.schema,n=t.documentId,i=t.isOpen,r=t.onClose,o=t.renderCustomComponent,s=t.content,a=t.rootElement,l=Ge(xe("closed"),2),c=l[0],u=l[1],d=Ge(xe(!1),2),f=d[0],m=d[1],g=Ge(xe(0),2),y=g[0],x=g[1],v=Ge(xe(!1),2),w=v[0],_=v[1],S=vt(null),E=vt({y:0,height:0,time:0,state:"half"}),T=vt({y:0,time:0});ge(function(){if(!i){u("closed");var z=setTimeout(function(){_(!1)},300);return function(){return clearTimeout(z)}}_(!0),requestAnimationFrame(function(){requestAnimationFrame(function(){u("half")})})},[i]);var P=function(z){switch(z){case"closed":return 0;case"half":return 50;case"full":return 100}},D=Lt(function(z){if(S.current){var $,X=a.clientHeight,K=S.current.offsetHeight/X*100;$=K>=75?"full":K<=25?"closed":"half",E.current={y:z,height:K,time:Date.now(),state:$},T.current={y:z,time:Date.now()},x(0),$!==c&&u($),m(!0)}},[a,c]),A=Lt(function(z){if(f){var $=a.clientHeight,X=(E.current.y-z)/$*100,K=Math.max(0,Math.min(100,E.current.height+X));T.current={y:z,time:Date.now()};var oe=P(E.current.state);x(K-oe)}},[f,a]),R=Lt(function(){if(f){if(Math.abs(E.current.y-T.current.y)<5)return m(!1),void x(0);var z=P(E.current.state)+y,$=Date.now()-T.current.time,X=T.current.y-E.current.y,K=function(oe,pe){return Math.abs(pe)>.5?pe>0?oe>50?"half":"closed":oe<50?"half":"full":oe>=75?"full":oe<=25?"closed":"half"}(z,$>0?X/$:0);K==="closed"?(u("closed"),m(!1),x(0),r()):(m(!1),x(0),u(K))}},[f,y,r]),N=Lt(function(z){D(z.touches[0].clientY)},[D]),O=Lt(function(z){f&&(z.cancelable&&z.preventDefault(),A(z.touches[0].clientY))},[f,A]),H=Lt(function(){R()},[R]),q=Lt(function(z){z.preventDefault(),D(z.clientY)},[D]);if(ge(function(){if(f){var z=function(X){A(X.clientY)},$=function(){R()};return document.addEventListener("mousemove",z),document.addEventListener("mouseup",$),function(){document.removeEventListener("mousemove",z),document.removeEventListener("mouseup",$)}}},[f,A,R]),!w)return null;var Z=P(f?E.current.state:c),G=f?Math.max(0,Math.min(100,Z+y)):Z,Y=.3*Math.min(G/50,1);return M(Tt,null,M("div",{className:"bg-bg-overlay absolute inset-0 z-40 transition-opacity duration-300 ".concat(G===0?"pointer-events-none":""),style:{opacity:Y},onClick:r}),M("div",{ref:S,className:"bg-bg-surface absolute inset-x-0 bottom-0 z-50 flex flex-col rounded-t-2xl shadow-2xl ".concat(f?"":"transition-[height] duration-300 ease-out"),style:{height:"".concat(G,"%")},"data-sidebar-id":e.id},M("div",{className:"flex flex-shrink-0 cursor-grab touch-none items-center justify-center py-3 active:cursor-grabbing",onTouchStart:N,onTouchMove:O,onTouchEnd:H,onMouseDown:q},M("div",{className:"bg-border-default h-1.5 w-12 rounded-full"})),M("div",{className:"min-h-0 flex-1 overflow-hidden"},s.type==="tabs"&&M(XF,{content:s,documentId:n,renderCustomComponent:o}),s.type==="component"&&M(Tt,null,o(s.componentId,n,{})))))}function XF(t){var e,n=t.content,i=t.documentId,r=t.renderCustomComponent,o=Ge(xe(((e=n.tabs[0])===null||e===void 0?void 0:e.id)||""),2),s=o[0],a=o[1];return M("div",{className:"flex h-full flex-1 flex-col"},M("div",{role:"tablist",className:"bg-bg-surface mx-4 my-4 flex flex-shrink-0 overflow-hidden"},n.tabs.map(function(l,c,u){var d=s===l.id,f=c===0,m=c===u.length-1;return M("button",{key:l.id,role:"tab","aria-selected":d,tabIndex:d?0:-1,onClick:function(){return a(l.id)},className:"relative flex h-7 flex-1 cursor-pointer items-center justify-center border outline-none transition-colors ".concat(f?"rounded-l-md":""," ").concat(m?"rounded-r-md":""," ").concat(m?"":"border-r-0"," ").concat(d?"border-accent bg-accent text-fg-on-accent":"border-border-default text-fg-secondary hover:bg-interactive-hover")},l.icon&&M(Mn,{icon:l.icon,className:"h-5 w-5"}))})),M("div",{className:"min-h-0 flex-1 overflow-auto"},n.tabs.filter(function(l){return l.id===s}).map(function(l){return M(Tt,{key:l.id},r(l.componentId,i,{}))})))}function vq(t){var e=t.schema,n=t.documentId,i=t.anchorEl,r=t.onClose,o=gz().getContainer,s=function(y){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:768,v=Ge(xe(function(){var S=y();return!!S&&S.clientWidth<x}),2),w=v[0],_=v[1];return ge(function(){var S=y();if(S){var E=new ResizeObserver(function(){_(S.clientWidth<x)});return E.observe(S),function(){return E.disconnect()}}},[y,x]),w}(o,768),a=o(),l=(()=>{const{provides:y}=Pd();return(y==null?void 0:y.getSchema())??null})(),c=Ge(xe([{menuId:e.id,schema:e,title:void 0}]),2),u=c[0],d=c[1];ge(function(){d([{menuId:e.id,schema:e,title:void 0}])},[e]);var f=u[u.length-1],m=Lt(function(y,x){if(l){var v=l.menus[y];v?d(function(w){return[].concat(UN(w),[{menuId:y,schema:v,title:x}])}):console.warn("Submenu schema not found: ".concat(y))}},[l]),g=Lt(function(){u.length>1&&d(function(y){return y.slice(0,-1)})},[u.length]);return f?s&&a?qF(M(yq,{currentMenu:f,menuStack:u,documentId:n,onClose:r,onNavigateBack:g,onNavigateToSubmenu:m,container:a}),a):M(xq,{currentMenu:f,documentId:n,anchorEl:i,onClose:r,onNavigateToSubmenu:m}):null}function yq(t){var e=t.currentMenu,n=t.menuStack,i=t.documentId,r=t.onClose,o=t.onNavigateBack,s=t.onNavigateToSubmenu,a=t.container,l=Ge(xe(!1),2),c=l[0],u=l[1],d=Ge(xe(!1),2),f=d[0],m=d[1],g=Ge(xe(0),2),y=g[0],x=g[1],v=vt(null),w=vt(null),_=vt({isDragging:!1,startY:0,currentY:0,startTime:0,sheetHeight:0});ge(function(){u(!0),requestAnimationFrame(function(){requestAnimationFrame(function(){m(!0)})})},[]);var S=Ge(xe(null),2),E=S[0],T=S[1];ge(function(){if(w.current){var G=(n.length>1?60:0)+w.current.scrollHeight+24,Y=.8*a.clientHeight;T(Math.min(G,Y))}},[e,n.length,a]);var P=Lt(function(){m(!1),setTimeout(function(){u(!1),r()},300)},[r]),D=Lt(function(G){v.current&&(_.current={isDragging:!0,startY:G,currentY:G,startTime:Date.now(),sheetHeight:v.current.offsetHeight})},[]),A=Lt(function(G){if(_.current.isDragging){var Y=G-_.current.startY,z=Math.max(0,Y);_.current.currentY=G,x(z)}},[]),R=Lt(function(){if(_.current.isDragging){var G=_.current,Y=G.startY,z=G.currentY,$=G.startTime,X=G.sheetHeight,K=Math.abs(Y-z);if(_.current.isDragging=!1,K<5)x(0);else{var oe=z-Y,pe=oe/X*100,be=Date.now()-$;pe>30||(be>0?oe/be:0)>.5?P():x(0)}}},[P]),N=Lt(function(G){D(G.touches[0].clientY)},[D]),O=Lt(function(G){_.current.isDragging&&G.cancelable&&G.preventDefault(),A(G.touches[0].clientY)},[A]),H=Lt(function(){R()},[R]),q=Lt(function(G){G.preventDefault(),D(G.clientY)},[D]);if(ge(function(){if(_.current.isDragging){var G=function(z){return A(z.clientY)},Y=function(){return R()};return document.addEventListener("mousemove",G),document.addEventListener("mouseup",Y),function(){document.removeEventListener("mousemove",G),document.removeEventListener("mouseup",Y)}}},[A,R]),ge(function(){var G=function(Y){Y.key==="Escape"&&P()};return document.addEventListener("keydown",G),function(){return document.removeEventListener("keydown",G)}},[P]),!c)return null;var Z=f?y:E||400;return M(Tt,null,M("div",{className:"bg-bg-overlay absolute inset-0 z-40 transition-opacity duration-300 ".concat(f?"opacity-100":"opacity-0"),onClick:P}),M("div",Ee({ref:v,className:"bg-bg-surface absolute inset-x-0 bottom-0 z-50 flex flex-col rounded-t-2xl shadow-2xl ".concat(_.current.isDragging?"":"transition-transform duration-300 ease-out"),style:{maxHeight:"80%",transform:"translateY(".concat(Z,"px)")}},hi(e.schema)),M("div",{className:"flex flex-shrink-0 cursor-grab touch-none items-center justify-center py-3 active:cursor-grabbing",onTouchStart:N,onTouchMove:O,onTouchEnd:H,onMouseDown:q},M("div",{className:"bg-border-default h-1.5 w-12 rounded-full"})),n.length>1&&M("div",{className:"border-border-subtle flex items-center gap-3 border-b px-4 pb-3"},M("button",{onClick:o,className:"hover:bg-interactive-hover rounded-full p-1"},M(tC,{className:"h-5 w-5"})),M("h3",{className:"text-fg-primary font-semibold"},e.title||"Menu")),M("div",{ref:w,className:"flex-1 overflow-y-auto py-2"},e.schema.items.map(function(G){return M(sC,{key:G.id,item:G,documentId:i,onClose:P,isMobile:!0,onNavigateToSubmenu:s})}))))}function xq(t){var e=t.currentMenu,n=t.documentId,i=t.anchorEl,r=t.onClose,o=t.onNavigateToSubmenu,s=vt(null),a=Ge(xe(null),2),l=a[0],c=a[1];ge(function(){if(i){var d=function(){var f,m=i.getBoundingClientRect(),g=((f=s.current)===null||f===void 0?void 0:f.offsetWidth)||200,y=m.bottom+4,x=m.left;x+g>window.innerWidth&&(x=window.innerWidth-g-8),x<8&&(x=8),c({top:y,left:x})};return d(),window.addEventListener("scroll",d),window.addEventListener("resize",d),function(){window.removeEventListener("scroll",d),window.removeEventListener("resize",d)}}},[i]),ge(function(){var d=function(m){if(s.current){var g=m.composedPath(),y=g.includes(s.current),x=i&&g.includes(i);y||x||r()}},f=setTimeout(function(){document.addEventListener("mousedown",d)},0);return function(){clearTimeout(f),document.removeEventListener("mousedown",d)}},[r,i]),ge(function(){var d=function(f){f.key==="Escape"&&r()};return document.addEventListener("keydown",d),function(){return document.removeEventListener("keydown",d)}},[r]);var u=l?{position:"fixed",top:"".concat(l.top,"px"),left:"".concat(l.left,"px"),zIndex:1e3}:{display:"none"};return M("div",Ee(Ee({ref:s},hi(e.schema)),{},{className:"border-border-default bg-bg-elevated min-w-[200px] rounded-lg border py-2 shadow-lg",style:u}),e.schema.items.map(function(d){return M(sC,{key:d.id,item:d,documentId:n,onClose:r,isMobile:!1,onNavigateToSubmenu:o})}))}function sC(t){var e=t.item,n=t.documentId,i=t.onClose,r=t.isMobile,o=t.onNavigateToSubmenu;switch(e.type){case"command":return M(wq,{item:e,documentId:n,onClose:i,isMobile:r});case"submenu":return M(_q,{item:e,documentId:n,isMobile:r,onNavigateToSubmenu:o});case"divider":return M("div",Ee({},hi(e)),M("hr",{className:"border-border-subtle my-2"}));case"section":return M(bq,{item:e,documentId:n,onClose:i,isMobile:r,onNavigateToSubmenu:o});default:return null}}function wq(t){var e,n,i=t.item,r=t.documentId,o=t.onClose,s=t.isMobile,a=Ha(i.commandId,r);if(!a||!a.visible)return null;var l,c,u=function(){a.disabled||(a.execute(),o())};return s?M("button",Ee(Ee({},hi(i)),{},{onClick:u,disabled:a.disabled,className:"active:bg-interactive-active flex w-full items-center gap-3 px-4 py-3 text-left text-base transition-colors ".concat(a.disabled?"cursor-not-allowed opacity-50":"cursor-pointer"," ").concat(a.active?"bg-interactive-selected text-accent":"text-fg-secondary"),role:"menuitem"}),a.icon&&M(Mn,{icon:a.icon,className:"h-5 w-5",primaryColor:(l=a.iconProps)===null||l===void 0?void 0:l.primaryColor,secondaryColor:(c=a.iconProps)===null||c===void 0?void 0:c.secondaryColor}),M("span",{className:"flex-1"},a.label)):M("button",Ee(Ee({},hi(i)),{},{onClick:u,disabled:a.disabled,className:"flex w-full items-center justify-between gap-2 px-4 py-1 text-left ".concat(a.disabled?"pointer-events-none cursor-not-allowed opacity-50":"cursor-pointer"," ").concat(a.active&&!a.disabled?"bg-accent text-fg-on-accent":"text-fg-muted hover:bg-accent hover:text-fg-on-accent"),role:"menuitem"}),M("div",{className:"flex items-center gap-2"},M("div",{className:"flex h-6 w-6 items-center justify-center"},a.icon&&M(Mn,{icon:a.icon,className:"h-6 w-6",primaryColor:(e=a.iconProps)===null||e===void 0?void 0:e.primaryColor,secondaryColor:(n=a.iconProps)===null||n===void 0?void 0:n.secondaryColor})),M("span",{className:"text-sm"},a.label)))}function _q(t){var e=t.item,n=t.documentId,i=t.isMobile,r=t.onNavigateToSubmenu,o=kn(n).translate,s=e.labelKey?o(e.labelKey):e.label||"",a=function(){return r(e.menuId,s)};return i?M("button",Ee(Ee({},hi(e)),{},{onClick:a,className:"text-fg-secondary active:bg-interactive-active flex w-full cursor-pointer items-center gap-3 px-4 py-3 text-left text-base transition-colors",role:"menuitem"}),M("span",{className:"flex-1"},s),M(Df,{className:"h-4 w-4"})):M("button",Ee(Ee({},hi(e)),{},{onClick:a,className:"text-fg-muted hover:bg-accent hover:text-fg-on-accent flex w-full cursor-pointer items-center justify-between gap-2 px-4 py-1 text-left",role:"menuitem"}),M("span",{className:"text-sm"},s),M(Df,{className:"h-6 w-6"}))}function bq(t){var e=t.item,n=t.documentId,i=t.onClose,r=t.isMobile,o=t.onNavigateToSubmenu,s=kn(n).translate,a=e.labelKey?s(e.labelKey):e.label||"";return M("div",Ee({},hi(e)),M("div",{className:"text-fg-secondary px-4 py-3 text-xs font-medium uppercase"},a),e.items.map(function(l){return M(sC,{key:l.id,item:l,documentId:n,onClose:i,isMobile:r,onNavigateToSubmenu:o})}))}function Sq(t){var e=t.schema,n=t.documentId,i=t.isOpen,r=t.onClose,o=t.onExited,s=e.content,a=Vy().renderCustomComponent;return s.type!=="component"?(console.warn("SchemaModal only supports component content type, got: ".concat(s.type)),null):M(Tt,null,a(s.componentId,n,{isOpen:i,onClose:r,onExited:o}))}function Mq(t){var e=t.documentId;t.onClose;var n=NL(e),i=n.state,r=n.provides;return M("div",{className:"flex h-full flex-1 flex-col"},M("div",{className:"flex-1 overflow-hidden"},M(Ej,{documentId:e,style:{width:"100%",height:"100%"}},function(o){return M("div",{key:o.pageIndex,style:{position:"absolute",width:"100%",height:o.wrapperHeight,top:o.top,display:"flex",flexDirection:"column",alignItems:"center",cursor:"pointer"},onClick:function(){var s;r==null||(s=r.scrollToPage)===null||s===void 0||s.call(r,{pageNumber:o.pageIndex+1})}},M("div",{style:{width:o.width,height:o.height,border:"2px solid ".concat(i.currentPage===o.pageIndex+1?"var(--ep-accent-primary)":"var(--ep-border-default)"),borderRadius:"4px",overflow:"hidden",boxShadow:i.currentPage===o.pageIndex+1?"0 0 0 2px var(--ep-interactive-focus-ring)":"none"}},M(Tj,{documentId:e,meta:o,style:{width:"100%",height:"100%"}})),M("div",{style:{height:o.labelHeight,display:"flex",alignItems:"center",justifyContent:"center",marginTop:"4px"}},M("span",{className:"text-fg-secondary text-xs"},o.pageIndex+1)))})))}function _o(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:300,n=Ge(xe(t),2),i=n[0],r=n[1];return ge(function(){var o=window.setTimeout(function(){return r(t)},e);return function(){return clearTimeout(o)}},[t,e]),i}var vP=function(t){var e=t.label,n=t.checked,i=t.onChange;return M("label",{className:"text-fg-secondary inline-flex cursor-pointer select-none items-center gap-2 text-xs font-medium"},M("input",{type:"checkbox",checked:n,onChange:function(r){return i(r.target.checked)},className:"border-border-default bg-bg-input checked:border-accent checked:bg-accent peer h-4 w-4 shrink-0 appearance-none rounded-[3px] border transition-all"}),M("svg",{viewBox:"0 0 24 24",className:"/* fine-tune centering */ text-fg-on-accent pointer-events-none absolute h-3.5 w-3.5 translate-x-[1px] translate-y-[1px] opacity-0 peer-checked:opacity-100",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round"},M("polyline",{points:"20 6 9 17 4 12"})),e)},Cq=function(t){var e=t.hit,n=t.onClick,i=t.active,r=vt(null);return ge(function(){i&&r.current&&r.current.scrollIntoView({behavior:"smooth",block:"nearest"})},[i]),M("button",{ref:r,onClick:n,className:"w-full rounded border p-2 text-left text-sm transition-colors ".concat(i?"border-accent bg-accent-light text-fg-primary":"border-border-subtle bg-bg-surface text-fg-secondary hover:bg-interactive-hover")},M("span",null,e.context.truncatedLeft&&" ",e.context.before,M("span",{className:"text-accent font-bold"},e.context.match),e.context.after,e.context.truncatedRight&&" "))};function Eq(t){var e=t.documentId;t.onClose;var n=(y=>{const{provides:x}=sO(),[v,w]=xe(a0),_=Rt(()=>x==null?void 0:x.forDocument(y),[x,y]);return ge(()=>{if(_)return w(_.getState()),_.onStateChange(S=>w(S));w(a0)},[_]),{state:v,provides:_??null}})(e),i=n.state,r=n.provides,o=pp().provides,s=kn(e).translate,a=vt(null),l=Ge(xe(""),2),c=l[0],u=l[1];ge(function(){},[]),ge(function(){i.query&&!c&&u(i.query)},[i.query]),ge(function(){i.activeResultIndex!==void 0&&i.activeResultIndex>=0&&m(i.activeResultIndex)},[i.activeResultIndex]);var d=_o(c,300);ge(function(){d!==i.query&&(r==null||r.searchAllPages(d))},[d,r,i.query]);var f=function(y,x){x?r==null||r.setFlags([].concat(UN(i.flags),[y])):r==null||r.setFlags(i.flags.filter(function(v){return v!==y}))},m=function(y){var x,v=i.results[y];if(v){var w=v.rects.reduce(function(_,S){return{x:Math.min(_.x,S.origin.x),y:Math.min(_.y,S.origin.y)}},{x:1/0,y:1/0});o==null||(x=o.forDocument(e))===null||x===void 0||x.scrollToPage({pageNumber:v.pageIndex+1,pageCoordinates:w,alignX:50,alignY:25})}},g=function(y){var x={};return y.forEach(function(v,w){x[v.pageIndex]||(x[v.pageIndex]=[]),x[v.pageIndex].push({hit:v,index:w})}),x}(i.results);return M("div",{className:"bg-bg-surface flex h-full flex-col"},M("div",{className:"p-4"},M("div",{className:"relative"},M("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-2"},M(RF,{className:"text-fg-muted h-4 w-4"})),M("input",{ref:a,type:"text",placeholder:s("search.placeholder"),value:c,onInput:function(y){var x=y.target;u(x.value)},className:"border-border-default bg-bg-input focus:border-accent focus:ring-accent w-full rounded-md border py-1 pl-8 pr-9 text-base focus:outline-none focus:ring-1"}),c&&M("div",{className:"absolute inset-y-0 right-0 flex cursor-pointer items-center pr-3",onClick:function(){u(""),a.current&&a.current.focus()}},M(DF,{className:"text-fg-muted hover:text-fg-secondary h-4 w-4"}))),M("div",{className:"mt-3 flex flex-col gap-2"},M(vP,{label:s("search.caseSensitive"),checked:i.flags.includes(Uh.MatchCase),onChange:function(y){return f(Uh.MatchCase,y)}}),M(vP,{label:s("search.wholeWord"),checked:i.flags.includes(Uh.MatchWholeWord),onChange:function(y){return f(Uh.MatchWholeWord,y)}})),M("hr",{className:"border-border-subtle mb-2 mt-5"}),i.active&&M("div",{className:"flex h-[32px] flex-row items-center justify-between"},M("div",{className:"text-fg-muted text-xs"},s("search.resultsFound",{params:{count:i.total}})),i.total>1&&M("div",{className:"flex flex-row"},M(la,{onClick:function(){r==null||r.previousResult()}},M(tC,{className:"h-4 w-4"})),M(la,{onClick:function(){r==null||r.nextResult()}},M(Df,{className:"h-4 w-4"}))))),M("div",{className:"flex min-h-0 flex-1 flex-col gap-2 overflow-y-auto px-4"},Object.entries(g).map(function(y){var x=Ge(y,2),v=x[0],w=x[1];return M("div",{key:v,className:"mt-2 first:mt-0"},M("div",{className:"bg-bg-surface/80 text-fg-muted py-2 text-xs backdrop-blur"},s("search.page",{params:{page:Number(v)+1}})),M("div",{className:"flex flex-col gap-2"},w.map(function(_){var S=_.hit,E=_.index;return M(Cq,{key:E,hit:S,active:E===i.activeResultIndex,onClick:function(){r==null||r.goToResult(E)}})})))}),M("div",null)))}function Tq(t){var e=t.documentId,n=oi(V4.id).provides,i=pp().provides,r=kn(e).translate,o=oo(e),s=Ge(xe([]),2),a=s[0],l=s[1],c=Ge(xe(new Set),2),u=c[0],d=c[1],f=Ge(xe(!0),2),m=f[0],g=f[1];ge(function(){if(n&&o!=null&&o.document){g(!0);var x=n.getBookmarks();return x.wait(function(v){var w=v.bookmarks;l(w);var _=w.map(function(S,E){return"bookmark-".concat(E)});d(new Set(_)),g(!1)},function(){g(!1)}),function(){x.abort({code:Xt.Cancelled,message:"Bookmark task cancelled"})}}},[n,o==null?void 0:o.document]);var y=function(x,v){var w,_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,S="bookmark-".concat(v),E=x.children&&x.children.length>0,T=u.has(S);return M("div",{key:S,className:"select-none"},M("div",{className:"hover:bg-interactive-hover flex cursor-pointer items-center gap-1 px-2 py-1",style:{paddingLeft:"".concat(16*_+8,"px")},onClick:function(){return function(P){if(i&&P.target){var D;if(P.target.type==="action"){var A=P.target.action;if(A.type===yv.Goto||A.type===yv.RemoteGoto)D=A.destination;else if(A.type===yv.URI)return void window.open(A.uri,"_blank")}else P.target.type==="destination"&&(D=P.target.destination);if(D)if(D.zoom.mode===cL.XYZ){var R,N=o==null||(R=o.document)===null||R===void 0?void 0:R.pages.find(function(O){return O.index===D.pageIndex});if(!N)return;i.scrollToPage({pageNumber:D.pageIndex+1,pageCoordinates:D.zoom.params?{x:D.zoom.params.x,y:N.size.height-D.zoom.params.y}:void 0,behavior:"smooth"})}else i.scrollToPage({pageNumber:D.pageIndex+1,behavior:"smooth"})}}(x)}},E&&M("button",{onClick:function(P){P.stopPropagation(),function(D){d(function(A){var R=new Set(A);return R.has(D)?R.delete(D):R.add(D),R})}(S)},className:"flex h-4 w-4 items-center justify-center"},M(T?PF:Df,{className:"h-3 w-3"})),!E&&M("div",{className:"w-4"}),M("span",{className:"text-fg-secondary text-sm"},x.title)),E&&T&&M("div",null,(w=x.children)===null||w===void 0?void 0:w.map(function(P,D){return y(P,D,_+1)})))};return o==null||!o.document||m?M("div",{className:"text-fg-secondary flex h-full flex-col gap-3 p-4 text-sm"},M("div",{className:"text-fg-primary font-medium"},r("outline.title")),M("p",null,r("outline.loading"))):a.length===0?M("div",{className:"flex h-full items-center justify-center p-6"},M("div",{className:"text-fg-muted text-center"},M("div",{className:"text-sm"},r("outline.noOutline")),M("div",{className:"mt-1 text-xs"},r("outline.noBookmarks")))):M("div",{className:"bg-bg-surface flex h-full flex-col"},M("div",{className:"flex-1 overflow-y-auto"},M("div",{className:"outline-tree"},a.map(function(x,v){return y(x,v)}))))}function Zb(t){var e=t.size,n=e===void 0?"md":e,i=t.text,r=t.className,o={sm:"w-6 h-6",md:"w-10 h-10",lg:"w-16 h-16"};return M("div",{className:"flex flex-col items-center justify-center gap-3 ".concat(r===void 0?"":r)},M("div",{className:"relative"},M("div",{className:"".concat(o[n]," border-border-default animate-spin rounded-full border-4")}),M("div",{className:"".concat(o[n]," border-r-accent border-t-accent absolute left-0 top-0 animate-spin rounded-full border-4 border-transparent")})),i&&M("p",{className:"".concat({sm:"text-sm",md:"text-base",lg:"text-lg"}[n]," text-fg-secondary animate-pulse font-medium")},i))}function yP(t){var e=t.size,n=e===void 0?"md":e,i=t.className,r=i===void 0?"":i;return M("div",{className:"".concat({sm:"w-4 h-4 border-2",md:"w-6 h-6 border-2",lg:"w-8 h-8 border-3"}[n]," border-border-default border-t-accent animate-spin rounded-full ").concat(r)})}var xP,Aq=function(t){var e=t.documentId,n=Rf().provides,i=Ge(xe({show:!1,mode:null,isAnimating:!1}),2),r=i[0],o=i[1],s=kn(e).translate;if(ge(function(){if(n)return n.onModeChange(function(c){var u=c.activeMode;if(u==="marqueeZoom"||u==="marqueeCapture"){o({show:!0,mode:u,isAnimating:!0});var d=setTimeout(function(){o(function(f){return Ee(Ee({},f),{},{show:!1})})},3e3);return function(){return clearTimeout(d)}}o({show:!1,mode:null,isAnimating:!1})})},[n]),!r.show&&!r.isAnimating)return null;var a=r.mode==="marqueeZoom"?s("zoom.dragTip"):s("capture.dragTip"),l=r.mode==="marqueeZoom"?"rgba(33,150,243,0.8)":"rgba(76,175,80,0.8)";return M("div",{className:"hint-overlay ".concat(r.show?"hint-show":"hint-hide"),onAnimationEnd:function(){r.show||o(function(c){return Ee(Ee({},c),{},{isAnimating:!1,mode:null})})},style:{position:"absolute",top:0,left:0,right:0,bottom:0,pointerEvents:"none",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"20px"}},M("div",{className:"hint-text",style:{background:"rgba(0, 0, 0, 0.8)",color:"white",padding:"12px 20px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",textAlign:"center",maxWidth:"250px"}},a),M("div",{className:"drag-demo",style:{position:"relative",width:"150px",height:"100px"}},M("div",{style:{position:"absolute",top:"20px",left:"20px",width:"110px",height:"60px",border:"2px dashed ".concat(l),borderRadius:"4px",opacity:.6}}),M("div",{className:"animated-rect",style:{position:"absolute",top:"20px",left:"20px",border:"2px solid ".concat(l),backgroundColor:"".concat(l.replace("0.8","0.15")),borderRadius:"4px"}}),M("div",{className:"cursor-demo",style:{position:"absolute",width:"20px",height:"20px"}},M("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},M("path",{d:"M3.5 2.5L16.5 10L10 11.5L7.5 16.5L3.5 2.5Z",fill:"rgba(0,0,0,0.3)",transform:"translate(1,1)"}),M("path",{d:"M3 2L16 10L10 11.5L7.5 16L3 2Z",fill:"white",stroke:"black",strokeWidth:"1"}),M("path",{d:"M4 3.5L13.5 9.5L9.5 10.5L7.5 14L4 3.5Z",fill:"rgba(255,255,255,0.8)"})))),M("style",{jsx:!0},`
        .hint-overlay {
          animation-duration: 0.3s;
          animation-fill-mode: both;
        }

        .hint-show {
          animation-name: hintFadeIn;
        }

        .hint-hide {
          animation-name: hintFadeOut;
        }

        @keyframes hintFadeIn {
          from {
            opacity: 0;
            transform: translateY(10px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        @keyframes hintFadeOut {
          from {
            opacity: 1;
            transform: translateY(0);
          }
          to {
            opacity: 0;
            transform: translateY(-10px);
          }
        }

        .animated-rect {
          animation: rectGrow 2s ease-in-out infinite;
        }

        @keyframes rectGrow {
          0% {
            width: 0;
            height: 0;
          }
          50% {
            width: 110px;
            height: 60px;
          }
          100% {
            width: 110px;
            height: 60px;
            opacity: 0.7;
          }
        }

        .cursor-demo {
          animation: cursorMove 2s ease-in-out infinite;
        }

        @keyframes cursorMove {
          0% {
            top: 20px;
            left: 20px;
          }
          50% {
            top: 50px;
            left: 80px;
          }
          100% {
            top: 80px;
            left: 130px;
          }
        }

        .hint-text {
          animation: textPulse 0.6s ease-in-out;
        }

        @keyframes textPulse {
          0% {
            transform: scale(0.9);
          }
          50% {
            transform: scale(1.05);
          }
          100% {
            transform: scale(1);
          }
        }
      `))},Iq=function(t){var e=t.placeholder,n=t.onSubmit,i=t.inputRef,r=t.isFocused,o=Ge(xe(""),2),s=o[0],a=o[1];return M("form",{className:"border-border-subtle mt-4 flex items-end space-x-2 border-t pt-4",onClick:function(l){return l.stopPropagation()},onSubmit:function(l){l==null||l.preventDefault(),s.trim()&&(n(s),a(""))}},M("input",{ref:i,type:"text",placeholder:e,value:s,onInput:function(l){return a(l.currentTarget.value)},className:"bg-bg-input text-fg-primary placeholder-fg-muted w-full rounded-lg border px-3 py-1 text-base transition-colors focus:border-transparent focus:outline-none focus:ring-2 ".concat(r?"border-accent focus:ring-accent":"border-border-default focus:ring-accent")}),M("button",{type:"submit",disabled:!s.trim(),className:"bg-accent text-fg-on-accent hover:bg-accent-hover disabled:bg-interactive-disabled rounded-lg p-2 transition-colors disabled:cursor-not-allowed"},M("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},M("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"}))))},Iw=["bg-red-500","bg-blue-500","bg-green-500","bg-yellow-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-teal-500"],Pq=function(t){if(!t)return Iw[0];var e=t.length>0?t.charCodeAt(0)%Iw.length:0;return Iw[e]},wP=function(t){var e=t.name,n=t.className,i=n===void 0?"":n;return M("div",{className:"flex h-8 w-8 items-center justify-center rounded-full text-sm font-medium text-white ".concat(Pq(e)," ").concat(i)},function(r){return r?r.split(" ").map(function(o){return o[0]}).join("").toUpperCase().slice(0,2):"G"}(e))},YF=function(t){var e,n,i=t.onEdit,r=t.onDelete,o=t.onClose,s=t.documentId,a=vt(null),l=kn(s).translate;return ge(function(){var c=function(u){e.current&&!e.current.contains(u.target)&&n()};return document.addEventListener("click",c),function(){document.removeEventListener("click",c)}},[e=a,n=o]),M("div",{ref:a,className:"bg-bg-elevated ring-border-default absolute right-0 top-6 z-10 w-32 rounded-md shadow-lg ring-1"},M("div",{className:"py-1"},M("button",{onClick:function(c){c.preventDefault(),c.stopPropagation(),i(),o()},className:"text-fg-secondary hover:bg-interactive-hover block w-full px-4 py-2 text-left text-sm"},l("comments.edit")),M("button",{onClick:function(c){c.preventDefault(),c.stopPropagation(),r(),o()},className:"text-state-error hover:bg-interactive-hover block w-full px-4 py-2 text-left text-sm"},l("comments.delete"))))},ZF=function(t){var e=t.initialText,n=t.onSave,i=t.onCancel,r=t.autoFocus,o=r!==void 0&&r,s=t.documentId,a=Ge(xe(e),2),l=a[0],c=a[1],u=vt(null),d=kn(s).translate;return ge(function(){o&&u.current&&(u.current.focus(),u.current.setSelectionRange(l.length,l.length))},[o,l.length]),M("div",{className:"flex-1 space-y-2"},M("textarea",{ref:u,value:l,onInput:function(f){return c(f.currentTarget.value)},className:"border-border-default bg-bg-input text-fg-primary focus:border-accent focus:ring-accent w-full rounded-md border px-3 py-2 text-base focus:outline-none focus:ring-1",rows:3}),M("div",{className:"flex flex-wrap gap-2"},M("button",{onClick:function(f){f.stopPropagation(),n(l)},className:"bg-accent text-fg-on-accent hover:bg-accent-hover whitespace-nowrap rounded-md px-3 py-1 text-sm"},d("comments.save")),M("button",{onClick:function(f){f.stopPropagation(),i()},className:"bg-interactive-hover text-fg-secondary hover:bg-border-default whitespace-nowrap rounded-md px-3 py-1 text-sm"},d("comments.cancel"))))},KF=function(t){if(!t)return"(no date)";try{return(t instanceof Date?t:new Date(t)).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})}catch{return typeof t=="string"?t:"(no date)"}},Rq=function(t){var e=t.annotation,n=t.onSave,i=t.onDelete,r=t.isReply,o=r!==void 0&&r,s=t.documentId,a=Ge(xe(!1),2),l=a[0],c=a[1],u=Ge(xe(!1),2),d=u[0],f=u[1],m=e.author||"Guest";return d?M("div",{className:"flex w-full items-start space-x-3",onClick:function(g){return g.stopPropagation()}},o&&M(wP,{name:m,className:"h-8 w-8"}),M(ZF,{initialText:e.contents||"",onSave:function(g){n(g),f(!1)},onCancel:function(){f(!1)},autoFocus:!0,documentId:s})):M("div",{className:"flex items-start space-x-3"},o&&M(wP,{name:m,className:"h-8 w-8"}),M("div",{className:"min-w-0 flex-1"},o&&M("div",{className:"flex items-center justify-between"},M("div",{className:"leading-none"},M("h5",{className:"text-fg-primary text-sm font-medium"},m),M("span",{className:"text-fg-muted text-xs"},KF(e.modified||e.created))),M("div",{className:"relative"},M("button",{onClick:function(g){g.stopPropagation(),c(!0)},className:"text-fg-muted hover:bg-interactive-hover rounded-md p-1"},M("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20"},M("path",{d:"M6 10a2 2 0 11-4 0 2 2 0 014 0zM12 10a2 2 0 11-4 0 2 2 0 014 0zM16 12a2 2 0 100-4 2 2 0 000 4z"}))),l&&M(YF,{onEdit:function(){return f(!0)},onDelete:i,onClose:function(){return c(!1)},documentId:s}))),M("p",{className:"text-fg-primary mt-2 text-sm"},e.contents)))},Dq=(pt(pt(pt(pt(pt(pt(pt(pt(pt(pt(xP={},_e.HIGHLIGHT,{label:"Highlight",labelKey:"annotation.highlight",icon:"highlight",iconProps:function(t){return{primaryColor:t.color||"#ffff00"}}}),_e.CIRCLE,{label:"Circle",labelKey:"annotation.circle",icon:"circle",iconProps:function(t){return{primaryColor:t.strokeColor||"#000000",secondaryColor:t.color}}}),_e.SQUARE,{label:"Square",labelKey:"annotation.square",icon:"square",iconProps:function(t){return{primaryColor:t.strokeColor||"#000000",secondaryColor:t.color}}}),_e.LINE,{label:"Line",labelKey:"annotation.line",icon:"line",iconProps:function(t){return{primaryColor:t.strokeColor||"#000000"}}}),_e.UNDERLINE,{label:"Underline",labelKey:"annotation.underline",icon:"underline",iconProps:function(t){return{primaryColor:t.color||"#000000"}}}),_e.SQUIGGLY,{label:"Squiggly",labelKey:"annotation.squiggly",icon:"squiggly",iconProps:function(t){return{primaryColor:t.color||"#000000"}}}),_e.STRIKEOUT,{label:"Strikethrough",labelKey:"annotation.strikeout",icon:"strikethrough",iconProps:function(t){return{primaryColor:t.color||"#000000"}}}),_e.INK,{label:"Ink",labelKey:"annotation.ink",icon:"pencilMarker",iconProps:function(t){return{primaryColor:t.color||"#000000"}}}),_e.FREETEXT,{label:"Text",labelKey:"annotation.freeText",icon:"text",iconProps:function(t){return{primaryColor:t.fontColor||"#000000"}}}),_e.POLYGON,{label:"Polygon",labelKey:"annotation.polygon",icon:"polygon",iconProps:function(t){return{primaryColor:t.strokeColor||"#000000",secondaryColor:t.color}}}),pt(pt(xP,_e.POLYLINE,{label:"Polyline",labelKey:"annotation.polyline",icon:"zigzag",iconProps:function(t){return{primaryColor:t.strokeColor||"#000000"}}}),_e.STAMP,{label:"Stamp",labelKey:"annotation.stamp",icon:"deviceFloppy",iconProps:function(){return{primaryColor:"#dc2626"}}})),kq=function(t){var e=t.text,n=t.maxWords,i=n===void 0?16:n,r=t.className,o=r===void 0?"":r,s=t.documentId,a=Ge(xe(!1),2),l=a[0],c=a[1],u=kn(s).translate,d=e.split(" ");return d.length>i?M("div",{className:o},l?e:d.slice(0,i).join(" ")+"..."," ",M("button",{onClick:function(f){f.stopPropagation(),c(!l)},className:"text-accent hover:text-accent-hover text-sm font-medium focus:outline-none"},u(l?"comments.showLess":"comments.showMore"))):M("div",{className:o},e)},Nq=function(t){var e=t.annotation,n=t.config,i=t.className,r=i===void 0?"":i,o=t.title,s=n.iconProps(e.object);return M("div",{className:"bg-bg-surface-alt flex items-center justify-center rounded-full ".concat(r),title:o},M(Mn,Ee({icon:n.icon},s)))},Lq=function(t){var e,n=t.entry,i=t.isSelected,r=t.onSelect,o=t.onUpdate,s=t.onDelete,a=t.onReply,l=t.documentId,c=n.annotation,u=n.replies,d=Ge(xe(!1),2),f=d[0],m=d[1],g=Ge(xe(!1),2),y=g[0],x=g[1],v=kn(l).translate,w=function(D){return s4(D)?Dq[D.object.type]:null}(c),_=!!c.object.contents,S=u.length>0,E=!_&&!S,T=vt(null),P=c.object.author||"Guest";return ge(function(){var D;i&&((D=T.current)===null||D===void 0||D.focus({preventScroll:!0}))},[i,n]),w?M("div",{onClick:r,className:"bg-bg-surface cursor-pointer rounded-lg border shadow-sm transition-all hover:shadow-md ".concat(i?"border-accent ring-interactive-focus-ring ring-2":"border-border-subtle")},M("div",{className:"p-4"},M("div",{className:"flex items-start space-x-3"},M(Nq,{annotation:c,config:w,title:v(w.labelKey,{fallback:w.label}),className:"h-8 w-8"}),M("div",{className:"min-w-0 flex-1"},M("div",{className:"flex items-center justify-between"},M("div",{className:"leading-none"},M("h4",{className:"text-fg-primary text-sm font-medium"},P),M("span",{className:"text-fg-disabled text-xs"},KF(c.object.modified||c.object.created))),M("div",{className:"relative"},M("button",{onClick:function(D){D.stopPropagation(),m(!0)},className:"text-fg-disabled hover:bg-interactive-hover hover:text-fg-secondary rounded-md p-1"},M("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20"},M("path",{d:"M6 10a2 2 0 11-4 0 2 2 0 014 0zM12 10a2 2 0 11-4 0 2 2 0 014 0zM16 12a2 2 0 100-4 2 2 0 000 4z"}))),f&&M(YF,{onEdit:function(){return x(!0)},onDelete:function(){return s(c)},onClose:function(){return m(!1)},documentId:l}))),((e=c.object.custom)===null||e===void 0?void 0:e.text)&&M(kq,{text:c.object.custom.text,maxWords:14,className:"text-fg-muted mt-2 text-sm",documentId:l}),M("div",{className:"mt-2"},y?M(ZF,{initialText:c.object.contents||"",onSave:function(D){o(c.object.id,D),x(!1)},onCancel:function(){x(!1)},autoFocus:!0,documentId:l}):_?M("p",{className:"text-fg-primary text-sm"},c.object.contents):null))),S&&M("div",{className:"border-border-subtle mt-4 space-y-4 border-t pt-4"},u.map(function(D){return M(Rq,{key:D.object.id,annotation:D.object,onSave:function(A){return o(D.object.id,A)},onDelete:function(){return s(D)},isReply:!0,documentId:l})})),!y&&M(Iq,{inputRef:T,isFocused:i,placeholder:v(E?"comments.addComment":"comments.addReply"),onSubmit:function(D){E?o(c.object.id,D):a(c.object.id,D)}}))):null},zq=function(t){var e=t.documentId,n=kn(e).translate;return M("div",{class:"text-fg-muted flex flex-col items-center gap-2 p-4"},M(Mn,{icon:"comment",className:"h-18 w-18 text-fg-muted"}),M("div",{className:"text-fg-muted max-w-[150px] text-center text-sm"},n("comments.emptyState")))},Oq=function(t){var e=t.documentId,n=Nr().provides,i=S4(e).state,r=pp().provides,o=kn(e).translate,s=vt({}),a=vt(null),l=i.selectedUid?YM(i,i.selectedUid):null,c=(y=>{const x={};for(const w of Object.values(y.pages))for(const _ of w){const S=y.byUid[_];if(S&&Ij(S)){const E=S.object.inReplyToId;E&&(x[E]||(x[E]=[])).push(S)}}const v={};for(const[w,_]of Object.entries(y.pages)){const S=Number(w),E=[];for(const T of _){const P=y.byUid[T];P&&s4(P)&&E.push({page:S,annotation:P,replies:x[P.object.id]??[]})}E.length>0&&(v[S]=E)}return v})(i);ge(function(){if(l&&a.current){var y=s.current[l.object.id];if(y&&a.current){var x=a.current,v=x.getBoundingClientRect(),w=y.getBoundingClientRect(),_=w.top-v.top+x.scrollTop-x.clientHeight/2+w.height/2;x.scrollTo({top:_,behavior:"smooth"})}}},[l]);var u=function(y,x){var v=g(y);v&&(n==null||n.updateAnnotation(v.object.pageIndex,y,{contents:x,modified:new Date}))},d=function(y){n==null||n.deleteAnnotation(y.object.pageIndex,y.object.id)},f=function(y,x){var v=g(y);v&&(n==null||n.createAnnotation(v.object.pageIndex,{id:ni(),rect:{origin:{x:v.object.rect.origin.x,y:v.object.rect.origin.y},size:{width:24,height:24}},pageIndex:v.object.pageIndex,created:new Date,modified:new Date,type:_e.TEXT,contents:x,inReplyToId:v.object.id,flags:["noRotate","noZoom","print"],icon:RM.Comment}))},m=Object.keys(c).map(Number).sort(function(y,x){return y-x}),g=function(y){var x,v=Bu(m);try{for(v.s();!(x=v.n()).done;){var w,_=x.value,S=Bu(c[_]);try{for(S.s();!(w=S.n()).done;){var E=w.value;if(E.annotation.object.id===y)return E.annotation;var T=E.replies.find(function(P){return P.object.id===y});if(T)return T}}catch(P){S.e(P)}finally{S.f()}}}catch(P){v.e(P)}finally{v.f()}};return m.length===0?M(zq,{documentId:e}):M("div",{ref:a,className:"h-full overflow-y-auto"},M("div",{className:"space-y-6 p-3"},m.map(function(y){return M("div",{key:y,className:"space-y-3"},M("div",{className:"bg-bg-surface sticky top-0 z-10 px-1"},M("div",{className:"border-border-subtle border-b py-2"},M("h3",{className:"text-md text-fg-primary font-semibold"},o("comments.page",{params:{page:y+1}})),M("p",{className:"text-fg-muted text-sm"},c[y].length===1?o("comments.commentCount",{params:{count:1}}):o("comments.commentCountPlural",{params:{count:c[y].length}})))),M("div",{className:"space-y-3 px-1"},c[y].map(function(x){return M("div",{key:x.annotation.object.id,ref:function(v){v&&(s.current[x.annotation.object.id]=v)}},M(Lq,{entry:x,isSelected:(l==null?void 0:l.object.id)===x.annotation.object.id,onSelect:function(){return v=x.annotation,n==null||n.selectAnnotation(v.object.pageIndex,v.object.id),void(r==null||r.scrollToPage({pageNumber:v.object.pageIndex+1,pageCoordinates:{x:v.object.rect.origin.x,y:v.object.rect.origin.y},alignX:50,alignY:25,behavior:"smooth"}));var v},onUpdate:u,onDelete:d,onReply:f,documentId:e}))})))})))};function Fq(t){var e=t.documentId,n=(c=>{const{provides:u}=GM(),[d,f]=xe(Oz);return ge(()=>{if(!u)return;const m=u.forDocument(c);return f(m.getState()),m.onStateChange(g=>{f(g)})},[u,c]),{state:d,provides:(u==null?void 0:u.forDocument(c))??null}})(e),i=n.state,r=n.provides,o=Ge(xe(""),2),s=o[0],a=o[1];if(!r)return null;var l=Math.round(100*i.currentZoomLevel);return ge(function(){a(l.toString())},[l]),M("div",{className:"relative"},M("div",{className:"bg-interactive-hover flex items-center rounded"},M("form",{onSubmit:function(c){c.preventDefault();var u=c.target,d=new FormData(u),f=parseFloat(d.get("zoom")||s);!isNaN(f)&&f>0&&r.requestZoom(f/100)},className:"block"},M("input",{name:"zoom",type:"text",inputMode:"numeric",pattern:"\\d*",className:"h-6 w-8 border-0 bg-transparent p-0 text-right text-sm outline-none focus:outline-none","aria-label":"Set zoom",autoFocus:!1,value:s,onInput:function(c){var u=c.target.value.replace(/[^0-9]/g,"");a(u)},onBlur:function(){(!s||parseFloat(s)<=0)&&a(l.toString())}}),M("span",{className:"text-sm"},"%")),M(cc,{commandId:"zoom:toggle-menu",documentId:e,itemId:"zoom-menu-button"}),M(cc,{commandId:"zoom:out",documentId:e}),M(cc,{commandId:"zoom:in",documentId:e})))}var _P,Uq=["position"],QF=function(){var t=Ge(xe(!1),2),e=t[0],n=t[1],i=vt(null),r=vt(null);return ge(function(){if(e){var o=function(s){i.current&&!i.current.contains(s.target)&&n(!1)};return document.addEventListener("click",o),function(){return document.removeEventListener("click",o)}}},[e]),ge(function(){e&&r.current&&r.current.scrollIntoView({block:"center",inline:"start"})},[e]),{open:e,setOpen:n,rootRef:i,selectedItemRef:r}},aC=function(t){var e=t.value,n=t.onChange,i=t.options,r=t.getOptionKey,o=t.renderValue,s=t.renderOption,a=t.triggerClass,l=a===void 0?"px-3 py-2":a,c=QF(),u=c.open,d=c.setOpen,f=c.rootRef,m=c.selectedItemRef;return M("div",{ref:f,class:"relative inline-block w-full"},M("button",{type:"button",class:"border-border-default bg-bg-input flex w-full items-center justify-between gap-2 rounded border ".concat(l),onClick:function(){return d(function(g){return!g})}},o(e),M("svg",{class:"text-fg-secondary h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},M("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.24 4.24a.75.75 0 01-1.06 0L5.21 8.29a.75.75 0 01.02-1.08z",clipRule:"evenodd"}))),u&&M("div",{class:"border-border-default bg-bg-elevated absolute z-10 mt-1 max-h-60 w-full overflow-y-auto rounded border p-1 shadow-lg"},i.map(function(g){var y=r(g)===r(e);return M("button",{ref:y?m:null,key:r(g),class:"hover:bg-interactive-hover block w-full rounded text-left ".concat(y?"bg-interactive-hover":""),onClick:function(){n(g),d(!1)}},s(g,y))})))},gn=function(t){var e=t.children,n=t.className;return M("label",{class:"text-fg-primary mb-2 block text-sm font-medium ".concat(n===void 0?"":n)},e)},hs=function(t){var e=t.children,n=t.className;return M("span",{class:"text-fg-muted text-xs ".concat(n===void 0?"":n)},e)},yn=function(t){var e=t.children,n=t.className;return M("section",{class:"mb-6 ".concat(n===void 0?"":n)},e)},fs=function(t){var e=t.value,n=t.min,i=n===void 0?0:n,r=t.max,o=r===void 0?1:r,s=t.step,a=s===void 0?.1:s,l=t.onChange;return M("input",{type:"range",class:"range-sm bg-border-subtle mb-2 h-1 w-full cursor-pointer appearance-none rounded-lg",value:e,min:i,max:o,step:a,onInput:function(c){return l(parseFloat(c.target.value))}})},Yi=function(t){var e=t.color,n=t.active,i=t.onSelect,r=function(o){return o==="transparent"||/^rgba\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*,\s*0\s*\)$/i.test(o)||/^#([0-9a-f]{8})$/i.test(o)&&o.slice(-2).toLowerCase()==="00"||/^#([0-9a-f]{4})$/i.test(o)&&o.slice(-1).toLowerCase()==="0"}(e)?{backgroundColor:"#fff",backgroundImage:"linear-gradient(45deg, transparent 40%, red 40%, red 60%, transparent 60%)",backgroundSize:"100% 100%"}:{backgroundColor:e};return M("button",{title:e,class:"border-border-strong h-5 w-5 rounded-full border ".concat(n?"outline-accent outline outline-2 outline-offset-2":""),style:r,onClick:function(){return i(e)}})},Bq=[{id:xn.SOLID},{id:xn.DASHED,dash:[6,2]},{id:xn.DASHED,dash:[8,4]},{id:xn.DASHED,dash:[3,3]},{id:xn.DASHED,dash:[1,2]},{id:xn.DASHED,dash:[4,2,1,2]},{id:xn.DASHED,dash:[8,4,1,4]}],bP=function(t){return M("svg",{width:"80",height:"8",viewBox:"0 0 80 8"},M("line",{x1:"0",y1:"4",x2:"80",y2:"4",style:{strokeDasharray:t==null?void 0:t.join(" "),stroke:"currentColor",strokeWidth:"2"}}))},lC=function(t){return M(aC,Ee(Ee({},t),{},{options:Bq,getOptionKey:function(e){var n;return e.id+(((n=e.dash)===null||n===void 0?void 0:n.join("-"))||"")},renderValue:function(e){return bP(e.dash)},renderOption:function(e){return M("div",{class:"px-1 py-2"},bP(e.dash))}}))},Hq=[Pt.None,Pt.Square,Pt.Circle,Pt.Diamond,Pt.OpenArrow,Pt.ClosedArrow,Pt.ROpenArrow,Pt.RClosedArrow,Pt.Butt,Pt.Slash],SP=function(t){var e,n=t.ending,i=t.position,r=pt(pt(pt(pt(pt(pt(pt(pt(pt({},Pt.Square,M("path",{d:"M68 -4 L76 -4 L76 4 L68 4 Z"})),Pt.Circle,M("circle",{cx:"72",cy:"0",r:"4"})),Pt.Diamond,M("path",{d:"M72 -5 L77 0 L72 5 L67 0 Z"})),Pt.OpenArrow,M("path",{d:"M67 -5 L77 0 L67 5",fill:"none"})),Pt.ClosedArrow,M("path",{d:"M67 -5 L77 0 L67 5 Z"})),Pt.ROpenArrow,M("path",{d:"M77 -5 L67 0 L77 5",fill:"none"})),Pt.RClosedArrow,M("path",{d:"M77 -5 L67 0 L77 5 Z"})),Pt.Butt,M("path",{d:"M72 -5 L72 5",fill:"none"})),Pt.Slash,M("path",{d:"M67 -5 L77 5",fill:"none"})),o=pt(pt(pt(pt(pt(pt(pt(pt(pt({},Pt.Square,68),Pt.Circle,68),Pt.Diamond,67),Pt.OpenArrow,76),Pt.ClosedArrow,67),Pt.ROpenArrow,67),Pt.RClosedArrow,67),Pt.Butt,72),Pt.Slash,72),s=r[n];return M("svg",{width:"80",height:"20",viewBox:"0 0 80 20",class:"text-fg-primary"},M("g",{transform:i==="start"?"rotate(180 40 10)":""},M("line",{x1:"4",y1:"10",x2:(e=o[n])!==null&&e!==void 0?e:77,y2:"10",stroke:"currentColor","stroke-width":"1.5"}),s&&M("g",{transform:"translate(0, 10)",fill:"currentColor",stroke:"currentColor","stroke-width":"1.5"},s)))},MP=function(t){var e=t.position,n=Dy(t,Uq);return M(aC,Ee(Ee({},n),{},{options:Hq,getOptionKey:function(i){return i},triggerClass:"px-3 py-1",renderValue:function(i){return M(SP,{ending:i,position:e})},renderOption:function(i){return M("div",{class:"px-1 py-1"},M(SP,{ending:i,position:e}))}}))},Vq=function(t){return M(aC,Ee(Ee({},t),{},{options:GW,getOptionKey:function(e){return e},triggerClass:"px-2 py-1 text-sm",renderValue:function(e){return M("span",null,RA(e))},renderOption:function(e){return M("div",{class:"px-2 py-1"},RA(e))}}))},$q=function(t){var e=t.value,n=t.onChange,i=t.options,r=i===void 0?[8,9,10,11,12,14,16,18,24,36,48,72]:i,o=QF(),s=o.open,a=o.setOpen,l=o.rootRef,c=o.selectedItemRef;return M("div",{ref:l,class:"relative w-full"},M("input",{type:"number",min:"1",class:"border-border-default bg-bg-input w-full rounded border px-2 py-1 pr-7 text-sm",value:e,onInput:function(u){var d=parseInt(u.target.value,10);Number.isFinite(d)&&d>0&&n(d)},onClick:function(){return a(!0)}}),M("button",{type:"button",class:"absolute inset-y-0 right-1 flex items-center",onClick:function(){return a(function(u){return!u})},tabIndex:-1},M("svg",{class:"text-fg-secondary h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},M("path",{"fill-rule":"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.24 4.24a.75.75 0 01-1.06 0L5.21 8.29a.75.75 0 01.02-1.08z","clip-rule":"evenodd"}))),s&&M("div",{class:"border-border-default bg-bg-elevated absolute z-10 mt-1 max-h-48 w-full overflow-y-auto rounded border shadow-lg"},r.map(function(u){var d=u===e;return M("button",{ref:d?c:null,key:u,class:"hover:bg-interactive-hover block w-full px-2 py-1 text-left text-sm ".concat(d?"bg-interactive-hover":""),onClick:function(){n(u),a(!1)}},u)})))},Wq=(pt(pt(pt(pt(pt(pt(pt(pt(pt(pt(_P={},Mt.Normal,"blendMode.normal"),Mt.Multiply,"blendMode.multiply"),Mt.Screen,"blendMode.screen"),Mt.Overlay,"blendMode.overlay"),Mt.Darken,"blendMode.darken"),Mt.Lighten,"blendMode.lighten"),Mt.ColorDodge,"blendMode.colorDodge"),Mt.ColorBurn,"blendMode.colorBurn"),Mt.HardLight,"blendMode.hardLight"),Mt.SoftLight,"blendMode.softLight"),pt(pt(pt(pt(pt(pt(_P,Mt.Difference,"blendMode.difference"),Mt.Exclusion,"blendMode.exclusion"),Mt.Hue,"blendMode.hue"),Mt.Saturation,"blendMode.saturation"),Mt.Color,"blendMode.color"),Mt.Luminosity,"blendMode.luminosity")),cg=function(t){var e,n,i,r,o=t.documentId,s=t.selected,a=t.activeTool,l=t.colorPresets,c=Nr().provides,u=kn(o).translate;if(!c)return null;var d=s==null?void 0:s.object,f=a==null?void 0:a.defaults,m=!!d,g=m?d.color:(e=f==null?void 0:f.color)!==null&&e!==void 0?e:"#FFFF00",y=m?d.opacity:(n=f==null?void 0:f.opacity)!==null&&n!==void 0?n:1,x=m?(i=d.blendMode)!==null&&i!==void 0?i:Mt.Normal:(r=f==null?void 0:f.blendMode)!==null&&r!==void 0?r:Mt.Normal,v=Ge(xe(g),2),w=v[0],_=v[1],S=Ge(xe(y),2),E=S[0],T=S[1],P=Ge(xe(x),2),D=P[0],A=P[1];ge(function(){return _(g)},[g]),ge(function(){return T(y)},[y]),ge(function(){return A(x)},[x]);var R=_o(E,300);ge(function(){return O({opacity:R})},[R]);var N=function(H){_(H),O({color:H})};function O(H){c&&(m?c.updateAnnotation(d.pageIndex,d.id,H):a&&c.setToolDefaults(a.id,H))}return M(Tt,null,M(yn,null,M(gn,{className:"mb-3"},u("annotation.color")),M("div",{class:"grid grid-cols-6 gap-x-1 gap-y-4"},l.map(function(H){return M(Yi,{key:H,color:H,active:H===w,onSelect:N})}))),M(yn,null,M(gn,null,u("annotation.opacity")),M(fs,{value:E,min:.1,max:1,step:.05,onChange:T}),M(hs,null,Math.round(100*E),"%")),M(yn,null,M(gn,null,u("annotation.blendMode")),M("select",{class:"border-border-default bg-bg-input text-fg-primary w-full rounded border px-2 py-1 text-sm",value:D,onChange:function(H){return q=parseInt(H.target.value,10),A(Z=q),void O({blendMode:Z});var q,Z}},jW.map(function(H){return M("option",{key:H,value:H},u(Wq[H]))}))))},CP=function(t){var e,n,i,r,o,s=t.documentId,a=t.selected,l=t.activeTool,c=t.colorPresets,u=Nr().provides,d=kn(s).translate;if(!u)return null;var f=a==null?void 0:a.object,m=l==null?void 0:l.defaults,g=!!f,y=g?f.color:(e=m==null?void 0:m.color)!==null&&e!==void 0?e:"#000000",x=g?f.strokeColor:(n=m==null?void 0:m.strokeColor)!==null&&n!==void 0?n:"#000000",v=g?f.opacity:(i=m==null?void 0:m.opacity)!==null&&i!==void 0?i:1,w=g?f.strokeWidth:(r=m==null?void 0:m.strokeWidth)!==null&&r!==void 0?r:2,_=g?{id:f.strokeStyle,dash:f.strokeDashArray}:{id:(o=m==null?void 0:m.strokeStyle)!==null&&o!==void 0?o:xn.SOLID,dash:m==null?void 0:m.strokeDashArray},S=Ge(xe(y),2),E=S[0],T=S[1],P=Ge(xe(x),2),D=P[0],A=P[1],R=Ge(xe(v),2),N=R[0],O=R[1],H=Ge(xe(w),2),q=H[0],Z=H[1],G=Ge(xe(_),2),Y=G[0],z=G[1];ge(function(){return T(y)},[y]),ge(function(){return A(x)},[x]),ge(function(){return O(v)},[v]),ge(function(){return Z(w)},[w]),ge(function(){return z(_)},[_]);var $=_o(N,300),X=_o(q,300);ge(function(){return pe({opacity:$})},[$]),ge(function(){return pe({strokeWidth:X})},[X]);var K=function(be){T(be),pe({color:be})},oe=function(be){A(be),pe({strokeColor:be})};function pe(be){u&&(g?u.updateAnnotation(f.pageIndex,f.id,be):l&&u.setToolDefaults(l.id,be))}return M(Tt,null,M(yn,null,M(gn,{className:"mb-3"},d("annotation.fillColor")),M("div",{class:"grid grid-cols-6 gap-x-1 gap-y-4"},c.map(function(be){return M(Yi,{key:be,color:be,active:be===E,onSelect:K})}),M(Yi,{color:"transparent",active:E==="transparent",onSelect:K}))),M(yn,null,M(gn,null,d("annotation.opacity")),M(fs,{value:N,min:.1,max:1,step:.05,onChange:O}),M(hs,null,Math.round(100*N),"%")),M(yn,null,M(gn,{className:"mb-3"},d("annotation.strokeColor")),M("div",{class:"grid grid-cols-6 gap-x-1 gap-y-4"},c.map(function(be){return M(Yi,{key:be,color:be,active:be===D,onSelect:oe})}))),M(yn,null,M(gn,{className:"mb-3"},d("annotation.borderStyle")),M(lC,{value:Y,onChange:function(be){z(be),pe({strokeStyle:be.id,strokeDashArray:be.dash})}})),M(yn,null,M(gn,null,d("annotation.strokeWidth")),M(fs,{value:q,min:1,max:30,step:1,onChange:Z}),M(hs,null,q,"px")))},EP=function(t){var e,n,i,r,o,s,a,l=t.documentId,c=t.selected,u=t.activeTool,d=t.colorPresets,f=Nr().provides,m=kn(l).translate;if(!f)return null;var g=c==null?void 0:c.object,y=u==null?void 0:u.defaults,x=!!g,v=x?g.color:(e=y==null?void 0:y.color)!==null&&e!==void 0?e:"#000000",w=x?g.strokeColor:(n=y==null?void 0:y.strokeColor)!==null&&n!==void 0?n:"#000000",_=x?g.opacity:(i=y==null?void 0:y.opacity)!==null&&i!==void 0?i:1,S=x?g.strokeWidth:(r=y==null?void 0:y.strokeWidth)!==null&&r!==void 0?r:2,E=x?(o=g.lineEndings)!==null&&o!==void 0?o:{start:Pt.None,end:Pt.None}:(s=y==null?void 0:y.lineEndings)!==null&&s!==void 0?s:{start:Pt.None,end:Pt.None},T=x?{id:g.strokeStyle,dash:g.strokeDashArray}:{id:(a=y==null?void 0:y.strokeStyle)!==null&&a!==void 0?a:xn.SOLID,dash:y==null?void 0:y.strokeDashArray},P=Ge(xe(v),2),D=P[0],A=P[1],R=Ge(xe(w),2),N=R[0],O=R[1],H=Ge(xe(_),2),q=H[0],Z=H[1],G=Ge(xe(S),2),Y=G[0],z=G[1],$=Ge(xe(T),2),X=$[0],K=$[1],oe=Ge(xe(E.start),2),pe=oe[0],be=oe[1],it=Ge(xe(E.end),2),ae=it[0],me=it[1];ge(function(){return A(v)},[v]),ge(function(){return O(w)},[w]),ge(function(){return Z(_)},[_]),ge(function(){return z(S)},[S]),ge(function(){return K(T)},[T]),ge(function(){return be(E.start)},[E.start]),ge(function(){return me(E.end)},[E.end]);var Fe=_o(q,300),tt=_o(Y,300);ge(function(){return It({opacity:Fe})},[Fe]),ge(function(){return It({strokeWidth:tt})},[tt]);var Be=function(Re){A(Re),It({color:Re})},yt=function(Re){O(Re),It({strokeColor:Re})};function It(Re){f&&(x?f.updateAnnotation(g.pageIndex,g.id,Re):u&&f.setToolDefaults(u.id,Re))}return M(Tt,null,M(yn,null,M(gn,{className:"mb-3"},m("annotation.strokeColor")),M("div",{class:"grid grid-cols-6 gap-x-1 gap-y-4"},d.map(function(Re){return M(Yi,{key:Re,color:Re,active:Re===N,onSelect:yt})}),M(Yi,{color:"transparent",active:N==="transparent",onSelect:yt}))),M(yn,null,M(gn,null,m("annotation.opacity")),M(fs,{value:q,min:.1,max:1,step:.05,onChange:Z}),M(hs,null,Math.round(100*q),"%")),M(yn,null,M(gn,{className:"mb-3"},m("annotation.borderStyle")),M(lC,{value:X,onChange:function(Re){K(Re),It({strokeStyle:Re.id,strokeDashArray:Re.dash})}})),M(yn,null,M(gn,null,m("annotation.strokeWidth")),M(fs,{value:Y,min:1,max:10,step:1,onChange:z}),M(hs,null,Y)),M(yn,null,M("div",{class:"grid grid-cols-2 gap-4"},M("div",null,M(gn,{className:"mb-3"},m("annotation.lineStart")),M(MP,{value:pe,onChange:function(Re){be(Re),It({lineEndings:{start:Re,end:ae}})},position:"start"})),M("div",null,M(gn,{className:"mb-3"},m("annotation.lineEnd")),M(MP,{value:ae,onChange:function(Re){me(Re),It({lineEndings:{start:pe,end:Re}})},position:"end"})))),M(yn,null,M(gn,{className:"mb-3"},m("annotation.fillColor")),M("div",{class:"grid grid-cols-6 gap-x-1 gap-y-4"},d.map(function(Re){return M(Yi,{key:Re,color:Re,active:Re===D,onSelect:Be})}),M(Yi,{color:"transparent",active:D==="transparent",onSelect:Be}))))};function Aa(t){var e=t.active,n=e!==void 0&&e,i=t.disabled,r=i!==void 0&&i,o=t.onClick,s=t.title,a=t.children,l=t.className,c=l===void 0?"":l;return M("button",{type:"button",title:s,disabled:r,onClick:o,className:"h-9 w-9 rounded border px-2 py-1 text-sm transition-colors ".concat(n?"border-accent bg-accent text-fg-on-accent":"border-border-default bg-bg-input text-fg-primary hover:bg-interactive-hover"," disabled:cursor-not-allowed disabled:opacity-40 ").concat(c)},a)}var TP,Gq=(pt(pt(pt(pt(pt(pt(pt(pt(pt(pt(TP={},_e.INK,{component:function(t){var e,n,i,r,o,s,a=t.documentId,l=t.selected,c=t.activeTool,u=t.colorPresets,d=Nr().provides,f=kn(a).translate;if(!d)return null;var m=l==null?void 0:l.object,g=c==null?void 0:c.defaults,y=(e=(n=m==null?void 0:m.color)!==null&&n!==void 0?n:g==null?void 0:g.color)!==null&&e!==void 0?e:"#000000",x=(i=(r=m==null?void 0:m.opacity)!==null&&r!==void 0?r:g==null?void 0:g.opacity)!==null&&i!==void 0?i:1,v=(o=(s=m==null?void 0:m.strokeWidth)!==null&&s!==void 0?s:g==null?void 0:g.strokeWidth)!==null&&o!==void 0?o:2,w=Ge(xe(y),2),_=w[0],S=w[1],E=Ge(xe(x),2),T=E[0],P=E[1],D=Ge(xe(v),2),A=D[0],R=D[1];ge(function(){return S(y)},[y]),ge(function(){return P(x)},[x]),ge(function(){return R(v)},[v]);var N=_o(T,300),O=_o(A,300);ge(function(){return q({opacity:N})},[N]),ge(function(){return q({strokeWidth:O})},[O]);var H=function(Z){S(Z),q({color:Z})};function q(Z){d&&(m?d.updateAnnotation(m.pageIndex,m.id,Z):c&&d.setToolDefaults(c.id,Z))}return M(Tt,null,M(yn,null,M(gn,{className:"mb-3"},f("annotation.color")),M("div",{class:"grid grid-cols-6 gap-x-1 gap-y-4"},u.map(function(Z){return M(Yi,{key:Z,color:Z,active:Z===_,onSelect:H})}))),M(yn,null,M(gn,null,f("annotation.opacity")),M(fs,{value:T,min:.1,max:1,step:.05,onChange:P}),M(hs,null,Math.round(100*T),"%")),M(yn,null,M(gn,null,f("annotation.strokeWidth")),M(fs,{value:A,min:1,max:30,step:1,onChange:R}),M(hs,null,A,"px")))},titleKey:"annotation.ink"}),_e.POLYGON,{component:function(t){var e,n,i,r,o,s=t.documentId,a=t.selected,l=t.activeTool,c=t.colorPresets,u=Nr().provides,d=kn(s).translate;if(!u)return null;var f=a==null?void 0:a.object,m=l==null?void 0:l.defaults,g=!!f,y=g?f.color:(e=m==null?void 0:m.color)!==null&&e!==void 0?e:"#000000",x=g?f.strokeColor:(n=m==null?void 0:m.strokeColor)!==null&&n!==void 0?n:"#000000",v=g?f.opacity:(i=m==null?void 0:m.opacity)!==null&&i!==void 0?i:1,w=g?f.strokeWidth:(r=m==null?void 0:m.strokeWidth)!==null&&r!==void 0?r:2,_=g?{id:f.strokeStyle,dash:f.strokeDashArray}:{id:(o=m==null?void 0:m.strokeStyle)!==null&&o!==void 0?o:xn.SOLID,dash:m==null?void 0:m.strokeDashArray},S=Ge(xe(y),2),E=S[0],T=S[1],P=Ge(xe(x),2),D=P[0],A=P[1],R=Ge(xe(v),2),N=R[0],O=R[1],H=Ge(xe(w),2),q=H[0],Z=H[1],G=Ge(xe(_),2),Y=G[0],z=G[1];ge(function(){return T(y)},[y]),ge(function(){return A(x)},[x]),ge(function(){return O(v)},[v]),ge(function(){return Z(w)},[w]),ge(function(){return z(_)},[_]);var $=_o(N,300),X=_o(q,300);ge(function(){return pe({opacity:$})},[$]),ge(function(){return pe({strokeWidth:X})},[X]);var K=function(be){T(be),pe({color:be})},oe=function(be){A(be),pe({strokeColor:be})};function pe(be){u&&(g?u.updateAnnotation(f.pageIndex,f.id,be):l&&u.setToolDefaults(l.id,be))}return M(Tt,null,M(yn,null,M(gn,{className:"mb-3"},d("annotation.strokeColor")),M("div",{class:"grid grid-cols-6 gap-x-1 gap-y-4"},c.map(function(be){return M(Yi,{key:be,color:be,active:be===D,onSelect:oe})}),M(Yi,{color:"transparent",active:D==="transparent",onSelect:oe}))),M(yn,null,M(gn,null,d("annotation.opacity")),M(fs,{value:N,min:.1,max:1,step:.05,onChange:O}),M(hs,null,Math.round(100*N),"%")),M(yn,null,M(gn,{className:"mb-3"},d("annotation.borderStyle")),M(lC,{value:Y,onChange:function(be){z(be),pe({strokeStyle:be.id,strokeDashArray:be.dash})}})),M(yn,null,M(gn,null,d("annotation.strokeWidth")),M(fs,{value:q,min:1,max:10,step:1,onChange:Z}),M(hs,null,q)),M(yn,null,M(gn,{className:"mb-3"},d("annotation.fillColor")),M("div",{class:"grid grid-cols-6 gap-x-1 gap-y-4"},c.map(function(be){return M(Yi,{key:be,color:be,active:be===E,onSelect:K})}),M(Yi,{color:"transparent",active:E==="transparent",onSelect:K}))))},titleKey:"annotation.polygon"}),_e.SQUARE,{component:CP,titleKey:"annotation.square"}),_e.CIRCLE,{component:CP,titleKey:"annotation.circle"}),_e.LINE,{component:EP,titleKey:function(t){var e;return((e=t.activeTool)===null||e===void 0?void 0:e.id)==="lineArrow"?"annotation.arrow":"annotation.line"}}),_e.POLYLINE,{component:EP,titleKey:"annotation.polyline"}),_e.HIGHLIGHT,{component:cg,titleKey:"annotation.highlight"}),_e.UNDERLINE,{component:cg,titleKey:"annotation.underline"}),_e.STRIKEOUT,{component:cg,titleKey:"annotation.strikeout"}),_e.SQUIGGLY,{component:cg,titleKey:"annotation.squiggly"}),pt(pt(TP,_e.FREETEXT,{component:function(t){var e,n,i,r,o,s,a,l=t.documentId,c=t.selected,u=t.activeTool,d=t.colorPresets,f=Nr().provides,m=kn(l).translate;if(!f)return null;var g=c==null?void 0:c.object,y=u==null?void 0:u.defaults,x=!!g,v=x?g.fontFamily:(e=y==null?void 0:y.fontFamily)!==null&&e!==void 0?e:vi.Helvetica,w=Ly(v).family,_=Ym(v),S=Zm(v),E=x?g.fontColor:(n=y==null?void 0:y.fontColor)!==null&&n!==void 0?n:"#000000",T=x?g.opacity:(i=y==null?void 0:y.opacity)!==null&&i!==void 0?i:1,P=x?g.backgroundColor:(r=y==null?void 0:y.backgroundColor)!==null&&r!==void 0?r:"#000000",D=x?g.fontSize:(o=y==null?void 0:y.fontSize)!==null&&o!==void 0?o:12,A=x?g.textAlign:(s=y==null?void 0:y.textAlign)!==null&&s!==void 0?s:Sr.Left,R=x?g.verticalAlign:(a=y==null?void 0:y.verticalAlign)!==null&&a!==void 0?a:yo.Top,N=Ge(xe(w),2),O=N[0],H=N[1],q=Ge(xe(D),2),Z=q[0],G=q[1],Y=Ge(xe(_),2),z=Y[0],$=Y[1],X=Ge(xe(S),2),K=X[0],oe=X[1],pe=Ge(xe(A),2),be=pe[0],it=pe[1],ae=Ge(xe(R),2),me=ae[0],Fe=ae[1],tt=Ge(xe(E),2),Be=tt[0],yt=tt[1],It=Ge(xe(T),2),Re=It[0],le=It[1],we=Ge(xe(P),2),ve=we[0],Ae=we[1];function V(re){f&&(x?f.updateAnnotation(g.pageIndex,g.id,re):u&&f.setToolDefaults(u.id,re))}ge(function(){H(w),$(_),oe(S)},[w,_,S]),ge(function(){return yt(E)},[E]),ge(function(){return le(T)},[T]),ge(function(){return Ae(P)},[P]),ge(function(){return G(D)},[D]),ge(function(){return it(A)},[A]),ge(function(){return Fe(R)},[R]);var mt=_o(Re,300),$e=_o(ve,300);ge(function(){return V({opacity:mt})},[mt]),ge(function(){return V({backgroundColor:$e})},[$e]);var _t=function(re){yt(re),V({fontColor:re})},Ne=function(re){Ae(re),V({backgroundColor:re})},B=function(re,Se,he){V({fontFamily:Pl(re,{bold:Se,italic:he})})},L=function(re){it(re),V({textAlign:re})},Q=function(re){Fe(re),V({verticalAlign:re})};return M(Tt,null,M(yn,null,M(gn,null,m("annotation.font")),M("div",{class:"mb-3 flex gap-2"},M(Vq,{value:O,onChange:function(re){var Se=Ym(Pl(re,{bold:!0,italic:!1})),he=Zm(Pl(re,{bold:!1,italic:!0})),rt=!!Se&&z,Ue=!!he&&K;H(re),$(rt),oe(Ue),B(re,rt,Ue)}}),M("div",{class:"w-36"},M($q,{value:Z,onChange:function(re){!Number.isFinite(re)||re<=0||(G(re),V({fontSize:re}))}}))),M("div",{class:"flex gap-2"},M(Aa,{title:"Bold",active:z,disabled:!Ym(Pl(O,{bold:!0,italic:!1})),onClick:function(){if(Ym(Pl(O,{bold:!0,italic:!1}))){var re=!z;$(re),B(O,re,K)}},className:"font-bold"},M(Mn,{icon:"bold",size:18})),M(Aa,{title:"Italic",active:K,disabled:!Zm(Pl(O,{bold:!1,italic:!0})),onClick:function(){if(Zm(Pl(O,{bold:!1,italic:!0}))){var re=!K;oe(re),B(O,z,re)}},className:"italic"},M(Mn,{icon:"italic",size:18})))),M(yn,null,M(gn,null,m("annotation.textAlign")),M("div",{class:"flex gap-2"},M(Aa,{title:"Align left",active:be===Sr.Left,onClick:function(){return L(Sr.Left)}},M(Mn,{icon:"alignLeft",size:18})),M(Aa,{title:"Align center",active:be===Sr.Center,onClick:function(){return L(Sr.Center)}},M(Mn,{icon:"alignCenter",size:18})),M(Aa,{title:"Align right",active:be===Sr.Right,onClick:function(){return L(Sr.Right)}},M(Mn,{icon:"alignRight",size:18})))),M(yn,null,M(gn,null,m("annotation.verticalAlign")),M("div",{class:"flex gap-2"},M(Aa,{title:"Align top",active:me===yo.Top,onClick:function(){return Q(yo.Top)}},M(Mn,{icon:"alignTop",size:18})),M(Aa,{title:"Align middle",active:me===yo.Middle,onClick:function(){return Q(yo.Middle)}},M(Mn,{icon:"alignMiddle",size:18})),M(Aa,{title:"Align bottom",active:me===yo.Bottom,onClick:function(){return Q(yo.Bottom)}},M(Mn,{icon:"alignBottom",size:18})))),M(yn,null,M(gn,{className:"mb-3"},m("annotation.fontColor")),M("div",{class:"grid grid-cols-6 gap-x-1 gap-y-4"},d.map(function(re){return M(Yi,{key:re,color:re,active:re===Be,onSelect:_t})}))),M(yn,null,M(gn,{className:"mb-3"},m("annotation.backgroundColor")),M("div",{class:"grid grid-cols-6 gap-x-1 gap-y-4"},d.map(function(re){return M(Yi,{key:re,color:re,active:re===ve,onSelect:Ne})}),M(Yi,{color:"transparent",active:ve==="transparent",onSelect:Ne}))),M(yn,null,M(gn,null,m("annotation.opacity")),M(fs,{value:Re,min:.1,max:1,step:.05,onChange:le}),M(hs,null,Math.round(100*Re),"%")))},titleKey:"annotation.freeText"}),_e.STAMP,{component:function(t){var e=t.documentId;return M("div",{className:"text-fg-muted text-sm"},(0,kn(e).translate)("annotation.noStylesStamp"))},titleKey:"annotation.stamp"})),AP=function(t){var e=t.documentId,n=kn(e).translate;return M("div",{class:"text-fg-muted flex flex-col items-center gap-2 p-4"},M(Mn,{icon:"palette",className:"h-18 w-18 text-fg-muted"}),M("div",{className:"text-fg-muted max-w-[150px] text-center text-sm"},n("annotation.selectAnnotation")))};function jq(t){var e,n=t.documentId,i=Nr().provides,r=S4(n),o=r.provides,s=r.state,a=kn(n).translate;if(!i||!o)return null;var l=(e=i==null?void 0:i.getColorPresets())!==null&&e!==void 0?e:[],c=null,u=null,d=s.selectedUid?YM(s,s.selectedUid):null;if(d)c=o.findToolForAnnotation(d.object),u=d.object.type;else if(s.activeToolId){var f,m,g;u=(m=(g=c=(f=o.getActiveTool())!==null&&f!==void 0?f:null)===null||g===void 0?void 0:g.defaults.type)!==null&&m!==void 0?m:null}if(u===null)return ee(AP,{documentId:n});var y=Gq[u];if(!y)return ee(AP,{documentId:n});var x=y.component,v=y.titleKey,w={documentId:n,selected:d,activeTool:c,colorPresets:l},_=typeof v=="function"?v(w):v,S=_?a(_):"",E=S?a(d?"annotation.styles":"annotation.defaults",{params:{type:S}}):"";return ee("div",{class:"h-full overflow-y-auto p-4",children:[E&&ee("h2",{class:"text-md mb-4 font-medium",children:E}),ee(x,Ee({},w))]})}function qq(t){var e=t.schema,n=t.documentId,i=t.props,r=i.menuWrapperProps,o=i.rect,s=i.placement,a={position:"absolute",pointerEvents:"auto",cursor:"default",left:"50%",transform:"translateX(-50%)"};return s!=null&&s.suggestTop?a.top=-48:a.top=o.size.height+8,M("div",Ee(Ee({},r),hi(e)),M("div",{style:a,className:"border-border-subtle bg-bg-elevated rounded-lg border shadow-lg"},M("div",{className:"flex items-center gap-1 p-1"},e.items.map(function(l){return M(JF,{key:l.id,item:l,documentId:n,props:i})}))))}function JF(t){var e,n=t.item,i=t.documentId,r=t.props;switch(n.type){case"command-button":return M("div",Ee({},hi(n)),M(cc,{commandId:n.commandId,documentId:i,variant:n.variant}));case"divider":return M("div",Ee({},hi(n)),M("div",{className:"bg-border-default h-6 w-px","aria-hidden":"true"}));case"group":return M("div",Ee({className:"flex items-center gap-".concat((e=n.gap)!==null&&e!==void 0?e:1)},hi(n)),n.items.map(function(o){return M(JF,{key:o.id,item:o,documentId:i,props:r})}));default:return null}}function Xq(t){var e,n,i=t.schema,r=t.documentId,o=t.className,s=i.content,a=i.position,l=Vy().renderCustomComponent,c=(e=a.anchor,(n={"top-left":"top-0 left-0","top-center":"top-0 left-1/2 -translate-x-1/2","top-right":"top-0 right-0","center-left":"top-1/2 left-0 -translate-y-1/2",center:"top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2","center-right":"top-1/2 right-0 -translate-y-1/2","bottom-left":"bottom-0 left-0","bottom-center":"bottom-0 left-1/2 -translate-x-1/2","bottom-right":"bottom-0 right-0"})[e]||n["bottom-center"]),u=function(d){if(d){var f={};return d.top&&(f.top=d.top),d.right&&(f.right=d.right),d.bottom&&(f.bottom=d.bottom),d.left&&(f.left=d.left),Object.keys(f).length>0?f:void 0}}(a.offset);return M("div",{className:"absolute ".concat(c," ").concat(o||""),style:u,"data-overlay-id":i.id},l(s.componentId,r,{}))}function eU(t){var e=t.open,n=t.title,i=t.children,r=t.onClose,o=t.onExited,s=t.className,a=t.showCloseButton,l=a===void 0||a,c=vt(null),u=Ge(xe(e),2),d=u[0],f=u[1],m=Ge(xe(!1),2),g=m[0],y=m[1];return ge(function(){if(e)f(!0),requestAnimationFrame(function(){y(!0)});else if(d){y(!1);var x=setTimeout(function(){f(!1),o==null||o()},200);return function(){return clearTimeout(x)}}},[e,d,o]),ge(function(){if(e){var x=function(v){v.key==="Escape"&&(r==null||r())};return document.addEventListener("keydown",x),function(){return document.removeEventListener("keydown",x)}}},[e,r]),ge(function(){return document.body.style.overflow=d?"hidden":"",function(){document.body.style.overflow=""}},[d]),d?ee("div",{ref:c,className:"fixed inset-0 z-50 transition-opacity duration-200 md:flex md:items-center md:justify-center ".concat(g&&e?"bg-bg-overlay":"bg-transparent"),onClick:function(x){x.target===c.current&&(r==null||r())},children:ee("div",{className:mp("bg-bg-surface md:border-border-subtle relative flex h-full w-full flex-col transition-all duration-200 md:h-auto md:w-[28rem] md:max-w-[90vw] md:rounded-lg md:border md:shadow-lg",g&&e?"scale-100 opacity-100":"scale-95 opacity-0",s),onClick:function(x){return x.stopPropagation()},children:[(n||l)&&ee("div",{className:"border-border-subtle flex flex-shrink-0 items-center justify-between border-b px-6 py-4",children:[n&&ee("h2",{className:"text-fg-primary text-lg font-semibold",children:n}),l&&ee(la,{onClick:r,className:"hover:bg-interactive-hover p-1",children:ee(Mn,{icon:"x",className:"h-5 w-5"})})]}),ee("div",{className:"flex-1 overflow-y-auto px-6 py-4 md:max-h-[80vh] md:flex-none",children:i})]})}):null}function Yq(t){var e=t.documentId,n=t.isOpen,i=t.onClose,r=t.onExited,o=pp().provides,s=z4().provides,a=kn(e).translate,l=Ge(xe("all"),2),c=l[0],u=l[1],d=Ge(xe(""),2),f=d[0],m=d[1],g=Ge(xe(!0),2),y=g[0],x=g[1],v=Ge(xe(!1),2),w=v[0],_=v[1],S=Ge(xe(""),2),E=S[0],T=S[1],P=o==null?void 0:o.forDocument(e).getMetrics(),D=(P==null?void 0:P.currentPage)||1,A=(o==null?void 0:o.forDocument(e).getTotalPages())||0;ge(function(){n&&(u("all"),m(""),x(!0),_(!1),T(""))},[n]);var R=(c!=="custom"||f.trim().length>0)&&!w;return M(eU,{open:n!=null&&n,title:a("print.title"),onClose:i,onExited:r,className:"md:w-[32rem]"},M("div",{className:"space-y-6"},M("div",null,M("label",{className:"text-fg-secondary mb-3 block text-sm font-medium"},a("print.pages")),M("div",{className:"space-y-2"},M("label",{className:"flex items-center"},M("input",{type:"radio",name:"pageRange",value:"all",checked:c==="all",onChange:function(){return u("all")},disabled:w,className:"accent-accent mr-2"}),M("span",{className:"text-fg-primary text-sm"},a("print.all"))),M("label",{className:"flex items-center"},M("input",{type:"radio",name:"pageRange",value:"current",checked:c==="current",onChange:function(){return u("current")},disabled:w,className:"accent-accent mr-2"}),M("span",{className:"text-fg-primary text-sm"},a("print.current",{params:{currentPage:D}}))),M("label",{className:"flex items-start"},M("input",{type:"radio",name:"pageRange",value:"custom",checked:c==="custom",onChange:function(){return u("custom")},disabled:w,className:"accent-accent mr-2 mt-0.5"}),M("div",{className:"flex-1"},M("span",{className:"text-fg-primary mb-1 block text-sm"},a("print.specify")),M("input",{type:"text",placeholder:a("print.specifyEG"),value:f,onInput:function(N){return m(N.target.value)},disabled:c!=="custom"||w,className:"w-full rounded-md border px-3 py-1 text-base ".concat(c!=="custom"||w?"bg-interactive-disabled text-fg-muted":"border-border-default bg-bg-input text-fg-primary focus:border-accent focus:ring-accent"," focus:outline-none focus:ring-1")}),c==="custom"&&f.trim()&&A>0&&M("p",{className:"text-fg-muted mt-1 text-xs"},a("print.current",{params:{totalPages:A}})))))),M("div",null,M("label",{className:"flex items-center"},M("input",{type:"checkbox",checked:y,onChange:function(N){return x(N.target.checked)},disabled:w,className:"accent-accent mr-2"}),M("span",{className:"text-fg-secondary text-sm font-medium"},a("print.annotation")))),w&&M("div",{className:"bg-state-info-light flex items-center space-x-3 rounded-md p-3"},M(yP,{className:"text-accent"}),M("span",{className:"text-accent text-sm"},E)),M("div",{className:"border-border-subtle flex justify-end space-x-3 border-t pt-4"},M(la,{onClick:i,disabled:w,className:"border-border-default bg-bg-surface text-fg-secondary hover:bg-interactive-hover rounded-md border px-4 py-2 text-sm disabled:cursor-not-allowed disabled:opacity-50"},a("print.cancel")),M(la,{onClick:function(){var N;c==="current"?N=String(D):c==="custom"&&(N=f.trim()||void 0);var O={includeAnnotations:y,pageRange:N};try{_(!0),T(a("print.loading"));var H=s==null?void 0:s.forDocument(e).print(O);H&&(H.onProgress(function(q){T(q.message)}),H.wait(function(){_(!1),T(""),i==null||i()},function(q){console.error("Print failed:",q),_(!1),T("")}))}catch(q){console.error("Print failed:",q),_(!1),T("")}},disabled:!R,className:"bg-accent text-fg-on-accent hover:!bg-accent-hover flex items-center space-x-2 rounded-md border border-transparent px-4 py-2 text-sm disabled:cursor-not-allowed disabled:opacity-50"},w&&M(yP,{size:"sm"}),M("span",null,a(w?"print.printing":"print.print"))))))}function Zq(t){var e=t.documentId,n=Ub().provides,i=NL(e),r=i.provides,o=i.state,s=o.currentPage,a=o.totalPages,l=Ge(xe(!1),2),c=l[0],u=l[1],d=Ge(xe(!1),2),f=d[0],m=d[1],g=vt(null),y=Ge(xe(s.toString()),2),x=y[0],v=y[1],w=vt(null);ge(function(){v(s.toString())},[s]);var _=Lt(function(){g.current&&clearTimeout(g.current),g.current=setTimeout(function(){f||u(!1)},4e3)},[f]);return ge(function(){if(n)return n.onScrollActivity(function(S){S.documentId===e&&(u(!0),_())})},[n,e,_]),ge(function(){return function(){g.current&&clearTimeout(g.current)}},[]),a<=1?null:M("div",{onMouseEnter:function(){m(!0),u(!0),g.current&&clearTimeout(g.current)},onMouseLeave:function(){m(!1),_()},className:"pointer-events-auto"},M("div",{className:"border-border-default bg-bg-surface flex items-center gap-1 rounded-lg border p-1 shadow-lg transition-opacity duration-300 ".concat(c?"opacity-100":"opacity-0")},M(cc,{commandId:"scroll:previous-page",documentId:e,variant:"icon"}),M("div",{className:"flex items-center gap-1 px-1"},M("input",{ref:w,type:"text",inputMode:"numeric",pattern:"[0-9]*",value:x,onChange:function(S){var E=S.target.value.replace(/[^0-9]/g,"");v(E)},onFocus:function(){setTimeout(function(){var S;return(S=w.current)===null||S===void 0?void 0:S.select()},0)},onBlur:function(){var S,E=parseInt(x,10);!isNaN(E)&&E>=1&&E<=a?r==null||(S=r.scrollToPage)===null||S===void 0||S.call(r,{pageNumber:E}):v(s.toString())},onKeyDown:function(S){S.key==="Enter"?S.target.blur():S.key==="Escape"&&(v(s.toString()),S.target.blur())},className:"border-border-default bg-bg-input text-fg-primary focus:border-accent focus:ring-accent h-7 w-10 rounded border px-1 text-center text-base focus:outline-none focus:ring-1"}),M("span",{className:"text-fg-secondary text-sm"}," ",a)),M(cc,{commandId:"scroll:next-page",documentId:e,variant:"icon"})))}var Kq={colors:{background:{app:"#f3f4f6",surface:"#ffffff",surfaceAlt:"#f1f3f5",elevated:"#ffffff",overlay:"rgba(0, 0, 0, 0.5)",input:"#ffffff"},foreground:{primary:"#111827",secondary:"#374151",muted:"#6b7280",disabled:"#9ca3af",onAccent:"#ffffff"},border:{default:"#d1d5db",subtle:"#e5e7eb",strong:"#9ca3af"},accent:{primary:"#3b82f6",primaryHover:"#2563eb",primaryActive:"#1d4ed8",primaryLight:"#eff6ff",primaryForeground:"#ffffff"},interactive:{hover:"#f3f4f6",active:"#e5e7eb",selected:"#eff6ff",focus:"#3b82f6",focusRing:"#bfdbfe"},state:{error:"#ef4444",errorLight:"#fef2f2",warning:"#f59e0b",warningLight:"#fffbeb",success:"#22c55e",successLight:"#f0fdf4",info:"#3b82f6",infoLight:"#eff6ff"},tooltip:{background:"#111827",foreground:"#ffffff"},scrollbar:{track:"#f3f4f6",thumb:"#d1d5db",thumbHover:"#9ca3af"}}},Qq={colors:{background:{app:"#111827",surface:"#1f2937",surfaceAlt:"#374151",elevated:"#1f2937",overlay:"rgba(0, 0, 0, 0.7)",input:"#374151"},foreground:{primary:"#f9fafb",secondary:"#e5e7eb",muted:"#9ca3af",disabled:"#6b7280",onAccent:"#111827"},border:{default:"#4b5563",subtle:"#374151",strong:"#6b7280"},accent:{primary:"#60a5fa",primaryHover:"#3b82f6",primaryActive:"#2563eb",primaryLight:"#1e3a5f",primaryForeground:"#111827"},interactive:{hover:"#374151",active:"#4b5563",selected:"#1e3a5f",focus:"#60a5fa",focusRing:"#1e40af"},state:{error:"#f87171",errorLight:"#7f1d1d",warning:"#fbbf24",warningLight:"#78350f",success:"#4ade80",successLight:"#14532d",info:"#60a5fa",infoLight:"#1e3a5f"},tooltip:{background:"#f9fafb",foreground:"#111827"},scrollbar:{track:"#1f2937",thumb:"#4b5563",thumbHover:"#6b7280"}}};function tU(t,e){var n=Ee({},t);for(var i in e){var r=e[i];r&&e0(r)==="object"&&!Array.isArray(r)?n[i]=tU(t[i]||{},r):r!==void 0&&(n[i]=r)}return n}function Jq(t,e){return{colors:tU(t.colors,e)}}function IP(t){return t==="system"?typeof window>"u"?"light":window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":t}function PP(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function eX(t){return`:host {
`.concat(function(e){var n=[];return function i(r,o){for(var s=0,a=Object.entries(r);s<a.length;s++){var l=Ge(a[s],2),c=l[0],u=l[1];u&&e0(u)==="object"?i(u,"".concat(o,"-").concat(PP(c))):u!==void 0&&n.push("  --ep".concat(o,"-").concat(PP(c),": ").concat(u,";"))}}(e.colors,""),n.join(`
`)}(t),`
}`)}function tX(t){var e=t.documentStates,n=t.activeDocumentId,i=t.visibility,r=i===void 0?"multiple":i,o=t.allowOpenFile,s=o===void 0||o,a=$y().provides,l=Lt(function(d){a==null||a.setActiveDocument(d)},[a]),c=Lt(function(d){a==null||a.closeDocument(d)},[a]),u=Lt(function(){a==null||a.openFileDialog()},[a]);return r==="always"||r==="multiple"&&e.length>1?M("div",{className:"bg-bg-surface-alt flex items-end pr-2 pt-2"},M("div",{className:"flex flex-1 items-end overflow-x-auto pl-4"},e.map(function(d){var f,m,g=n===d.id;return M("div",{key:d.id,onClick:function(){return l(d.id)},role:"tab",tabIndex:0,"aria-selected":g,onKeyDown:function(y){y.key!=="Enter"&&y.key!==" "||(y.preventDefault(),l(d.id))},className:"group relative flex min-w-[120px] max-w-[240px] cursor-pointer items-center gap-2 rounded-t-lg px-4 py-2 text-sm font-medium transition-all ".concat(g?"bg-bg-surface text-fg-primary z-10":"bg-bg-surface-alt text-fg-secondary hover:bg-interactive-hover hover:text-fg-primary")},M("span",{className:"min-w-0 flex-1 truncate"},(f=d.name)!==null&&f!==void 0?f:"Document ".concat(d.id.slice(0,8))),g&&M("button",{onClick:function(y){y.stopPropagation(),c(d.id)},"aria-label":"Close ".concat((m=d.name)!==null&&m!==void 0?m:"document"),className:"hover:bg-interactive-hover flex-shrink-0 cursor-pointer rounded-full p-1 transition-all ".concat(g?"opacity-100":"opacity-0 group-hover:opacity-100")},M(Mn,{icon:"x",size:14})))}),s&&M("button",{onClick:u,className:"text-fg-secondary hover:bg-interactive-hover hover:text-fg-primary mb-1.5 ml-1 flex-shrink-0 cursor-pointer rounded p-1.5 transition-colors","aria-label":"Open File",title:"Open File"},M(Mn,{icon:"plus",size:14})))):null}function nX(){var t=$y().provides,e=kn().translate;return M("div",{className:"bg-bg-app flex h-full w-full items-center justify-center"},M("div",{className:"flex max-w-sm flex-col items-center text-center"},M("div",{className:"bg-accent-light mb-6 rounded-full p-5"},M(Mn,{icon:"file",size:48,className:"text-accent"})),M("h2",{className:"text-fg-primary mb-2 text-xl font-semibold"},e("emptyState.title")),M("p",{className:"text-fg-secondary mb-6 text-sm leading-relaxed"},e("emptyState.description"),M("br",null),e("emptyState.descriptionMulti")),M("button",{onClick:function(){t==null||t.openFileDialog()},className:"bg-accent hover:bg-accent-hover text-accent-fg inline-flex cursor-pointer items-center gap-2 rounded-md px-5 py-2.5 text-sm font-medium shadow-sm transition-all"},M(Mn,{icon:"plus",size:16}),e("emptyState.openButton")),M("p",{className:"text-fg-muted mt-4 text-xs"},e("emptyState.supportedFormats"))))}function iX(t){var e=t.documentState,n=$y().provides,i=kn().translate,r=Ge(xe(""),2),o=r[0],s=r[1],a=Ge(xe(!1),2),l=a[0],c=a[1];if(!e)return null;var u=e.name,d=e.errorCode,f=e.passwordProvided,m=d===Xt.Password,g=m&&!f,y=m&&f;if(!m)return M("div",{className:"bg-bg-app flex h-full items-center justify-center p-8"},M("div",{className:"bg-bg-surface border-border-default flex max-w-sm flex-col items-center rounded-xl border p-6 text-center shadow-lg"},M("div",{className:"bg-state-error-light mb-4 rounded-full p-4"},M(Mn,{icon:"alertTriangle",size:28,className:"text-state-error"})),M("h3",{className:"text-fg-primary text-lg font-semibold"},i("documentError.title")),M("p",{className:"text-fg-secondary mt-2 text-sm"},e.error||i("documentError.unknown")),d&&M("p",{className:"text-fg-muted mt-1 text-xs"},i("documentError.errorCode",{params:{code:String(d)}})),M("button",{onClick:function(){return n==null?void 0:n.closeDocument(e.id)},className:"bg-accent hover:bg-accent-hover text-accent-fg mt-5 w-full cursor-pointer rounded-md px-4 py-2.5 text-sm font-medium transition-colors"},i("documentError.close"))));var x=function(){var v=LN(Af().m(function w(){return Af().w(function(_){for(;;)switch(_.n){case 0:if(n&&o.trim()){_.n=1;break}return _.a(2);case 1:c(!0),n.retryDocument(e.id,{password:o}).wait(function(){s(""),c(!1)},function(S){console.error("Retry failed:",S),c(!1)});case 2:return _.a(2)}},w)}));return function(){return v.apply(this,arguments)}}();return M("div",{className:"bg-bg-app flex h-full items-center justify-center p-8"},M("div",{className:"bg-bg-surface border-border-default w-full max-w-sm rounded-xl border p-6 shadow-lg"},M("div",{className:"flex flex-col items-center text-center"},M("div",{className:"bg-accent-light mb-4 rounded-full p-4"},M(Mn,{icon:"lock",size:28,className:"text-accent"})),M("h3",{className:"text-fg-primary text-lg font-semibold"},i("passwordPrompt.title")),u&&M("p",{className:"text-fg-muted mt-1 text-sm"},u)),M("p",{className:"text-fg-secondary mt-4 text-center text-sm"},g&&i("passwordPrompt.required"),y&&i("passwordPrompt.incorrect")),M("div",{className:"mt-5"},M("label",{className:"text-fg-primary mb-1.5 block text-sm font-medium"},i("passwordPrompt.label")),M("input",{type:"password",value:o,onInput:function(v){return s(v.target.value)},onKeyDown:function(v){return v.key==="Enter"&&!l&&o.trim()&&x()},disabled:l,placeholder:i("passwordPrompt.placeholder"),className:"bg-bg-input border-border-default focus:border-accent focus:ring-accent text-fg-primary placeholder:text-fg-muted block w-full rounded-md border px-3 py-2.5 text-sm focus:outline-none focus:ring-1 disabled:opacity-50",autoFocus:!0})),y&&M("div",{className:"bg-state-error-light border-state-error mt-3 flex items-center gap-2 rounded-md border p-3"},M(Mn,{icon:"alertTriangle",size:16,className:"text-state-error flex-shrink-0"}),M("p",{className:"text-state-error text-sm"},i("passwordPrompt.incorrectWarning"))),M("div",{className:"mt-6 flex gap-3"},M("button",{onClick:function(){return n==null?void 0:n.closeDocument(e.id)},disabled:l,className:"border-border-default text-fg-secondary hover:bg-interactive-hover flex-1 cursor-pointer rounded-md border px-4 py-2.5 text-sm font-medium transition-colors disabled:opacity-50"},i("passwordPrompt.cancel")),M("button",{onClick:x,disabled:l||!o.trim(),className:"bg-accent hover:bg-accent-hover text-accent-fg flex-1 cursor-pointer rounded-md px-4 py-2.5 text-sm font-medium transition-colors disabled:cursor-not-allowed disabled:opacity-50"},i(l?"passwordPrompt.opening":"passwordPrompt.open")))))}function rX(t){var e=t.documentId,n=t.className,i=Ha("mode:view",e),r=Ha("mode:annotate",e),o=Ha("mode:shapes",e),s=Ha("mode:redact",e),a=Ha("tabs:overflow-menu",e),l=Rt(function(){return[i,r,o,s].find(function(d){return d==null?void 0:d.active})||i},[i,r,o,s]),c=Lt(function(d){d.preventDefault(),d.stopPropagation(),a&&!a.disabled&&a.execute()},[a]);if(!a||!a.visible)return null;var u=a.active;return M("div",{style:{maxWidth:"100px",width:"100px"},className:n},M(la,{className:"bg-bg-surface col-start-1 row-start-1 !w-full appearance-none rounded-md py-1.5 pl-3 pr-2 text-[13px] ".concat(u?"bg-interactive-selected ring-accent border-none shadow ring":"border-border-default outline-border-default hover:bg-interactive-hover hover:ring-accent outline outline-1 -outline-offset-1 hover:ring"," flex flex-row items-center justify-between gap-2"),onClick:c,disabled:a.disabled,style:{height:34}},M("span",{className:"min-w-0 flex-1 truncate text-left ".concat(u?"text-accent":"text-fg-primary")},l==null?void 0:l.label),M(Mn,{icon:"chevronDown",className:"h-4 w-4 ".concat(u?"text-accent":"text-fg-secondary")})))}function oX(t){var e=t.documentId,n=eF().provides,i=Ge(xe(!1),2),r=i[0],o=i[1],s=Ge(xe(null),2),a=s[0],l=s[1],c=Ge(xe(null),2),u=c[0],d=c[1],f=Ge(xe(null),2),m=f[0],g=f[1],y=vt(null),x=vt(null),v=kn(e).translate,w=function(){y.current&&(URL.revokeObjectURL(y.current),y.current=null),m&&(URL.revokeObjectURL(m),g(null)),o(!1),l(null),d(null)};return ge(function(){if(n)return n.onCaptureArea(function(_){var S=_.pageIndex,E=_.rect,T=_.blob;l({pageIndex:S,rect:E,blob:T});var P=URL.createObjectURL(T);y.current=P,d(P),o(!0)})},[n]),M(Tt,null,M(eU,{open:r,onClose:w,title:v("capture.title"),className:"md:w-[48rem]"},M("div",{className:"space-y-6"},M("div",{className:"flex justify-center"},u&&M("img",{src:u,onLoad:function(){y.current&&(URL.revokeObjectURL(y.current),y.current=null)},alt:"Captured PDF area",style:{maxWidth:"100%",maxHeight:"400px",border:"1px solid #e5e7eb",borderRadius:"4px",display:"block"}})),M("div",{className:"border-border-subtle flex justify-end space-x-3 border-t pt-4"},M(la,{onClick:w,className:"border-border-default bg-bg-surface text-fg-secondary hover:bg-interactive-hover rounded-md border px-4 py-2 text-sm disabled:cursor-not-allowed disabled:opacity-50"},v("capture.cancel")),M(la,{onClick:function(){if(a&&x.current){var _=URL.createObjectURL(a.blob);g(_),x.current.href=_,x.current.download="pdf-capture-page-".concat(a.pageIndex+1,".png"),x.current.click(),w()}},disabled:!a,className:"bg-accent text-fg-on-accent hover:!bg-accent-hover flex items-center space-x-2 rounded-md border border-transparent px-4 py-2 text-sm disabled:cursor-not-allowed disabled:opacity-50"},v("capture.download"))))),M("a",{ref:x,style:{display:"none"},href:"",download:""}))}var An={documentManager:{},commands:{commands:{"zoom:in":{id:"zoom:in",labelKey:"zoom.in",icon:"zoomIn",shortcuts:["Ctrl+=","Meta+=","Ctrl+NumpadAdd","Meta+NumpadAdd"],categories:["zoom","zoom-in"],action:function(t){var e,n=t.registry,i=t.documentId,r=(e=n.getPlugin("zoom"))===null||e===void 0?void 0:e.provides();r&&r.forDocument(i).zoomIn()}},"zoom:out":{id:"zoom:out",labelKey:"zoom.out",icon:"zoomOut",shortcuts:["Ctrl+-","Meta+-","Ctrl+NumpadSubtract","Meta+NumpadSubtract"],categories:["zoom","zoom-out"],action:function(t){var e,n=t.registry,i=t.documentId,r=(e=n.getPlugin("zoom"))===null||e===void 0?void 0:e.provides();r&&r.forDocument(i).zoomOut()}},"zoom:fit-page":{id:"zoom:fit-page",labelKey:"zoom.fitPage",icon:"fitToPage",shortcuts:["Ctrl+0","Meta+0"],categories:["zoom","zoom-fit-page"],action:function(t){var e,n=t.registry,i=t.documentId,r=(e=n.getPlugin("zoom"))===null||e===void 0?void 0:e.provides();r&&r.forDocument(i).requestZoom(Ni.FitPage)},active:function(t){var e,n=t.state,i=t.documentId;return((e=n.plugins.zoom)===null||e===void 0||(e=e.documents[i])===null||e===void 0?void 0:e.zoomLevel)===Ni.FitPage}},"zoom:fit-width":{id:"zoom:fit-width",labelKey:"zoom.fitWidth",icon:"fitToWidth",shortcuts:["Ctrl+1","Meta+1"],categories:["zoom","zoom-fit-width"],action:function(t){var e,n=t.registry,i=t.documentId,r=(e=n.getPlugin("zoom"))===null||e===void 0?void 0:e.provides();r&&r.forDocument(i).requestZoom(Ni.FitWidth)},active:function(t){var e,n=t.state,i=t.documentId;return((e=n.plugins.zoom)===null||e===void 0||(e=e.documents[i])===null||e===void 0?void 0:e.zoomLevel)===Ni.FitWidth}},"zoom:marquee":{id:"zoom:marquee",labelKey:"zoom.marquee",icon:"zoomInArea",shortcuts:["Ctrl+M","Meta+M"],categories:["zoom","zoom-marquee"],action:function(t){var e,n=t.registry,i=t.documentId,r=(e=n.getPlugin("zoom"))===null||e===void 0?void 0:e.provides();r&&r.forDocument(i).toggleMarqueeZoom()},active:function(t){var e,n,i=t.state,r=t.documentId;return(e=(n=i.plugins.zoom)===null||n===void 0||(n=n.documents[r])===null||n===void 0?void 0:n.isMarqueeZoomActive)!==null&&e!==void 0&&e}},"zoom:25":{id:"zoom:25",label:"25%",categories:["zoom","zoom-level","zoom-level-25"],action:function(t){var e,n=t.registry,i=t.documentId,r=(e=n.getPlugin("zoom"))===null||e===void 0?void 0:e.provides();r&&r.forDocument(i).requestZoom(.25)},active:function(t){var e,n=t.state,i=t.documentId;return((e=n.plugins.zoom)===null||e===void 0||(e=e.documents[i])===null||e===void 0?void 0:e.zoomLevel)===.25}},"zoom:50":{id:"zoom:50",label:"50%",categories:["zoom","zoom-level","zoom-level-50"],action:function(t){var e,n=t.registry,i=t.documentId,r=(e=n.getPlugin("zoom"))===null||e===void 0?void 0:e.provides();r&&r.forDocument(i).requestZoom(.5)},active:function(t){var e,n=t.state,i=t.documentId;return((e=n.plugins.zoom)===null||e===void 0||(e=e.documents[i])===null||e===void 0?void 0:e.zoomLevel)===.5}},"zoom:100":{id:"zoom:100",label:"100%",categories:["zoom","zoom-level","zoom-level-100"],action:function(t){var e,n=t.registry,i=t.documentId,r=(e=n.getPlugin("zoom"))===null||e===void 0?void 0:e.provides();r&&r.forDocument(i).requestZoom(1)},active:function(t){var e,n=t.state,i=t.documentId;return((e=n.plugins.zoom)===null||e===void 0||(e=e.documents[i])===null||e===void 0?void 0:e.zoomLevel)===1}},"zoom:125":{id:"zoom:125",label:"125%",categories:["zoom","zoom-level","zoom-level-125"],action:function(t){var e,n=t.registry,i=t.documentId,r=(e=n.getPlugin("zoom"))===null||e===void 0?void 0:e.provides();r&&r.forDocument(i).requestZoom(1.25)},active:function(t){var e,n=t.state,i=t.documentId;return((e=n.plugins.zoom)===null||e===void 0||(e=e.documents[i])===null||e===void 0?void 0:e.zoomLevel)===1.25}},"zoom:150":{id:"zoom:150",label:"150%",categories:["zoom","zoom-level","zoom-level-150"],action:function(t){var e,n=t.registry,i=t.documentId,r=(e=n.getPlugin("zoom"))===null||e===void 0?void 0:e.provides();r&&r.forDocument(i).requestZoom(1.5)},active:function(t){var e,n=t.state,i=t.documentId;return((e=n.plugins.zoom)===null||e===void 0||(e=e.documents[i])===null||e===void 0?void 0:e.zoomLevel)===1.5}},"zoom:200":{id:"zoom:200",label:"200%",categories:["zoom","zoom-level","zoom-level-200"],action:function(t){var e,n=t.registry,i=t.documentId,r=(e=n.getPlugin("zoom"))===null||e===void 0?void 0:e.provides();r&&r.forDocument(i).requestZoom(2)},active:function(t){var e,n=t.state,i=t.documentId;return((e=n.plugins.zoom)===null||e===void 0||(e=e.documents[i])===null||e===void 0?void 0:e.zoomLevel)===2}},"zoom:400":{id:"zoom:400",label:"400%",categories:["zoom","zoom-level","zoom-level-400"],action:function(t){var e,n=t.registry,i=t.documentId,r=(e=n.getPlugin("zoom"))===null||e===void 0?void 0:e.provides();r&&r.forDocument(i).requestZoom(4)},active:function(t){var e,n=t.state,i=t.documentId;return((e=n.plugins.zoom)===null||e===void 0||(e=e.documents[i])===null||e===void 0?void 0:e.zoomLevel)===4}},"zoom:800":{id:"zoom:800",label:"800%",categories:["zoom","zoom-level","zoom-level-800"],action:function(t){var e,n=t.registry,i=t.documentId,r=(e=n.getPlugin("zoom"))===null||e===void 0?void 0:e.provides();r&&r.forDocument(i).requestZoom(8)},active:function(t){var e,n=t.state,i=t.documentId;return((e=n.plugins.zoom)===null||e===void 0||(e=e.documents[i])===null||e===void 0?void 0:e.zoomLevel)===8}},"zoom:1600":{id:"zoom:1600",label:"1600%",categories:["zoom","zoom-level","zoom-level-1600"],action:function(t){var e,n=t.registry,i=t.documentId,r=(e=n.getPlugin("zoom"))===null||e===void 0?void 0:e.provides();r&&r.forDocument(i).requestZoom(16)},active:function(t){var e,n=t.state,i=t.documentId;return((e=n.plugins.zoom)===null||e===void 0||(e=e.documents[i])===null||e===void 0?void 0:e.zoomLevel)===16}},"zoom:toggle-menu":{id:"zoom:toggle-menu",labelKey:"zoom.menu",icon:"chevronDown",iconProps:{className:"h-3.5 w-3.5"},categories:["zoom","zoom-menu"],action:function(t){var e,n=t.registry,i=t.documentId,r=(e=n.getPlugin("ui"))===null||e===void 0?void 0:e.provides();r&&r.forDocument(i).toggleMenu("zoom-menu","zoom:toggle-menu","zoom-menu-button")},active:function(t){var e,n=t.state,i=t.documentId,r=(e=n.plugins.ui)===null||e===void 0?void 0:e.documents[i];return(r==null?void 0:r.openMenus["zoom-menu"])!==void 0}},"zoom:toggle-menu-mobile":{id:"zoom:toggle-menu-mobile",labelKey:"zoom.menu",icon:"zoomIn",categories:["zoom","zoom-menu"],action:function(t){var e,n=t.registry,i=t.documentId,r=(e=n.getPlugin("ui"))===null||e===void 0?void 0:e.provides();r&&r.forDocument(i).toggleMenu("zoom-menu","zoom:toggle-menu-mobile","zoom-menu-button")},active:function(t){var e,n=t.state,i=t.documentId,r=(e=n.plugins.ui)===null||e===void 0?void 0:e.documents[i];return(r==null?void 0:r.openMenus["zoom-menu"])!==void 0}},"pan:toggle":{id:"pan:toggle",labelKey:"pan.toggle",icon:"hand",shortcuts:["h"],categories:["tools","pan"],action:function(t){var e,n=t.registry,i=t.documentId,r=(e=n.getPlugin("pan"))===null||e===void 0?void 0:e.provides();r&&r.forDocument(i).togglePan()},active:function(t){var e,n,i=t.state,r=t.documentId;return(e=(n=i.plugins.pan)===null||n===void 0||(n=n.documents[r])===null||n===void 0?void 0:n.isPanMode)!==null&&e!==void 0&&e}},"pointer:toggle":{id:"pointer:toggle",labelKey:"pointer.toggle",icon:"pointer",shortcuts:["p"],categories:["tools","pointer"],action:function(t){var e,n=t.registry,i=t.documentId,r=(e=n.getPlugin("interaction-manager"))===null||e===void 0?void 0:e.provides();r&&r.forDocument(i).activate("pointerMode")},active:function(t){var e,n=t.state,i=t.documentId;return((e=n.plugins["interaction-manager"])===null||e===void 0||(e=e.documents[i])===null||e===void 0?void 0:e.activeMode)==="pointerMode"}},"left-action-menu:overflow-menu":{id:"left-action-menu:overflow-menu",labelKey:"menu.moreOptions",icon:"dots",categories:["ui","ui-menu"],action:function(t){var e,n=t.registry,i=t.documentId,r=(e=n.getPlugin("ui"))===null||e===void 0?void 0:e.provides();r&&r.toggleMenu("left-action-menu","left-action-menu:overflow-menu","overflow-left-action-menu-button",i)},active:function(t){var e,n=t.state,i=t.documentId,r=(e=n.plugins.ui)===null||e===void 0?void 0:e.documents[i];return(r==null?void 0:r.openMenus["left-action-menu"])!==void 0}},"capture:screenshot":{id:"capture:screenshot",labelKey:"capture.screenshot",icon:"screenshot",shortcuts:["Ctrl+Shift+S","Meta+Shift+S"],categories:["tools","capture","capture-screenshot"],action:function(t){var e,n=t.registry,i=t.documentId,r=(e=n.getPlugin("capture"))===null||e===void 0?void 0:e.provides();if(r){var o=r.forDocument(i);o.isMarqueeCaptureActive()?o.disableMarqueeCapture():o.enableMarqueeCapture()}},active:function(t){var e,n=t.state,i=t.documentId;return((e=n.plugins["interaction-manager"].documents[i])===null||e===void 0?void 0:e.activeMode)==="marqueeCapture"}},"document:menu":{id:"document:menu",labelKey:"document.menu",icon:"menu",categories:["document","document-menu"],action:function(t){var e=t.registry,n=t.documentId,i=e.getPlugin(qs);if(i&&i.provides){var r=i.provides();r&&r.forDocument(n).toggleMenu("document-menu","document:menu","document-menu-button")}},active:function(t){var e,n=t.state,i=t.documentId,r=(e=n.plugins.ui)===null||e===void 0?void 0:e.documents[i];return(r==null?void 0:r.openMenus["document-menu"])!==void 0}},"document:open":{id:"document:open",labelKey:"document.open",icon:"fileImport",shortcuts:["Ctrl+O","Meta+O"],categories:["document","document-open"],action:function(t){var e,n=(e=t.registry.getPlugin("document-manager"))===null||e===void 0?void 0:e.provides();n==null||n.openFileDialog()}},"document:close":{id:"document:close",labelKey:"document.close",icon:"x",shortcuts:["Ctrl+W","Meta+W"],categories:["document","document-close"],action:function(t){var e,n=t.registry,i=t.documentId,r=(e=n.getPlugin("document-manager"))===null||e===void 0?void 0:e.provides();r==null||r.closeDocument(i)}},"document:print":{id:"document:print",labelKey:"document.print",icon:"print",shortcuts:["Ctrl+P","Meta+P"],categories:["document","document-print"],action:function(t){var e=t.registry,n=t.documentId,i=e.getPlugin(qs);if(i&&i.provides){var r=i.provides();r&&r.forDocument(n).openModal("print-modal")}}},"document:export":{id:"document:export",labelKey:"document.export",icon:"download",categories:["document","document-export"],action:function(t){var e,n=t.registry,i=t.documentId,r=(e=n.getPlugin("export"))===null||e===void 0?void 0:e.provides();r==null||r.forDocument(i).download()}},"document:capture":{id:"document:capture",labelKey:"capture.screenshot",icon:"screenshot",categories:["document","document-capture"],action:function(t){var e,n=t.registry,i=t.documentId,r=(e=n.getPlugin("capture"))===null||e===void 0?void 0:e.provides();r==null||r.forDocument(i).toggleMarqueeCapture()},active:function(t){var e,n=t.state,i=t.documentId;return((e=n.plugins["interaction-manager"])===null||e===void 0||(e=e.documents[i])===null||e===void 0?void 0:e.activeMode)==="marqueeCapture"}},"document:fullscreen":{id:"document:fullscreen",labelKey:"document.fullscreen",icon:function(t){var e;return(e=t.state.plugins.fullscreen)!==null&&e!==void 0&&e.isFullscreen?"fullscreenExit":"fullscreen"},shortcuts:["F11"],categories:["document","document-fullscreen"],action:function(t){var e,n=(e=t.registry.getPlugin("fullscreen"))===null||e===void 0?void 0:e.provides();n&&(n.isFullscreen()?n.exitFullscreen():n.enableFullscreen())},active:function(t){var e,n;return(e=(n=t.state.plugins.fullscreen)===null||n===void 0?void 0:n.isFullscreen)!==null&&e!==void 0&&e}},"panel:toggle-sidebar":{id:"panel:toggle-sidebar",labelKey:"panel.sidebar",icon:"sidebar",categories:["panel","panel-sidebar"],action:function(t){var e=t.registry,n=t.documentId,i=e.getPlugin(qs);if(i&&i.provides){var r=i.provides();r&&r.forDocument(n).toggleSidebar("left","main","sidebar-panel")}},active:function(t){var e=t.state,n=t.documentId;return tg(e.plugins,n,"left","main","sidebar-panel")}},"panel:toggle-search":{id:"panel:toggle-search",labelKey:"panel.search",icon:"search",shortcuts:["Ctrl+F","Meta+F"],categories:["panel","panel-search"],action:function(t){var e=t.registry,n=t.documentId,i=e.getPlugin(qs);if(i&&i.provides){var r=i.provides();r&&r.forDocument(n).toggleSidebar("right","main","search-panel")}},active:function(t){var e=t.state,n=t.documentId;return tg(e.plugins,n,"right","main","search-panel")}},"panel:toggle-comment":{id:"panel:toggle-comment",labelKey:"panel.comment",icon:"comment",categories:["panel","panel-comment"],action:function(t){var e=t.registry,n=t.documentId,i=e.getPlugin(qs);if(i&&i.provides){var r=i.provides();r&&r.forDocument(n).toggleSidebar("right","main","comment-panel")}},active:function(t){var e=t.state,n=t.documentId;return tg(e.plugins,n,"right","main","comment-panel")}},"panel:toggle-annotation-style":{id:"panel:toggle-annotation-style",labelKey:"panel.annotationStyle",icon:"palette",categories:["panel","panel-annotation-style"],action:function(t){var e=t.registry,n=t.documentId,i=e.getPlugin(qs);if(i&&i.provides){var r=i.provides();r&&r.forDocument(n).toggleSidebar("left","main","annotation-panel")}},active:function(t){var e=t.state,n=t.documentId;return tg(e.plugins,n,"left","main","annotation-panel")}},"page:settings":{id:"page:settings",labelKey:"page.settings",icon:"viewSettings",categories:["page","page-settings"],action:function(t){var e=t.registry,n=t.documentId,i=e.getPlugin(qs);if(i&&i.provides){var r=i.provides();r&&r.forDocument(n).toggleMenu("page-settings-menu","page:settings","page-settings-button")}},active:function(t){var e,n=t.state,i=t.documentId,r=(e=n.plugins.ui)===null||e===void 0?void 0:e.documents[i];return(r==null?void 0:r.openMenus["page-settings-menu"])!==void 0}},"spread:none":{id:"spread:none",labelKey:"page.single",icon:"singlePage",categories:["page","spread","spread-none"],action:function(t){var e,n=t.registry,i=t.documentId,r=(e=n.getPlugin("spread"))===null||e===void 0?void 0:e.provides();r==null||r.forDocument(i).setSpreadMode(Mr.None)},active:function(t){var e,n=t.state,i=t.documentId;return((e=n.plugins.spread)===null||e===void 0||(e=e.documents[i])===null||e===void 0?void 0:e.spreadMode)===Mr.None}},"spread:odd":{id:"spread:odd",labelKey:"page.twoOdd",icon:"doublePage",categories:["page","spread","spread-odd"],action:function(t){var e,n=t.registry,i=t.documentId,r=(e=n.getPlugin("spread"))===null||e===void 0?void 0:e.provides();r==null||r.forDocument(i).setSpreadMode(Mr.Odd)},active:function(t){var e,n=t.state,i=t.documentId;return((e=n.plugins.spread)===null||e===void 0||(e=e.documents[i])===null||e===void 0?void 0:e.spreadMode)===Mr.Odd}},"spread:even":{id:"spread:even",labelKey:"page.twoEven",icon:"book2",categories:["page","spread","spread-even"],action:function(t){var e,n=t.registry,i=t.documentId,r=(e=n.getPlugin("spread"))===null||e===void 0?void 0:e.provides();r==null||r.forDocument(i).setSpreadMode(Mr.Even)},active:function(t){var e,n=t.state,i=t.documentId;return((e=n.plugins.spread)===null||e===void 0||(e=e.documents[i])===null||e===void 0?void 0:e.spreadMode)===Mr.Even}},"rotate:clockwise":{id:"rotate:clockwise",labelKey:"rotate.clockwise",icon:"rotateClockwise",shortcuts:["Ctrl+]","Meta+]"],categories:["page","rotate","rotate-clockwise"],action:function(t){var e,n=t.registry,i=t.documentId,r=(e=n.getPlugin("rotate"))===null||e===void 0?void 0:e.provides();r==null||r.forDocument(i).rotateForward()}},"rotate:counter-clockwise":{id:"rotate:counter-clockwise",labelKey:"rotate.counterClockwise",icon:"rotateCounterClockwise",shortcuts:["Ctrl+[","Meta+["],categories:["page","rotate","rotate-counter-clockwise"],action:function(t){var e,n=t.registry,i=t.documentId,r=(e=n.getPlugin("rotate"))===null||e===void 0?void 0:e.provides();r==null||r.forDocument(i).rotateBackward()}},"scroll:vertical":{id:"scroll:vertical",labelKey:"page.vertical",icon:"vertical",categories:["page","scroll","scroll-vertical"],action:function(t){var e,n=t.registry,i=t.documentId,r=(e=n.getPlugin("scroll"))===null||e===void 0?void 0:e.provides();r==null||r.forDocument(i).setScrollStrategy(qr.Vertical)},active:function(t){var e,n=t.state,i=t.documentId;return((e=n.plugins.scroll)===null||e===void 0||(e=e.documents[i])===null||e===void 0?void 0:e.strategy)===qr.Vertical}},"scroll:horizontal":{id:"scroll:horizontal",labelKey:"page.horizontal",icon:"horizontal",categories:["page","scroll","scroll-horizontal"],action:function(t){var e,n=t.registry,i=t.documentId,r=(e=n.getPlugin("scroll"))===null||e===void 0?void 0:e.provides();r==null||r.forDocument(i).setScrollStrategy(qr.Horizontal)},active:function(t){var e,n=t.state,i=t.documentId;return((e=n.plugins.scroll)===null||e===void 0||(e=e.documents[i])===null||e===void 0?void 0:e.strategy)===qr.Horizontal}},"scroll:next-page":{id:"scroll:next-page",labelKey:"page.next",icon:"chevronRight",categories:["page","navigation","navigation-next"],shortcuts:["Ctrl+]","Meta+]","ArrowRight"],action:function(t){var e,n=t.registry,i=t.documentId,r=(e=n.getPlugin("scroll"))===null||e===void 0?void 0:e.provides();r==null||r.forDocument(i).scrollToNextPage()},disabled:function(t){var e,n,i=t.state,r=t.documentId;return((e=i.plugins.scroll)===null||e===void 0||(e=e.documents[r])===null||e===void 0?void 0:e.currentPage)>=((n=i.plugins.scroll)===null||n===void 0||(n=n.documents[r])===null||n===void 0?void 0:n.totalPages)}},"scroll:previous-page":{id:"scroll:previous-page",labelKey:"page.previous",icon:"chevronLeft",categories:["page","navigation","navigation-previous"],shortcuts:["Ctrl+[","Meta+[","ArrowLeft"],action:function(t){var e,n=t.registry,i=t.documentId,r=(e=n.getPlugin("scroll"))===null||e===void 0?void 0:e.provides();r==null||r.forDocument(i).scrollToPreviousPage()},disabled:function(t){var e,n=t.state,i=t.documentId;return((e=n.plugins.scroll)===null||e===void 0||(e=e.documents[i])===null||e===void 0?void 0:e.currentPage)<=1}},"mode:view":{id:"mode:view",labelKey:"mode.view",categories:["mode","mode-view"],action:function(t){var e,n,i=t.registry,r=t.documentId,o=(e=i.getPlugin("ui"))===null||e===void 0?void 0:e.provides(),s=(n=i.getPlugin("interaction-manager"))===null||n===void 0?void 0:n.provides();if(o&&s){var a=s.forDocument(r);a&&(a.activate("pointerMode"),o.forDocument(r).closeToolbarSlot("top","secondary"))}},active:function(t){var e=t.state,n=t.documentId;return!eg(e.plugins,n,"top","secondary")}},"mode:annotate":{id:"mode:annotate",labelKey:"mode.annotate",categories:["mode","mode-annotate","annotation"],action:function(t){var e,n=t.registry,i=t.documentId,r=(e=n.getPlugin("ui"))===null||e===void 0?void 0:e.provides();r&&r.setActiveToolbar("top","secondary","annotation-toolbar",i)},active:function(t){var e=t.state,n=t.documentId;return eg(e.plugins,n,"top","secondary","annotation-toolbar")}},"mode:shapes":{id:"mode:shapes",labelKey:"mode.shapes",categories:["mode","mode-shapes","annotation"],action:function(t){var e,n=t.registry,i=t.documentId,r=(e=n.getPlugin("ui"))===null||e===void 0?void 0:e.provides();r&&r.setActiveToolbar("top","secondary","shapes-toolbar",i)},active:function(t){var e=t.state,n=t.documentId;return eg(e.plugins,n,"top","secondary","shapes-toolbar")}},"mode:redact":{id:"mode:redact",labelKey:"mode.redact",categories:["mode","mode-redact","redaction"],action:function(t){var e,n=t.registry,i=t.documentId,r=(e=n.getPlugin("ui"))===null||e===void 0?void 0:e.provides();r&&r.setActiveToolbar("top","secondary","redaction-toolbar",i)},active:function(t){var e=t.state,n=t.documentId;return eg(e.plugins,n,"top","secondary","redaction-toolbar")}},"tabs:overflow-menu":{id:"tabs:overflow-menu",labelKey:"tabs.overflowMenu",icon:"dots",categories:["ui","ui-menu"],action:function(t){var e,n=t.registry,i=t.documentId,r=(e=n.getPlugin("ui"))===null||e===void 0?void 0:e.provides();r&&r.toggleMenu("mode-tabs-overflow-menu","tabs:overflow-menu","overflow-tabs-button",i)},active:function(t){var e,n=t.state,i=t.documentId;return((e=n.plugins.ui)===null||e===void 0||(e=e.documents[i])===null||e===void 0?void 0:e.openMenus["mode-tabs-overflow-menu"])!==void 0}},"annotation:add-highlight":{id:"annotation:add-highlight",labelKey:"annotation.highlight",icon:"highlight",iconProps:function(t){var e;return{primaryColor:(e=or(t.state.plugins.annotation,"highlight"))===null||e===void 0?void 0:e.color}},categories:["annotation","annotation-markup","annotation-highlight"],action:function(t){var e,n,i,r=t.registry,o=t.documentId,s=(e=r.getPlugin(mn))===null||e===void 0?void 0:e.provides(),a=(n=r.getPlugin(Kl))===null||n===void 0?void 0:n.provides(),l=(i=r.getPlugin("ui"))===null||i===void 0?void 0:i.provides();if(a&&s&&l){var c=s==null?void 0:s.forDocument(o),u=a==null?void 0:a.forDocument(o);if(c&&u){var d=s.getTool("highlight");if(d&&jj(d)){var f=d.defaults,m=u.getFormattedSelection(),g=u.getSelectedText();if(m.length>0){var y,x=Bu(m);try{var v=function(){var _=y.value;g.wait(function(S){var E=ni();c.createAnnotation(_.pageIndex,{id:E,created:new Date,flags:["print"],type:_e.HIGHLIGHT,blendMode:Mt.Multiply,color:f.color,opacity:f.opacity,pageIndex:_.pageIndex,rect:_.rect,segmentRects:_.segmentRects,custom:{text:S.join(`
`)}}),c.selectAnnotation(_.pageIndex,E)},ii)};for(x.s();!(y=x.n()).done;)v()}catch(_){x.e(_)}finally{x.f()}u.clear(),c.setActiveTool("highlight"),l.setActiveToolbar("top","secondary","annotation-toolbar",o)}else{var w;((w=c.getActiveTool())===null||w===void 0?void 0:w.id)==="highlight"?c.setActiveTool(null):c.setActiveTool("highlight")}}}}},active:function(t){var e,n=t.state,i=t.documentId,r=(e=n.plugins[mn])===null||e===void 0?void 0:e.documents[i];return(r==null?void 0:r.activeToolId)==="highlight"}},"annotation:add-underline":{id:"annotation:add-underline",labelKey:"annotation.underline",icon:"underline",iconProps:function(t){var e;return{primaryColor:(e=or(t.state.plugins.annotation,"underline"))===null||e===void 0?void 0:e.color}},categories:["annotation","annotation-markup","annotation-underline"],action:function(t){var e,n,i,r=t.registry,o=t.documentId,s=(e=r.getPlugin(mn))===null||e===void 0?void 0:e.provides(),a=(n=r.getPlugin(Kl))===null||n===void 0?void 0:n.provides(),l=(i=r.getPlugin("ui"))===null||i===void 0?void 0:i.provides();if(a&&s&&l){var c=s==null?void 0:s.forDocument(o),u=a==null?void 0:a.forDocument(o);if(c&&u){var d=s.getTool("underline");if(d&&Xj(d)){var f=d.defaults,m=u.getFormattedSelection(),g=u.getSelectedText();if(m.length>0){var y,x=Bu(m);try{var v=function(){var _=y.value;g.wait(function(S){var E=ni();c.createAnnotation(_.pageIndex,{id:E,created:new Date,flags:["print"],type:_e.UNDERLINE,color:f.color,opacity:f.opacity,pageIndex:_.pageIndex,rect:_.rect,segmentRects:_.segmentRects,custom:{text:S.join(`
`)}}),c.selectAnnotation(_.pageIndex,E)},ii)};for(x.s();!(y=x.n()).done;)v()}catch(_){x.e(_)}finally{x.f()}u.clear(),c.setActiveTool("underline"),l.setActiveToolbar("top","secondary","annotation-toolbar",o)}else{var w;((w=c.getActiveTool())===null||w===void 0?void 0:w.id)==="underline"?c.setActiveTool(null):c.setActiveTool("underline")}}}}},active:function(t){var e,n=t.state,i=t.documentId,r=(e=n.plugins[mn])===null||e===void 0?void 0:e.documents[i];return(r==null?void 0:r.activeToolId)==="underline"}},"annotation:add-strikeout":{id:"annotation:add-strikeout",labelKey:"annotation.strikeout",icon:"strikethrough",iconProps:function(t){var e;return{primaryColor:(e=or(t.state.plugins.annotation,"strikeout"))===null||e===void 0?void 0:e.color}},categories:["annotation","annotation-markup","annotation-strikeout"],action:function(t){var e,n,i,r=t.registry,o=t.documentId,s=(e=r.getPlugin(mn))===null||e===void 0?void 0:e.provides(),a=(n=r.getPlugin(Kl))===null||n===void 0?void 0:n.provides(),l=(i=r.getPlugin("ui"))===null||i===void 0?void 0:i.provides();if(a&&s&&l){var c=s==null?void 0:s.forDocument(o),u=a==null?void 0:a.forDocument(o);if(c&&u){var d=s.getTool("strikeout");if(d&&Yj(d)){var f=d.defaults,m=u.getFormattedSelection(),g=u.getSelectedText();if(m.length>0){var y,x=Bu(m);try{var v=function(){var _=y.value;g.wait(function(S){var E=ni();c.createAnnotation(_.pageIndex,{id:E,created:new Date,flags:["print"],type:_e.STRIKEOUT,color:f.color,opacity:f.opacity,pageIndex:_.pageIndex,rect:_.rect,segmentRects:_.segmentRects,custom:{text:S.join(`
`)}}),c.selectAnnotation(_.pageIndex,E)},ii)};for(x.s();!(y=x.n()).done;)v()}catch(_){x.e(_)}finally{x.f()}u.clear(),c.setActiveTool("strikeout"),l.setActiveToolbar("top","secondary","annotation-toolbar",o)}else{var w;((w=c.getActiveTool())===null||w===void 0?void 0:w.id)==="strikeout"?c.setActiveTool(null):c.setActiveTool("strikeout")}}}}},active:function(t){var e,n=t.state,i=t.documentId,r=(e=n.plugins[mn])===null||e===void 0?void 0:e.documents[i];return(r==null?void 0:r.activeToolId)==="strikeout"}},"annotation:add-squiggly":{id:"annotation:add-squiggly",labelKey:"annotation.squiggly",icon:"squiggly",iconProps:function(t){var e;return{primaryColor:(e=or(t.state.plugins.annotation,"squiggly"))===null||e===void 0?void 0:e.color}},categories:["annotation","annotation-markup","annotation-squiggly"],action:function(t){var e,n,i,r=t.registry,o=t.documentId,s=(e=r.getPlugin(mn))===null||e===void 0?void 0:e.provides(),a=(n=r.getPlugin(Kl))===null||n===void 0?void 0:n.provides(),l=(i=r.getPlugin("ui"))===null||i===void 0?void 0:i.provides();if(a&&s&&l){var c=s==null?void 0:s.forDocument(o),u=a==null?void 0:a.forDocument(o);if(c&&u){var d=s.getTool("squiggly");if(d&&qj(d)){var f=d.defaults,m=u.getFormattedSelection(),g=u.getSelectedText();if(m.length>0){var y,x=Bu(m);try{var v=function(){var _=y.value;g.wait(function(S){var E=ni();c.createAnnotation(_.pageIndex,{id:E,created:new Date,flags:["print"],type:_e.SQUIGGLY,color:f.color,opacity:f.opacity,pageIndex:_.pageIndex,rect:_.rect,segmentRects:_.segmentRects,custom:{text:S.join(`
`)}}),c.selectAnnotation(_.pageIndex,E)},ii)};for(x.s();!(y=x.n()).done;)v()}catch(_){x.e(_)}finally{x.f()}u.clear(),c.setActiveTool("squiggly"),l.setActiveToolbar("top","secondary","annotation-toolbar",o)}else{var w;((w=c.getActiveTool())===null||w===void 0?void 0:w.id)==="squiggly"?c.setActiveTool(null):c.setActiveTool("squiggly")}}}}},active:function(t){var e,n=t.state,i=t.documentId,r=(e=n.plugins[mn])===null||e===void 0?void 0:e.documents[i];return(r==null?void 0:r.activeToolId)==="squiggly"}},"annotation:add-ink":{id:"annotation:add-ink",labelKey:"annotation.ink",icon:"pencilMarker",iconProps:function(t){var e;return{primaryColor:(e=or(t.state.plugins.annotation,"ink"))===null||e===void 0?void 0:e.color}},categories:["annotation","annotation-ink"],action:function(t){var e,n,i=t.registry,r=t.documentId,o=(e=i.getPlugin(mn))===null||e===void 0?void 0:e.provides(),s=o==null?void 0:o.forDocument(r);s&&(((n=s.getActiveTool())===null||n===void 0?void 0:n.id)==="ink"?s.setActiveTool(null):s.setActiveTool("ink"))},active:function(t){var e,n=t.state,i=t.documentId,r=(e=n.plugins[mn])===null||e===void 0?void 0:e.documents[i];return(r==null?void 0:r.activeToolId)==="ink"}},"annotation:add-text":{id:"annotation:add-text",labelKey:"annotation.text",icon:"text",iconProps:function(t){var e;return{primaryColor:(e=or(t.state.plugins.annotation,"freeText"))===null||e===void 0?void 0:e.fontColor}},categories:["annotation","annotation-text"],action:function(t){var e,n,i=t.registry,r=t.documentId,o=(e=i.getPlugin(mn))===null||e===void 0?void 0:e.provides(),s=o==null?void 0:o.forDocument(r);s&&(((n=s.getActiveTool())===null||n===void 0?void 0:n.id)==="freeText"?s.setActiveTool(null):s.setActiveTool("freeText"))},active:function(t){var e,n=t.state,i=t.documentId,r=(e=n.plugins[mn])===null||e===void 0?void 0:e.documents[i];return(r==null?void 0:r.activeToolId)==="freeText"}},"annotation:add-stamp":{id:"annotation:add-stamp",labelKey:"annotation.stamp",icon:"photo",categories:["annotation","annotation-stamp"],action:function(t){var e,n,i=t.registry,r=t.documentId,o=(e=i.getPlugin(mn))===null||e===void 0?void 0:e.provides(),s=o==null?void 0:o.forDocument(r);s&&(((n=s.getActiveTool())===null||n===void 0?void 0:n.id)==="stamp"?s.setActiveTool(null):s.setActiveTool("stamp"))},active:function(t){var e,n=t.state,i=t.documentId,r=(e=n.plugins[mn])===null||e===void 0?void 0:e.documents[i];return(r==null?void 0:r.activeToolId)==="stamp"}},"annotation:add-rectangle":{id:"annotation:add-rectangle",labelKey:"annotation.rectangle",icon:"square",iconProps:function(t){var e,n,i=t.state;return{primaryColor:(e=or(i.plugins.annotation,"square"))===null||e===void 0?void 0:e.strokeColor,secondaryColor:(n=or(i.plugins.annotation,"square"))===null||n===void 0?void 0:n.color}},categories:["annotation","annotation-shape","annotation-rectangle"],action:function(t){var e,n,i=t.registry,r=t.documentId,o=(e=i.getPlugin(mn))===null||e===void 0?void 0:e.provides(),s=o==null?void 0:o.forDocument(r);s&&(((n=s.getActiveTool())===null||n===void 0?void 0:n.id)==="square"?s.setActiveTool(null):s.setActiveTool("square"))},active:function(t){var e,n=t.state,i=t.documentId,r=(e=n.plugins[mn])===null||e===void 0?void 0:e.documents[i];return(r==null?void 0:r.activeToolId)==="square"}},"annotation:add-circle":{id:"annotation:add-circle",labelKey:"annotation.circle",icon:"circle",iconProps:function(t){var e,n,i=t.state;return{primaryColor:(e=or(i.plugins.annotation,"circle"))===null||e===void 0?void 0:e.strokeColor,secondaryColor:(n=or(i.plugins.annotation,"circle"))===null||n===void 0?void 0:n.color}},categories:["annotation","annotation-shape","annotation-circle"],action:function(t){var e,n,i=t.registry,r=t.documentId,o=(e=i.getPlugin(mn))===null||e===void 0?void 0:e.provides(),s=o==null?void 0:o.forDocument(r);s&&(((n=s.getActiveTool())===null||n===void 0?void 0:n.id)==="circle"?s.setActiveTool(null):s.setActiveTool("circle"))},active:function(t){var e,n=t.state,i=t.documentId,r=(e=n.plugins[mn])===null||e===void 0?void 0:e.documents[i];return(r==null?void 0:r.activeToolId)==="circle"}},"annotation:add-line":{id:"annotation:add-line",labelKey:"annotation.line",icon:"line",iconProps:function(t){var e;return{primaryColor:(e=or(t.state.plugins.annotation,"line"))===null||e===void 0?void 0:e.strokeColor}},categories:["annotation","annotation-shape","annotation-line"],action:function(t){var e,n,i=t.registry,r=t.documentId,o=(e=i.getPlugin(mn))===null||e===void 0?void 0:e.provides(),s=o==null?void 0:o.forDocument(r);s&&(((n=s.getActiveTool())===null||n===void 0?void 0:n.id)==="line"?s.setActiveTool(null):s.setActiveTool("line"))},active:function(t){var e,n=t.state,i=t.documentId,r=(e=n.plugins[mn])===null||e===void 0?void 0:e.documents[i];return(r==null?void 0:r.activeToolId)==="line"}},"annotation:add-arrow":{id:"annotation:add-arrow",labelKey:"annotation.arrow",icon:"lineArrow",iconProps:function(t){var e;return{primaryColor:(e=or(t.state.plugins.annotation,"line"))===null||e===void 0?void 0:e.strokeColor}},categories:["annotation","annotation-shape","annotation-arrow"],action:function(t){var e,n,i=t.registry,r=t.documentId,o=(e=i.getPlugin(mn))===null||e===void 0?void 0:e.provides(),s=o==null?void 0:o.forDocument(r);s&&(((n=s.getActiveTool())===null||n===void 0?void 0:n.id)==="lineArrow"?s.setActiveTool(null):s.setActiveTool("lineArrow"))},active:function(t){var e,n=t.state,i=t.documentId,r=(e=n.plugins[mn])===null||e===void 0?void 0:e.documents[i];return(r==null?void 0:r.activeToolId)==="lineArrow"}},"annotation:add-polygon":{id:"annotation:add-polygon",labelKey:"annotation.polygon",icon:"polygon",iconProps:function(t){var e,n,i=t.state;return{primaryColor:(e=or(i.plugins.annotation,"polygon"))===null||e===void 0?void 0:e.strokeColor,secondaryColor:(n=or(i.plugins.annotation,"polygon"))===null||n===void 0?void 0:n.color}},categories:["annotation","annotation-shape","annotation-polygon"],action:function(t){var e,n,i=t.registry,r=t.documentId,o=(e=i.getPlugin(mn))===null||e===void 0?void 0:e.provides(),s=o==null?void 0:o.forDocument(r);s&&(((n=s.getActiveTool())===null||n===void 0?void 0:n.id)==="polygon"?s.setActiveTool(null):s.setActiveTool("polygon"))},active:function(t){var e,n=t.state,i=t.documentId,r=(e=n.plugins[mn])===null||e===void 0?void 0:e.documents[i];return(r==null?void 0:r.activeToolId)==="polygon"}},"annotation:add-polyline":{id:"annotation:add-polyline",labelKey:"annotation.polyline",icon:"zigzag",iconProps:function(t){var e;return{primaryColor:(e=or(t.state.plugins.annotation,"polyline"))===null||e===void 0?void 0:e.strokeColor}},categories:["annotation","annotation-shape","annotation-polyline"],action:function(t){var e,n,i=t.registry,r=t.documentId,o=(e=i.getPlugin(mn))===null||e===void 0?void 0:e.provides(),s=o==null?void 0:o.forDocument(r);s&&(((n=s.getActiveTool())===null||n===void 0?void 0:n.id)==="polyline"?s.setActiveTool(null):s.setActiveTool("polyline"))},active:function(t){var e,n=t.state,i=t.documentId,r=(e=n.plugins[mn])===null||e===void 0?void 0:e.documents[i];return(r==null?void 0:r.activeToolId)==="polyline"}},"annotation:delete-selected":{id:"annotation:delete-selected",labelKey:"annotation.deleteSelected",icon:"trash",categories:["annotation","annotation-delete"],action:function(t){var e,n=t.registry,i=t.documentId,r=(e=n.getPlugin(mn))===null||e===void 0?void 0:e.provides(),o=r==null?void 0:r.forDocument(i);if(o){var s=o.getSelectedAnnotation();s&&o.deleteAnnotation(s.object.pageIndex,s.object.id)}}},"annotation:overflow-tools":{id:"annotation:overflow-tools",labelKey:"annotation.moreTools",icon:"dots",categories:["annotation","annotation-overflow"],action:function(t){var e,n=t.registry,i=t.documentId,r=(e=n.getPlugin("ui"))===null||e===void 0?void 0:e.provides();if(r){var o=r.forDocument(i);o&&o.toggleMenu("annotation-tools-menu","annotation:overflow-tools","overflow-annotation-tools")}},active:function(t){var e,n=t.state,i=t.documentId,r=(e=n.plugins.ui)===null||e===void 0?void 0:e.documents[i];return(r==null?void 0:r.openMenus["annotation-tools-menu"])!==void 0}},"annotation:overflow-shapes":{id:"annotation:overflow-shapes",labelKey:"annotation.moreTools",icon:"dots",categories:["annotation","annotation-shape","annotation-overflow"],action:function(t){var e,n=t.registry,i=t.documentId,r=(e=n.getPlugin("ui"))===null||e===void 0?void 0:e.provides();if(r){var o=r.forDocument(i);o&&o.toggleMenu("shapes-tools-menu","annotation:overflow-shapes","overflow-shapes-tools")}},active:function(t){var e,n=t.state,i=t.documentId,r=(e=n.plugins.ui)===null||e===void 0?void 0:e.documents[i];return(r==null?void 0:r.openMenus["shapes-tools-menu"])!==void 0}},"redaction:redact-area":{id:"redaction:redact-area",labelKey:"redaction.area",icon:"redactArea",categories:["redaction","redaction-area"],action:function(t){var e,n=t.registry,i=t.documentId,r=(e=n.getPlugin("redaction"))===null||e===void 0?void 0:e.provides();r==null||r.forDocument(i).toggleMarqueeRedact()},active:function(t){var e,n=t.state,i=t.documentId,r=(e=n.plugins[$u])===null||e===void 0?void 0:e.documents[i];return(r==null?void 0:r.activeType)===ui.MarqueeRedact}},"redaction:redact-text":{id:"redaction:redact-text",labelKey:"redaction.text",icon:"redact",categories:["redaction","redaction-text"],action:function(t){var e,n,i,r,o=t.registry,s=t.documentId,a=(e=o.getPlugin("redaction"))===null||e===void 0?void 0:e.provides(),l=(n=o.getPlugin(Kl))===null||n===void 0?void 0:n.provides(),c=(i=o.getPlugin("ui"))===null||i===void 0?void 0:i.provides();if(a&&l&&c){var u=a.forDocument(s),d=l==null?void 0:l.forDocument(s);((r=d==null?void 0:d.getFormattedSelection())!==null&&r!==void 0?r:[]).length>0?(u.queueCurrentSelectionAsPending(),c.setActiveToolbar("top","secondary","redaction-toolbar",s)):u.toggleRedactSelection()}},active:function(t){var e,n=t.state,i=t.documentId,r=(e=n.plugins[$u])===null||e===void 0?void 0:e.documents[i];return(r==null?void 0:r.activeType)===ui.RedactSelection}},"redaction:apply-all":{id:"redaction:apply-all",labelKey:"redaction.applyAll",icon:"check",categories:["redaction","redaction-apply"],action:function(t){var e,n=t.registry,i=t.documentId,r=(e=n.getPlugin("redaction"))===null||e===void 0?void 0:e.provides();r==null||r.forDocument(i).commitAllPending()},disabled:function(t){var e,n=t.state,i=t.documentId,r=(e=n.plugins[$u])===null||e===void 0?void 0:e.documents[i];return(r==null?void 0:r.pendingCount)===0}},"redaction:clear-all":{id:"redaction:clear-all",labelKey:"redaction.clearAll",icon:"x",categories:["redaction","redaction-clear"],action:function(t){var e,n=t.registry,i=t.documentId,r=(e=n.getPlugin("redaction"))===null||e===void 0?void 0:e.provides();r==null||r.forDocument(i).clearPending()},disabled:function(t){var e,n=t.state,i=t.documentId,r=(e=n.plugins[$u])===null||e===void 0?void 0:e.documents[i];return(r==null?void 0:r.pendingCount)===0}},"redaction:delete-selected":{id:"redaction:delete-selected",labelKey:"redaction.deleteSelected",icon:"trash",categories:["redaction","redaction-delete"],action:function(t){var e,n=t.registry,i=t.documentId,r=(e=n.getPlugin("redaction"))===null||e===void 0?void 0:e.provides(),o=r==null?void 0:r.forDocument(i).getSelectedPending();o&&(r==null||r.forDocument(i).removePending(o.page,o.id))}},"redaction:commit-selected":{id:"redaction:commit-selected",labelKey:"redaction.commitSelected",icon:"check",categories:["redaction","redaction-commit"],action:function(t){var e,n=t.registry,i=t.documentId,r=(e=n.getPlugin("redaction"))===null||e===void 0?void 0:e.provides(),o=r==null?void 0:r.forDocument(i).getSelectedPending();o&&(r==null||r.forDocument(i).commitPending(o.page,o.id))}},"selection:copy-to-clipboard":{id:"selection:copy-to-clipboard",labelKey:"selection.copyToClipboard",icon:"copy",shortcuts:["Ctrl+C","Meta+C"],categories:["selection","selection-copy-to-clipboard"],action:function(t){var e=t.registry,n=t.documentId,i=e.getPlugin("selection"),r=i==null?void 0:i.provides().forDocument(n);r==null||r.copyToClipboard()}},"selection:copy":{id:"selection:copy",labelKey:"selection.copy",icon:"copy",categories:["selection","selection-copy"],action:function(t){var e=t.registry,n=t.documentId,i=e.getPlugin("selection"),r=i==null?void 0:i.provides().forDocument(n);r==null||r.copyToClipboard(),r==null||r.clear()}},"history:undo":{id:"history:undo",labelKey:"history.undo",icon:"arrowBackUp",shortcuts:["Ctrl+Z","Meta+Z"],categories:["history","history-undo"],action:function(t){var e,n=t.registry,i=t.documentId,r=(e=n.getPlugin(Vu))===null||e===void 0?void 0:e.provides();r&&r.forDocument(i).undo()},disabled:function(t){var e,n=t.state,i=t.documentId,r=(e=n.plugins[Vu])===null||e===void 0?void 0:e.documents[i];return!(r!=null&&r.global.canUndo)}},"history:redo":{id:"history:redo",labelKey:"history.redo",icon:"arrowForwardUp",shortcuts:["Ctrl+Y","Meta+Shift+Z"],categories:["history","history-redo"],action:function(t){var e,n=t.registry,i=t.documentId,r=(e=n.getPlugin(Vu))===null||e===void 0?void 0:e.provides();r&&r.forDocument(i).redo()},disabled:function(t){var e,n=t.state,i=t.documentId,r=(e=n.plugins[Vu])===null||e===void 0?void 0:e.documents[i];return!(r!=null&&r.global.canRedo)}}}},i18n:{defaultLocale:"en",locales:[{code:"en",name:"English",translations:{search:{placeholder:"Search",caseSensitive:"Case sensitive",wholeWord:"Whole word",resultsFound:"{count} results found",page:"Page {page}"},zoom:{in:"Zoom In",out:"Zoom Out",fitWidth:"Fit to Width",fitPage:"Fit to Page",marquee:"Marquee Zoom",menu:"Zoom Menu",level:"Zoom Level ({level}%)",dragTip:"Drag to select area to zoom"},pan:{toggle:"Toggle Pan Mode"},pointer:{toggle:"Toggle Pointer Mode"},capture:{screenshot:"Screenshot",dragTip:"Drag to select area to capture",title:"Screenshot Preview",download:"Download",cancel:"Cancel"},document:{menu:"Document Menu",open:"Open",close:"Close",print:"Print",export:"Export",fullscreen:"Fullscreen",loading:"Loading document..."},emptyState:{title:"No Documents Open",description:"Open a PDF document to get started.",descriptionMulti:"You can view multiple documents using tabs.",openButton:"Open Document",supportedFormats:"Supported format: PDF"},passwordPrompt:{title:"Password Required",required:"This document is password protected. Please enter the password to open it.",incorrect:"The password you entered was incorrect. Please try again.",incorrectWarning:"Incorrect password. Please check and try again.",label:"Password",placeholder:"Enter document password",open:"Open",opening:"Opening...",cancel:"Cancel",close:"Close"},documentError:{title:"Error loading document",unknown:"An unknown error occurred",errorCode:"Error Code: {code}",close:"Close Document"},panel:{sidebar:"Sidebar",search:"Search",comment:"Comment",thumbnails:"Thumbnails",outline:"Outline",annotationStyle:"Annotation Style"},menu:{viewControls:"View Controls",zoomControls:"Zoom Controls",moreOptions:"More Options"},outline:{title:"Outline",loading:"Loading outline...",noOutline:"No outline available",noBookmarks:"This document doesn't contain bookmarks"},page:{settings:"Page Settings",single:"Single Page",twoOdd:"Two Page (Odd)",twoEven:"Two Page (Even)",vertical:"Vertical",horizontal:"Horizontal",spreadMode:"Spread Mode",scrollLayout:"Scroll Layout",rotation:"Page Rotation",next:"Next Page",previous:"Previous Page"},rotate:{clockwise:"Rotate Clockwise",counterClockwise:"Rotate Counter-Clockwise"},selection:{copy:"Copy Selection"},mode:{view:"View",annotate:"Annotate",shapes:"Shapes",redact:"Redact"},annotation:{text:"Text",highlight:"Highlight",strikeout:"Strikethrough",underline:"Underline",squiggly:"Squiggly",rectangle:"Rectangle",circle:"Circle",line:"Line",arrow:"Arrow",polygon:"Polygon",polyline:"Polyline",ink:"Ink",stamp:"Stamp",freeText:"Free Text",square:"Square",styles:"{type} Styles",defaults:"{type} Defaults",color:"Color",opacity:"Opacity",blendMode:"Blend mode",strokeWidth:"Stroke width",strokeColor:"Stroke color",borderStyle:"Border style",fillColor:"Fill color",fontSize:"Font size",fontFamily:"Font",textAlign:"Text alignment",verticalAlign:"Vertical alignment",lineEnding:"Line ending",lineStart:"Line start",lineEnd:"Line end",font:"Font",fontColor:"Font color",backgroundColor:"Background color",noStyles:"There are no styles for this annotation.",noStylesStamp:"There are no styles for stamps.",selectAnnotation:"Select an annotation to see styles",deleteSelected:"Delete selected annotation",moreTools:"More Tools"},redaction:{area:"Redact Area",text:"Redact Text",applyAll:"Apply All",clearAll:"Clear All",deleteSelected:"Delete selected redaction",commitSelected:"Apply selected redaction"},history:{undo:"Undo",redo:"Redo"},comments:{page:"Page {page}",commentCount:"{count} comment",commentCountPlural:"{count} comments",addComment:"Add comment...",addReply:"Add reply...",save:"Save",cancel:"Cancel",edit:"Edit",delete:"Delete",showMore:"more",showLess:"less",emptyState:"Add annotations to be able to comment on them."},blendMode:{normal:"Normal",multiply:"Multiply",screen:"Screen",overlay:"Overlay",darken:"Darken",lighten:"Lighten",colorDodge:"Color Dodge",colorBurn:"Color Burn",hardLight:"Hard Light",softLight:"Soft Light",difference:"Difference",exclusion:"Exclusion",hue:"Hue",saturation:"Saturation",color:"Color",luminosity:"Luminosity"},print:{title:"Print Settings",loading:"Preparing document...",pages:"Pages to print",all:"All pages",current:"Current page ({currentPage})",specify:"Specify pages",specifyEG:"e.g., 1-3, 5, 8-10",total:"Total pages in document: {totalPages}",annotation:"Include annotations",printing:"Printing...",print:"Print",cancel:"Cancel"}}},{code:"nl",name:"Nederlands",translations:{search:{placeholder:"Zoeken",caseSensitive:"Hoofdlettergevoelig",wholeWord:"Heel woord",resultsFound:"{count} resultaten gevonden",page:"Pagina {page}"},zoom:{in:"Inzoomen",out:"Uitzoomen",fitWidth:"Aanbreedte aanpassen",fitPage:"Aan pagina aanpassen",marquee:"Lijstzoom",menu:"Zoommenu",level:"Zoomniveau ({level}%)",dragTip:"Drag to select area to zoom"},pan:{toggle:"Pan-modus wisselen"},pointer:{toggle:"Aanwijzermodus wisselen"},capture:{screenshot:"Schermafbeelding",dragTip:"Sleep om een gebied te selecteren om vast te leggen",title:"Screenshot voorbeeld",download:"Downloaden",cancel:"Annuleren"},document:{menu:"Documentmenu",open:"Openen",close:"Sluiten",print:"Afdrukken",export:"Exporteren",fullscreen:"Volledig scherm",loading:"Document laden..."},emptyState:{title:"Geen documenten geopend",description:"Open een PDF-document om te beginnen.",descriptionMulti:"U kunt meerdere documenten bekijken met tabs.",openButton:"Document openen",supportedFormats:"Ondersteund formaat: PDF"},passwordPrompt:{title:"Wachtwoord vereist",required:"Dit document is beveiligd met een wachtwoord. Voer het wachtwoord in om te openen.",incorrect:"Het ingevoerde wachtwoord was onjuist. Probeer het opnieuw.",incorrectWarning:"Onjuist wachtwoord. Controleer en probeer opnieuw.",label:"Wachtwoord",placeholder:"Voer documentwachtwoord in",open:"Openen",opening:"Openen...",cancel:"Annuleren",close:"Sluiten"},documentError:{title:"Fout bij laden van document",unknown:"Er is een onbekende fout opgetreden",errorCode:"Foutcode: {code}",close:"Document sluiten"},panel:{sidebar:"Zijbalk",search:"Zoeken",comment:"Opmerking",thumbnails:"Miniaturen",outline:"Overzicht",annotationStyle:"Annotatiestijl"},menu:{viewControls:"Weergave-instellingen",zoomControls:"Zoom-instellingen",moreOptions:"Meer opties"},outline:{title:"Overzicht",loading:"Overzicht laden...",noOutline:"Geen overzicht beschikbaar",noBookmarks:"Dit document bevat geen bladwijzers"},page:{settings:"Pagina-instellingen",single:"Enkele pagina",twoOdd:"Twee pagina's (Oneven)",twoEven:"Twee pagina's (Even)",vertical:"Verticaal",horizontal:"Horizontaal",spreadMode:"Spreidingsmodus",scrollLayout:"Scrollindeling",rotation:"Paginarotatie",next:"Volgende pagina",previous:"Vorige pagina"},rotate:{clockwise:"Met de klok mee draaien",counterClockwise:"Tegen de klok in draaien"},selection:{copy:"Selectie kopiren"},mode:{view:"Weergave",annotate:"Annoteren",shapes:"Vormen",redact:"Redigeren"},annotation:{text:"Tekst",highlight:"Markeren",strikeout:"Doorhalen",underline:"Onderstrepen",squiggly:"Golflijn",rectangle:"Rechthoek",circle:"Cirkel",line:"Lijn",arrow:"Pijl",polygon:"Veelhoek",polyline:"Polylijn",ink:"Inkt",stamp:"Stempel",freeText:"Vrije tekst",square:"Vierkant",styles:"{type} stijlen",defaults:"{type} standaardwaarden",color:"Kleur",opacity:"Dekking",blendMode:"Overvloeimodus",strokeWidth:"Lijndikte",strokeColor:"Lijnkleur",borderStyle:"Randstijl",fillColor:"Vulkleur",fontSize:"Lettergrootte",fontFamily:"Lettertype",textAlign:"Tekstuitlijning",verticalAlign:"Verticale uitlijning",lineEnding:"Lijneinde",lineStart:"Lijnbegin",lineEnd:"Lijneinde",font:"Lettertype",fontColor:"Tekstkleur",backgroundColor:"Achtergrondkleur",noStyles:"Er zijn geen stijlen voor deze annotatie.",noStylesStamp:"Er zijn geen stijlen voor stempels.",selectAnnotation:"Selecteer een annotatie om stijlen te zien",deleteSelected:"Geselecteerde annotatie verwijderen",moreTools:"Meer gereedschappen"},redaction:{area:"Gebied redigeren",text:"Tekst redigeren",applyAll:"Alles toepassen",clearAll:"Alles wissen",deleteSelected:"Geselecteerde redactie verwijderen",commitSelected:"Geselecteerde redactie toepassen"},history:{undo:"Ongedaan maken",redo:"Opnieuw doen"},comments:{page:"Pagina {page}",commentCount:"{count} opmerking",commentCountPlural:"{count} opmerkingen",addComment:"Opmerking toevoegen...",addReply:"Antwoord toevoegen...",save:"Opslaan",cancel:"Annuleren",edit:"Bewerken",delete:"Verwijderen",showMore:"meer",showLess:"minder",emptyState:"Voeg annotaties toe om erop te kunnen reageren."},blendMode:{normal:"Normaal",multiply:"Vermenigvuldigen",screen:"Bleken",overlay:"Bedekken",darken:"Donkerder",lighten:"Lichter",colorDodge:"Kleur tegenhouden",colorBurn:"Kleur doordrukken",hardLight:"Hard licht",softLight:"Zacht licht",difference:"Verschil",exclusion:"Uitsluiting",hue:"Kleurtoon",saturation:"Verzadiging",color:"Kleur",luminosity:"Helderheid"},print:{title:"Afdrukinstellingen",loading:"Document voorbereiden...",pages:"Af te drukken pagina's",all:"Alle pagina's",current:"Huidige pagina ({currentPage})",specify:"Pagina's",specifyEG:"bijv. 1-3, 5, 8-10",total:"Totaal aantal pagina's in document: {totalPages}",annotation:"Inclusief annotaties",printing:"Afdrukken...",print:"Afdrukken",cancel:"Annuleren"}}},{code:"de",name:"Deutsch",translations:{search:{placeholder:"Suchen",caseSensitive:"Gro-/Kleinschreibung",wholeWord:"Ganzes Wort",resultsFound:"{count} Ergebnisse gefunden",page:"Seite {page}"},zoom:{in:"Vergrern",out:"Verkleinern",fitWidth:"An Breite anpassen",fitPage:"An Seite anpassen",marquee:"Laufrahmen-Zoom",menu:"Zoom-Men",level:"Zoomstufe ({level}%)",dragTip:"Drag to select area to zoom"},pan:{toggle:"Verschieben-Modus umschalten"},pointer:{toggle:"Zeiger-Modus umschalten"},capture:{screenshot:"Screenshot",dragTip:"Ziehen Sie, um den Bereich zum Erfassen auszuwhlen",title:"Screenshot-Vorschau",download:"Herunterladen",cancel:"Abbrechen"},document:{menu:"Dokument-Men",open:"ffnen",close:"Schlieen",print:"Drucken",export:"Exportieren",fullscreen:"Vollbild",loading:"Dokument wird geladen..."},emptyState:{title:"Keine Dokumente geffnet",description:"ffnen Sie ein PDF-Dokument, um zu beginnen.",descriptionMulti:"Sie knnen mehrere Dokumente mit Tabs anzeigen.",openButton:"Dokument ffnen",supportedFormats:"Untersttztes Format: PDF"},passwordPrompt:{title:"Passwort erforderlich",required:"Dieses Dokument ist passwortgeschtzt. Bitte geben Sie das Passwort ein.",incorrect:"Das eingegebene Passwort war falsch. Bitte versuchen Sie es erneut.",incorrectWarning:"Falsches Passwort. Bitte berprfen und erneut versuchen.",label:"Passwort",placeholder:"Dokumentpasswort eingeben",open:"ffnen",opening:"ffnen...",cancel:"Abbrechen",close:"Schlieen"},documentError:{title:"Fehler beim Laden des Dokuments",unknown:"Ein unbekannter Fehler ist aufgetreten",errorCode:"Fehlercode: {code}",close:"Dokument schlieen"},panel:{sidebar:"Seitenleiste",search:"Suchen",comment:"Kommentar",thumbnails:"Miniaturansichten",outline:"Gliederung",annotationStyle:"Anmerkungsstil"},menu:{viewControls:"Ansichtseinstellungen",zoomControls:"Zoom-Einstellungen",moreOptions:"Weitere Optionen"},outline:{title:"Gliederung",loading:"Gliederung wird geladen...",noOutline:"Keine Gliederung verfgbar",noBookmarks:"Dieses Dokument enthlt keine Lesezeichen"},page:{settings:"Seiteneinstellungen",single:"Einzelseite",twoOdd:"Zwei Seiten (Ungerade)",twoEven:"Zwei Seiten (Gerade)",vertical:"Vertikal",horizontal:"Horizontal",spreadMode:"Doppelseiten-Modus",scrollLayout:"Scroll-Layout",rotation:"Seitendrehung",next:"Nchste Seite",previous:"Vorherige Seite"},rotate:{clockwise:"Im Uhrzeigersinn drehen",counterClockwise:"Gegen den Uhrzeigersinn drehen"},selection:{copy:"Auswahl kopieren"},mode:{view:"Ansicht",annotate:"Annotieren",shapes:"Formen",redact:"Schwrzen"},annotation:{text:"Text",highlight:"Markieren",strikeout:"Durchstreichen",underline:"Unterstreichen",squiggly:"Wellenlinie",rectangle:"Rechteck",circle:"Kreis",line:"Linie",arrow:"Pfeil",polygon:"Polygon",polyline:"Polylinie",ink:"Freihand",stamp:"Stempel",freeText:"Freitext",square:"Quadrat",styles:"{type}-Stile",defaults:"{type}-Standardwerte",color:"Farbe",opacity:"Deckkraft",blendMode:"Mischmodus",strokeWidth:"Strichstrke",strokeColor:"Strichfarbe",borderStyle:"Rahmenstil",fillColor:"Fllfarbe",fontSize:"Schriftgre",fontFamily:"Schriftart",textAlign:"Textausrichtung",verticalAlign:"Vertikale Ausrichtung",lineEnding:"Linienende",lineStart:"Linienanfang",lineEnd:"Linienende",font:"Schriftart",fontColor:"Schriftfarbe",backgroundColor:"Hintergrundfarbe",noStyles:"Fr diese Anmerkung gibt es keine Stile.",noStylesStamp:"Fr Stempel gibt es keine Stile.",selectAnnotation:"Whlen Sie eine Anmerkung aus, um Stile anzuzeigen",deleteSelected:"Ausgewhlte Anmerkung lschen",moreTools:"Weitere Werkzeuge"},redaction:{area:"Bereich schwrzen",text:"Text schwrzen",applyAll:"Alle anwenden",clearAll:"Alle lschen",deleteSelected:"Ausgewhlte Schwrzung lschen",commitSelected:"Ausgewhlte Schwrzung anwenden"},history:{undo:"Rckgngig",redo:"Wiederholen"},comments:{page:"Seite {page}",commentCount:"{count} Kommentar",commentCountPlural:"{count} Kommentare",addComment:"Kommentar hinzufgen...",addReply:"Antwort hinzufgen...",save:"Speichern",cancel:"Abbrechen",edit:"Bearbeiten",delete:"Lschen",showMore:"mehr",showLess:"weniger",emptyState:"Fgen Sie Anmerkungen hinzu, um sie kommentieren zu knnen."},blendMode:{normal:"Normal",multiply:"Multiplizieren",screen:"Negativ multiplizieren",overlay:"Ineinanderkopieren",darken:"Abdunkeln",lighten:"Aufhellen",colorDodge:"Farbig abwedeln",colorBurn:"Farbig nachbelichten",hardLight:"Hartes Licht",softLight:"Weiches Licht",difference:"Differenz",exclusion:"Ausschluss",hue:"Farbton",saturation:"Sttigung",color:"Farbe",luminosity:"Luminanz"},print:{title:"Druckeinstellungen",loading:"Dokument wird vorbereitet...",pages:"Zu druckende Seiten",all:"Alle Seiten",current:"Aktuelle Seite ({currentPage})",specify:"Seiten angeben",specifyEG:"z.B. 1-3, 5, 8-10",total:"Gesamtseitenzahl im Dokument: {totalPages}",annotation:"Anmerkungen einbeziehen",printing:"Drucken...",print:"Drucken",cancel:"Abbrechen"}}},{code:"fr",name:"Franais",translations:{search:{placeholder:"Rechercher",caseSensitive:"Respecter la casse",wholeWord:"Mot entier",resultsFound:"{count} rsultats trouvs",page:"Page {page}"},zoom:{in:"Zoom avant",out:"Zoom arrire",fitWidth:"Ajuster  la largeur",fitPage:"Ajuster  la page",marquee:"Zoom de slection",menu:"Menu Zoom",level:"Niveau de zoom ({level}%)",dragTip:"Drag to select area to zoom"},pan:{toggle:"Basculer le mode dplacement"},pointer:{toggle:"Basculer le mode pointeur"},capture:{screenshot:"Capture d'cran",dragTip:"Faites glisser pour slectionner la zone  capturer",title:"Aperu de la capture",download:"Tlcharger",cancel:"Annuler"},document:{menu:"Menu Document",open:"Ouvrir",close:"Fermer",print:"Imprimer",export:"Exporter",fullscreen:"Plein cran",loading:"Chargement du document..."},emptyState:{title:"Aucun document ouvert",description:"Ouvrez un document PDF pour commencer.",descriptionMulti:"Vous pouvez afficher plusieurs documents avec des onglets.",openButton:"Ouvrir un document",supportedFormats:"Format pris en charge : PDF"},passwordPrompt:{title:"Mot de passe requis",required:"Ce document est protg par mot de passe. Veuillez entrer le mot de passe.",incorrect:"Le mot de passe saisi est incorrect. Veuillez ressayer.",incorrectWarning:"Mot de passe incorrect. Veuillez vrifier et ressayer.",label:"Mot de passe",placeholder:"Entrer le mot de passe du document",open:"Ouvrir",opening:"Ouverture...",cancel:"Annuler",close:"Fermer"},documentError:{title:"Erreur lors du chargement du document",unknown:"Une erreur inconnue est survenue",errorCode:"Code erreur : {code}",close:"Fermer le document"},panel:{sidebar:"Barre latrale",search:"Rechercher",comment:"Commentaire",thumbnails:"Miniatures",outline:"Plan",annotationStyle:"Style d'annotation"},menu:{viewControls:"Contrles d'affichage",zoomControls:"Contrles de zoom",moreOptions:"Plus d'options"},outline:{title:"Plan",loading:"Chargement du plan...",noOutline:"Aucun plan disponible",noBookmarks:"Ce document ne contient pas de signets"},page:{settings:"Paramtres de page",single:"Page unique",twoOdd:"Deux pages (Impair)",twoEven:"Deux pages (Pair)",vertical:"Vertical",horizontal:"Horizontal",spreadMode:"Mode double page",scrollLayout:"Disposition de dfilement",rotation:"Rotation de page",next:"Page suivante",previous:"Page prcdente"},rotate:{clockwise:"Tourner dans le sens horaire",counterClockwise:"Tourner dans le sens antihoraire"},selection:{copy:"Copier la slection"},mode:{view:"Affichage",annotate:"Annoter",shapes:"Formes",redact:"Caviarder"},annotation:{text:"Texte",highlight:"Surligner",strikeout:"Barrer",underline:"Souligner",squiggly:"Ondul",rectangle:"Rectangle",circle:"Cercle",line:"Ligne",arrow:"Flche",polygon:"Polygone",polyline:"Polyligne",ink:"Encre",stamp:"Tampon",freeText:"Texte libre",square:"Carr",styles:"Styles de {type}",defaults:"Valeurs par dfaut de {type}",color:"Couleur",opacity:"Opacit",blendMode:"Mode de fusion",strokeWidth:"paisseur du trait",strokeColor:"Couleur du trait",borderStyle:"Style de bordure",fillColor:"Couleur de remplissage",fontSize:"Taille de police",fontFamily:"Police",textAlign:"Alignement du texte",verticalAlign:"Alignement vertical",lineEnding:"Fin de ligne",lineStart:"Dbut de ligne",lineEnd:"Fin de ligne",font:"Police",fontColor:"Couleur du texte",backgroundColor:"Couleur de fond",noStyles:"Il n'y a pas de styles pour cette annotation.",noStylesStamp:"Il n'y a pas de styles pour les tampons.",selectAnnotation:"Slectionnez une annotation pour voir les styles",deleteSelected:"Supprimer l'annotation slectionne",moreTools:"Plus d'outils"},redaction:{area:"Caviarder la zone",text:"Caviarder le texte",applyAll:"Tout appliquer",clearAll:"Tout effacer",deleteSelected:"Supprimer la rdaction slectionne",commitSelected:"Appliquer la rdaction slectionne"},history:{undo:"Annuler",redo:"Refaire"},comments:{page:"Page {page}",commentCount:"{count} commentaire",commentCountPlural:"{count} commentaires",addComment:"Ajouter un commentaire...",addReply:"Ajouter une rponse...",save:"Enregistrer",cancel:"Annuler",edit:"Modifier",delete:"Supprimer",showMore:"plus",showLess:"moins",emptyState:"Ajoutez des annotations pour pouvoir les commenter."},blendMode:{normal:"Normal",multiply:"Produit",screen:"Superposition",overlay:"Incrustation",darken:"Obscurcir",lighten:"claircir",colorDodge:"Densit couleur -",colorBurn:"Densit couleur +",hardLight:"Lumire crue",softLight:"Lumire tamise",difference:"Diffrence",exclusion:"Exclusion",hue:"Teinte",saturation:"Saturation",color:"Couleur",luminosity:"Luminosit"},print:{title:"Paramtres d'impression",loading:"Prparation du document...",pages:"Pages  imprimer",all:"Toutes les pages",current:"Page actuelle ({currentPage})",specify:"Spcifier les pages",specifyEG:"ex : 1-3, 5, 8-10",total:"Nombre total de pages dans le document : {totalPages}",annotation:"Inclure les annotations",printing:"Impression...",print:"Imprimer",cancel:"Annuler"}}},{code:"es",name:"Espaol",translations:{search:{placeholder:"Buscar",caseSensitive:"Distinguir maysculas",wholeWord:"Palabra completa",resultsFound:"{count} resultados encontrados",page:"Pgina {page}"},zoom:{in:"Acercar",out:"Alejar",fitWidth:"Ajustar al ancho",fitPage:"Ajustar a la pgina",marquee:"Zoom de seleccin",menu:"Men de zoom",level:"Nivel de zoom ({level}%)",dragTip:"Drag to select area to zoom"},pan:{toggle:"Alternar modo desplazamiento"},pointer:{toggle:"Alternar modo puntero"},capture:{screenshot:"Captura de pantalla",dragTip:"Arrastre para seleccionar el rea a capturar",title:"Vista previa de la captura",download:"Descargar",cancel:"Cancelar"},document:{menu:"Men del documento",open:"Abrir",close:"Cerrar",print:"Imprimir",export:"Exportar",fullscreen:"Pantalla completa",loading:"Cargando documento..."},emptyState:{title:"No hay documentos abiertos",description:"Abra un documento PDF para comenzar.",descriptionMulti:"Puede ver varios documentos usando pestaas.",openButton:"Abrir documento",supportedFormats:"Formato compatible: PDF"},passwordPrompt:{title:"Contrasea requerida",required:"Este documento est protegido con contrasea. Por favor, ingrese la contrasea para abrirlo.",incorrect:"La contrasea ingresada es incorrecta. Por favor, intntelo de nuevo.",incorrectWarning:"Contrasea incorrecta. Por favor, verifique e intntelo de nuevo.",label:"Contrasea",placeholder:"Ingrese la contrasea del documento",open:"Abrir",opening:"Abriendo...",cancel:"Cancelar",close:"Cerrar"},documentError:{title:"Error al cargar el documento",unknown:"Ha ocurrido un error desconocido",errorCode:"Cdigo de error: {code}",close:"Cerrar documento"},panel:{sidebar:"Barra lateral",search:"Buscar",comment:"Comentario",thumbnails:"Miniaturas",outline:"Esquema",annotationStyle:"Estilo de anotacin"},menu:{viewControls:"Controles de vista",zoomControls:"Controles de zoom",moreOptions:"Ms opciones"},outline:{title:"Esquema",loading:"Cargando esquema...",noOutline:"No hay esquema disponible",noBookmarks:"Este documento no contiene marcadores"},page:{settings:"Configuracin de pgina",single:"Pgina nica",twoOdd:"Dos pginas (Impar)",twoEven:"Dos pginas (Par)",vertical:"Vertical",horizontal:"Horizontal",spreadMode:"Modo de doble pgina",scrollLayout:"Diseo de desplazamiento",rotation:"Rotacin de pgina",next:"Pgina siguiente",previous:"Pgina anterior"},rotate:{clockwise:"Rotar en sentido horario",counterClockwise:"Rotar en sentido antihorario"},selection:{copy:"Copiar seleccin"},mode:{view:"Ver",annotate:"Anotar",shapes:"Formas",redact:"Redactar"},annotation:{text:"Texto",highlight:"Resaltar",strikeout:"Tachar",underline:"Subrayar",squiggly:"Ondulado",rectangle:"Rectngulo",circle:"Crculo",line:"Lnea",arrow:"Flecha",polygon:"Polgono",polyline:"Polilnea",ink:"Tinta",stamp:"Sello",freeText:"Texto libre",square:"Cuadrado",styles:"Estilos de {type}",defaults:"Valores predeterminados de {type}",color:"Color",opacity:"Opacidad",blendMode:"Modo de fusin",strokeWidth:"Grosor del trazo",strokeColor:"Color del trazo",borderStyle:"Estilo del borde",fillColor:"Color de relleno",fontSize:"Tamao de fuente",fontFamily:"Fuente",textAlign:"Alineacin del texto",verticalAlign:"Alineacin vertical",lineEnding:"Final de lnea",lineStart:"Inicio de lnea",lineEnd:"Final de lnea",font:"Fuente",fontColor:"Color de fuente",backgroundColor:"Color de fondo",noStyles:"No hay estilos para esta anotacin.",noStylesStamp:"No hay estilos para los sellos.",selectAnnotation:"Seleccione una anotacin para ver los estilos",deleteSelected:"Eliminar anotacin seleccionada",moreTools:"Ms herramientas"},redaction:{area:"Redactar rea",text:"Redactar texto",applyAll:"Aplicar todo",clearAll:"Borrar todo",deleteSelected:"Eliminar redaccin seleccionada",commitSelected:"Aplicar redaccin seleccionada"},history:{undo:"Deshacer",redo:"Rehacer"},comments:{page:"Pgina {page}",commentCount:"{count} comentario",commentCountPlural:"{count} comentarios",addComment:"Aadir comentario...",addReply:"Aadir respuesta...",save:"Guardar",cancel:"Cancelar",edit:"Editar",delete:"Eliminar",showMore:"ms",showLess:"menos",emptyState:"Aada anotaciones para poder comentarlas."},blendMode:{normal:"Normal",multiply:"Multiplicar",screen:"Trama",overlay:"Superponer",darken:"Oscurecer",lighten:"Aclarar",colorDodge:"Sobreexponer color",colorBurn:"Subexponer color",hardLight:"Luz fuerte",softLight:"Luz suave",difference:"Diferencia",exclusion:"Exclusin",hue:"Tono",saturation:"Saturacin",color:"Color",luminosity:"Luminosidad"},print:{title:"Configuracin de impresin",loading:"Preparando documento...",pages:"Pginas a imprimir",all:"Todas las pginas",current:"Pgina actual ({currentPage})",specify:"Especificar pginas",specifyEG:"ej: 1-3, 5, 8-10",total:"Total de pginas en el documento: {totalPages}",annotation:"Incluir anotaciones",printing:"Imprimiendo...",print:"Imprimir",cancel:"Cancelar"}}},{code:"zh-CN",name:"",translations:{search:{placeholder:"",caseSensitive:"",wholeWord:"",resultsFound:"{count} ",page:"{page}"},zoom:{in:"",out:"",fitWidth:"",fitPage:"",marquee:"",menu:"",level:" ({level}%)",dragTip:""},pan:{toggle:""},pointer:{toggle:""},capture:{screenshot:"",dragTip:"",title:"PDF",download:"",cancel:""},document:{menu:"",open:"",close:"",print:"",export:"",fullscreen:"",loading:"..."},emptyState:{title:"",description:"+ PDF",descriptionMulti:"",openButton:"",supportedFormats:": PDF"},passwordPrompt:{title:"",required:"",incorrect:"",incorrectWarning:"",label:"",placeholder:"",open:"",opening:"...",cancel:"",close:""},documentError:{title:"",unknown:"",errorCode:": {code}",close:""},panel:{sidebar:"",search:"",comment:"",thumbnails:"",outline:"",annotationStyle:""},menu:{viewControls:"",zoomControls:"",moreOptions:""},outline:{title:"",loading:"...",noOutline:"",noBookmarks:""},page:{settings:"",single:"",twoOdd:"",twoEven:"",vertical:"",horizontal:"",spreadMode:"",scrollLayout:"",rotation:"",next:"",previous:""},rotate:{clockwise:"",counterClockwise:""},selection:{copy:""},mode:{view:"",annotate:"",shapes:"",redact:""},annotation:{text:"",highlight:"",strikeout:"",underline:"",squiggly:"",rectangle:"",circle:"",line:"",arrow:"",polygon:"",polyline:"",ink:"",stamp:"",freeText:"",square:"",styles:"{type} ",defaults:"{type} ",color:"",opacity:"",blendMode:"",strokeWidth:"",strokeColor:"",borderStyle:"",fillColor:"",fontSize:"",fontFamily:"",textAlign:"",verticalAlign:"",lineEnding:"",lineStart:"",lineEnd:"",font:"",fontColor:"",backgroundColor:"",noStyles:"",noStylesStamp:"",selectAnnotation:"",deleteSelected:"",moreTools:""},redaction:{area:"",text:"",applyAll:"",clearAll:"",deleteSelected:"",commitSelected:""},history:{undo:"",redo:""},comments:{page:"{page}",commentCount:"{count}",commentCountPlural:"{count}",addComment:"...",addReply:"...",save:"",cancel:"",edit:"",delete:"",showMore:"",showLess:"",emptyState:""},blendMode:{normal:"",multiply:"",screen:"",overlay:"",darken:"",lighten:"",colorDodge:"",colorBurn:"",hardLight:"",softLight:"",difference:"",exclusion:"",hue:"",saturation:"",color:"",luminosity:""},print:{title:"",loading:"...",pages:"",all:"",current:"{currentPage}",specify:"",specifyEG:"1-3, 5, 8-10",total:"{totalPages}",annotation:"",printing:"...",print:"",cancel:""}}}],paramResolvers:{"zoom.level":function(t){var e,n,i=t.state,r=t.documentId,o=r&&(e=(n=i.plugins[WM])===null||n===void 0||(n=n.documents[r])===null||n===void 0?void 0:n.currentZoomLevel)!==null&&e!==void 0?e:1;return{level:Math.round(100*o)}}}},ui:{schema:{id:"pdf-viewer-ui",version:"1.0.0",toolbars:{"main-toolbar":{id:"main-toolbar",position:{placement:"top",slot:"main",order:0},permanent:!0,responsive:{localeOverrides:{groups:[{id:"chinese-languages",locales:["zh-CN"],breakpoints:{sm:{replaceHide:["zoom-toolbar","mode-select-button","overflow-tabs-button"],replaceShow:["view-mode","annotate-mode","shapes-mode","redact-mode","pan-button","pointer-button","divider-3"]},md:{replaceShow:["view-mode","annotate-mode","shapes-mode","redact-mode","zoom-toolbar","pan-button","pointer-button","divider-3"],replaceHide:["zoom-menu-button","mode-select-button","overflow-tabs-button"]}}},{id:"germanic-languages",locales:["de","nl"],breakpoints:{md:{replaceShow:["view-mode","annotate-mode","zoom-toolbar","pan-button","pointer-button","divider-3","overflow-tabs-button"]}}}]},breakpoints:{xxxs:{maxWidth:400,hide:["annotate-mode","view-mode","shapes-mode","redact-mode","zoom-toolbar","pan-button","pointer-button","divider-3","page-settings-button","zoom-menu-button","divider-2","overflow-tabs-button"],show:["mode-select-button"]},xxs:{minWidth:400,show:["page-settings-button","zoom-menu-button","divider-2"],hide:["overflow-left-action-menu-button"]},xs:{minWidth:500,maxWidth:640,show:["pan-button","pointer-button","divider-3"]},sm:{minWidth:640,maxWidth:768,hide:["shapes-mode","redact-mode","zoom-toolbar","mode-select-button"],show:["view-mode","annotate-mode","overflow-tabs-button","pan-button","pointer-button","divider-3"]},md:{minWidth:768,show:["view-mode","annotate-mode","shapes-mode","zoom-toolbar","pan-button","pointer-button","divider-3","overflow-tabs-button"],hide:["zoom-menu-button","mode-select-button"]},lg:{minWidth:1024,show:["shapes-mode","redact-mode"],hide:["overflow-tabs-button"]}}},items:[{type:"group",id:"left-group",alignment:"start",gap:2,items:[{type:"command-button",id:"document-menu-button",commandId:"document:menu",variant:"icon",categories:["document","document-menu"]},{type:"divider",id:"divider-1",orientation:"vertical"},{type:"command-button",id:"sidebar-button",commandId:"panel:toggle-sidebar",variant:"icon",categories:["panel","panel-sidebar"]},{type:"command-button",id:"overflow-left-action-menu-button",commandId:"left-action-menu:overflow-menu",variant:"icon",categories:["ui","ui-menu"]},{type:"command-button",id:"page-settings-button",commandId:"page:settings",variant:"icon",categories:["page","page-settings"]}]},{type:"divider",id:"divider-2",orientation:"vertical"},{type:"group",id:"center-group",alignment:"center",gap:2,items:[{type:"command-button",id:"zoom-menu-button",commandId:"zoom:toggle-menu-mobile",variant:"icon",categories:["zoom","zoom-menu"]},{type:"custom",id:"zoom-toolbar",componentId:"zoom-toolbar",categories:["zoom"]},{type:"divider",id:"divider-3",orientation:"vertical",visibilityDependsOn:{itemIds:["zoom-toolbar","zoom-menu-button"]}},{type:"command-button",id:"pan-button",commandId:"pan:toggle",variant:"icon",categories:["tools","pan"]},{type:"command-button",id:"pointer-button",commandId:"pointer:toggle",variant:"icon",categories:["tools","pointer"]}]},{type:"spacer",id:"spacer-1",flex:!0},{type:"custom",id:"mode-select-button",componentId:"mode-select-button",categories:["mode"],visibilityDependsOn:{menuId:"mode-tabs-overflow-menu"}},{type:"tab-group",id:"mode-tabs",tabs:[{id:"view-mode",commandId:"mode:view",variant:"text",categories:["mode","mode-view"],visibilityDependsOn:{itemIds:["annotate-mode","shapes-mode","redact-mode"]}},{id:"annotate-mode",commandId:"mode:annotate",variant:"text",categories:["mode","mode-annotate","annotation"]},{id:"shapes-mode",commandId:"mode:shapes",variant:"text",categories:["mode","mode-shapes","annotation"]},{id:"redact-mode",commandId:"mode:redact",variant:"text",categories:["mode","mode-redact","redaction"]},{id:"overflow-tabs-button",commandId:"tabs:overflow-menu",variant:"icon",categories:["ui","ui-menu"],visibilityDependsOn:{menuId:"mode-tabs-overflow-menu"}}]},{type:"spacer",id:"spacer-2",flex:!0},{type:"group",id:"right-group",alignment:"end",gap:2,items:[{type:"command-button",id:"search-button",commandId:"panel:toggle-search",variant:"icon",categories:["panel","panel-search"]},{type:"command-button",id:"comment-button",commandId:"panel:toggle-comment",variant:"icon",categories:["panel","panel-comment"]}]}]},"annotation-toolbar":{id:"annotation-toolbar",position:{placement:"top",slot:"secondary",order:0},responsive:{breakpoints:{sm:{maxWidth:640,hide:["add-text","add-stamp"],show:["overflow-annotation-tools"]},md:{minWidth:640,hide:["overflow-annotation-tools"],show:["add-text","add-stamp"]}}},permanent:!1,categories:["annotation"],items:[{type:"spacer",id:"spacer-3",flex:!0},{type:"group",id:"annotation-tools",alignment:"start",gap:2,items:[{type:"command-button",id:"add-highlight",commandId:"annotation:add-highlight",variant:"icon",categories:["annotation","annotation-markup","annotation-highlight"]},{type:"command-button",id:"add-strikeout",commandId:"annotation:add-strikeout",variant:"icon",categories:["annotation","annotation-markup","annotation-strikeout"]},{type:"command-button",id:"add-underline",commandId:"annotation:add-underline",variant:"icon",categories:["annotation","annotation-markup","annotation-underline"]},{type:"command-button",id:"add-ink",commandId:"annotation:add-ink",variant:"icon",categories:["annotation","annotation-ink"]},{type:"command-button",id:"add-text",commandId:"annotation:add-text",variant:"icon",categories:["annotation","annotation-text"]},{type:"command-button",id:"add-stamp",commandId:"annotation:add-stamp",variant:"icon",categories:["annotation","annotation-stamp"]},{type:"command-button",id:"overflow-annotation-tools",commandId:"annotation:overflow-tools",variant:"icon",categories:["annotation","annotation-overflow"]},{type:"divider",id:"annotation-tools-divider-1",orientation:"vertical"},{type:"command-button",id:"toggle-annotation-style",commandId:"panel:toggle-annotation-style",variant:"icon",categories:["panel","panel-annotation-style"]},{type:"divider",id:"annotation-tools-divider-2",orientation:"vertical",visibilityDependsOn:{itemIds:["toggle-annotation-style"]}},{type:"command-button",id:"undo-button",commandId:"history:undo",variant:"icon",categories:["history","history-undo"]},{type:"command-button",id:"redo-button",commandId:"history:redo",variant:"icon",categories:["history","history-redo"]}]},{type:"spacer",id:"spacer-4",flex:!0}]},"shapes-toolbar":{id:"shapes-toolbar",position:{placement:"top",slot:"secondary",order:0},responsive:{breakpoints:{sm:{maxWidth:640,hide:["add-polygon","add-polyline"],show:["overflow-shapes-tools"]},md:{minWidth:640,hide:["overflow-shapes-tools"],show:["add-polygon","add-polyline"]}}},permanent:!1,categories:["annotation","annotation-shape"],items:[{type:"spacer",id:"spacer-5",flex:!0},{type:"group",id:"shapes-tools",alignment:"start",gap:2,items:[{type:"command-button",id:"add-rectangle",commandId:"annotation:add-rectangle",variant:"icon",categories:["annotation","annotation-shape","annotation-rectangle"]},{type:"command-button",id:"add-circle",commandId:"annotation:add-circle",variant:"icon",categories:["annotation","annotation-shape","annotation-circle"]},{type:"command-button",id:"add-line",commandId:"annotation:add-line",variant:"icon",categories:["annotation","annotation-shape","annotation-line"]},{type:"command-button",id:"add-arrow",commandId:"annotation:add-arrow",variant:"icon",categories:["annotation","annotation-shape","annotation-arrow"]},{type:"command-button",id:"add-polygon",commandId:"annotation:add-polygon",variant:"icon",categories:["annotation","annotation-shape","annotation-polygon"]},{type:"command-button",id:"add-polyline",commandId:"annotation:add-polyline",variant:"icon",categories:["annotation","annotation-shape","annotation-polyline"]},{type:"command-button",id:"overflow-shapes-tools",commandId:"annotation:overflow-shapes",variant:"icon",categories:["annotation","annotation-shape","annotation-overflow"]},{type:"divider",id:"shapes-tools-divider-1",orientation:"vertical"},{type:"command-button",id:"toggle-annotation-style",commandId:"panel:toggle-annotation-style",variant:"icon",categories:["panel","panel-annotation-style"]},{type:"divider",id:"shapes-tools-divider-2",orientation:"vertical",visibilityDependsOn:{itemIds:["toggle-annotation-style"]}},{type:"command-button",id:"undo-button",commandId:"history:undo",variant:"icon",categories:["history","history-undo"]},{type:"command-button",id:"redo-button",commandId:"history:redo",variant:"icon",categories:["history","history-redo"]}]},{type:"spacer",id:"spacer-6",flex:!0}]},"redaction-toolbar":{id:"redaction-toolbar",position:{placement:"top",slot:"secondary",order:0},permanent:!1,categories:["redaction"],items:[{type:"spacer",id:"spacer-7",flex:!0},{type:"group",id:"redaction-tools",alignment:"start",gap:2,items:[{type:"command-button",id:"redact-text",commandId:"redaction:redact-text",variant:"icon",categories:["redaction","redaction-text"]},{type:"command-button",id:"redact-area",commandId:"redaction:redact-area",variant:"icon",categories:["redaction","redaction-area"]},{type:"divider",id:"divider-5",orientation:"vertical"},{type:"command-button",id:"apply-redactions",commandId:"redaction:apply-all",variant:"icon",categories:["redaction","redaction-apply"]},{type:"command-button",id:"clear-redactions",commandId:"redaction:clear-all",variant:"icon",categories:["redaction","redaction-clear"]}]},{type:"spacer",id:"spacer-8",flex:!0}]}},menus:{"left-action-menu":{id:"left-action-menu",categories:["ui"],items:[{type:"submenu",id:"page-settings-submenu",labelKey:"menu.viewControls",label:"View Controls",icon:"viewSettings",menuId:"page-settings-menu",categories:["page"]},{type:"submenu",id:"zoom-submenu",labelKey:"menu.zoomControls",label:"Zoom Controls",icon:"zoomIn",menuId:"zoom-menu",categories:["zoom"]},{type:"divider",id:"divider-15"},{type:"command",id:"pan-button-menu",commandId:"pan:toggle",categories:["tools","pan"]},{type:"command",id:"pointer-button-menu",commandId:"pointer:toggle",categories:["tools","pointer"]}]},"mode-tabs-overflow-menu":{id:"mode-tabs-overflow-menu",items:[{type:"command",id:"mode:view",commandId:"mode:view",categories:["mode","mode-view"]},{type:"command",id:"mode:annotate",commandId:"mode:annotate",categories:["mode","mode-annotate","annotation"]},{type:"command",id:"mode:shapes",commandId:"mode:shapes",categories:["mode","mode-shapes","annotation"]},{type:"command",id:"mode:redact",commandId:"mode:redact",categories:["mode","mode-redact","redaction"]}],responsive:{breakpoints:{xs:{maxWidth:640,show:["mode:view","mode:annotate","mode:shapes","mode:redact"]},sm:{minWidth:640,maxWidth:768,hide:["mode:view","mode:annotate"]},md:{minWidth:768,hide:["mode:view","mode:annotate","mode:shapes"]}},localeOverrides:{groups:[{id:"germanic-languages",locales:["de","nl"],breakpoints:{md:{replaceHide:["mode:view","mode:annotate"]}}}]}}},"zoom-levels-menu":{id:"zoom-levels-menu",categories:["zoom","zoom-level"],items:[{type:"command",id:"zoom-levels-menu:25",commandId:"zoom:25",categories:["zoom","zoom-level","zoom-level-25"]},{type:"command",id:"zoom-levels-menu:50",commandId:"zoom:50",categories:["zoom","zoom-level","zoom-level-50"]},{type:"command",id:"zoom-levels-menu:100",commandId:"zoom:100",categories:["zoom","zoom-level","zoom-level-100"]},{type:"command",id:"zoom-levels-menu:125",commandId:"zoom:125",categories:["zoom","zoom-level","zoom-level-125"]},{type:"command",id:"zoom-levels-menu:150",commandId:"zoom:150",categories:["zoom","zoom-level","zoom-level-150"]},{type:"command",id:"zoom-levels-menu:200",commandId:"zoom:200",categories:["zoom","zoom-level","zoom-level-200"]},{type:"command",id:"zoom-levels-menu:400",commandId:"zoom:400",categories:["zoom","zoom-level","zoom-level-400"]},{type:"command",id:"zoom-levels-menu:800",commandId:"zoom:800",categories:["zoom","zoom-level","zoom-level-800"]},{type:"command",id:"zoom-levels-menu:1600",commandId:"zoom:1600",categories:["zoom","zoom-level","zoom-level-1600"]}]},"zoom-menu":{id:"zoom-menu",categories:["zoom"],items:[{type:"command",id:"zoom-menu:25",commandId:"zoom:25",categories:["zoom","zoom-level","zoom-level-25"]},{type:"command",id:"zoom-menu:50",commandId:"zoom:50",categories:["zoom","zoom-level","zoom-level-50"]},{type:"command",id:"zoom-menu:100",commandId:"zoom:100",categories:["zoom","zoom-level","zoom-level-100"]},{type:"command",id:"zoom-menu:125",commandId:"zoom:125",categories:["zoom","zoom-level","zoom-level-125"]},{type:"command",id:"zoom-menu:150",commandId:"zoom:150",categories:["zoom","zoom-level","zoom-level-150"]},{type:"command",id:"zoom-menu:200",commandId:"zoom:200",categories:["zoom","zoom-level","zoom-level-200"]},{type:"command",id:"zoom-menu:400",commandId:"zoom:400",categories:["zoom","zoom-level","zoom-level-400"]},{type:"command",id:"zoom-menu:800",commandId:"zoom:800",categories:["zoom","zoom-level","zoom-level-800"]},{type:"command",id:"zoom-menu:1600",commandId:"zoom:1600",categories:["zoom","zoom-level","zoom-level-1600"]},{type:"submenu",id:"zoom-levels-submenu",labelKey:"zoom.level",label:"Zoom Levels",menuId:"zoom-levels-menu",categories:["zoom","zoom-level"]},{type:"divider",id:"divider-zoom-in-out"},{type:"command",id:"zoom-menu:in",commandId:"zoom:in",categories:["zoom","zoom-in"]},{type:"command",id:"zoom-menu:out",commandId:"zoom:out",categories:["zoom","zoom-out"]},{type:"divider",id:"divider-8"},{type:"command",id:"zoom:fit-page",commandId:"zoom:fit-page",categories:["zoom","zoom-fit-page"]},{type:"command",id:"zoom:fit-width",commandId:"zoom:fit-width",categories:["zoom","zoom-fit-width"]},{type:"divider",id:"divider-9"},{type:"command",id:"zoom:marquee",commandId:"zoom:marquee",categories:["zoom","zoom-marquee"]}],responsive:{breakpoints:{xs:{maxWidth:640,show:["zoom-levels-submenu","divider-zoom-in-out"],hide:["zoom-menu:25","zoom-menu:50","zoom-menu:100","zoom-menu:125","zoom-menu:150","zoom-menu:200","zoom-menu:400","zoom-menu:800","zoom-menu:1600"]},md:{minWidth:768,show:["zoom-menu:25","zoom-menu:50","zoom-menu:100","zoom-menu:125","zoom-menu:150","zoom-menu:200","zoom-menu:400","zoom-menu:800","zoom-menu:1600"],hide:["zoom-levels-submenu","divider-zoom-in-out","zoom-menu:in","zoom-menu:out"]}}}},"document-menu":{id:"document-menu",categories:["document"],items:[{type:"command",id:"document:open",commandId:"document:open",categories:["document","document-open"]},{type:"command",id:"document:close",commandId:"document:close",categories:["document","document-close"]},{type:"divider",id:"divider-10"},{type:"command",id:"document:print",commandId:"document:print",categories:["document","document-print"]},{type:"command",id:"document:capture",commandId:"document:capture",categories:["document","document-capture"]},{type:"command",id:"document:export",commandId:"document:export",categories:["document","document-export"]},{type:"divider",id:"divider-11",visibilityDependsOn:{itemIds:["document:export","document:print","document:capture"]}},{type:"command",id:"document:fullscreen",commandId:"document:fullscreen",categories:["document","document-fullscreen"]}]},"annotation-tools-menu":{id:"annotation-tools-menu",categories:["annotation"],items:[{type:"command",id:"annotation:add-text",commandId:"annotation:add-text",categories:["annotation","annotation-text"]},{type:"command",id:"annotation:add-stamp",commandId:"annotation:add-stamp",categories:["annotation","annotation-stamp"]}]},"shapes-tools-menu":{id:"shapes-tools-menu",categories:["annotation","annotation-shape"],items:[{type:"command",id:"annotation:add-polygon",commandId:"annotation:add-polygon",categories:["annotation","annotation-shape","annotation-polygon"]},{type:"command",id:"annotation:add-polyline",commandId:"annotation:add-polyline",categories:["annotation","annotation-shape","annotation-polyline"]}]},"page-settings-menu":{id:"page-settings-menu",categories:["page"],items:[{type:"section",id:"spread-mode-section",labelKey:"page.spreadMode",label:"Spread Mode",categories:["page","spread"],items:[{type:"command",id:"spread:none",commandId:"spread:none",categories:["page","spread","spread-none"]},{type:"command",id:"spread:odd",commandId:"spread:odd",categories:["page","spread","spread-odd"]},{type:"command",id:"spread:even",commandId:"spread:even",categories:["page","spread","spread-even"]}]},{type:"divider",id:"divider-13"},{type:"section",id:"scroll-layout-section",labelKey:"page.scrollLayout",label:"Scroll Layout",categories:["page","scroll"],items:[{type:"command",id:"scroll:vertical",commandId:"scroll:vertical",categories:["page","scroll","scroll-vertical"]},{type:"command",id:"scroll:horizontal",commandId:"scroll:horizontal",categories:["page","scroll","scroll-horizontal"]}]},{type:"divider",id:"divider-14"},{type:"section",id:"page-rotation-section",labelKey:"page.rotation",label:"Page Rotation",categories:["page","rotate"],items:[{type:"command",id:"rotate:clockwise",commandId:"rotate:clockwise",categories:["page","rotate","rotate-clockwise"]},{type:"command",id:"rotate:counter-clockwise",commandId:"rotate:counter-clockwise",categories:["page","rotate","rotate-counter-clockwise"]}]},{type:"divider",id:"divider-15"},{type:"command",id:"document:fullscreen",commandId:"document:fullscreen",categories:["document","document-fullscreen"]}]}},sidebars:{"sidebar-panel":{id:"sidebar-panel",position:{placement:"left",slot:"main",order:0},content:{type:"tabs",tabs:[{id:"thumbnails",labelKey:"panel.thumbnails",label:"Thumbnails",icon:"squares",componentId:"thumbnails-sidebar"},{id:"outline",labelKey:"panel.outline",label:"Outline",icon:"listTree",componentId:"outline-sidebar"}]},width:"250px",collapsible:!0,defaultOpen:!1},"annotation-panel":{id:"annotation-panel",position:{placement:"left",slot:"main",order:0},content:{type:"component",componentId:"annotation-sidebar"},width:"250px",collapsible:!0,defaultOpen:!1},"search-panel":{id:"search-panel",position:{placement:"right",slot:"main",order:0},content:{type:"component",componentId:"search-sidebar"},width:"250px",collapsible:!0,defaultOpen:!1},"comment-panel":{id:"comment-panel",position:{placement:"right",slot:"main",order:0},content:{type:"component",componentId:"comment-sidebar"},width:"250px",collapsible:!0,defaultOpen:!1}},modals:{"print-modal":{id:"print-modal",content:{type:"component",componentId:"print-modal"},maxWidth:"28rem",closeOnClickOutside:!0,closeOnEscape:!0}},overlays:{"page-controls":{id:"page-controls",position:{anchor:"bottom-center",offset:{bottom:"1.5rem"}},content:{type:"component",componentId:"page-controls"},defaultEnabled:!0}},selectionMenus:{annotation:{id:"annotation",categories:["annotation"],items:[{type:"command-button",id:"delete-annotation",commandId:"annotation:delete-selected",variant:"icon",categories:["annotation","annotation-delete"]},{type:"command-button",id:"toggle-annotation-style",commandId:"panel:toggle-annotation-style",variant:"icon",categories:["panel","panel-annotation-style"]},{type:"command-button",id:"comment-button",commandId:"panel:toggle-comment",variant:"icon",categories:["panel","panel-comment"]}]},redaction:{id:"redaction",categories:["redaction"],items:[{type:"command-button",id:"delete-redaction",commandId:"redaction:delete-selected",variant:"icon",categories:["redaction","redaction-delete"]},{type:"command-button",id:"commit-redaction",commandId:"redaction:commit-selected",variant:"icon",categories:["redaction","redaction-commit"]}]},selection:{id:"selection",visibilityDependsOn:{itemIds:["copy-selection","add-highlight","add-strikeout","add-underline","add-squiggly","redact-text"]},items:[{type:"command-button",id:"copy-selection",commandId:"selection:copy",variant:"icon",categories:["selection","selection-copy"]},{type:"command-button",id:"add-highlight",commandId:"annotation:add-highlight",variant:"icon",categories:["annotation","annotation-markup","annotation-highlight"]},{type:"command-button",id:"add-strikeout",commandId:"annotation:add-strikeout",variant:"icon",categories:["annotation","annotation-markup","annotation-strikeout"]},{type:"command-button",id:"add-underline",commandId:"annotation:add-underline",variant:"icon",categories:["annotation","annotation-markup","annotation-underline"]},{type:"command-button",id:"add-squiggly",commandId:"annotation:add-squiggly",variant:"icon",categories:["annotation","annotation-markup","annotation-squiggly"]},{type:"command-button",id:"redact-text",commandId:"redaction:redact-text",variant:"icon",categories:["redaction","redaction-text"]}]}}}},viewport:{viewportGap:10},scroll:{defaultStrategy:qr.Vertical},zoom:{defaultZoomLevel:Ni.FitPage},spread:{defaultSpreadMode:Mr.None},rotation:{defaultRotation:Dc.Degree0},pan:{},render:{defaultImageType:"image/png"},tiling:{tileSize:768,overlapPx:2.5,extraRings:0},thumbnails:{width:150,gap:10,buffer:3,labelHeight:30},annotations:{},search:{},selection:{},bookmarks:{},attachments:{},capture:{scale:2,imageType:"image/png"},redaction:{drawBlackBoxes:!0},print:{},export:{defaultFileName:"document.pdf"},fullscreen:{},history:{},interactionManager:{}};function sX(t){var e=t.documentId,n=t.tabBarVisibility,i=n===void 0?"multiple":n,r=function(y){const x=$M(),{provides:v}=Pd(),w=v==null?void 0:v.getSchema(),_=pz(y);return{renderToolbar:(S,E)=>{const T=`${S}-${E}`;if(!w||!v||!_)return null;const P=_.activeToolbars[T],D=P?w.toolbars[P.toolbarId]:null;P&&!D&&console.warn(`Toolbar "${P.toolbarId}" not found in schema`);const A=D&&!D.permanent?()=>v.forDocument(y).closeToolbarSlot(S,E):void 0,R=x.toolbar;return ee(Tt,{children:P&&D&&ee(R,{schema:D,documentId:y,isOpen:P.isOpen,onClose:A})},`toolbar-slot-${T}`)},renderSidebar:(S,E)=>{var T;const P=`${S}-${E}`;if(!w||!v||!_)return null;const D=_.activeSidebars[P],A=D?(T=w.sidebars)==null?void 0:T[D.sidebarId]:null;D&&!A&&console.warn(`Sidebar "${D.sidebarId}" not found in schema`);const R=x.sidebar;return ee(Tt,{children:D&&A&&ee(R,{schema:A,documentId:y,isOpen:D.isOpen,onClose:()=>{v.forDocument(y).closeSidebarSlot(S,E)}})},`sidebar-slot-${P}`)},renderModal:()=>{var S;if(!w||!v||!_)return null;const E=x.modal;if(!E)return null;const T=_.activeModal,P=T?(S=w.modals)==null?void 0:S[T.modalId]:null;return T&&!P&&console.warn(`Modal "${T.modalId}" not found in schema`),ee(Tt,{children:T&&P&&ee(E,{schema:P,documentId:y,isOpen:T.isOpen,onClose:()=>{v.forDocument(y).closeModal()},onExited:()=>{v.forDocument(y).clearModal()}})},"modal-slot")},getActiveToolbars:()=>_?Object.entries(_.activeToolbars).map(([S,E])=>{const[T,P]=S.split("-");return{placement:T,slot:P,toolbarId:E.toolbarId,isOpen:E.isOpen}}):[],getActiveSidebars:()=>_?Object.entries(_.activeSidebars).map(([S,E])=>{const[T,P]=S.split("-");return{placement:T,slot:P,sidebarId:E.sidebarId,isOpen:E.isOpen}}):[],renderOverlays:()=>{if(!w||!v)return null;const S=x.overlay;return S?ee(Tt,{children:(w.overlays?Object.values(w.overlays):[]).map(E=>ee(S,{schema:E,documentId:y},E.id))},"overlays-slot"):null}}}(e),o=r.renderToolbar,s=r.renderSidebar,a=r.renderModal,l=r.renderOverlays,c=kn(e).translate,u=xw("selection",e),d=xw("annotation",e),f=xw("redaction",e),m=(y=>{const x=Fb();return Rt(()=>x?x.documentOrder.map(v=>x.documents[v]).filter(v=>v!=null):[],[x,y])})(),g=(()=>{const y=Fb();return Rt(()=>{if(!y)return{activeDocumentId:null,activeDocument:null};const x=y.activeDocumentId;return{activeDocumentId:x,activeDocument:x?y.documents[x]??null:null}},[y])})();return M(Tt,null,M(tX,{documentStates:m,activeDocumentId:g.activeDocumentId,visibility:i}),o("top","main"),o("top","secondary"),M("div",{id:"document-content",className:"bg-bg-surface flex flex-1 overflow-hidden"},s("left","main"),M("div",{className:"flex-1 overflow-hidden"},M(HG,{documentId:e},function(y){var x=y.documentState,v=y.isLoading,w=y.isError,_=y.isLoaded;return M(Tt,null,v&&M("div",{className:"flex h-full items-center justify-center"},M(Zb,{size:"lg",text:c("document.loading")})),w&&M(iX,{documentState:x}),_&&M("div",{className:"relative h-full w-full"},M(Jj,{documentId:e},M(hG,{className:"bg-bg-app",documentId:e},M(ZG,{documentId:e},M(vG,{documentId:e,renderPage:function(S){var E=S.pageIndex;return M(nj,{documentId:e,pageIndex:E,style:{backgroundColor:"#fff"}},M(e9,{documentId:e,pageIndex:E},M(JG,{documentId:e,pageIndex:E,scale:.5,style:{pointerEvents:"none"}}),M(bj,{documentId:e,pageIndex:E,style:{pointerEvents:"none"}}),M(rj,{documentId:e,pageIndex:E}),M(KG,{documentId:e,pageIndex:E}),M(b9,{documentId:e,pageIndex:E}),M(gj,{documentId:e,pageIndex:E,selectionMenu:u}),M(D9,{documentId:e,pageIndex:E,selectionMenu:f}),M(c9,{documentId:e,pageIndex:E,selectionMenu:d})))}})))),l()))})),s("right","main")),a())}var RP=new lL([new sL,new aL]);function aX(t){var e,n=t.config,i=t.onRegistryReady,r=function(c){const{wasmUrl:u=aG,worker:d=!0,logger:f,encoderPoolSize:m,fontFallback:g}=c??{},[y,x]=xe(null),[v,w]=xe(!0),[_,S]=xe(null),E=vt(null);return ge(()=>{let T=!1;return(async()=>{try{const{createPdfiumEngine:P}=d?await gA(()=>import("./worker-engine-rPr4Ul0q-C_h6msb3.js"),__vite__mapDeps([0,1])):await gA(()=>import("./direct-engine-CluHueed-CU3lGc3c.js"),__vite__mapDeps([2,1])),D=await P(u,{logger:f,encoderPoolSize:m,fontFallback:g});E.current=D,x(D),w(!1)}catch(P){T||(S(P),w(!1))}})(),()=>{var P,D;T=!0,(D=(P=E.current)==null?void 0:P.closeAllDocuments)==null||D.call(P).wait(()=>{var A,R;(R=(A=E.current)==null?void 0:A.destroy)==null||R.call(A),E.current=null},ii)}},[u,d,f,g]),{engine:y,isLoading:v,error:_}}(Ee(Ee({},n.wasmUrl&&{wasmUrl:n.wasmUrl}),{},{worker:n.worker,logger:n.log?RP:void 0})),o=r.engine,s=r.isLoading,a=Rt(function(){return{"thumbnails-sidebar":Mq,"annotation-sidebar":jq,"zoom-toolbar":Fq,"search-sidebar":Eq,"outline-sidebar":Tq,"comment-sidebar":Oq,"print-modal":Yq,"page-controls":Zq,"mode-select-button":rX}},[]),l=Rt(function(){return{toolbar:X7,sidebar:mq,modal:Sq,overlay:Xq,menu:vq,selectionMenu:qq}},[]);return M(Tt,null,M("style",null,SW),!o||s?M("div",{className:"flex h-full w-full items-center justify-center"},M(Zb,{size:"lg",text:"Initializing PDF engine..."})):M(sG,{logger:n.log?RP:void 0,onInitialized:(e=LN(Af().m(function c(u){return Af().w(function(d){for(;;)switch(d.n){case 0:i&&u&&i(u);case 1:return d.a(2)}},c)})),function(c){return e.apply(this,arguments)}),engine:o,plugins:[Tn(VG,Ee(Ee(Ee({},An.documentManager),n.src&&{initialDocuments:[{url:n.src}]}),n.documentManager)),Tn(WG,Ee(Ee(Ee({},An.commands),n.disabledCategories&&{disabledCategories:n.disabledCategories}),n.commands)),Tn(jG,Ee(Ee({},An.i18n),n.i18n)),Tn(NG,Ee(Ee(Ee({},An.ui),n.disabledCategories&&{disabledCategories:n.disabledCategories}),n.ui)),Tn(uG,Ee(Ee({},An.viewport),n.viewport)),Tn(gG,Ee(Ee({},An.scroll),n.scroll)),Tn(XG,Ee(Ee({},An.zoom),n.zoom)),Tn(wG,Ee(Ee({},An.spread),n.spread)),Tn(tj,Ee(Ee({},An.rotation),n.rotation)),Tn(y9,Ee(Ee({},An.pan),n.pan)),Tn(QG,Ee(Ee({},An.render),n.render)),Tn(wj,Ee(Ee({},An.tiling),n.tiling)),Tn(Cj,Ee(Ee({},An.thumbnails),n.thumbnails)),Tn(Zj,Ee(Ee({},An.annotations),n.annotations)),Tn(ij,Ee(Ee({},An.search),n.search)),Tn(vj,Ee(Ee({},An.selection),n.selection)),Tn(g9,Ee(Ee({},An.bookmarks),n.bookmarks)),Tn(N9,Ee(Ee({},An.attachments),n.attachments)),Tn(_9,Ee(Ee({},An.capture),n.capture)),Tn(A9,Ee(Ee({},An.redaction),n.redaction)),Tn(d9,Ee(Ee({},An.print),n.print)),Tn(v9,Ee(Ee({},An.export),n.export)),Tn(p9,Ee(Ee({},An.fullscreen),n.fullscreen)),Tn(E9,Ee(Ee({},An.history),n.history)),Tn(Kj,Ee(Ee({},An.interactionManager),n.interactionManager))]},function(c){var u=c.pluginsReady,d=c.activeDocumentId;return M(Tt,null,u?M(Tt,null,d?M(BG,{documentId:d,components:a,renderers:l,className:"relative flex h-full w-full select-none flex-col"},M(sX,{documentId:d,tabBarVisibility:n.tabBar}),M(oX,{documentId:d}),M(Aq,{documentId:d})):M(nX,null)):M("div",{className:"flex h-full items-center justify-center"},M(Zb,{size:"lg",text:"Initializing plugins..."})))}))}var lX=typeof HTMLElement<"u"?HTMLElement:SM(function t(){bM(this,t)}),cX=function(){function t(){var e;return bM(this,t),pt(e=zN(this,t),"_resolveRegistry",null),pt(e,"themeStyleEl",null),pt(e,"systemPreferenceCleanup",null),pt(e,"handleRegistryReady",function(n){e._resolveRegistry&&(e._resolveRegistry(n),e._resolveRegistry=null)}),e.root=e.attachShadow({mode:"open"}),e._registryPromise=new Promise(function(n){e._resolveRegistry=n}),e}return ON(t,lX),SM(t,[{key:"connectedCallback",value:function(){this._config||(this._config={src:this.getAttribute("src")||"/demo.pdf",worker:this.getAttribute("worker")!=="false",theme:this.parseThemeAttribute()}),this.setupTheme(),this.renderViewer()}},{key:"disconnectedCallback",value:function(){var e;(e=this.systemPreferenceCleanup)===null||e===void 0||e.call(this),this.systemPreferenceCleanup=null}},{key:"parseThemeAttribute",value:function(){var e=this.getAttribute("theme");if(e)return["light","dark","system"].includes(e)?{preference:e}:void 0}},{key:"config",get:function(){return this._config},set:function(e){this._config=e,e.icons&&KI(e.icons),this.isConnected&&(this.setupTheme(),this.renderViewer())}},{key:"registry",get:function(){return this._registryPromise}},{key:"themePreference",get:function(){var e;return((e=this._config)===null||e===void 0||(e=e.theme)===null||e===void 0?void 0:e.preference)||"system"}},{key:"activeColorScheme",get:function(){return IP(this.themePreference)}},{key:"activeTheme",get:function(){return this.resolveActiveTheme()}},{key:"resolveActiveTheme",value:function(){var e,n,i,r=(e=this._config)===null||e===void 0?void 0:e.theme,o=IP((r==null?void 0:r.preference)||"system"),s=o==="dark"?Qq:Kq,a=r==null?void 0:r[o];return i=s,(n=a)?Jq(i,n):i}},{key:"setupTheme",value:function(){var e,n,i=this;(e=this.systemPreferenceCleanup)===null||e===void 0||e.call(this),this.systemPreferenceCleanup=null,(((n=this._config)===null||n===void 0||(n=n.theme)===null||n===void 0?void 0:n.preference)||"system")==="system"&&(this.systemPreferenceCleanup=function(r){if(typeof window>"u")return function(){};var o=window.matchMedia("(prefers-color-scheme: dark)"),s=function(a){return r(a.matches?"dark":"light")};return o.addEventListener("change",s),function(){return o.removeEventListener("change",s)}}(function(r){i.injectTheme(),i.dispatchEvent(new CustomEvent("themechange",{detail:{preference:"system",colorScheme:r,theme:i.activeTheme},bubbles:!0}))})),this.injectTheme()}},{key:"injectTheme",value:function(){var e=eX(this.resolveActiveTheme()),n=this.root.querySelector("style[data-embedpdf-theme]");n||((n=document.createElement("style")).setAttribute("data-embedpdf-theme",""),this.root.appendChild(n)),this.themeStyleEl=n,this.themeStyleEl.textContent=e,this.setAttribute("data-color-scheme",this.activeColorScheme)}},{key:"setTheme",value:function(e){this._config&&(this._config.theme=typeof e=="string"?Ee(Ee({},this._config.theme),{},{preference:e}):Ee(Ee({},this._config.theme),e),this.setupTheme(),this.dispatchEvent(new CustomEvent("themechange",{detail:{preference:this.themePreference,colorScheme:this.activeColorScheme,theme:this.activeTheme},bubbles:!0})))}},{key:"registerIcon",value:function(e,n){kF(e,n)}},{key:"registerIcons",value:function(e){KI(e)}},{key:"renderViewer",value:function(){this._config&&(Rb(M(aX,{config:this._config,onRegistryReady:this.handleRegistryReady}),this.root),this.injectTheme())}}])}(),uX=["type","target"],dX="2.1.2";typeof customElements>"u"||customElements.get("embedpdf-container")||customElements.define("embedpdf-container",cX);var hX={version:dX,init:function(t){if(t.type==="container")return function(e){e.type,e.target;var n=Dy(e,uX),i=document.createElement("embedpdf-container");return i.config=n,e.target.appendChild(i),i}(t)}};const fX=Pe.forwardRef(function(e,n){const{config:i={},className:r,style:o,onInit:s,onReady:a}=e,l=Pe.useRef(null),c=Pe.useRef(null);return Pe.useImperativeHandle(n,()=>({get container(){return c.current},get registry(){var u;return((u=c.current)==null?void 0:u.registry)??null}})),Pe.useEffect(()=>{if(!l.current)return;let u=!0;const d=l.current,f=hX.init({type:"container",target:d,...i});return f&&(c.current=f,s==null||s(f),a&&f.registry.then(m=>{u&&a(m)})),()=>{u=!1,d.innerHTML="",c.current=null}},[]),U.jsx("div",{ref:l,className:r,style:o})}),pX=()=>{const[t,e]=Pe.useState(!0),n=Pe.useRef(null),i="/SKDevane_Data_Portfolio/",r=`${i}resume/SK_Devane_CV_v2.pdf`;return U.jsx("section",{className:"relative z-2 py-24 md:py-28 lg:py-40",children:U.jsx(ha,{name:"Resume",children:U.jsx("div",{className:"container",children:U.jsxs("div",{className:"relative flex flex-col lg:flex-row items-center justify-between gap-10 border-2 border-s3 rounded-7xl p-8 md:p-16 lg:p-20 g7",children:[U.jsxs("div",{className:"flex-1 flex flex-col items-start text-left max-lg:items-center max-lg:text-center",children:[U.jsx("p",{className:"caption mb-4 uppercase text-p3",children:"Professional Credentials"}),U.jsx("h2",{className:"h2 mb-6 text-p4 uppercase max-md:h4",children:"My Resume"}),U.jsx("p",{className:"body-1 mb-8 max-w-md max-lg:mx-auto",children:"Technical expertise in Data Analysis, Python, and SQL. Download my full CV for detailed project experience and academic background."}),U.jsx("a",{href:r,download:"SK_Devane_Resume.pdf",children:U.jsx(Py,{icon:"images/zap.svg",children:"Download PDF"})})]}),U.jsx("div",{className:"flex-1 w-full max-w-[500px] flex justify-center items-center relative",children:U.jsxs("div",{className:"rounded-30 md:rounded-40 relative border-2 border-s5 overflow-hidden bg-s1 w-full aspect-[1/1.414] shadow-3xl",children:[t&&U.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-s2 z-10",children:U.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-p1"})}),U.jsx("div",{className:yi("w-full h-full transition-opacity duration-500",t?"opacity-0":"opacity-100"),children:U.jsx(fX,{ref:n,config:{src:r,theme:{preference:"dark"},disabledCategories:["sidebar"],pdfium:{wasmUrl:`${i}pdfium.wasm`}},style:{width:"100%",height:"100%"},onReady:()=>e(!1)},r)}),U.jsx("div",{className:"absolute inset-0 pointer-events-none border-4 border-s2/20 rounded-30 md:rounded-40"})]})})]})})})})};function Kb(){return Kb=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Kb.apply(this,arguments)}function mX(t,e){if(t==null)return{};var n=gX(t,e),i,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)i=o[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function gX(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}var cC=Pe.forwardRef(function(t,e){var n=t.color,i=n===void 0?"currentColor":n,r=t.size,o=r===void 0?24:r,s=mX(t,["color","size"]);return Sv.createElement("svg",Kb({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:i,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},s),Sv.createElement("polyline",{points:"15 18 9 12 15 6"}))});cC.propTypes={color:Ga.string,size:Ga.oneOfType([Ga.string,Ga.number])};cC.displayName="ChevronLeft";function Qb(){return Qb=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Qb.apply(this,arguments)}function vX(t,e){if(t==null)return{};var n=yX(t,e),i,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)i=o[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function yX(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}var uC=Pe.forwardRef(function(t,e){var n=t.color,i=n===void 0?"currentColor":n,r=t.size,o=r===void 0?24:r,s=vX(t,["color","size"]);return Sv.createElement("svg",Qb({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:i,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},s),Sv.createElement("polyline",{points:"9 18 15 12 9 6"}))});uC.propTypes={color:Ga.string,size:Ga.oneOfType([Ga.string,Ga.number])};uC.displayName="ChevronRight";const yh=[{img:"assets/Shopfordable_ref.png",link:"https://amazing-coder1203.github.io/ShopAffordable/"},{img:"assets/crypto-live-pro-v3.png",link:"https://amazing-coder1203.github.io/crypto_live_pro/#/landing"},{img:"assets/african-migration.png",link:"https://amazing-coder1203.github.io/African-Conflicts/"},{img:"assets/amazon-sales.png",link:"https://amazing-coder1203.github.io/Amazon-India-Sales/"},{img:"assets/wita.png",link:"https://amazing-coder1203.github.io/Aircraft-Data-Analysis/"}];function DP({autoSlide:t=!1,autoSlideInterval:e=1e4}){const[n,i]=Pe.useState(0),r=()=>i(a=>a===0?yh.length-1:a-1),o=()=>i(a=>a===yh.length-1?0:a+1),s=()=>{window.open(yh[n].link,"_blank")};return Pe.useEffect(()=>{if(!t)return;const a=setInterval(o,e);return()=>clearInterval(a)},[]),U.jsx("div",{className:"flex justify-center md:justify-end items-center py-8",children:U.jsx("div",{className:"w-full md:w-full flex justify-center",children:U.jsxs("div",{className:"overflow-hidden relative max-w-lg w-full",children:[U.jsx("div",{className:"flex transition-transform ease-out duration-500",style:{transform:`translateX(-${n*100}%)`},children:yh.map((a,l)=>U.jsx("div",{className:"w-full h-[400px] flex items-center justify-center bg-transparent flex-shrink-0",children:U.jsx("img",{src:a.img,className:"max-h-full max-w-full object-cover",alt:`slide-${l}`})},l))}),U.jsxs("div",{className:"absolute inset-6 flex items-center justify-between p-4 z-30",children:[U.jsx("button",{onClick:r,className:"p-1 rounded-full shadow bg-white/80 text-gray-800 hover:bg-white",children:U.jsx(cC,{size:40})}),U.jsx("button",{onClick:o,className:"p-1 rounded-full shadow bg-white/80 text-gray-800 hover:bg-white",children:U.jsx(uC,{size:40})})]}),U.jsx("div",{className:"absolute bottom-12 left-0 right-0 flex justify-center z-30",children:U.jsx("button",{onClick:s,className:"px-6 py-2 rounded-lg shadow bg-blue-600 text-white hover:bg-blue-700",icon:"/images/zap.svg",children:"Open"})}),U.jsx("div",{className:"absolute bottom-4 right-0 left-0 z-20",children:U.jsx("div",{className:"flex items-center justify-center gap-2",children:yh.map((a,l)=>U.jsx("div",{className:`transition-all w-3 h-3 bg-white rounded-full ${n===l?"p-2":"bg-opacity-50"}`},l))})})]})})})}const xX=()=>U.jsx("section",{children:U.jsx(ha,{name:"Projects",className:"g7 relative pb-32 pt-24 max-lg:pb-24",children:U.jsxs("div",{className:"container",children:[U.jsxs("div",{className:"flex items-start gap-6",children:[" ",U.jsxs("div",{className:"relative flex-1 flex flex-col",children:[U.jsx("div",{className:"mb-10 text-8xl maxlg:text-7xl max-md:text-5xl max-md:mb-6",children:U.jsx("h1",{children:"My Projects"})}),U.jsx("p",{className:"body-1 mb-10 max-w-md max-md:mb-10",children:"A collection of academic, personal, and hackathon projects"}),U.jsx("ul",{className:"flex flex-wrap items-center gap-16 mr-20 max-md:hidden ml-auto",children:L$.map(({id:t,url:e,icon:n})=>U.jsx("li",{className:"download_tech-link download_tech-link_last-before download_tech-link_last-after",children:U.jsxs("a",{href:e,className:"size-22 download_tech-icon_before relative flex items-center justify-center rounded-half border-2 border-s3 bg-s1 transition-borderColor duration-500",children:[U.jsx("span",{className:"absolute -top-2 rotate-90",children:U.jsx(cN,{})}),U.jsx("img",{src:"images/lines.svg",alt:"lines",className:"absolute size-13/20 object-contain z-0"}),U.jsx("span",{className:"download_tech-icon",children:n})]})},t))})]}),U.jsx("div",{className:"mb-10 max-md:hidden flex-shrink-0 ml-6",children:U.jsx("div",{className:"download_preview-before download_preview-after rounded-40 relative w-[955px] border-2 border-s5",children:U.jsx("div",{className:"relative rounded-3xl bg-s1",children:U.jsx("div",{className:"rounded-xl overflow-hidden",children:U.jsx(DP,{autoSlide:!0,autoSlideInterval:1e4})})})})})]}),U.jsx("div",{className:" lg:hidden flex justify-center",children:U.jsx("div",{className:"download_preview-before download_preview-after rounded-40 relative w-[955px] border-2 border-s5 inline-block",children:U.jsx("div",{className:"relative rounded-3xl bg-s1",children:U.jsx("div",{className:"rounded-xl overflow-hidden",children:U.jsx(DP,{autoSlide:!0,autoSlideInterval:1e4})})})})}),U.jsx("div",{className:"mt-24 w-full overflow-hidden border-t-2 border-b-2 border-s5 bg-s1/50 py-4",children:U.jsx("div",{className:"animate-ticker flex whitespace-nowrap",children:[...Array(2)].map((t,e)=>U.jsxs("div",{className:"flex gap-16 mx-8",children:[U.jsxs("span",{className:"h5 font-mono text-p4",children:["PYTHON ",U.jsx("span",{className:"text-green-400",children:" 24.5%"})]}),U.jsxs("span",{className:"h5 font-mono text-p4",children:["AWS ",U.jsx("span",{className:"text-green-400",children:" 18.2%"})]}),U.jsxs("span",{className:"h5 font-mono text-p4",children:["DATA ",U.jsx("span",{className:"text-green-400",children:" 55.0%"})]}),U.jsxs("span",{className:"h5 font-mono text-p4",children:["STATS ",U.jsx("span",{className:"text-green-400",children:" 12.3%"})]}),U.jsxs("span",{className:"h5 font-mono text-p4",children:["LINUX ",U.jsx("span",{className:"text-green-400",children:" 08.1%"})]}),U.jsxs("span",{className:"h5 font-mono text-p4",children:["SQL ",U.jsx("span",{className:"text-green-400",children:" 14.6%"})]}),U.jsxs("span",{className:"h5 font-mono text-p4",children:["PYTHON ",U.jsx("span",{className:"text-green-400",children:" 24.5%"})]}),U.jsxs("span",{className:"h5 font-mono text-p4",children:["AWS ",U.jsx("span",{className:"text-green-400",children:" 18.2%"})]}),U.jsxs("span",{className:"h5 font-mono text-p4",children:["DATA ",U.jsx("span",{className:"text-green-400",children:" 55.0%"})]}),U.jsxs("span",{className:"h5 font-mono text-p4",children:["STATS ",U.jsx("span",{className:"text-green-400",children:" 12.3%"})]}),U.jsxs("span",{className:"h5 font-mono text-p4",children:["LINUX ",U.jsx("span",{className:"text-green-400",children:" 08.1%"})]}),U.jsxs("span",{className:"h5 font-mono text-p4",children:["SQL ",U.jsx("span",{className:"text-green-400",children:" 14.6%"})]})]},e))})})]})})}),wX=()=>U.jsx("footer",{className:"relative",children:U.jsx(ha,{name:"Contact",children:U.jsxs("div",{className:"container py-10",children:[U.jsxs("div",{className:"flex flex-col items-center text-center mb-6",children:[U.jsx("p",{className:"opacity-70",children:"Perfection is not attainable, but if we chase perfection we can catch excellence."}),U.jsx("p",{children:" Vince Lombardi"})]}),U.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between",children:[U.jsxs("div",{className:"flex items-center gap-6 mb-4 md:mb-0",children:[U.jsx("p",{className:"legal-after relative text-p5 transition-all duration-500 hover:text-p1",children:"Privacy Policy"}),U.jsx("p",{className:"text-p5 transition-all duration-500 hover:text-p1",children:"Terms of Use"})]}),U.jsx("ul",{className:"flex gap-3",children:z$.map(({id:t,url:e,icon:n,title:i})=>U.jsx("li",{children:U.jsx("a",{href:e,className:"social-icon",children:U.jsx("img",{src:n,alt:i,className:"size-1/3 object-contain"})})},t))})]})]})})});/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const yp="182",_X={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},bX={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},nU=0,Jb=1,iU=2,SX=3,rU=0,nd=1,ef=2,nc=3,ca=0,fr=1,ps=2,Ss=0,uc=1,Lf=2,eS=3,tS=4,oU=5,Va=100,sU=101,aU=102,lU=103,cU=104,uU=200,dU=201,hU=202,fU=203,m0=204,g0=205,pU=206,mU=207,gU=208,vU=209,yU=210,xU=211,wU=212,_U=213,bU=214,v0=0,y0=1,x0=2,Sc=3,w0=4,_0=5,b0=6,S0=7,xp=0,SU=1,MU=2,Mo=0,dC=1,hC=2,fC=3,Xy=4,pC=5,mC=6,gC=7,nS="attached",CU="detached",Yy=300,Cs=301,cl=302,zf=303,Of=304,kd=306,Ff=1e3,Pr=1001,Uf=1002,ri=1003,vC=1004,MX=1004,Wu=1005,CX=1005,Nn=1006,tf=1007,EX=1007,ms=1008,TX=1008,cr=1009,yC=1010,xC=1011,md=1012,Zy=1013,Ao=1014,dr=1015,Es=1016,Ky=1017,Qy=1018,gd=1020,wC=35902,_C=35899,bC=1021,SC=1022,Ki=1023,Ts=1026,Xa=1027,Jy=1028,wp=1029,Mc=1030,ex=1031,AX=1032,tx=1033,nf=33776,rf=33777,of=33778,sf=33779,M0=35840,C0=35841,E0=35842,T0=35843,A0=36196,I0=37492,P0=37496,R0=37488,D0=37489,k0=37490,N0=37491,L0=37808,z0=37809,O0=37810,F0=37811,U0=37812,B0=37813,H0=37814,V0=37815,$0=37816,W0=37817,G0=37818,j0=37819,q0=37820,X0=37821,Y0=36492,Z0=36494,K0=36495,Q0=36283,J0=36284,ey=36285,ty=36286,EU=2200,TU=2201,AU=2202,Bf=2300,ny=2301,xv=2302,ic=2400,rc=2401,Hf=2402,nx=2500,MC=2501,IX=0,PX=1,RX=2,IU=3200,DX=3201,kX=3202,NX=3203,ml=0,PU=1,Zs="",Cr="srgb",Cc="srgb-linear",Vf="linear",dn="srgb",LX="",zX="rg",OX="ga",FX=0,Yl=7680,UX=7681,BX=7682,HX=7683,VX=34055,$X=34056,WX=5386,GX=512,jX=513,qX=514,XX=515,YX=516,ZX=517,KX=518,iS=519,RU=512,DU=513,kU=514,ix=515,NU=516,LU=517,rx=518,zU=519,$f=35044,QX=35048,JX=35040,eY=35045,tY=35049,nY=35041,iY=35046,rY=35050,oY=35042,sY="100",rS="300 es",Zr=2e3,vd=2001,aY={COMPUTE:"compute",RENDER:"render"},lY={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},cY={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};function OU(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const uY={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Gu(t,e){return new uY[t](e)}function FU(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Wf(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function UU(){const t=Wf("canvas");return t.style.display="block",t}const kP={};let ul=null;function dY(t){ul=t}function hY(){return ul}function Gf(...t){const e="THREE."+t.shift();ul?ul("log",e,...t):console.log(e,...t)}function qe(...t){const e="THREE."+t.shift();ul?ul("warn",e,...t):console.warn(e,...t)}function wt(...t){const e="THREE."+t.shift();ul?ul("error",e,...t):console.error(e,...t)}function yd(...t){const e=t.join(" ");e in kP||(kP[e]=!0,qe(...t))}function fY(t,e,n){return new Promise(function(i,r){function o(){switch(t.clientWaitSync(e,t.SYNC_FLUSH_COMMANDS_BIT,0)){case t.WAIT_FAILED:r();break;case t.TIMEOUT_EXPIRED:setTimeout(o,n);break;default:i()}}setTimeout(o,n)})}class Is{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(n)===-1&&i[e].push(n)}hasEventListener(e,n){const i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(n)!==-1}removeEventListener(e,n){const i=this._listeners;if(i===void 0)return;const r=i[e];if(r!==void 0){const o=r.indexOf(n);o!==-1&&r.splice(o,1)}}dispatchEvent(e){const n=this._listeners;if(n===void 0)return;const i=n[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let o=0,s=r.length;o<s;o++)r[o].call(this,e);e.target=null}}}const Gi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let NP=1234567;const dc=Math.PI/180,xd=180/Math.PI;function Qr(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Gi[t&255]+Gi[t>>8&255]+Gi[t>>16&255]+Gi[t>>24&255]+"-"+Gi[e&255]+Gi[e>>8&255]+"-"+Gi[e>>16&15|64]+Gi[e>>24&255]+"-"+Gi[n&63|128]+Gi[n>>8&255]+"-"+Gi[n>>16&255]+Gi[n>>24&255]+Gi[i&255]+Gi[i>>8&255]+Gi[i>>16&255]+Gi[i>>24&255]).toLowerCase()}function At(t,e,n){return Math.max(e,Math.min(n,t))}function CC(t,e){return(t%e+e)%e}function pY(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)}function mY(t,e,n){return t!==e?(n-t)/(e-t):0}function af(t,e,n){return(1-n)*t+n*e}function gY(t,e,n,i){return af(t,e,1-Math.exp(-n*i))}function vY(t,e=1){return e-Math.abs(CC(t,e*2)-e)}function yY(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function xY(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function wY(t,e){return t+Math.floor(Math.random()*(e-t+1))}function _Y(t,e){return t+Math.random()*(e-t)}function bY(t){return t*(.5-Math.random())}function SY(t){t!==void 0&&(NP=t);let e=NP+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function MY(t){return t*dc}function CY(t){return t*xd}function EY(t){return(t&t-1)===0&&t!==0}function TY(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function AY(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function IY(t,e,n,i,r){const o=Math.cos,s=Math.sin,a=o(n/2),l=s(n/2),c=o((e+i)/2),u=s((e+i)/2),d=o((e-i)/2),f=s((e-i)/2),m=o((i-e)/2),g=s((i-e)/2);switch(r){case"XYX":t.set(a*u,l*d,l*f,a*c);break;case"YZY":t.set(l*f,a*u,l*d,a*c);break;case"ZXZ":t.set(l*d,l*f,a*u,a*c);break;case"XZX":t.set(a*u,l*g,l*m,a*c);break;case"YXY":t.set(l*m,a*u,l*g,a*c);break;case"ZYZ":t.set(l*g,l*m,a*u,a*c);break;default:qe("MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function ur(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function Bt(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const vo={DEG2RAD:dc,RAD2DEG:xd,generateUUID:Qr,clamp:At,euclideanModulo:CC,mapLinear:pY,inverseLerp:mY,lerp:af,damp:gY,pingpong:vY,smoothstep:yY,smootherstep:xY,randInt:wY,randFloat:_Y,randFloatSpread:bY,seededRandom:SY,degToRad:MY,radToDeg:CY,isPowerOfTwo:EY,ceilPowerOfTwo:TY,floorPowerOfTwo:AY,setQuaternionFromProperEuler:IY,normalize:Bt,denormalize:ur};class Ce{constructor(e=0,n=0){Ce.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,i=this.y,r=e.elements;return this.x=r[0]*n+r[3]*i+r[6],this.y=r[1]*n+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=At(this.x,e.x,n.x),this.y=At(this.y,e.y,n.y),this}clampScalar(e,n){return this.x=At(this.x,e,n),this.y=At(this.y,e,n),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(At(i,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(At(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y;return n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const i=Math.cos(n),r=Math.sin(n),o=this.x-e.x,s=this.y-e.y;return this.x=o*i-s*r+e.x,this.y=o*r+s*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Lr{constructor(e=0,n=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=i,this._w=r}static slerpFlat(e,n,i,r,o,s,a){let l=i[r+0],c=i[r+1],u=i[r+2],d=i[r+3],f=o[s+0],m=o[s+1],g=o[s+2],y=o[s+3];if(a<=0){e[n+0]=l,e[n+1]=c,e[n+2]=u,e[n+3]=d;return}if(a>=1){e[n+0]=f,e[n+1]=m,e[n+2]=g,e[n+3]=y;return}if(d!==y||l!==f||c!==m||u!==g){let x=l*f+c*m+u*g+d*y;x<0&&(f=-f,m=-m,g=-g,y=-y,x=-x);let v=1-a;if(x<.9995){const w=Math.acos(x),_=Math.sin(w);v=Math.sin(v*w)/_,a=Math.sin(a*w)/_,l=l*v+f*a,c=c*v+m*a,u=u*v+g*a,d=d*v+y*a}else{l=l*v+f*a,c=c*v+m*a,u=u*v+g*a,d=d*v+y*a;const w=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=w,c*=w,u*=w,d*=w}}e[n]=l,e[n+1]=c,e[n+2]=u,e[n+3]=d}static multiplyQuaternionsFlat(e,n,i,r,o,s){const a=i[r],l=i[r+1],c=i[r+2],u=i[r+3],d=o[s],f=o[s+1],m=o[s+2],g=o[s+3];return e[n]=a*g+u*d+l*m-c*f,e[n+1]=l*g+u*f+c*d-a*m,e[n+2]=c*g+u*m+a*f-l*d,e[n+3]=u*g-a*d-l*f-c*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,i,r){return this._x=e,this._y=n,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const i=e._x,r=e._y,o=e._z,s=e._order,a=Math.cos,l=Math.sin,c=a(i/2),u=a(r/2),d=a(o/2),f=l(i/2),m=l(r/2),g=l(o/2);switch(s){case"XYZ":this._x=f*u*d+c*m*g,this._y=c*m*d-f*u*g,this._z=c*u*g+f*m*d,this._w=c*u*d-f*m*g;break;case"YXZ":this._x=f*u*d+c*m*g,this._y=c*m*d-f*u*g,this._z=c*u*g-f*m*d,this._w=c*u*d+f*m*g;break;case"ZXY":this._x=f*u*d-c*m*g,this._y=c*m*d+f*u*g,this._z=c*u*g+f*m*d,this._w=c*u*d-f*m*g;break;case"ZYX":this._x=f*u*d-c*m*g,this._y=c*m*d+f*u*g,this._z=c*u*g-f*m*d,this._w=c*u*d+f*m*g;break;case"YZX":this._x=f*u*d+c*m*g,this._y=c*m*d+f*u*g,this._z=c*u*g-f*m*d,this._w=c*u*d-f*m*g;break;case"XZY":this._x=f*u*d-c*m*g,this._y=c*m*d-f*u*g,this._z=c*u*g+f*m*d,this._w=c*u*d+f*m*g;break;default:qe("Quaternion: .setFromEuler() encountered an unknown order: "+s)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const i=n/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,i=n[0],r=n[4],o=n[8],s=n[1],a=n[5],l=n[9],c=n[2],u=n[6],d=n[10],f=i+a+d;if(f>0){const m=.5/Math.sqrt(f+1);this._w=.25/m,this._x=(u-l)*m,this._y=(o-c)*m,this._z=(s-r)*m}else if(i>a&&i>d){const m=2*Math.sqrt(1+i-a-d);this._w=(u-l)/m,this._x=.25*m,this._y=(r+s)/m,this._z=(o+c)/m}else if(a>d){const m=2*Math.sqrt(1+a-i-d);this._w=(o-c)/m,this._x=(r+s)/m,this._y=.25*m,this._z=(l+u)/m}else{const m=2*Math.sqrt(1+d-i-a);this._w=(s-r)/m,this._x=(o+c)/m,this._y=(l+u)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let i=e.dot(n)+1;return i<1e-8?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(At(this.dot(e),-1,1)))}rotateTowards(e,n){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,n/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const i=e._x,r=e._y,o=e._z,s=e._w,a=n._x,l=n._y,c=n._z,u=n._w;return this._x=i*u+s*a+r*c-o*l,this._y=r*u+s*l+o*a-i*c,this._z=o*u+s*c+i*l-r*a,this._w=s*u-i*a-r*l-o*c,this._onChangeCallback(),this}slerp(e,n){if(n<=0)return this;if(n>=1)return this.copy(e);let i=e._x,r=e._y,o=e._z,s=e._w,a=this.dot(e);a<0&&(i=-i,r=-r,o=-o,s=-s,a=-a);let l=1-n;if(a<.9995){const c=Math.acos(a),u=Math.sin(c);l=Math.sin(l*c)/u,n=Math.sin(n*c)/u,this._x=this._x*l+i*n,this._y=this._y*l+r*n,this._z=this._z*l+o*n,this._w=this._w*l+s*n,this._onChangeCallback()}else this._x=this._x*l+i*n,this._y=this._y*l+r*n,this._z=this._z*l+o*n,this._w=this._w*l+s*n,this.normalize();return this}slerpQuaternions(e,n,i){return this.copy(e).slerp(n,i)}random(){const e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),o=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),o*Math.sin(n),o*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class W{constructor(e=0,n=0,i=0){W.prototype.isVector3=!0,this.x=e,this.y=n,this.z=i}set(e,n,i){return i===void 0&&(i=this.z),this.x=e,this.y=n,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(LP.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(LP.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,i=this.y,r=this.z,o=e.elements;return this.x=o[0]*n+o[3]*i+o[6]*r,this.y=o[1]*n+o[4]*i+o[7]*r,this.z=o[2]*n+o[5]*i+o[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,i=this.y,r=this.z,o=e.elements,s=1/(o[3]*n+o[7]*i+o[11]*r+o[15]);return this.x=(o[0]*n+o[4]*i+o[8]*r+o[12])*s,this.y=(o[1]*n+o[5]*i+o[9]*r+o[13])*s,this.z=(o[2]*n+o[6]*i+o[10]*r+o[14])*s,this}applyQuaternion(e){const n=this.x,i=this.y,r=this.z,o=e.x,s=e.y,a=e.z,l=e.w,c=2*(s*r-a*i),u=2*(a*n-o*r),d=2*(o*i-s*n);return this.x=n+l*c+s*d-a*u,this.y=i+l*u+a*c-o*d,this.z=r+l*d+o*u-s*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,i=this.y,r=this.z,o=e.elements;return this.x=o[0]*n+o[4]*i+o[8]*r,this.y=o[1]*n+o[5]*i+o[9]*r,this.z=o[2]*n+o[6]*i+o[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=At(this.x,e.x,n.x),this.y=At(this.y,e.y,n.y),this.z=At(this.z,e.z,n.z),this}clampScalar(e,n){return this.x=At(this.x,e,n),this.y=At(this.y,e,n),this.z=At(this.z,e,n),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(At(i,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const i=e.x,r=e.y,o=e.z,s=n.x,a=n.y,l=n.z;return this.x=r*l-o*a,this.y=o*s-i*l,this.z=i*a-r*s,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const i=e.dot(this)/n;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return Pw.copy(this).projectOnVector(e),this.sub(Pw)}reflect(e){return this.sub(Pw.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(At(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return n*n+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,i){const r=Math.sin(n)*e;return this.x=r*Math.sin(i),this.y=Math.cos(n)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,i){return this.x=e*Math.sin(n),this.y=i,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=i,this.z=r,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,n=Math.random()*2-1,i=Math.sqrt(1-n*n);return this.x=i*Math.cos(e),this.y=n,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Pw=new W,LP=new Lr;class Ut{constructor(e,n,i,r,o,s,a,l,c){Ut.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,i,r,o,s,a,l,c)}set(e,n,i,r,o,s,a,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=n,u[4]=o,u[5]=l,u[6]=i,u[7]=s,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],this}extractBasis(e,n,i){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,r=n.elements,o=this.elements,s=i[0],a=i[3],l=i[6],c=i[1],u=i[4],d=i[7],f=i[2],m=i[5],g=i[8],y=r[0],x=r[3],v=r[6],w=r[1],_=r[4],S=r[7],E=r[2],T=r[5],P=r[8];return o[0]=s*y+a*w+l*E,o[3]=s*x+a*_+l*T,o[6]=s*v+a*S+l*P,o[1]=c*y+u*w+d*E,o[4]=c*x+u*_+d*T,o[7]=c*v+u*S+d*P,o[2]=f*y+m*w+g*E,o[5]=f*x+m*_+g*T,o[8]=f*v+m*S+g*P,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return n*s*u-n*a*c-i*o*u+i*a*l+r*o*c-r*s*l}invert(){const e=this.elements,n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*s-a*c,f=a*l-u*o,m=c*o-s*l,g=n*d+i*f+r*m;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const y=1/g;return e[0]=d*y,e[1]=(r*c-u*i)*y,e[2]=(a*i-r*s)*y,e[3]=f*y,e[4]=(u*n-r*l)*y,e[5]=(r*o-a*n)*y,e[6]=m*y,e[7]=(i*l-c*n)*y,e[8]=(s*n-i*o)*y,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,i,r,o,s,a){const l=Math.cos(o),c=Math.sin(o);return this.set(i*l,i*c,-i*(l*s+c*a)+s+e,-r*c,r*l,-r*(-c*s+l*a)+a+n,0,0,1),this}scale(e,n){return this.premultiply(Rw.makeScale(e,n)),this}rotate(e){return this.premultiply(Rw.makeRotation(-e)),this}translate(e,n){return this.premultiply(Rw.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,i,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,i=e.elements;for(let r=0;r<9;r++)if(n[r]!==i[r])return!1;return!0}fromArray(e,n=0){for(let i=0;i<9;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Rw=new Ut,zP=new Ut().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),OP=new Ut().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function PY(){const t={enabled:!0,workingColorSpace:Cc,spaces:{},convert:function(r,o,s){return this.enabled===!1||o===s||!o||!s||(this.spaces[o].transfer===dn&&(r.r=na(r.r),r.g=na(r.g),r.b=na(r.b)),this.spaces[o].primaries!==this.spaces[s].primaries&&(r.applyMatrix3(this.spaces[o].toXYZ),r.applyMatrix3(this.spaces[s].fromXYZ)),this.spaces[s].transfer===dn&&(r.r=id(r.r),r.g=id(r.g),r.b=id(r.b))),r},workingToColorSpace:function(r,o){return this.convert(r,this.workingColorSpace,o)},colorSpaceToWorking:function(r,o){return this.convert(r,o,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===Zs?Vf:this.spaces[r].transfer},getToneMappingMode:function(r){return this.spaces[r].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(r,o=this.workingColorSpace){return r.fromArray(this.spaces[o].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,o,s){return r.copy(this.spaces[o].toXYZ).multiply(this.spaces[s].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(r,o){return yd("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),t.workingToColorSpace(r,o)},toWorkingColorSpace:function(r,o){return yd("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),t.colorSpaceToWorking(r,o)}},e=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],i=[.3127,.329];return t.define({[Cc]:{primaries:e,whitePoint:i,transfer:Vf,toXYZ:zP,fromXYZ:OP,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:Cr},outputColorSpaceConfig:{drawingBufferColorSpace:Cr}},[Cr]:{primaries:e,whitePoint:i,transfer:dn,toXYZ:zP,fromXYZ:OP,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:Cr}}}),t}const Jt=PY();function na(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function id(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let iu;class BU{static getDataURL(e,n="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{iu===void 0&&(iu=Wf("canvas")),iu.width=e.width,iu.height=e.height;const r=iu.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),i=iu}return i.toDataURL(n)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=Wf("canvas");n.width=e.width,n.height=e.height;const i=n.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),o=r.data;for(let s=0;s<o.length;s++)o[s]=na(o[s]/255)*255;return i.putImageData(r,0,0),n}else if(e.data){const n=e.data.slice(0);for(let i=0;i<n.length;i++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[i]=Math.floor(na(n[i]/255)*255):n[i]=na(n[i]);return{data:n,width:e.width,height:e.height}}else return qe("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let RY=0;class Ya{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:RY++}),this.uuid=Qr(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const n=this.data;return typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement?e.set(n.videoWidth,n.videoHeight,0):typeof VideoFrame<"u"&&n instanceof VideoFrame?e.set(n.displayHeight,n.displayWidth,0):n!==null?e.set(n.width,n.height,n.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let o;if(Array.isArray(r)){o=[];for(let s=0,a=r.length;s<a;s++)r[s].isDataTexture?o.push(Dw(r[s].image)):o.push(Dw(r[s]))}else o=Dw(r);i.url=o}return n||(e.images[this.uuid]=i),i}}function Dw(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?BU.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(qe("Texture: Unable to serialize Texture."),{})}let DY=0;const kw=new W;class Kn extends Is{constructor(e=Kn.DEFAULT_IMAGE,n=Kn.DEFAULT_MAPPING,i=Pr,r=Pr,o=Nn,s=ms,a=Ki,l=cr,c=Kn.DEFAULT_ANISOTROPY,u=Zs){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:DY++}),this.uuid=Qr(),this.name="",this.source=new Ya(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=o,this.minFilter=s,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Ce(0,0),this.repeat=new Ce(1,1),this.center=new Ce(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ut,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(kw).x}get height(){return this.source.getSize(kw).y}get depth(){return this.source.getSize(kw).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const n in e){const i=e[n];if(i===void 0){qe(`Texture.setValues(): parameter '${n}' has value of undefined.`);continue}const r=this[n];if(r===void 0){qe(`Texture.setValues(): property '${n}' does not exist.`);continue}r&&i&&r.isVector2&&i.isVector2||r&&i&&r.isVector3&&i.isVector3||r&&i&&r.isMatrix3&&i.isMatrix3?r.copy(i):this[n]=i}}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),n||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Yy)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ff:e.x=e.x-Math.floor(e.x);break;case Pr:e.x=e.x<0?0:1;break;case Uf:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Ff:e.y=e.y-Math.floor(e.y);break;case Pr:e.y=e.y<0?0:1;break;case Uf:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Kn.DEFAULT_IMAGE=null;Kn.DEFAULT_MAPPING=Yy;Kn.DEFAULT_ANISOTROPY=1;class Sn{constructor(e=0,n=0,i=0,r=1){Sn.prototype.isVector4=!0,this.x=e,this.y=n,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,i,r){return this.x=e,this.y=n,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,i=this.y,r=this.z,o=this.w,s=e.elements;return this.x=s[0]*n+s[4]*i+s[8]*r+s[12]*o,this.y=s[1]*n+s[5]*i+s[9]*r+s[13]*o,this.z=s[2]*n+s[6]*i+s[10]*r+s[14]*o,this.w=s[3]*n+s[7]*i+s[11]*r+s[15]*o,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,i,r,o;const l=e.elements,c=l[0],u=l[4],d=l[8],f=l[1],m=l[5],g=l[9],y=l[2],x=l[6],v=l[10];if(Math.abs(u-f)<.01&&Math.abs(d-y)<.01&&Math.abs(g-x)<.01){if(Math.abs(u+f)<.1&&Math.abs(d+y)<.1&&Math.abs(g+x)<.1&&Math.abs(c+m+v-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const _=(c+1)/2,S=(m+1)/2,E=(v+1)/2,T=(u+f)/4,P=(d+y)/4,D=(g+x)/4;return _>S&&_>E?_<.01?(i=0,r=.707106781,o=.707106781):(i=Math.sqrt(_),r=T/i,o=P/i):S>E?S<.01?(i=.707106781,r=0,o=.707106781):(r=Math.sqrt(S),i=T/r,o=D/r):E<.01?(i=.707106781,r=.707106781,o=0):(o=Math.sqrt(E),i=P/o,r=D/o),this.set(i,r,o,n),this}let w=Math.sqrt((x-g)*(x-g)+(d-y)*(d-y)+(f-u)*(f-u));return Math.abs(w)<.001&&(w=1),this.x=(x-g)/w,this.y=(d-y)/w,this.z=(f-u)/w,this.w=Math.acos((c+m+v-1)/2),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this.w=n[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=At(this.x,e.x,n.x),this.y=At(this.y,e.y,n.y),this.z=At(this.z,e.z,n.z),this.w=At(this.w,e.w,n.w),this}clampScalar(e,n){return this.x=At(this.x,e,n),this.y=At(this.y,e,n),this.z=At(this.z,e,n),this.w=At(this.w,e,n),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(At(i,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this.w=e.w+(n.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class EC extends Is{constructor(e=1,n=1,i={}){super(),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Nn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},i),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=i.depth,this.scissor=new Sn(0,0,e,n),this.scissorTest=!1,this.viewport=new Sn(0,0,e,n);const r={width:e,height:n,depth:i.depth},o=new Kn(r);this.textures=[];const s=i.count;for(let a=0;a<s;a++)this.textures[a]=o.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this._setTextureOptions(i),this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}_setTextureOptions(e={}){const n={minFilter:Nn,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(n.mapping=e.mapping),e.wrapS!==void 0&&(n.wrapS=e.wrapS),e.wrapT!==void 0&&(n.wrapT=e.wrapT),e.wrapR!==void 0&&(n.wrapR=e.wrapR),e.magFilter!==void 0&&(n.magFilter=e.magFilter),e.minFilter!==void 0&&(n.minFilter=e.minFilter),e.format!==void 0&&(n.format=e.format),e.type!==void 0&&(n.type=e.type),e.anisotropy!==void 0&&(n.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(n.colorSpace=e.colorSpace),e.flipY!==void 0&&(n.flipY=e.flipY),e.generateMipmaps!==void 0&&(n.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(n.internalFormat=e.internalFormat);for(let i=0;i<this.textures.length;i++)this.textures[i].setValues(n)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,n,i=1){if(this.width!==e||this.height!==n||this.depth!==i){this.width=e,this.height=n,this.depth=i;for(let r=0,o=this.textures.length;r<o;r++)this.textures[r].image.width=e,this.textures[r].image.height=n,this.textures[r].image.depth=i,this.textures[r].isData3DTexture!==!0&&(this.textures[r].isArrayTexture=this.textures[r].image.depth>1);this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,i=e.textures.length;n<i;n++){this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0,this.textures[n].renderTarget=this;const r=Object.assign({},e.textures[n].image);this.textures[n].source=new Ya(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Jr extends EC{constructor(e=1,n=1,i={}){super(e,n,i),this.isWebGLRenderTarget=!0}}class ox extends Kn{constructor(e=null,n=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:i,depth:r},this.magFilter=ri,this.minFilter=ri,this.wrapR=Pr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class kY extends Jr{constructor(e=1,n=1,i=1,r={}){super(e,n,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new ox(null,e,n,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class sx extends Kn{constructor(e=null,n=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:i,depth:r},this.magFilter=ri,this.minFilter=ri,this.wrapR=Pr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class NY extends Jr{constructor(e=1,n=1,i=1,r={}){super(e,n,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new sx(null,e,n,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class Ji{constructor(e=new W(1/0,1/0,1/0),n=new W(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n+=3)this.expandByPoint(Lo.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,i=e.count;n<i;n++)this.expandByPoint(Lo.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=Lo.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const o=i.getAttribute("position");if(n===!0&&o!==void 0&&e.isInstancedMesh!==!0)for(let s=0,a=o.count;s<a;s++)e.isMesh===!0?e.getVertexPosition(s,Lo):Lo.fromBufferAttribute(o,s),Lo.applyMatrix4(e.matrixWorld),this.expandByPoint(Lo);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),ug.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),ug.copy(i.boundingBox)),ug.applyMatrix4(e.matrixWorld),this.union(ug)}const r=e.children;for(let o=0,s=r.length;o<s;o++)this.expandByObject(r[o],n);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Lo),Lo.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,i;return e.normal.x>0?(n=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),n<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(xh),dg.subVectors(this.max,xh),ru.subVectors(e.a,xh),ou.subVectors(e.b,xh),su.subVectors(e.c,xh),Ia.subVectors(ou,ru),Pa.subVectors(su,ou),Dl.subVectors(ru,su);let n=[0,-Ia.z,Ia.y,0,-Pa.z,Pa.y,0,-Dl.z,Dl.y,Ia.z,0,-Ia.x,Pa.z,0,-Pa.x,Dl.z,0,-Dl.x,-Ia.y,Ia.x,0,-Pa.y,Pa.x,0,-Dl.y,Dl.x,0];return!Nw(n,ru,ou,su,dg)||(n=[1,0,0,0,1,0,0,0,1],!Nw(n,ru,ou,su,dg))?!1:(hg.crossVectors(Ia,Pa),n=[hg.x,hg.y,hg.z],Nw(n,ru,ou,su,dg))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Lo).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Lo).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Bs[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Bs[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Bs[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Bs[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Bs[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Bs[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Bs[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Bs[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Bs),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const Bs=[new W,new W,new W,new W,new W,new W,new W,new W],Lo=new W,ug=new Ji,ru=new W,ou=new W,su=new W,Ia=new W,Pa=new W,Dl=new W,xh=new W,dg=new W,hg=new W,kl=new W;function Nw(t,e,n,i,r){for(let o=0,s=t.length-3;o<=s;o+=3){kl.fromArray(t,o);const a=r.x*Math.abs(kl.x)+r.y*Math.abs(kl.y)+r.z*Math.abs(kl.z),l=e.dot(kl),c=n.dot(kl),u=i.dot(kl);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const LY=new Ji,wh=new W,Lw=new W;class zi{constructor(e=new W,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const i=this.center;n!==void 0?i.copy(n):LY.setFromPoints(e).getCenter(i);let r=0;for(let o=0,s=e.length;o<s;o++)r=Math.max(r,i.distanceToSquared(e[o]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const i=this.center.distanceToSquared(e);return n.copy(e),i>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;wh.subVectors(e,this.center);const n=wh.lengthSq();if(n>this.radius*this.radius){const i=Math.sqrt(n),r=(i-this.radius)*.5;this.center.addScaledVector(wh,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Lw.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(wh.copy(e.center).add(Lw)),this.expandByPoint(wh.copy(e.center).sub(Lw))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const Hs=new W,zw=new W,fg=new W,Ra=new W,Ow=new W,pg=new W,Fw=new W;class Nd{constructor(e=new W,n=new W(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Hs)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const i=n.dot(this.direction);return i<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Hs.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Hs.copy(this.origin).addScaledVector(this.direction,n),Hs.distanceToSquared(e))}distanceSqToSegment(e,n,i,r){zw.copy(e).add(n).multiplyScalar(.5),fg.copy(n).sub(e).normalize(),Ra.copy(this.origin).sub(zw);const o=e.distanceTo(n)*.5,s=-this.direction.dot(fg),a=Ra.dot(this.direction),l=-Ra.dot(fg),c=Ra.lengthSq(),u=Math.abs(1-s*s);let d,f,m,g;if(u>0)if(d=s*l-a,f=s*a-l,g=o*u,d>=0)if(f>=-g)if(f<=g){const y=1/u;d*=y,f*=y,m=d*(d+s*f+2*a)+f*(s*d+f+2*l)+c}else f=o,d=Math.max(0,-(s*f+a)),m=-d*d+f*(f+2*l)+c;else f=-o,d=Math.max(0,-(s*f+a)),m=-d*d+f*(f+2*l)+c;else f<=-g?(d=Math.max(0,-(-s*o+a)),f=d>0?-o:Math.min(Math.max(-o,-l),o),m=-d*d+f*(f+2*l)+c):f<=g?(d=0,f=Math.min(Math.max(-o,-l),o),m=f*(f+2*l)+c):(d=Math.max(0,-(s*o+a)),f=d>0?o:Math.min(Math.max(-o,-l),o),m=-d*d+f*(f+2*l)+c);else f=s>0?-o:o,d=Math.max(0,-(s*f+a)),m=-d*d+f*(f+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,d),r&&r.copy(zw).addScaledVector(fg,f),m}intersectSphere(e,n){Hs.subVectors(e.center,this.origin);const i=Hs.dot(this.direction),r=Hs.dot(Hs)-i*i,o=e.radius*e.radius;if(r>o)return null;const s=Math.sqrt(o-r),a=i-s,l=i+s;return l<0?null:a<0?this.at(l,n):this.at(a,n)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/n;return i>=0?i:null}intersectPlane(e,n){const i=this.distanceToPlane(e);return i===null?null:this.at(i,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let i,r,o,s,a,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,f=this.origin;return c>=0?(i=(e.min.x-f.x)*c,r=(e.max.x-f.x)*c):(i=(e.max.x-f.x)*c,r=(e.min.x-f.x)*c),u>=0?(o=(e.min.y-f.y)*u,s=(e.max.y-f.y)*u):(o=(e.max.y-f.y)*u,s=(e.min.y-f.y)*u),i>s||o>r||((o>i||isNaN(i))&&(i=o),(s<r||isNaN(r))&&(r=s),d>=0?(a=(e.min.z-f.z)*d,l=(e.max.z-f.z)*d):(a=(e.max.z-f.z)*d,l=(e.min.z-f.z)*d),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,n)}intersectsBox(e){return this.intersectBox(e,Hs)!==null}intersectTriangle(e,n,i,r,o){Ow.subVectors(n,e),pg.subVectors(i,e),Fw.crossVectors(Ow,pg);let s=this.direction.dot(Fw),a;if(s>0){if(r)return null;a=1}else if(s<0)a=-1,s=-s;else return null;Ra.subVectors(this.origin,e);const l=a*this.direction.dot(pg.crossVectors(Ra,pg));if(l<0)return null;const c=a*this.direction.dot(Ow.cross(Ra));if(c<0||l+c>s)return null;const u=-a*Ra.dot(Fw);return u<0?null:this.at(u/s,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Dt{constructor(e,n,i,r,o,s,a,l,c,u,d,f,m,g,y,x){Dt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,i,r,o,s,a,l,c,u,d,f,m,g,y,x)}set(e,n,i,r,o,s,a,l,c,u,d,f,m,g,y,x){const v=this.elements;return v[0]=e,v[4]=n,v[8]=i,v[12]=r,v[1]=o,v[5]=s,v[9]=a,v[13]=l,v[2]=c,v[6]=u,v[10]=d,v[14]=f,v[3]=m,v[7]=g,v[11]=y,v[15]=x,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Dt().fromArray(this.elements)}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],this}copyPosition(e){const n=this.elements,i=e.elements;return n[12]=i[12],n[13]=i[13],n[14]=i[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,i){return this.determinant()===0?(e.set(1,0,0),n.set(0,1,0),i.set(0,0,1),this):(e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this)}makeBasis(e,n,i){return this.set(e.x,n.x,i.x,0,e.y,n.y,i.y,0,e.z,n.z,i.z,0,0,0,0,1),this}extractRotation(e){if(e.determinant()===0)return this.identity();const n=this.elements,i=e.elements,r=1/au.setFromMatrixColumn(e,0).length(),o=1/au.setFromMatrixColumn(e,1).length(),s=1/au.setFromMatrixColumn(e,2).length();return n[0]=i[0]*r,n[1]=i[1]*r,n[2]=i[2]*r,n[3]=0,n[4]=i[4]*o,n[5]=i[5]*o,n[6]=i[6]*o,n[7]=0,n[8]=i[8]*s,n[9]=i[9]*s,n[10]=i[10]*s,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,i=e.x,r=e.y,o=e.z,s=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),u=Math.cos(o),d=Math.sin(o);if(e.order==="XYZ"){const f=s*u,m=s*d,g=a*u,y=a*d;n[0]=l*u,n[4]=-l*d,n[8]=c,n[1]=m+g*c,n[5]=f-y*c,n[9]=-a*l,n[2]=y-f*c,n[6]=g+m*c,n[10]=s*l}else if(e.order==="YXZ"){const f=l*u,m=l*d,g=c*u,y=c*d;n[0]=f+y*a,n[4]=g*a-m,n[8]=s*c,n[1]=s*d,n[5]=s*u,n[9]=-a,n[2]=m*a-g,n[6]=y+f*a,n[10]=s*l}else if(e.order==="ZXY"){const f=l*u,m=l*d,g=c*u,y=c*d;n[0]=f-y*a,n[4]=-s*d,n[8]=g+m*a,n[1]=m+g*a,n[5]=s*u,n[9]=y-f*a,n[2]=-s*c,n[6]=a,n[10]=s*l}else if(e.order==="ZYX"){const f=s*u,m=s*d,g=a*u,y=a*d;n[0]=l*u,n[4]=g*c-m,n[8]=f*c+y,n[1]=l*d,n[5]=y*c+f,n[9]=m*c-g,n[2]=-c,n[6]=a*l,n[10]=s*l}else if(e.order==="YZX"){const f=s*l,m=s*c,g=a*l,y=a*c;n[0]=l*u,n[4]=y-f*d,n[8]=g*d+m,n[1]=d,n[5]=s*u,n[9]=-a*u,n[2]=-c*u,n[6]=m*d+g,n[10]=f-y*d}else if(e.order==="XZY"){const f=s*l,m=s*c,g=a*l,y=a*c;n[0]=l*u,n[4]=-d,n[8]=c*u,n[1]=f*d+y,n[5]=s*u,n[9]=m*d-g,n[2]=g*d-m,n[6]=a*u,n[10]=y*d+f}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(zY,e,OY)}lookAt(e,n,i){const r=this.elements;return $r.subVectors(e,n),$r.lengthSq()===0&&($r.z=1),$r.normalize(),Da.crossVectors(i,$r),Da.lengthSq()===0&&(Math.abs(i.z)===1?$r.x+=1e-4:$r.z+=1e-4,$r.normalize(),Da.crossVectors(i,$r)),Da.normalize(),mg.crossVectors($r,Da),r[0]=Da.x,r[4]=mg.x,r[8]=$r.x,r[1]=Da.y,r[5]=mg.y,r[9]=$r.y,r[2]=Da.z,r[6]=mg.z,r[10]=$r.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,r=n.elements,o=this.elements,s=i[0],a=i[4],l=i[8],c=i[12],u=i[1],d=i[5],f=i[9],m=i[13],g=i[2],y=i[6],x=i[10],v=i[14],w=i[3],_=i[7],S=i[11],E=i[15],T=r[0],P=r[4],D=r[8],A=r[12],R=r[1],N=r[5],O=r[9],H=r[13],q=r[2],Z=r[6],G=r[10],Y=r[14],z=r[3],$=r[7],X=r[11],K=r[15];return o[0]=s*T+a*R+l*q+c*z,o[4]=s*P+a*N+l*Z+c*$,o[8]=s*D+a*O+l*G+c*X,o[12]=s*A+a*H+l*Y+c*K,o[1]=u*T+d*R+f*q+m*z,o[5]=u*P+d*N+f*Z+m*$,o[9]=u*D+d*O+f*G+m*X,o[13]=u*A+d*H+f*Y+m*K,o[2]=g*T+y*R+x*q+v*z,o[6]=g*P+y*N+x*Z+v*$,o[10]=g*D+y*O+x*G+v*X,o[14]=g*A+y*H+x*Y+v*K,o[3]=w*T+_*R+S*q+E*z,o[7]=w*P+_*N+S*Z+E*$,o[11]=w*D+_*O+S*G+E*X,o[15]=w*A+_*H+S*Y+E*K,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[4],r=e[8],o=e[12],s=e[1],a=e[5],l=e[9],c=e[13],u=e[2],d=e[6],f=e[10],m=e[14],g=e[3],y=e[7],x=e[11],v=e[15],w=l*m-c*f,_=a*m-c*d,S=a*f-l*d,E=s*m-c*u,T=s*f-l*u,P=s*d-a*u;return n*(y*w-x*_+v*S)-i*(g*w-x*E+v*T)+r*(g*_-y*E+v*P)-o*(g*S-y*T+x*P)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=n,r[14]=i),this}invert(){const e=this.elements,n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],f=e[10],m=e[11],g=e[12],y=e[13],x=e[14],v=e[15],w=d*x*c-y*f*c+y*l*m-a*x*m-d*l*v+a*f*v,_=g*f*c-u*x*c-g*l*m+s*x*m+u*l*v-s*f*v,S=u*y*c-g*d*c+g*a*m-s*y*m-u*a*v+s*d*v,E=g*d*l-u*y*l-g*a*f+s*y*f+u*a*x-s*d*x,T=n*w+i*_+r*S+o*E;if(T===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/T;return e[0]=w*P,e[1]=(y*f*o-d*x*o-y*r*m+i*x*m+d*r*v-i*f*v)*P,e[2]=(a*x*o-y*l*o+y*r*c-i*x*c-a*r*v+i*l*v)*P,e[3]=(d*l*o-a*f*o-d*r*c+i*f*c+a*r*m-i*l*m)*P,e[4]=_*P,e[5]=(u*x*o-g*f*o+g*r*m-n*x*m-u*r*v+n*f*v)*P,e[6]=(g*l*o-s*x*o-g*r*c+n*x*c+s*r*v-n*l*v)*P,e[7]=(s*f*o-u*l*o+u*r*c-n*f*c-s*r*m+n*l*m)*P,e[8]=S*P,e[9]=(g*d*o-u*y*o-g*i*m+n*y*m+u*i*v-n*d*v)*P,e[10]=(s*y*o-g*a*o+g*i*c-n*y*c-s*i*v+n*a*v)*P,e[11]=(u*a*o-s*d*o-u*i*c+n*d*c+s*i*m-n*a*m)*P,e[12]=E*P,e[13]=(u*y*r-g*d*r+g*i*f-n*y*f-u*i*x+n*d*x)*P,e[14]=(g*a*r-s*y*r-g*i*l+n*y*l+s*i*x-n*a*x)*P,e[15]=(s*d*r-u*a*r+u*i*l-n*d*l-s*i*f+n*a*f)*P,this}scale(e){const n=this.elements,i=e.x,r=e.y,o=e.z;return n[0]*=i,n[4]*=r,n[8]*=o,n[1]*=i,n[5]*=r,n[9]*=o,n[2]*=i,n[6]*=r,n[10]*=o,n[3]*=i,n[7]*=r,n[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,i,r))}makeTranslation(e,n,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,i,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,n,-i,0,0,i,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,0,i,0,0,1,0,0,-i,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,0,i,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const i=Math.cos(n),r=Math.sin(n),o=1-i,s=e.x,a=e.y,l=e.z,c=o*s,u=o*a;return this.set(c*s+i,c*a-r*l,c*l+r*a,0,c*a+r*l,u*a+i,u*l-r*s,0,c*l-r*a,u*l+r*s,o*l*l+i,0,0,0,0,1),this}makeScale(e,n,i){return this.set(e,0,0,0,0,n,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,n,i,r,o,s){return this.set(1,i,o,0,e,1,s,0,n,r,1,0,0,0,0,1),this}compose(e,n,i){const r=this.elements,o=n._x,s=n._y,a=n._z,l=n._w,c=o+o,u=s+s,d=a+a,f=o*c,m=o*u,g=o*d,y=s*u,x=s*d,v=a*d,w=l*c,_=l*u,S=l*d,E=i.x,T=i.y,P=i.z;return r[0]=(1-(y+v))*E,r[1]=(m+S)*E,r[2]=(g-_)*E,r[3]=0,r[4]=(m-S)*T,r[5]=(1-(f+v))*T,r[6]=(x+w)*T,r[7]=0,r[8]=(g+_)*P,r[9]=(x-w)*P,r[10]=(1-(f+y))*P,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,n,i){const r=this.elements;if(e.x=r[12],e.y=r[13],e.z=r[14],this.determinant()===0)return i.set(1,1,1),n.identity(),this;let o=au.set(r[0],r[1],r[2]).length();const s=au.set(r[4],r[5],r[6]).length(),a=au.set(r[8],r[9],r[10]).length();this.determinant()<0&&(o=-o),zo.copy(this);const c=1/o,u=1/s,d=1/a;return zo.elements[0]*=c,zo.elements[1]*=c,zo.elements[2]*=c,zo.elements[4]*=u,zo.elements[5]*=u,zo.elements[6]*=u,zo.elements[8]*=d,zo.elements[9]*=d,zo.elements[10]*=d,n.setFromRotationMatrix(zo),i.x=o,i.y=s,i.z=a,this}makePerspective(e,n,i,r,o,s,a=Zr,l=!1){const c=this.elements,u=2*o/(n-e),d=2*o/(i-r),f=(n+e)/(n-e),m=(i+r)/(i-r);let g,y;if(l)g=o/(s-o),y=s*o/(s-o);else if(a===Zr)g=-(s+o)/(s-o),y=-2*s*o/(s-o);else if(a===vd)g=-s/(s-o),y=-s*o/(s-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return c[0]=u,c[4]=0,c[8]=f,c[12]=0,c[1]=0,c[5]=d,c[9]=m,c[13]=0,c[2]=0,c[6]=0,c[10]=g,c[14]=y,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,n,i,r,o,s,a=Zr,l=!1){const c=this.elements,u=2/(n-e),d=2/(i-r),f=-(n+e)/(n-e),m=-(i+r)/(i-r);let g,y;if(l)g=1/(s-o),y=s/(s-o);else if(a===Zr)g=-2/(s-o),y=-(s+o)/(s-o);else if(a===vd)g=-1/(s-o),y=-o/(s-o);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return c[0]=u,c[4]=0,c[8]=0,c[12]=f,c[1]=0,c[5]=d,c[9]=0,c[13]=m,c[2]=0,c[6]=0,c[10]=g,c[14]=y,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const n=this.elements,i=e.elements;for(let r=0;r<16;r++)if(n[r]!==i[r])return!1;return!0}fromArray(e,n=0){for(let i=0;i<16;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e[n+9]=i[9],e[n+10]=i[10],e[n+11]=i[11],e[n+12]=i[12],e[n+13]=i[13],e[n+14]=i[14],e[n+15]=i[15],e}}const au=new W,zo=new Dt,zY=new W(0,0,0),OY=new W(1,1,1),Da=new W,mg=new W,$r=new W,FP=new Dt,UP=new Lr;class to{constructor(e=0,n=0,i=0,r=to.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,i,r=this._order){return this._x=e,this._y=n,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,i=!0){const r=e.elements,o=r[0],s=r[4],a=r[8],l=r[1],c=r[5],u=r[9],d=r[2],f=r[6],m=r[10];switch(n){case"XYZ":this._y=Math.asin(At(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,m),this._z=Math.atan2(-s,o)):(this._x=Math.atan2(f,c),this._z=0);break;case"YXZ":this._x=Math.asin(-At(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,o),this._z=0);break;case"ZXY":this._x=Math.asin(At(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-d,m),this._z=Math.atan2(-s,c)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-At(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(f,m),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-s,c));break;case"YZX":this._z=Math.asin(At(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,o)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-At(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(f,c),this._y=Math.atan2(a,o)):(this._x=Math.atan2(-u,m),this._y=0);break;default:qe("Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,i){return FP.makeRotationFromQuaternion(e),this.setFromRotationMatrix(FP,n,i)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return UP.setFromEuler(this),this.setFromQuaternion(UP,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}to.DEFAULT_ORDER="XYZ";class hc{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let FY=0;const BP=new W,lu=new Lr,Vs=new Dt,gg=new W,_h=new W,UY=new W,BY=new Lr,HP=new W(1,0,0),VP=new W(0,1,0),$P=new W(0,0,1),WP={type:"added"},HY={type:"removed"},cu={type:"childadded",child:null},Uw={type:"childremoved",child:null};class rn extends Is{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:FY++}),this.uuid=Qr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=rn.DEFAULT_UP.clone();const e=new W,n=new to,i=new Lr,r=new W(1,1,1);function o(){i.setFromEuler(n,!1)}function s(){n.setFromQuaternion(i,void 0,!1)}n._onChange(o),i._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Dt},normalMatrix:{value:new Ut}}),this.matrix=new Dt,this.matrixWorld=new Dt,this.matrixAutoUpdate=rn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=rn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new hc,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return lu.setFromAxisAngle(e,n),this.quaternion.multiply(lu),this}rotateOnWorldAxis(e,n){return lu.setFromAxisAngle(e,n),this.quaternion.premultiply(lu),this}rotateX(e){return this.rotateOnAxis(HP,e)}rotateY(e){return this.rotateOnAxis(VP,e)}rotateZ(e){return this.rotateOnAxis($P,e)}translateOnAxis(e,n){return BP.copy(e).applyQuaternion(this.quaternion),this.position.add(BP.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(HP,e)}translateY(e){return this.translateOnAxis(VP,e)}translateZ(e){return this.translateOnAxis($P,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Vs.copy(this.matrixWorld).invert())}lookAt(e,n,i){e.isVector3?gg.copy(e):gg.set(e,n,i);const r=this.parent;this.updateWorldMatrix(!0,!1),_h.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Vs.lookAt(_h,gg,this.up):Vs.lookAt(gg,_h,this.up),this.quaternion.setFromRotationMatrix(Vs),r&&(Vs.extractRotation(r.matrixWorld),lu.setFromRotationMatrix(Vs),this.quaternion.premultiply(lu.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(wt("Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(WP),cu.child=e,this.dispatchEvent(cu),cu.child=null):wt("Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(HY),Uw.child=e,this.dispatchEvent(Uw),Uw.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Vs.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Vs.multiply(e.parent.matrixWorld)),e.applyMatrix4(Vs),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(WP),cu.child=e,this.dispatchEvent(cu),cu.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let i=0,r=this.children.length;i<r;i++){const s=this.children[i].getObjectByProperty(e,n);if(s!==void 0)return s}}getObjectsByProperty(e,n,i=[]){this[e]===n&&i.push(this);const r=this.children;for(let o=0,s=r.length;o<s;o++)r[o].getObjectsByProperty(e,n,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_h,e,UY),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_h,BY,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].updateMatrixWorld(e)}updateWorldMatrix(e,n){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),n===!0){const r=this.children;for(let o=0,s=r.length;o<s;o++)r[o].updateWorldMatrix(!1,!0)}}toJSON(e){const n=e===void 0||typeof e=="string",i={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.geometryInfo=this._geometryInfo.map(a=>({...a,boundingBox:a.boundingBox?a.boundingBox.toJSON():void 0,boundingSphere:a.boundingSphere?a.boundingSphere.toJSON():void 0})),r.instanceInfo=this._instanceInfo.map(a=>({...a})),r.availableInstanceIds=this._availableInstanceIds.slice(),r.availableGeometryIds=this._availableGeometryIds.slice(),r.nextIndexStart=this._nextIndexStart,r.nextVertexStart=this._nextVertexStart,r.geometryCount=this._geometryCount,r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.matricesTexture=this._matricesTexture.toJSON(e),r.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(r.boundingBox=this.boundingBox.toJSON()));function o(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=o(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const d=l[c];o(e.shapes,d)}else o(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(o(e.materials,this.material[l]));r.material=a}else r.material=o(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(o(e.animations,l))}}if(n){const a=s(e.geometries),l=s(e.materials),c=s(e.textures),u=s(e.images),d=s(e.shapes),f=s(e.skeletons),m=s(e.animations),g=s(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),u.length>0&&(i.images=u),d.length>0&&(i.shapes=d),f.length>0&&(i.skeletons=f),m.length>0&&(i.animations=m),g.length>0&&(i.nodes=g)}return i.object=r,i;function s(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}rn.DEFAULT_UP=new W(0,1,0);rn.DEFAULT_MATRIX_AUTO_UPDATE=!0;rn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Oo=new W,$s=new W,Bw=new W,Ws=new W,uu=new W,du=new W,GP=new W,Hw=new W,Vw=new W,$w=new W,Ww=new Sn,Gw=new Sn,jw=new Sn;class Ar{constructor(e=new W,n=new W,i=new W){this.a=e,this.b=n,this.c=i}static getNormal(e,n,i,r){r.subVectors(i,n),Oo.subVectors(e,n),r.cross(Oo);const o=r.lengthSq();return o>0?r.multiplyScalar(1/Math.sqrt(o)):r.set(0,0,0)}static getBarycoord(e,n,i,r,o){Oo.subVectors(r,n),$s.subVectors(i,n),Bw.subVectors(e,n);const s=Oo.dot(Oo),a=Oo.dot($s),l=Oo.dot(Bw),c=$s.dot($s),u=$s.dot(Bw),d=s*c-a*a;if(d===0)return o.set(0,0,0),null;const f=1/d,m=(c*l-a*u)*f,g=(s*u-a*l)*f;return o.set(1-m-g,g,m)}static containsPoint(e,n,i,r){return this.getBarycoord(e,n,i,r,Ws)===null?!1:Ws.x>=0&&Ws.y>=0&&Ws.x+Ws.y<=1}static getInterpolation(e,n,i,r,o,s,a,l){return this.getBarycoord(e,n,i,r,Ws)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(o,Ws.x),l.addScaledVector(s,Ws.y),l.addScaledVector(a,Ws.z),l)}static getInterpolatedAttribute(e,n,i,r,o,s){return Ww.setScalar(0),Gw.setScalar(0),jw.setScalar(0),Ww.fromBufferAttribute(e,n),Gw.fromBufferAttribute(e,i),jw.fromBufferAttribute(e,r),s.setScalar(0),s.addScaledVector(Ww,o.x),s.addScaledVector(Gw,o.y),s.addScaledVector(jw,o.z),s}static isFrontFacing(e,n,i,r){return Oo.subVectors(i,n),$s.subVectors(e,n),Oo.cross($s).dot(r)<0}set(e,n,i){return this.a.copy(e),this.b.copy(n),this.c.copy(i),this}setFromPointsAndIndices(e,n,i,r){return this.a.copy(e[n]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,n,i,r){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Oo.subVectors(this.c,this.b),$s.subVectors(this.a,this.b),Oo.cross($s).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ar.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Ar.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,i,r,o){return Ar.getInterpolation(e,this.a,this.b,this.c,n,i,r,o)}containsPoint(e){return Ar.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ar.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const i=this.a,r=this.b,o=this.c;let s,a;uu.subVectors(r,i),du.subVectors(o,i),Hw.subVectors(e,i);const l=uu.dot(Hw),c=du.dot(Hw);if(l<=0&&c<=0)return n.copy(i);Vw.subVectors(e,r);const u=uu.dot(Vw),d=du.dot(Vw);if(u>=0&&d<=u)return n.copy(r);const f=l*d-u*c;if(f<=0&&l>=0&&u<=0)return s=l/(l-u),n.copy(i).addScaledVector(uu,s);$w.subVectors(e,o);const m=uu.dot($w),g=du.dot($w);if(g>=0&&m<=g)return n.copy(o);const y=m*c-l*g;if(y<=0&&c>=0&&g<=0)return a=c/(c-g),n.copy(i).addScaledVector(du,a);const x=u*g-m*d;if(x<=0&&d-u>=0&&m-g>=0)return GP.subVectors(o,r),a=(d-u)/(d-u+(m-g)),n.copy(r).addScaledVector(GP,a);const v=1/(x+y+f);return s=y*v,a=f*v,n.copy(i).addScaledVector(uu,s).addScaledVector(du,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const HU={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ka={h:0,s:0,l:0},vg={h:0,s:0,l:0};function qw(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}class et{constructor(e,n,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,i)}set(e,n,i){if(n===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,n,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=Cr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Jt.colorSpaceToWorking(this,n),this}setRGB(e,n,i,r=Jt.workingColorSpace){return this.r=e,this.g=n,this.b=i,Jt.colorSpaceToWorking(this,r),this}setHSL(e,n,i,r=Jt.workingColorSpace){if(e=CC(e,1),n=At(n,0,1),i=At(i,0,1),n===0)this.r=this.g=this.b=i;else{const o=i<=.5?i*(1+n):i+n-i*n,s=2*i-o;this.r=qw(s,o,e+1/3),this.g=qw(s,o,e),this.b=qw(s,o,e-1/3)}return Jt.colorSpaceToWorking(this,r),this}setStyle(e,n=Cr){function i(o){o!==void 0&&parseFloat(o)<1&&qe("Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let o;const s=r[1],a=r[2];switch(s){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,n);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,n);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,n);break;default:qe("Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=r[1],s=o.length;if(s===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,n);if(s===6)return this.setHex(parseInt(o,16),n);qe("Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=Cr){const i=HU[e.toLowerCase()];return i!==void 0?this.setHex(i,n):qe("Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=na(e.r),this.g=na(e.g),this.b=na(e.b),this}copyLinearToSRGB(e){return this.r=id(e.r),this.g=id(e.g),this.b=id(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Cr){return Jt.workingToColorSpace(ji.copy(this),e),Math.round(At(ji.r*255,0,255))*65536+Math.round(At(ji.g*255,0,255))*256+Math.round(At(ji.b*255,0,255))}getHexString(e=Cr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=Jt.workingColorSpace){Jt.workingToColorSpace(ji.copy(this),n);const i=ji.r,r=ji.g,o=ji.b,s=Math.max(i,r,o),a=Math.min(i,r,o);let l,c;const u=(a+s)/2;if(a===s)l=0,c=0;else{const d=s-a;switch(c=u<=.5?d/(s+a):d/(2-s-a),s){case i:l=(r-o)/d+(r<o?6:0);break;case r:l=(o-i)/d+2;break;case o:l=(i-r)/d+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,n=Jt.workingColorSpace){return Jt.workingToColorSpace(ji.copy(this),n),e.r=ji.r,e.g=ji.g,e.b=ji.b,e}getStyle(e=Cr){Jt.workingToColorSpace(ji.copy(this),e);const n=ji.r,i=ji.g,r=ji.b;return e!==Cr?`color(${e} ${n.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,n,i){return this.getHSL(ka),this.setHSL(ka.h+e,ka.s+n,ka.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,i){return this.r=e.r+(n.r-e.r)*i,this.g=e.g+(n.g-e.g)*i,this.b=e.b+(n.b-e.b)*i,this}lerpHSL(e,n){this.getHSL(ka),e.getHSL(vg);const i=af(ka.h,vg.h,n),r=af(ka.s,vg.s,n),o=af(ka.l,vg.l,n);return this.setHSL(i,r,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,i=this.g,r=this.b,o=e.elements;return this.r=o[0]*n+o[3]*i+o[6]*r,this.g=o[1]*n+o[4]*i+o[7]*r,this.b=o[2]*n+o[5]*i+o[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ji=new et;et.NAMES=HU;let VY=0;class tr extends Is{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:VY++}),this.uuid=Qr(),this.name="",this.type="Material",this.blending=uc,this.side=ca,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=m0,this.blendDst=g0,this.blendEquation=Va,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new et(0,0,0),this.blendAlpha=0,this.depthFunc=Sc,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=iS,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Yl,this.stencilZFail=Yl,this.stencilZPass=Yl,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const i=e[n];if(i===void 0){qe(`Material: parameter '${n}' has value of undefined.`);continue}const r=this[n];if(r===void 0){qe(`Material: '${n}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[n]=i}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const i={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(i.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(i.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==uc&&(i.blending=this.blending),this.side!==ca&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==m0&&(i.blendSrc=this.blendSrc),this.blendDst!==g0&&(i.blendDst=this.blendDst),this.blendEquation!==Va&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Sc&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==iS&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Yl&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Yl&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Yl&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.allowOverride===!1&&(i.allowOverride=!1),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(o){const s=[];for(const a in o){const l=o[a];delete l.metadata,s.push(l)}return s}if(n){const o=r(e.textures),s=r(e.images);o.length>0&&(i.textures=o),s.length>0&&(i.images=s)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let i=null;if(n!==null){const r=n.length;i=new Array(r);for(let o=0;o!==r;++o)i[o]=n[o].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.allowOverride=e.allowOverride,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class gl extends tr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new et(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new to,this.combine=xp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Ks=$Y();function $Y(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):c<-14?(i[l]=1024>>-c-14,i[l|256]=1024>>-c-14|32768,r[l]=-c-1,r[l|256]=-c-1):c<=15?(i[l]=c+15<<10,i[l|256]=c+15<<10|32768,r[l]=13,r[l|256]=13):c<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const o=new Uint32Array(2048),s=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,o[l]=c|u}for(let l=1024;l<2048;++l)o[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)s[l]=l<<23;s[31]=1199570944,s[32]=2147483648;for(let l=33;l<63;++l)s[l]=2147483648+(l-32<<23);s[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:n,baseTable:i,shiftTable:r,mantissaTable:o,exponentTable:s,offsetTable:a}}function br(t){Math.abs(t)>65504&&qe("DataUtils.toHalfFloat(): Value out of range."),t=At(t,-65504,65504),Ks.floatView[0]=t;const e=Ks.uint32View[0],n=e>>23&511;return Ks.baseTable[n]+((e&8388607)>>Ks.shiftTable[n])}function Vh(t){const e=t>>10;return Ks.uint32View[0]=Ks.mantissaTable[Ks.offsetTable[e]+(t&1023)]+Ks.exponentTable[e],Ks.floatView[0]}class WY{static toHalfFloat(e){return br(e)}static fromHalfFloat(e){return Vh(e)}}const ci=new W,yg=new Ce;let GY=0;class wn{constructor(e,n,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:GY++}),this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=i,this.usage=$f,this.updateRanges=[],this.gpuType=dr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,i){e*=this.itemSize,i*=n.itemSize;for(let r=0,o=this.itemSize;r<o;r++)this.array[e+r]=n.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,i=this.count;n<i;n++)yg.fromBufferAttribute(this,n),yg.applyMatrix3(e),this.setXY(n,yg.x,yg.y);else if(this.itemSize===3)for(let n=0,i=this.count;n<i;n++)ci.fromBufferAttribute(this,n),ci.applyMatrix3(e),this.setXYZ(n,ci.x,ci.y,ci.z);return this}applyMatrix4(e){for(let n=0,i=this.count;n<i;n++)ci.fromBufferAttribute(this,n),ci.applyMatrix4(e),this.setXYZ(n,ci.x,ci.y,ci.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)ci.fromBufferAttribute(this,n),ci.applyNormalMatrix(e),this.setXYZ(n,ci.x,ci.y,ci.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)ci.fromBufferAttribute(this,n),ci.transformDirection(e),this.setXYZ(n,ci.x,ci.y,ci.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let i=this.array[e*this.itemSize+n];return this.normalized&&(i=ur(i,this.array)),i}setComponent(e,n,i){return this.normalized&&(i=Bt(i,this.array)),this.array[e*this.itemSize+n]=i,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=ur(n,this.array)),n}setX(e,n){return this.normalized&&(n=Bt(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=ur(n,this.array)),n}setY(e,n){return this.normalized&&(n=Bt(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=ur(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Bt(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=ur(n,this.array)),n}setW(e,n){return this.normalized&&(n=Bt(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,i){return e*=this.itemSize,this.normalized&&(n=Bt(n,this.array),i=Bt(i,this.array)),this.array[e+0]=n,this.array[e+1]=i,this}setXYZ(e,n,i,r){return e*=this.itemSize,this.normalized&&(n=Bt(n,this.array),i=Bt(i,this.array),r=Bt(r,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,n,i,r,o){return e*=this.itemSize,this.normalized&&(n=Bt(n,this.array),i=Bt(i,this.array),r=Bt(r,this.array),o=Bt(o,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==$f&&(e.usage=this.usage),e}}class jY extends wn{constructor(e,n,i){super(new Int8Array(e),n,i)}}class qY extends wn{constructor(e,n,i){super(new Uint8Array(e),n,i)}}class XY extends wn{constructor(e,n,i){super(new Uint8ClampedArray(e),n,i)}}class YY extends wn{constructor(e,n,i){super(new Int16Array(e),n,i)}}class TC extends wn{constructor(e,n,i){super(new Uint16Array(e),n,i)}}class ZY extends wn{constructor(e,n,i){super(new Int32Array(e),n,i)}}class AC extends wn{constructor(e,n,i){super(new Uint32Array(e),n,i)}}class KY extends wn{constructor(e,n,i){super(new Uint16Array(e),n,i),this.isFloat16BufferAttribute=!0}getX(e){let n=Vh(this.array[e*this.itemSize]);return this.normalized&&(n=ur(n,this.array)),n}setX(e,n){return this.normalized&&(n=Bt(n,this.array)),this.array[e*this.itemSize]=br(n),this}getY(e){let n=Vh(this.array[e*this.itemSize+1]);return this.normalized&&(n=ur(n,this.array)),n}setY(e,n){return this.normalized&&(n=Bt(n,this.array)),this.array[e*this.itemSize+1]=br(n),this}getZ(e){let n=Vh(this.array[e*this.itemSize+2]);return this.normalized&&(n=ur(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Bt(n,this.array)),this.array[e*this.itemSize+2]=br(n),this}getW(e){let n=Vh(this.array[e*this.itemSize+3]);return this.normalized&&(n=ur(n,this.array)),n}setW(e,n){return this.normalized&&(n=Bt(n,this.array)),this.array[e*this.itemSize+3]=br(n),this}setXY(e,n,i){return e*=this.itemSize,this.normalized&&(n=Bt(n,this.array),i=Bt(i,this.array)),this.array[e+0]=br(n),this.array[e+1]=br(i),this}setXYZ(e,n,i,r){return e*=this.itemSize,this.normalized&&(n=Bt(n,this.array),i=Bt(i,this.array),r=Bt(r,this.array)),this.array[e+0]=br(n),this.array[e+1]=br(i),this.array[e+2]=br(r),this}setXYZW(e,n,i,r,o){return e*=this.itemSize,this.normalized&&(n=Bt(n,this.array),i=Bt(i,this.array),r=Bt(r,this.array),o=Bt(o,this.array)),this.array[e+0]=br(n),this.array[e+1]=br(i),this.array[e+2]=br(r),this.array[e+3]=br(o),this}}class at extends wn{constructor(e,n,i){super(new Float32Array(e),n,i)}}let QY=0;const go=new Dt,Xw=new rn,hu=new W,Wr=new Ji,bh=new Ji,Ti=new W;class zt extends Is{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:QY++}),this.uuid=Qr(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.indirectOffset=0,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(OU(e)?AC:TC)(e,1):this.index=e,this}setIndirect(e,n=0){return this.indirect=e,this.indirectOffset=n,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,i=0){this.groups.push({start:e,count:n,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const o=new Ut().getNormalMatrix(e);i.applyNormalMatrix(o),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return go.makeRotationFromQuaternion(e),this.applyMatrix4(go),this}rotateX(e){return go.makeRotationX(e),this.applyMatrix4(go),this}rotateY(e){return go.makeRotationY(e),this.applyMatrix4(go),this}rotateZ(e){return go.makeRotationZ(e),this.applyMatrix4(go),this}translate(e,n,i){return go.makeTranslation(e,n,i),this.applyMatrix4(go),this}scale(e,n,i){return go.makeScale(e,n,i),this.applyMatrix4(go),this}lookAt(e){return Xw.lookAt(e),Xw.updateMatrix(),this.applyMatrix4(Xw.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(hu).negate(),this.translate(hu.x,hu.y,hu.z),this}setFromPoints(e){const n=this.getAttribute("position");if(n===void 0){const i=[];for(let r=0,o=e.length;r<o;r++){const s=e[r];i.push(s.x,s.y,s.z||0)}this.setAttribute("position",new at(i,3))}else{const i=Math.min(e.length,n.count);for(let r=0;r<i;r++){const o=e[r];n.setXYZ(r,o.x,o.y,o.z||0)}e.length>n.count&&qe("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),n.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ji);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){wt("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new W(-1/0,-1/0,-1/0),new W(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let i=0,r=n.length;i<r;i++){const o=n[i];Wr.setFromBufferAttribute(o),this.morphTargetsRelative?(Ti.addVectors(this.boundingBox.min,Wr.min),this.boundingBox.expandByPoint(Ti),Ti.addVectors(this.boundingBox.max,Wr.max),this.boundingBox.expandByPoint(Ti)):(this.boundingBox.expandByPoint(Wr.min),this.boundingBox.expandByPoint(Wr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&wt('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new zi);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){wt("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new W,1/0);return}if(e){const i=this.boundingSphere.center;if(Wr.setFromBufferAttribute(e),n)for(let o=0,s=n.length;o<s;o++){const a=n[o];bh.setFromBufferAttribute(a),this.morphTargetsRelative?(Ti.addVectors(Wr.min,bh.min),Wr.expandByPoint(Ti),Ti.addVectors(Wr.max,bh.max),Wr.expandByPoint(Ti)):(Wr.expandByPoint(bh.min),Wr.expandByPoint(bh.max))}Wr.getCenter(i);let r=0;for(let o=0,s=e.count;o<s;o++)Ti.fromBufferAttribute(e,o),r=Math.max(r,i.distanceToSquared(Ti));if(n)for(let o=0,s=n.length;o<s;o++){const a=n[o],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)Ti.fromBufferAttribute(a,c),l&&(hu.fromBufferAttribute(e,c),Ti.add(hu)),r=Math.max(r,i.distanceToSquared(Ti))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&wt('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){wt("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=n.position,r=n.normal,o=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new wn(new Float32Array(4*i.count),4));const s=this.getAttribute("tangent"),a=[],l=[];for(let D=0;D<i.count;D++)a[D]=new W,l[D]=new W;const c=new W,u=new W,d=new W,f=new Ce,m=new Ce,g=new Ce,y=new W,x=new W;function v(D,A,R){c.fromBufferAttribute(i,D),u.fromBufferAttribute(i,A),d.fromBufferAttribute(i,R),f.fromBufferAttribute(o,D),m.fromBufferAttribute(o,A),g.fromBufferAttribute(o,R),u.sub(c),d.sub(c),m.sub(f),g.sub(f);const N=1/(m.x*g.y-g.x*m.y);isFinite(N)&&(y.copy(u).multiplyScalar(g.y).addScaledVector(d,-m.y).multiplyScalar(N),x.copy(d).multiplyScalar(m.x).addScaledVector(u,-g.x).multiplyScalar(N),a[D].add(y),a[A].add(y),a[R].add(y),l[D].add(x),l[A].add(x),l[R].add(x))}let w=this.groups;w.length===0&&(w=[{start:0,count:e.count}]);for(let D=0,A=w.length;D<A;++D){const R=w[D],N=R.start,O=R.count;for(let H=N,q=N+O;H<q;H+=3)v(e.getX(H+0),e.getX(H+1),e.getX(H+2))}const _=new W,S=new W,E=new W,T=new W;function P(D){E.fromBufferAttribute(r,D),T.copy(E);const A=a[D];_.copy(A),_.sub(E.multiplyScalar(E.dot(A))).normalize(),S.crossVectors(T,A);const N=S.dot(l[D])<0?-1:1;s.setXYZW(D,_.x,_.y,_.z,N)}for(let D=0,A=w.length;D<A;++D){const R=w[D],N=R.start,O=R.count;for(let H=N,q=N+O;H<q;H+=3)P(e.getX(H+0)),P(e.getX(H+1)),P(e.getX(H+2))}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new wn(new Float32Array(n.count*3),3),this.setAttribute("normal",i);else for(let f=0,m=i.count;f<m;f++)i.setXYZ(f,0,0,0);const r=new W,o=new W,s=new W,a=new W,l=new W,c=new W,u=new W,d=new W;if(e)for(let f=0,m=e.count;f<m;f+=3){const g=e.getX(f+0),y=e.getX(f+1),x=e.getX(f+2);r.fromBufferAttribute(n,g),o.fromBufferAttribute(n,y),s.fromBufferAttribute(n,x),u.subVectors(s,o),d.subVectors(r,o),u.cross(d),a.fromBufferAttribute(i,g),l.fromBufferAttribute(i,y),c.fromBufferAttribute(i,x),a.add(u),l.add(u),c.add(u),i.setXYZ(g,a.x,a.y,a.z),i.setXYZ(y,l.x,l.y,l.z),i.setXYZ(x,c.x,c.y,c.z)}else for(let f=0,m=n.count;f<m;f+=3)r.fromBufferAttribute(n,f+0),o.fromBufferAttribute(n,f+1),s.fromBufferAttribute(n,f+2),u.subVectors(s,o),d.subVectors(r,o),u.cross(d),i.setXYZ(f+0,u.x,u.y,u.z),i.setXYZ(f+1,u.x,u.y,u.z),i.setXYZ(f+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,i=e.count;n<i;n++)Ti.fromBufferAttribute(e,n),Ti.normalize(),e.setXYZ(n,Ti.x,Ti.y,Ti.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,d=a.normalized,f=new c.constructor(l.length*u);let m=0,g=0;for(let y=0,x=l.length;y<x;y++){a.isInterleavedBufferAttribute?m=l[y]*a.data.stride+a.offset:m=l[y]*u;for(let v=0;v<u;v++)f[g++]=c[m++]}return new wn(f,u,d)}if(this.index===null)return qe("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new zt,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],c=e(l,i);n.setAttribute(a,c)}const o=this.morphAttributes;for(const a in o){const l=[],c=o[a];for(let u=0,d=c.length;u<d;u++){const f=c[u],m=e(f,i);l.push(m)}n.morphAttributes[a]=l}n.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let a=0,l=s.length;a<l;a++){const c=s[a];n.addGroup(c.start,c.count,c.materialIndex)}return n}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let o=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,f=c.length;d<f;d++){const m=c[d];u.push(m.toJSON(e.data))}u.length>0&&(r[l]=u,o=!0)}o&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere=a.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone());const r=e.attributes;for(const c in r){const u=r[c];this.setAttribute(c,u.clone(n))}const o=e.morphAttributes;for(const c in o){const u=[],d=o[c];for(let f=0,m=d.length;f<m;f++)u.push(d[f].clone(n));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let c=0,u=s.length;c<u;c++){const d=s[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const jP=new Dt,Nl=new Nd,xg=new zi,qP=new W,wg=new W,_g=new W,bg=new W,Yw=new W,Sg=new W,XP=new W,Mg=new W;class fi extends rn{constructor(e=new zt,n=new gl){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){const a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}getVertexPosition(e,n){const i=this.geometry,r=i.attributes.position,o=i.morphAttributes.position,s=i.morphTargetsRelative;n.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(o&&a){Sg.set(0,0,0);for(let l=0,c=o.length;l<c;l++){const u=a[l],d=o[l];u!==0&&(Yw.fromBufferAttribute(d,e),s?Sg.addScaledVector(Yw,u):Sg.addScaledVector(Yw.sub(n),u))}n.add(Sg)}return n}raycast(e,n){const i=this.geometry,r=this.material,o=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),xg.copy(i.boundingSphere),xg.applyMatrix4(o),Nl.copy(e.ray).recast(e.near),!(xg.containsPoint(Nl.origin)===!1&&(Nl.intersectSphere(xg,qP)===null||Nl.origin.distanceToSquared(qP)>(e.far-e.near)**2))&&(jP.copy(o).invert(),Nl.copy(e.ray).applyMatrix4(jP),!(i.boundingBox!==null&&Nl.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,n,Nl)))}_computeIntersections(e,n,i){let r;const o=this.geometry,s=this.material,a=o.index,l=o.attributes.position,c=o.attributes.uv,u=o.attributes.uv1,d=o.attributes.normal,f=o.groups,m=o.drawRange;if(a!==null)if(Array.isArray(s))for(let g=0,y=f.length;g<y;g++){const x=f[g],v=s[x.materialIndex],w=Math.max(x.start,m.start),_=Math.min(a.count,Math.min(x.start+x.count,m.start+m.count));for(let S=w,E=_;S<E;S+=3){const T=a.getX(S),P=a.getX(S+1),D=a.getX(S+2);r=Cg(this,v,e,i,c,u,d,T,P,D),r&&(r.faceIndex=Math.floor(S/3),r.face.materialIndex=x.materialIndex,n.push(r))}}else{const g=Math.max(0,m.start),y=Math.min(a.count,m.start+m.count);for(let x=g,v=y;x<v;x+=3){const w=a.getX(x),_=a.getX(x+1),S=a.getX(x+2);r=Cg(this,s,e,i,c,u,d,w,_,S),r&&(r.faceIndex=Math.floor(x/3),n.push(r))}}else if(l!==void 0)if(Array.isArray(s))for(let g=0,y=f.length;g<y;g++){const x=f[g],v=s[x.materialIndex],w=Math.max(x.start,m.start),_=Math.min(l.count,Math.min(x.start+x.count,m.start+m.count));for(let S=w,E=_;S<E;S+=3){const T=S,P=S+1,D=S+2;r=Cg(this,v,e,i,c,u,d,T,P,D),r&&(r.faceIndex=Math.floor(S/3),r.face.materialIndex=x.materialIndex,n.push(r))}}else{const g=Math.max(0,m.start),y=Math.min(l.count,m.start+m.count);for(let x=g,v=y;x<v;x+=3){const w=x,_=x+1,S=x+2;r=Cg(this,s,e,i,c,u,d,w,_,S),r&&(r.faceIndex=Math.floor(x/3),n.push(r))}}}}function JY(t,e,n,i,r,o,s,a){let l;if(e.side===fr?l=i.intersectTriangle(s,o,r,!0,a):l=i.intersectTriangle(r,o,s,e.side===ca,a),l===null)return null;Mg.copy(a),Mg.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(Mg);return c<n.near||c>n.far?null:{distance:c,point:Mg.clone(),object:t}}function Cg(t,e,n,i,r,o,s,a,l,c){t.getVertexPosition(a,wg),t.getVertexPosition(l,_g),t.getVertexPosition(c,bg);const u=JY(t,e,n,i,wg,_g,bg,XP);if(u){const d=new W;Ar.getBarycoord(XP,wg,_g,bg,d),r&&(u.uv=Ar.getInterpolatedAttribute(r,a,l,c,d,new Ce)),o&&(u.uv1=Ar.getInterpolatedAttribute(o,a,l,c,d,new Ce)),s&&(u.normal=Ar.getInterpolatedAttribute(s,a,l,c,d,new W),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const f={a,b:l,c,normal:new W,materialIndex:0};Ar.getNormal(wg,_g,bg,f.normal),u.face=f,u.barycoord=d}return u}class Nc extends zt{constructor(e=1,n=1,i=1,r=1,o=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:i,widthSegments:r,heightSegments:o,depthSegments:s};const a=this;r=Math.floor(r),o=Math.floor(o),s=Math.floor(s);const l=[],c=[],u=[],d=[];let f=0,m=0;g("z","y","x",-1,-1,i,n,e,s,o,0),g("z","y","x",1,-1,i,n,-e,s,o,1),g("x","z","y",1,1,e,i,n,r,s,2),g("x","z","y",1,-1,e,i,-n,r,s,3),g("x","y","z",1,-1,e,n,i,r,o,4),g("x","y","z",-1,-1,e,n,-i,r,o,5),this.setIndex(l),this.setAttribute("position",new at(c,3)),this.setAttribute("normal",new at(u,3)),this.setAttribute("uv",new at(d,2));function g(y,x,v,w,_,S,E,T,P,D,A){const R=S/P,N=E/D,O=S/2,H=E/2,q=T/2,Z=P+1,G=D+1;let Y=0,z=0;const $=new W;for(let X=0;X<G;X++){const K=X*N-H;for(let oe=0;oe<Z;oe++){const pe=oe*R-O;$[y]=pe*w,$[x]=K*_,$[v]=q,c.push($.x,$.y,$.z),$[y]=0,$[x]=0,$[v]=T>0?1:-1,u.push($.x,$.y,$.z),d.push(oe/P),d.push(1-X/D),Y+=1}}for(let X=0;X<D;X++)for(let K=0;K<P;K++){const oe=f+K+Z*X,pe=f+K+Z*(X+1),be=f+(K+1)+Z*(X+1),it=f+(K+1)+Z*X;l.push(oe,pe,it),l.push(pe,be,it),z+=6}a.addGroup(m,z,A),m+=z,f+=Y}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Nc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function wd(t){const e={};for(const n in t){e[n]={};for(const i in t[n]){const r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(qe("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][i]=null):e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}}return e}function ar(t){const e={};for(let n=0;n<t.length;n++){const i=wd(t[n]);for(const r in i)e[r]=i[r]}return e}function eZ(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function VU(t){const e=t.getRenderTarget();return e===null?t.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Jt.workingColorSpace}const $U={clone:wd,merge:ar};var tZ=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,nZ=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class no extends tr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=tZ,this.fragmentShader=nZ,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=wd(e.uniforms),this.uniformsGroups=eZ(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this.defaultAttributeValues=Object.assign({},e.defaultAttributeValues),this.index0AttributeName=e.index0AttributeName,this.uniformsNeedUpdate=e.uniformsNeedUpdate,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const r in this.uniforms){const s=this.uniforms[r].value;s&&s.isTexture?n.uniforms[r]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?n.uniforms[r]={type:"c",value:s.getHex()}:s&&s.isVector2?n.uniforms[r]={type:"v2",value:s.toArray()}:s&&s.isVector3?n.uniforms[r]={type:"v3",value:s.toArray()}:s&&s.isVector4?n.uniforms[r]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?n.uniforms[r]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?n.uniforms[r]={type:"m4",value:s.toArray()}:n.uniforms[r]={value:s}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(n.extensions=i),n}}class _p extends rn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Dt,this.projectionMatrix=new Dt,this.projectionMatrixInverse=new Dt,this.coordinateSystem=Zr,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Na=new W,YP=new Ce,ZP=new Ce;class Pi extends _p{constructor(e=50,n=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=xd*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(dc*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return xd*2*Math.atan(Math.tan(dc*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,i){Na.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Na.x,Na.y).multiplyScalar(-e/Na.z),Na.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Na.x,Na.y).multiplyScalar(-e/Na.z)}getViewSize(e,n){return this.getViewBounds(e,YP,ZP),n.subVectors(ZP,YP)}setViewOffset(e,n,i,r,o,s){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(dc*.5*this.fov)/this.zoom,i=2*n,r=this.aspect*i,o=-.5*r;const s=this.view;if(this.view!==null&&this.view.enabled){const l=s.fullWidth,c=s.fullHeight;o+=s.offsetX*r/l,n-=s.offsetY*i/c,r*=s.width/l,i*=s.height/c}const a=this.filmOffset;a!==0&&(o+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+r,n,n-i,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const fu=-90,pu=1;class WU extends rn{constructor(e,n,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Pi(fu,pu,e,n);r.layers=this.layers,this.add(r);const o=new Pi(fu,pu,e,n);o.layers=this.layers,this.add(o);const s=new Pi(fu,pu,e,n);s.layers=this.layers,this.add(s);const a=new Pi(fu,pu,e,n);a.layers=this.layers,this.add(a);const l=new Pi(fu,pu,e,n);l.layers=this.layers,this.add(l);const c=new Pi(fu,pu,e,n);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[i,r,o,s,a,l]=n;for(const c of n)this.remove(c);if(e===Zr)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===vd)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of n)this.add(c),c.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[o,s,a,l,c,u]=this.children,d=e.getRenderTarget(),f=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),g=e.xr.enabled;e.xr.enabled=!1;const y=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(n,o),e.setRenderTarget(i,1,r),e.render(n,s),e.setRenderTarget(i,2,r),e.render(n,a),e.setRenderTarget(i,3,r),e.render(n,l),e.setRenderTarget(i,4,r),e.render(n,c),i.texture.generateMipmaps=y,e.setRenderTarget(i,5,r),e.render(n,u),e.setRenderTarget(d,f,m),e.xr.enabled=g,i.texture.needsPMREMUpdate=!0}}class bp extends Kn{constructor(e=[],n=Cs,i,r,o,s,a,l,c,u){super(e,n,i,r,o,s,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class IC extends Jr{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new bp(r),this._setTextureOptions(n),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Nc(5,5,5),o=new no({name:"CubemapFromEquirect",uniforms:wd(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:fr,blending:Ss});o.uniforms.tEquirect.value=n;const s=new fi(r,o),a=n.minFilter;return n.minFilter===ms&&(n.minFilter=Nn),new WU(1,10,this).update(e,s),n.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(e,n=!0,i=!0,r=!0){const o=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(n,i,r);e.setRenderTarget(o)}}class ju extends rn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const iZ={type:"move"};class wv{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new ju,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new ju,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new W,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new W),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new ju,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new W,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new W),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const i of e.hand.values())this._getHandJoint(n,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,i){let r=null,o=null,s=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(c&&e.hand){s=!0;for(const y of e.hand.values()){const x=n.getJointPose(y,i),v=this._getHandJoint(c,y);x!==null&&(v.matrix.fromArray(x.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.matrixWorldNeedsUpdate=!0,v.jointRadius=x.radius),v.visible=x!==null}const u=c.joints["index-finger-tip"],d=c.joints["thumb-tip"],f=u.position.distanceTo(d.position),m=.02,g=.005;c.inputState.pinching&&f>m+g?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&f<=m-g&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(o=n.getPose(e.gripSpace,i),o!==null&&(l.matrix.fromArray(o.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,o.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(o.linearVelocity)):l.hasLinearVelocity=!1,o.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(o.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=n.getPose(e.targetRaySpace,i),r===null&&o!==null&&(r=o),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(iZ)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=o!==null),c!==null&&(c.visible=s!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const i=new ju;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[n.jointName]=i,e.add(i)}return e.joints[n.jointName]}}class ax{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new et(e),this.density=n}clone(){return new ax(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class lx{constructor(e,n=1,i=1e3){this.isFog=!0,this.name="",this.color=new et(e),this.near=n,this.far=i}clone(){return new lx(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class PC extends rn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new to,this.environmentIntensity=1,this.environmentRotation=new to,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(n.object.environmentIntensity=this.environmentIntensity),n.object.environmentRotation=this.environmentRotation.toArray(),n}}class cx{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=$f,this.updateRanges=[],this.version=0,this.uuid=Qr()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,i){e*=this.stride,i*=n.stride;for(let r=0,o=this.stride;r<o;r++)this.array[e+r]=n.array[i+r];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Qr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(n,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Qr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const sr=new W;class Ec{constructor(e,n,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,i=this.data.count;n<i;n++)sr.fromBufferAttribute(this,n),sr.applyMatrix4(e),this.setXYZ(n,sr.x,sr.y,sr.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)sr.fromBufferAttribute(this,n),sr.applyNormalMatrix(e),this.setXYZ(n,sr.x,sr.y,sr.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)sr.fromBufferAttribute(this,n),sr.transformDirection(e),this.setXYZ(n,sr.x,sr.y,sr.z);return this}getComponent(e,n){let i=this.array[e*this.data.stride+this.offset+n];return this.normalized&&(i=ur(i,this.array)),i}setComponent(e,n,i){return this.normalized&&(i=Bt(i,this.array)),this.data.array[e*this.data.stride+this.offset+n]=i,this}setX(e,n){return this.normalized&&(n=Bt(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=Bt(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=Bt(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=Bt(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=ur(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=ur(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=ur(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=ur(n,this.array)),n}setXY(e,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=Bt(n,this.array),i=Bt(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this}setXYZ(e,n,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=Bt(n,this.array),i=Bt(i,this.array),r=Bt(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,n,i,r,o){return e=e*this.data.stride+this.offset,this.normalized&&(n=Bt(n,this.array),i=Bt(i,this.array),r=Bt(r,this.array),o=Bt(o,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=o,this}clone(e){if(e===void 0){Gf("InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)n.push(this.data.array[r+o])}return new wn(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Ec(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){Gf("InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)n.push(this.data.array[r+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class RC extends tr{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new et(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let mu;const Sh=new W,gu=new W,vu=new W,yu=new Ce,Mh=new Ce,GU=new Dt,Eg=new W,Ch=new W,Tg=new W,KP=new Ce,Zw=new Ce,QP=new Ce;class jU extends rn{constructor(e=new RC){if(super(),this.isSprite=!0,this.type="Sprite",mu===void 0){mu=new zt;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new cx(n,5);mu.setIndex([0,1,2,0,2,3]),mu.setAttribute("position",new Ec(i,3,0,!1)),mu.setAttribute("uv",new Ec(i,2,3,!1))}this.geometry=mu,this.material=e,this.center=new Ce(.5,.5),this.count=1}raycast(e,n){e.camera===null&&wt('Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),gu.setFromMatrixScale(this.matrixWorld),GU.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),vu.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&gu.multiplyScalar(-vu.z);const i=this.material.rotation;let r,o;i!==0&&(o=Math.cos(i),r=Math.sin(i));const s=this.center;Ag(Eg.set(-.5,-.5,0),vu,s,gu,r,o),Ag(Ch.set(.5,-.5,0),vu,s,gu,r,o),Ag(Tg.set(.5,.5,0),vu,s,gu,r,o),KP.set(0,0),Zw.set(1,0),QP.set(1,1);let a=e.ray.intersectTriangle(Eg,Ch,Tg,!1,Sh);if(a===null&&(Ag(Ch.set(-.5,.5,0),vu,s,gu,r,o),Zw.set(0,1),a=e.ray.intersectTriangle(Eg,Tg,Ch,!1,Sh),a===null))return;const l=e.ray.origin.distanceTo(Sh);l<e.near||l>e.far||n.push({distance:l,point:Sh.clone(),uv:Ar.getInterpolation(Sh,Eg,Ch,Tg,KP,Zw,QP,new Ce),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Ag(t,e,n,i,r,o){yu.subVectors(t,n).addScalar(.5).multiply(i),r!==void 0?(Mh.x=o*yu.x-r*yu.y,Mh.y=r*yu.x+o*yu.y):Mh.copy(yu),t.copy(e),t.x+=Mh.x,t.y+=Mh.y,t.applyMatrix4(GU)}const Ig=new W,JP=new W;class qU extends rn{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let i=0,r=n.length;i<r;i++){const o=n[i];this.addLevel(o.object.clone(),o.distance,o.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0,i=0){n=Math.abs(n);const r=this.levels;let o;for(o=0;o<r.length&&!(n<r[o].distance);o++);return r.splice(o,0,{distance:n,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const n=this.levels;for(let i=0;i<n.length;i++)if(n[i].distance===e){const r=n.splice(i,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let i,r;for(i=1,r=n.length;i<r;i++){let o=n[i].distance;if(n[i].object.visible&&(o-=o*n[i].hysteresis),e<o)break}return n[i-1].object}return null}raycast(e,n){if(this.levels.length>0){Ig.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(Ig);this.getObjectForDistance(r).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){Ig.setFromMatrixPosition(e.matrixWorld),JP.setFromMatrixPosition(this.matrixWorld);const i=Ig.distanceTo(JP)/e.zoom;n[0].object.visible=!0;let r,o;for(r=1,o=n.length;r<o;r++){let s=n[r].distance;if(n[r].object.visible&&(s-=s*n[r].hysteresis),i>=s)n[r-1].object.visible=!1,n[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<o;r++)n[r].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const i=this.levels;for(let r=0,o=i.length;r<o;r++){const s=i[r];n.object.levels.push({object:s.object.uuid,distance:s.distance,hysteresis:s.hysteresis})}return n}}const eR=new W,tR=new Sn,nR=new Sn,rZ=new W,iR=new Dt,Pg=new W,Kw=new zi,rR=new Dt,Qw=new Nd;class XU extends fi{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=nS,this.bindMatrix=new Dt,this.bindMatrixInverse=new Dt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Ji),this.boundingBox.makeEmpty();const n=e.getAttribute("position");for(let i=0;i<n.count;i++)this.getVertexPosition(i,Pg),this.boundingBox.expandByPoint(Pg)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new zi),this.boundingSphere.makeEmpty();const n=e.getAttribute("position");for(let i=0;i<n.count;i++)this.getVertexPosition(i,Pg),this.boundingSphere.expandByPoint(Pg)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,n){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Kw.copy(this.boundingSphere),Kw.applyMatrix4(r),e.ray.intersectsSphere(Kw)!==!1&&(rR.copy(r).invert(),Qw.copy(e.ray).applyMatrix4(rR),!(this.boundingBox!==null&&Qw.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,n,Qw)))}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Sn,n=this.geometry.attributes.skinWeight;for(let i=0,r=n.count;i<r;i++){e.fromBufferAttribute(n,i);const o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),n.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===nS?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===CU?this.bindMatrixInverse.copy(this.bindMatrix).invert():qe("SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){const i=this.skeleton,r=this.geometry;tR.fromBufferAttribute(r.attributes.skinIndex,e),nR.fromBufferAttribute(r.attributes.skinWeight,e),eR.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let o=0;o<4;o++){const s=nR.getComponent(o);if(s!==0){const a=tR.getComponent(o);iR.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),n.addScaledVector(rZ.copy(eR).applyMatrix4(iR),s)}}return n.applyMatrix4(this.bindMatrixInverse)}}class DC extends rn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Yo extends Kn{constructor(e=null,n=1,i=1,r,o,s,a,l,c=ri,u=ri,d,f){super(null,s,a,l,c,u,r,o,d,f),this.isDataTexture=!0,this.image={data:e,width:n,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const oR=new Dt,oZ=new Dt;class ux{constructor(e=[],n=[]){this.uuid=Qr(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.previousBoneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){qe("Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Dt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const i=new Dt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,n=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let o=0,s=e.length;o<s;o++){const a=e[o]?e[o].matrixWorld:oZ;oR.multiplyMatrices(a,n[o]),oR.toArray(i,o*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new ux(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const i=new Yo(n,e,e,Ki,dr);return i.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=i,this}getBoneByName(e){for(let n=0,i=this.bones.length;n<i;n++){const r=this.bones[n];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const o=e.bones[i];let s=n[o];s===void 0&&(qe("Skeleton: No bone found with UUID:",o),s=new DC),this.bones.push(s),this.boneInverses.push(new Dt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,i=this.boneInverses;for(let r=0,o=n.length;r<o;r++){const s=n[r];e.bones.push(s.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class _d extends wn{constructor(e,n,i,r=1){super(e,n,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const xu=new Dt,sR=new Dt,Rg=[],aR=new Ji,sZ=new Dt,Eh=new fi,Th=new zi;class YU extends fi{constructor(e,n,i){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new _d(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,sZ)}computeBoundingBox(){const e=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new Ji),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<n;i++)this.getMatrixAt(i,xu),aR.copy(e.boundingBox).applyMatrix4(xu),this.boundingBox.union(aR)}computeBoundingSphere(){const e=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new zi),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<n;i++)this.getMatrixAt(i,xu),Th.copy(e.boundingSphere).applyMatrix4(xu),this.boundingSphere.union(Th)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,n){const i=n.morphTargetInfluences,r=this.morphTexture.source.data.data,o=i.length+1,s=e*o+1;for(let a=0;a<i.length;a++)i[a]=r[s+a]}raycast(e,n){const i=this.matrixWorld,r=this.count;if(Eh.geometry=this.geometry,Eh.material=this.material,Eh.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Th.copy(this.boundingSphere),Th.applyMatrix4(i),e.ray.intersectsSphere(Th)!==!1))for(let o=0;o<r;o++){this.getMatrixAt(o,xu),sR.multiplyMatrices(i,xu),Eh.matrixWorld=sR,Eh.raycast(e,Rg);for(let s=0,a=Rg.length;s<a;s++){const l=Rg[s];l.instanceId=o,l.object=this,n.push(l)}Rg.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new _d(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,n){const i=n.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new Yo(new Float32Array(r*this.count),r,this.count,Jy,dr));const o=this.morphTexture.source.data.data;let s=0;for(let c=0;c<i.length;c++)s+=i[c];const a=this.geometry.morphTargetsRelative?1:1-s,l=r*e;o[l]=a,o.set(i,l+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const Jw=new W,aZ=new W,lZ=new Ut;class Fa{constructor(e=new W(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,i,r){return this.normal.set(e,n,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,i){const r=Jw.subVectors(i,n).cross(aZ.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const i=e.delta(Jw),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/r;return o<0||o>1?null:n.copy(e.start).addScaledVector(i,o)}intersectsLine(e){const n=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return n<0&&i>0||i<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const i=n||lZ.getNormalMatrix(e),r=this.coplanarPoint(Jw).applyMatrix4(e),o=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Ll=new zi,cZ=new Ce(.5,.5),Dg=new W;class Ld{constructor(e=new Fa,n=new Fa,i=new Fa,r=new Fa,o=new Fa,s=new Fa){this.planes=[e,n,i,r,o,s]}set(e,n,i,r,o,s){const a=this.planes;return a[0].copy(e),a[1].copy(n),a[2].copy(i),a[3].copy(r),a[4].copy(o),a[5].copy(s),this}copy(e){const n=this.planes;for(let i=0;i<6;i++)n[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,n=Zr,i=!1){const r=this.planes,o=e.elements,s=o[0],a=o[1],l=o[2],c=o[3],u=o[4],d=o[5],f=o[6],m=o[7],g=o[8],y=o[9],x=o[10],v=o[11],w=o[12],_=o[13],S=o[14],E=o[15];if(r[0].setComponents(c-s,m-u,v-g,E-w).normalize(),r[1].setComponents(c+s,m+u,v+g,E+w).normalize(),r[2].setComponents(c+a,m+d,v+y,E+_).normalize(),r[3].setComponents(c-a,m-d,v-y,E-_).normalize(),i)r[4].setComponents(l,f,x,S).normalize(),r[5].setComponents(c-l,m-f,v-x,E-S).normalize();else if(r[4].setComponents(c-l,m-f,v-x,E-S).normalize(),n===Zr)r[5].setComponents(c+l,m+f,v+x,E+S).normalize();else if(n===vd)r[5].setComponents(l,f,x,S).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Ll.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),Ll.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Ll)}intersectsSprite(e){Ll.center.set(0,0,0);const n=cZ.distanceTo(e.center);return Ll.radius=.7071067811865476+n,Ll.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ll)}intersectsSphere(e){const n=this.planes,i=e.center,r=-e.radius;for(let o=0;o<6;o++)if(n[o].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const n=this.planes;for(let i=0;i<6;i++){const r=n[i];if(Dg.x=r.normal.x>0?e.max.x:e.min.x,Dg.y=r.normal.y>0?e.max.y:e.min.y,Dg.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Dg)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let i=0;i<6;i++)if(n[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const ss=new Dt,as=new Ld;class dx{constructor(){this.coordinateSystem=Zr}intersectsObject(e,n){if(!n.isArrayCamera||n.cameras.length===0)return!1;for(let i=0;i<n.cameras.length;i++){const r=n.cameras[i];if(ss.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),as.setFromProjectionMatrix(ss,r.coordinateSystem,r.reversedDepth),as.intersectsObject(e))return!0}return!1}intersectsSprite(e,n){if(!n||!n.cameras||n.cameras.length===0)return!1;for(let i=0;i<n.cameras.length;i++){const r=n.cameras[i];if(ss.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),as.setFromProjectionMatrix(ss,r.coordinateSystem,r.reversedDepth),as.intersectsSprite(e))return!0}return!1}intersectsSphere(e,n){if(!n||!n.cameras||n.cameras.length===0)return!1;for(let i=0;i<n.cameras.length;i++){const r=n.cameras[i];if(ss.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),as.setFromProjectionMatrix(ss,r.coordinateSystem,r.reversedDepth),as.intersectsSphere(e))return!0}return!1}intersectsBox(e,n){if(!n||!n.cameras||n.cameras.length===0)return!1;for(let i=0;i<n.cameras.length;i++){const r=n.cameras[i];if(ss.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),as.setFromProjectionMatrix(ss,r.coordinateSystem,r.reversedDepth),as.intersectsBox(e))return!0}return!1}containsPoint(e,n){if(!n||!n.cameras||n.cameras.length===0)return!1;for(let i=0;i<n.cameras.length;i++){const r=n.cameras[i];if(ss.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),as.setFromProjectionMatrix(ss,r.coordinateSystem,r.reversedDepth),as.containsPoint(e))return!0}return!1}clone(){return new dx}}function e_(t,e){return t-e}function uZ(t,e){return t.z-e.z}function dZ(t,e){return e.z-t.z}class hZ{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,n,i,r){const o=this.pool,s=this.list;this.index>=o.length&&o.push({start:-1,count:-1,z:-1,index:-1});const a=o[this.index];s.push(a),this.index++,a.start=e,a.count=n,a.z=i,a.index=r}reset(){this.list.length=0,this.index=0}}const _r=new Dt,fZ=new et(1,1,1),lR=new Ld,pZ=new dx,kg=new Ji,zl=new zi,Ah=new W,cR=new W,mZ=new W,t_=new hZ,qi=new fi,Ng=[];function gZ(t,e,n=0){const i=e.itemSize;if(t.isInterleavedBufferAttribute||t.array.constructor!==e.array.constructor){const r=t.count;for(let o=0;o<r;o++)for(let s=0;s<i;s++)e.setComponent(o+n,s,t.getComponent(o,s))}else e.array.set(t.array,n*i);e.needsUpdate=!0}function Ol(t,e){if(t.constructor!==e.constructor){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++)e[i]=t[i]}else{const n=Math.min(t.length,e.length);e.set(new t.constructor(t.buffer,0,n))}}class ZU extends fi{constructor(e,n,i=n*2,r){super(new zt,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=n,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4),i=new Yo(n,e,e,Ki,dr);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const n=new Uint32Array(e*e),i=new Yo(n,e,e,wp,Ao);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const n=new Float32Array(e*e*4).fill(1),i=new Yo(n,e,e,Ki,dr);i.colorSpace=Jt.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const n=this.geometry,i=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const o in e.attributes){const s=e.getAttribute(o),{array:a,itemSize:l,normalized:c}=s,u=new a.constructor(i*l),d=new wn(u,l,c);n.setAttribute(o,d)}if(e.getIndex()!==null){const o=i>65535?new Uint32Array(r):new Uint16Array(r);n.setIndex(new wn(o,1))}this._geometryInitialized=!0}}_validateGeometry(e){const n=this.geometry;if(!!e.getIndex()!=!!n.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const i in n.attributes){if(!e.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),o=n.getAttribute(i);if(r.itemSize!==o.itemSize||r.normalized!==o.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const n=this._instanceInfo;if(e<0||e>=n.length||n[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const n=this._geometryInfo;if(e<0||e>=n.length||n[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ji);const e=this.boundingBox,n=this._instanceInfo;e.makeEmpty();for(let i=0,r=n.length;i<r;i++){if(n[i].active===!1)continue;const o=n[i].geometryIndex;this.getMatrixAt(i,_r),this.getBoundingBoxAt(o,kg).applyMatrix4(_r),e.union(kg)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new zi);const e=this.boundingSphere,n=this._instanceInfo;e.makeEmpty();for(let i=0,r=n.length;i<r;i++){if(n[i].active===!1)continue;const o=n[i].geometryIndex;this.getMatrixAt(i,_r),this.getBoundingSphereAt(o,zl).applyMatrix4(_r),e.union(zl)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(e_),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=i):(r=this._instanceInfo.length,this._instanceInfo.push(i));const o=this._matricesTexture;_r.identity().toArray(o.image.data,r*16),o.needsUpdate=!0;const s=this._colorsTexture;return s&&(fZ.toArray(s.image.data,r*4),s.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,n=-1,i=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},o=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=n===-1?e.getAttribute("position").count:n;const s=e.getIndex();if(s!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=i===-1?s.count:i),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let l;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(e_),l=this._availableGeometryIds.shift(),o[l]=r):(l=this._geometryCount,this._geometryCount++,o.push(r)),this.setGeometryAt(l,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,l}setGeometryAt(e,n){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(n);const i=this.geometry,r=i.getIndex()!==null,o=i.getIndex(),s=n.getIndex(),a=this._geometryInfo[e];if(r&&s.count>a.reservedIndexCount||n.attributes.position.count>a.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,c=a.reservedVertexCount;a.vertexCount=n.getAttribute("position").count;for(const u in i.attributes){const d=n.getAttribute(u),f=i.getAttribute(u);gZ(d,f,l);const m=d.itemSize;for(let g=d.count,y=c;g<y;g++){const x=l+g;for(let v=0;v<m;v++)f.setComponent(x,v,0)}f.needsUpdate=!0,f.addUpdateRange(l*m,c*m)}if(r){const u=a.indexStart,d=a.reservedIndexCount;a.indexCount=n.getIndex().count;for(let f=0;f<s.count;f++)o.setX(u+f,l+s.getX(f));for(let f=s.count,m=d;f<m;f++)o.setX(u+f,l);o.needsUpdate=!0,o.addUpdateRange(u,a.reservedIndexCount)}return a.start=r?a.indexStart:a.vertexStart,a.count=r?a.indexCount:a.vertexCount,a.boundingBox=null,n.boundingBox!==null&&(a.boundingBox=n.boundingBox.clone()),a.boundingSphere=null,n.boundingSphere!==null&&(a.boundingSphere=n.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const n=this._geometryInfo;if(e>=n.length||n[e].active===!1)return this;const i=this._instanceInfo;for(let r=0,o=i.length;r<o;r++)i[r].active&&i[r].geometryIndex===e&&this.deleteInstance(r);return n[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,n=0;const i=this._geometryInfo,r=i.map((s,a)=>a).sort((s,a)=>i[s].vertexStart-i[a].vertexStart),o=this.geometry;for(let s=0,a=i.length;s<a;s++){const l=r[s],c=i[l];if(c.active!==!1){if(o.index!==null){if(c.indexStart!==n){const{indexStart:u,vertexStart:d,reservedIndexCount:f}=c,m=o.index,g=m.array,y=e-d;for(let x=u;x<u+f;x++)g[x]=g[x]+y;m.array.copyWithin(n,u,u+f),m.addUpdateRange(n,f),m.needsUpdate=!0,c.indexStart=n}n+=c.reservedIndexCount}if(c.vertexStart!==e){const{vertexStart:u,reservedVertexCount:d}=c,f=o.attributes;for(const m in f){const g=f[m],{array:y,itemSize:x}=g;y.copyWithin(e*x,u*x,(u+d)*x),g.addUpdateRange(e*x,d*x),g.needsUpdate=!0}c.vertexStart=e}e+=c.reservedVertexCount,c.start=o.index?c.indexStart:c.vertexStart,this._nextIndexStart=o.index?c.indexStart+c.reservedIndexCount:0,this._nextVertexStart=c.vertexStart+c.reservedVertexCount}}return this._visibilityChanged=!0,this}getBoundingBoxAt(e,n){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){const o=new Ji,s=i.index,a=i.attributes.position;for(let l=r.start,c=r.start+r.count;l<c;l++){let u=l;s&&(u=s.getX(u)),o.expandByPoint(Ah.fromBufferAttribute(a,u))}r.boundingBox=o}return n.copy(r.boundingBox),n}getBoundingSphereAt(e,n){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){const o=new zi;this.getBoundingBoxAt(e,kg),kg.getCenter(o.center);const s=i.index,a=i.attributes.position;let l=0;for(let c=r.start,u=r.start+r.count;c<u;c++){let d=c;s&&(d=s.getX(d)),Ah.fromBufferAttribute(a,d),l=Math.max(l,o.center.distanceToSquared(Ah))}o.radius=Math.sqrt(l),r.boundingSphere=o}return n.copy(r.boundingSphere),n}setMatrixAt(e,n){this.validateInstanceId(e);const i=this._matricesTexture,r=this._matricesTexture.image.data;return n.toArray(r,e*16),i.needsUpdate=!0,this}getMatrixAt(e,n){return this.validateInstanceId(e),n.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,n){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),n.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,n){return this.validateInstanceId(e),n.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,n){return this.validateInstanceId(e),this._instanceInfo[e].visible===n?this:(this._instanceInfo[e].visible=n,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,n){return this.validateInstanceId(e),this.validateGeometryId(n),this._instanceInfo[e].geometryIndex=n,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,n={}){this.validateGeometryId(e);const i=this._geometryInfo[e];return n.vertexStart=i.vertexStart,n.vertexCount=i.vertexCount,n.reservedVertexCount=i.reservedVertexCount,n.indexStart=i.indexStart,n.indexCount=i.indexCount,n.reservedIndexCount=i.reservedIndexCount,n.start=i.start,n.count=i.count,n}setInstanceCount(e){const n=this._availableInstanceIds,i=this._instanceInfo;for(n.sort(e_);n[n.length-1]===i.length-1;)i.pop(),n.pop();if(e<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),o=new Int32Array(e);Ol(this._multiDrawCounts,r),Ol(this._multiDrawStarts,o),this._multiDrawCounts=r,this._multiDrawStarts=o,this._maxInstanceCount=e;const s=this._indirectTexture,a=this._matricesTexture,l=this._colorsTexture;s.dispose(),this._initIndirectTexture(),Ol(s.image.data,this._indirectTexture.image.data),a.dispose(),this._initMatricesTexture(),Ol(a.image.data,this._matricesTexture.image.data),l&&(l.dispose(),this._initColorsTexture(),Ol(l.image.data,this._colorsTexture.image.data))}setGeometrySize(e,n){const i=[...this._geometryInfo].filter(a=>a.active);if(Math.max(...i.map(a=>a.vertexStart+a.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${n}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(l=>l.indexStart+l.reservedIndexCount))>n)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${n}. Cannot shrink further.`);const o=this.geometry;o.dispose(),this._maxVertexCount=e,this._maxIndexCount=n,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new zt,this._initializeGeometry(o));const s=this.geometry;o.index&&Ol(o.index.array,s.index.array);for(const a in o.attributes)Ol(o.attributes[a].array,s.attributes[a].array)}raycast(e,n){const i=this._instanceInfo,r=this._geometryInfo,o=this.matrixWorld,s=this.geometry;qi.material=this.material,qi.geometry.index=s.index,qi.geometry.attributes=s.attributes,qi.geometry.boundingBox===null&&(qi.geometry.boundingBox=new Ji),qi.geometry.boundingSphere===null&&(qi.geometry.boundingSphere=new zi);for(let a=0,l=i.length;a<l;a++){if(!i[a].visible||!i[a].active)continue;const c=i[a].geometryIndex,u=r[c];qi.geometry.setDrawRange(u.start,u.count),this.getMatrixAt(a,qi.matrixWorld).premultiply(o),this.getBoundingBoxAt(c,qi.geometry.boundingBox),this.getBoundingSphereAt(c,qi.geometry.boundingSphere),qi.raycast(e,Ng);for(let d=0,f=Ng.length;d<f;d++){const m=Ng[d];m.object=this,m.batchId=a,n.push(m)}Ng.length=0}qi.material=null,qi.geometry.index=null,qi.geometry.attributes={},qi.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(n=>({...n,boundingBox:n.boundingBox!==null?n.boundingBox.clone():null,boundingSphere:n.boundingSphere!==null?n.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(n=>({...n})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,n,i,r,o){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const s=r.getIndex(),a=s===null?1:s.array.BYTES_PER_ELEMENT,l=this._instanceInfo,c=this._multiDrawStarts,u=this._multiDrawCounts,d=this._geometryInfo,f=this.perObjectFrustumCulled,m=this._indirectTexture,g=m.image.data,y=i.isArrayCamera?pZ:lR;f&&!i.isArrayCamera&&(_r.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),lR.setFromProjectionMatrix(_r,i.coordinateSystem,i.reversedDepth));let x=0;if(this.sortObjects){_r.copy(this.matrixWorld).invert(),Ah.setFromMatrixPosition(i.matrixWorld).applyMatrix4(_r),cR.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(_r);for(let _=0,S=l.length;_<S;_++)if(l[_].visible&&l[_].active){const E=l[_].geometryIndex;this.getMatrixAt(_,_r),this.getBoundingSphereAt(E,zl).applyMatrix4(_r);let T=!1;if(f&&(T=!y.intersectsSphere(zl,i)),!T){const P=d[E],D=mZ.subVectors(zl.center,Ah).dot(cR);t_.push(P.start,P.count,D,_)}}const v=t_.list,w=this.customSort;w===null?v.sort(o.transparent?dZ:uZ):w.call(this,v,i);for(let _=0,S=v.length;_<S;_++){const E=v[_];c[x]=E.start*a,u[x]=E.count,g[x]=E.index,x++}t_.reset()}else for(let v=0,w=l.length;v<w;v++)if(l[v].visible&&l[v].active){const _=l[v].geometryIndex;let S=!1;if(f&&(this.getMatrixAt(v,_r),this.getBoundingSphereAt(_,zl).applyMatrix4(_r),S=!y.intersectsSphere(zl,i)),!S){const E=d[_];c[x]=E.start*a,u[x]=E.count,g[x]=v,x++}}m.needsUpdate=!0,this._multiDrawCount=x,this._visibilityChanged=!1}onBeforeShadow(e,n,i,r,o,s){this.onBeforeRender(e,null,r,o,s)}}class gr extends tr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new et(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const iy=new W,ry=new W,uR=new Dt,Ih=new Nd,Lg=new zi,n_=new W,dR=new W;class dl extends rn{constructor(e=new zt,n=new gr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,i=[0];for(let r=1,o=n.count;r<o;r++)iy.fromBufferAttribute(n,r-1),ry.fromBufferAttribute(n,r),i[r]=i[r-1],i[r]+=iy.distanceTo(ry);e.setAttribute("lineDistance",new at(i,1))}else qe("Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const i=this.geometry,r=this.matrixWorld,o=e.params.Line.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Lg.copy(i.boundingSphere),Lg.applyMatrix4(r),Lg.radius+=o,e.ray.intersectsSphere(Lg)===!1)return;uR.copy(r).invert(),Ih.copy(e.ray).applyMatrix4(uR);const a=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=this.isLineSegments?2:1,u=i.index,f=i.attributes.position;if(u!==null){const m=Math.max(0,s.start),g=Math.min(u.count,s.start+s.count);for(let y=m,x=g-1;y<x;y+=c){const v=u.getX(y),w=u.getX(y+1),_=zg(this,e,Ih,l,v,w,y);_&&n.push(_)}if(this.isLineLoop){const y=u.getX(g-1),x=u.getX(m),v=zg(this,e,Ih,l,y,x,g-1);v&&n.push(v)}}else{const m=Math.max(0,s.start),g=Math.min(f.count,s.start+s.count);for(let y=m,x=g-1;y<x;y+=c){const v=zg(this,e,Ih,l,y,y+1,y);v&&n.push(v)}if(this.isLineLoop){const y=zg(this,e,Ih,l,g-1,m,g-1);y&&n.push(y)}}}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){const a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}}function zg(t,e,n,i,r,o,s){const a=t.geometry.attributes.position;if(iy.fromBufferAttribute(a,r),ry.fromBufferAttribute(a,o),n.distanceSqToSegment(iy,ry,n_,dR)>i)return;n_.applyMatrix4(t.matrixWorld);const c=e.ray.origin.distanceTo(n_);if(!(c<e.near||c>e.far))return{distance:c,point:dR.clone().applyMatrix4(t.matrixWorld),index:s,face:null,faceIndex:null,barycoord:null,object:t}}const hR=new W,fR=new W;class Ps extends dl{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,i=[];for(let r=0,o=n.count;r<o;r+=2)hR.fromBufferAttribute(n,r),fR.fromBufferAttribute(n,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+hR.distanceTo(fR);e.setAttribute("lineDistance",new at(i,1))}else qe("LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class KU extends dl{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class kC extends tr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new et(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const pR=new Dt,oS=new Nd,Og=new zi,Fg=new W;class QU extends rn{constructor(e=new zt,n=new kC){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,n){const i=this.geometry,r=this.matrixWorld,o=e.params.Points.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Og.copy(i.boundingSphere),Og.applyMatrix4(r),Og.radius+=o,e.ray.intersectsSphere(Og)===!1)return;pR.copy(r).invert(),oS.copy(e.ray).applyMatrix4(pR);const a=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=i.index,d=i.attributes.position;if(c!==null){const f=Math.max(0,s.start),m=Math.min(c.count,s.start+s.count);for(let g=f,y=m;g<y;g++){const x=c.getX(g);Fg.fromBufferAttribute(d,x),mR(Fg,x,l,r,e,n,this)}}else{const f=Math.max(0,s.start),m=Math.min(d.count,s.start+s.count);for(let g=f,y=m;g<y;g++)Fg.fromBufferAttribute(d,g),mR(Fg,g,l,r,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){const a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}}function mR(t,e,n,i,r,o,s){const a=oS.distanceSqToPoint(t);if(a<n){const l=new W;oS.closestPointToPoint(t,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;o.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:s})}}class JU extends Kn{constructor(e,n,i,r,o=Nn,s=Nn,a,l,c){super(e,n,i,r,o,s,a,l,c),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const u=this;function d(){u.needsUpdate=!0,u._requestVideoFrameCallbackId=e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(d))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&(this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),this._requestVideoFrameCallbackId=0),super.dispose()}}class vZ extends JU{constructor(e,n,i,r,o,s,a,l){super({},e,n,i,r,o,s,a,l),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class yZ extends Kn{constructor(e,n){super({width:e,height:n}),this.isFramebufferTexture=!0,this.magFilter=ri,this.minFilter=ri,this.generateMipmaps=!1,this.needsUpdate=!0}}class hx extends Kn{constructor(e,n,i,r,o,s,a,l,c,u,d,f){super(null,s,a,l,c,u,r,o,d,f),this.isCompressedTexture=!0,this.image={width:n,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class xZ extends hx{constructor(e,n,i,r,o,s){super(e,n,i,o,s),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Pr,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class wZ extends hx{constructor(e,n,i){super(void 0,e[0].width,e[0].height,n,i,Cs),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class _Z extends Kn{constructor(e,n,i,r,o,s,a,l,c){super(e,n,i,r,o,s,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class bd extends Kn{constructor(e,n,i=Ao,r,o,s,a=ri,l=ri,c,u=Ts,d=1){if(u!==Ts&&u!==Xa)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const f={width:e,height:n,depth:d};super(f,r,o,s,a,l,u,i,c),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Ya(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}class e5 extends bd{constructor(e,n=Ao,i=Cs,r,o,s=ri,a=ri,l,c=Ts){const u={width:e,height:e,depth:1},d=[u,u,u,u,u,u];super(e,e,n,i,r,o,s,a,l,c),this.image=d,this.isCubeDepthTexture=!0,this.isCubeTexture=!0}get images(){return this.image}set images(e){this.image=e}}class NC extends Kn{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class fx extends zt{constructor(e=1,n=1,i=4,r=8,o=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:n,capSegments:i,radialSegments:r,heightSegments:o},n=Math.max(0,n),i=Math.max(1,Math.floor(i)),r=Math.max(3,Math.floor(r)),o=Math.max(1,Math.floor(o));const s=[],a=[],l=[],c=[],u=n/2,d=Math.PI/2*e,f=n,m=2*d+f,g=i*2+o,y=r+1,x=new W,v=new W;for(let w=0;w<=g;w++){let _=0,S=0,E=0,T=0;if(w<=i){const A=w/i,R=A*Math.PI/2;S=-u-e*Math.cos(R),E=e*Math.sin(R),T=-e*Math.cos(R),_=A*d}else if(w<=i+o){const A=(w-i)/o;S=-u+A*n,E=e,T=0,_=d+A*f}else{const A=(w-i-o)/i,R=A*Math.PI/2;S=u+e*Math.sin(R),E=e*Math.cos(R),T=e*Math.sin(R),_=d+f+A*d}const P=Math.max(0,Math.min(1,_/m));let D=0;w===0?D=.5/r:w===g&&(D=-.5/r);for(let A=0;A<=r;A++){const R=A/r,N=R*Math.PI*2,O=Math.sin(N),H=Math.cos(N);v.x=-E*H,v.y=S,v.z=E*O,a.push(v.x,v.y,v.z),x.set(-E*H,T,E*O),x.normalize(),l.push(x.x,x.y,x.z),c.push(R+D,P)}if(w>0){const A=(w-1)*y;for(let R=0;R<r;R++){const N=A+R,O=A+R+1,H=w*y+R,q=w*y+R+1;s.push(N,O,H),s.push(O,q,H)}}}this.setIndex(s),this.setAttribute("position",new at(a,3)),this.setAttribute("normal",new at(l,3)),this.setAttribute("uv",new at(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new fx(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class px extends zt{constructor(e=1,n=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:i,thetaLength:r},n=Math.max(3,n);const o=[],s=[],a=[],l=[],c=new W,u=new Ce;s.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let d=0,f=3;d<=n;d++,f+=3){const m=i+d/n*r;c.x=e*Math.cos(m),c.y=e*Math.sin(m),s.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(s[f]/e+1)/2,u.y=(s[f+1]/e+1)/2,l.push(u.x,u.y)}for(let d=1;d<=n;d++)o.push(d,d+1,0);this.setIndex(o),this.setAttribute("position",new at(s,3)),this.setAttribute("normal",new at(a,3)),this.setAttribute("uv",new at(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new px(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Sp extends zt{constructor(e=1,n=1,i=1,r=32,o=1,s=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:i,radialSegments:r,heightSegments:o,openEnded:s,thetaStart:a,thetaLength:l};const c=this;r=Math.floor(r),o=Math.floor(o);const u=[],d=[],f=[],m=[];let g=0;const y=[],x=i/2;let v=0;w(),s===!1&&(e>0&&_(!0),n>0&&_(!1)),this.setIndex(u),this.setAttribute("position",new at(d,3)),this.setAttribute("normal",new at(f,3)),this.setAttribute("uv",new at(m,2));function w(){const S=new W,E=new W;let T=0;const P=(n-e)/i;for(let D=0;D<=o;D++){const A=[],R=D/o,N=R*(n-e)+e;for(let O=0;O<=r;O++){const H=O/r,q=H*l+a,Z=Math.sin(q),G=Math.cos(q);E.x=N*Z,E.y=-R*i+x,E.z=N*G,d.push(E.x,E.y,E.z),S.set(Z,P,G).normalize(),f.push(S.x,S.y,S.z),m.push(H,1-R),A.push(g++)}y.push(A)}for(let D=0;D<r;D++)for(let A=0;A<o;A++){const R=y[A][D],N=y[A+1][D],O=y[A+1][D+1],H=y[A][D+1];(e>0||A!==0)&&(u.push(R,N,H),T+=3),(n>0||A!==o-1)&&(u.push(N,O,H),T+=3)}c.addGroup(v,T,0),v+=T}function _(S){const E=g,T=new Ce,P=new W;let D=0;const A=S===!0?e:n,R=S===!0?1:-1;for(let O=1;O<=r;O++)d.push(0,x*R,0),f.push(0,R,0),m.push(.5,.5),g++;const N=g;for(let O=0;O<=r;O++){const q=O/r*l+a,Z=Math.cos(q),G=Math.sin(q);P.x=A*G,P.y=x*R,P.z=A*Z,d.push(P.x,P.y,P.z),f.push(0,R,0),T.x=Z*.5+.5,T.y=G*.5*R+.5,m.push(T.x,T.y),g++}for(let O=0;O<r;O++){const H=E+O,q=N+O;S===!0?u.push(q,q+1,H):u.push(q+1,q,H),D+=3}c.addGroup(v,D,S===!0?1:2),v+=D}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Sp(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Mp extends Sp{constructor(e=1,n=1,i=32,r=1,o=!1,s=0,a=Math.PI*2){super(0,e,n,i,r,o,s,a),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:i,heightSegments:r,openEnded:o,thetaStart:s,thetaLength:a}}static fromJSON(e){return new Mp(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class vl extends zt{constructor(e=[],n=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:i,detail:r};const o=[],s=[];a(r),c(i),u(),this.setAttribute("position",new at(o,3)),this.setAttribute("normal",new at(o.slice(),3)),this.setAttribute("uv",new at(s,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(w){const _=new W,S=new W,E=new W;for(let T=0;T<n.length;T+=3)m(n[T+0],_),m(n[T+1],S),m(n[T+2],E),l(_,S,E,w)}function l(w,_,S,E){const T=E+1,P=[];for(let D=0;D<=T;D++){P[D]=[];const A=w.clone().lerp(S,D/T),R=_.clone().lerp(S,D/T),N=T-D;for(let O=0;O<=N;O++)O===0&&D===T?P[D][O]=A:P[D][O]=A.clone().lerp(R,O/N)}for(let D=0;D<T;D++)for(let A=0;A<2*(T-D)-1;A++){const R=Math.floor(A/2);A%2===0?(f(P[D][R+1]),f(P[D+1][R]),f(P[D][R])):(f(P[D][R+1]),f(P[D+1][R+1]),f(P[D+1][R]))}}function c(w){const _=new W;for(let S=0;S<o.length;S+=3)_.x=o[S+0],_.y=o[S+1],_.z=o[S+2],_.normalize().multiplyScalar(w),o[S+0]=_.x,o[S+1]=_.y,o[S+2]=_.z}function u(){const w=new W;for(let _=0;_<o.length;_+=3){w.x=o[_+0],w.y=o[_+1],w.z=o[_+2];const S=x(w)/2/Math.PI+.5,E=v(w)/Math.PI+.5;s.push(S,1-E)}g(),d()}function d(){for(let w=0;w<s.length;w+=6){const _=s[w+0],S=s[w+2],E=s[w+4],T=Math.max(_,S,E),P=Math.min(_,S,E);T>.9&&P<.1&&(_<.2&&(s[w+0]+=1),S<.2&&(s[w+2]+=1),E<.2&&(s[w+4]+=1))}}function f(w){o.push(w.x,w.y,w.z)}function m(w,_){const S=w*3;_.x=e[S+0],_.y=e[S+1],_.z=e[S+2]}function g(){const w=new W,_=new W,S=new W,E=new W,T=new Ce,P=new Ce,D=new Ce;for(let A=0,R=0;A<o.length;A+=9,R+=6){w.set(o[A+0],o[A+1],o[A+2]),_.set(o[A+3],o[A+4],o[A+5]),S.set(o[A+6],o[A+7],o[A+8]),T.set(s[R+0],s[R+1]),P.set(s[R+2],s[R+3]),D.set(s[R+4],s[R+5]),E.copy(w).add(_).add(S).divideScalar(3);const N=x(E);y(T,R+0,w,N),y(P,R+2,_,N),y(D,R+4,S,N)}}function y(w,_,S,E){E<0&&w.x===1&&(s[_]=w.x-1),S.x===0&&S.z===0&&(s[_]=E/2/Math.PI+.5)}function x(w){return Math.atan2(w.z,-w.x)}function v(w){return Math.atan2(-w.y,Math.sqrt(w.x*w.x+w.z*w.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new vl(e.vertices,e.indices,e.radius,e.detail)}}class mx extends vl{constructor(e=1,n=0){const i=(1+Math.sqrt(5))/2,r=1/i,o=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(o,s,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new mx(e.radius,e.detail)}}const Ug=new W,Bg=new W,i_=new W,Hg=new Ar;class t5 extends zt{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const r=Math.pow(10,4),o=Math.cos(dc*n),s=e.getIndex(),a=e.getAttribute("position"),l=s?s.count:a.count,c=[0,0,0],u=["a","b","c"],d=new Array(3),f={},m=[];for(let g=0;g<l;g+=3){s?(c[0]=s.getX(g),c[1]=s.getX(g+1),c[2]=s.getX(g+2)):(c[0]=g,c[1]=g+1,c[2]=g+2);const{a:y,b:x,c:v}=Hg;if(y.fromBufferAttribute(a,c[0]),x.fromBufferAttribute(a,c[1]),v.fromBufferAttribute(a,c[2]),Hg.getNormal(i_),d[0]=`${Math.round(y.x*r)},${Math.round(y.y*r)},${Math.round(y.z*r)}`,d[1]=`${Math.round(x.x*r)},${Math.round(x.y*r)},${Math.round(x.z*r)}`,d[2]=`${Math.round(v.x*r)},${Math.round(v.y*r)},${Math.round(v.z*r)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let w=0;w<3;w++){const _=(w+1)%3,S=d[w],E=d[_],T=Hg[u[w]],P=Hg[u[_]],D=`${S}_${E}`,A=`${E}_${S}`;A in f&&f[A]?(i_.dot(f[A].normal)<=o&&(m.push(T.x,T.y,T.z),m.push(P.x,P.y,P.z)),f[A]=null):D in f||(f[D]={index0:c[w],index1:c[_],normal:i_.clone()})}}for(const g in f)if(f[g]){const{index0:y,index1:x}=f[g];Ug.fromBufferAttribute(a,y),Bg.fromBufferAttribute(a,x),m.push(Ug.x,Ug.y,Ug.z),m.push(Bg.x,Bg.y,Bg.z)}this.setAttribute("position",new at(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Ko{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){qe("Curve: .getPoint() not implemented.")}getPointAt(e,n){const i=this.getUtoTmapping(e);return this.getPoint(i,n)}getPoints(e=5){const n=[];for(let i=0;i<=e;i++)n.push(this.getPoint(i/e));return n}getSpacedPoints(e=5){const n=[];for(let i=0;i<=e;i++)n.push(this.getPointAt(i/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let i,r=this.getPoint(0),o=0;n.push(0);for(let s=1;s<=e;s++)i=this.getPoint(s/e),o+=i.distanceTo(r),n.push(o),r=i;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n=null){const i=this.getLengths();let r=0;const o=i.length;let s;n?s=n:s=e*i[o-1];let a=0,l=o-1,c;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=i[r]-s,c<0)a=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,i[r]===s)return r/(o-1);const u=i[r],f=i[r+1]-u,m=(s-u)/f;return(r+m)/(o-1)}getTangent(e,n){let r=e-1e-4,o=e+1e-4;r<0&&(r=0),o>1&&(o=1);const s=this.getPoint(r),a=this.getPoint(o),l=n||(s.isVector2?new Ce:new W);return l.copy(a).sub(s).normalize(),l}getTangentAt(e,n){const i=this.getUtoTmapping(e);return this.getTangent(i,n)}computeFrenetFrames(e,n=!1){const i=new W,r=[],o=[],s=[],a=new W,l=new Dt;for(let m=0;m<=e;m++){const g=m/e;r[m]=this.getTangentAt(g,new W)}o[0]=new W,s[0]=new W;let c=Number.MAX_VALUE;const u=Math.abs(r[0].x),d=Math.abs(r[0].y),f=Math.abs(r[0].z);u<=c&&(c=u,i.set(1,0,0)),d<=c&&(c=d,i.set(0,1,0)),f<=c&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),o[0].crossVectors(r[0],a),s[0].crossVectors(r[0],o[0]);for(let m=1;m<=e;m++){if(o[m]=o[m-1].clone(),s[m]=s[m-1].clone(),a.crossVectors(r[m-1],r[m]),a.length()>Number.EPSILON){a.normalize();const g=Math.acos(At(r[m-1].dot(r[m]),-1,1));o[m].applyMatrix4(l.makeRotationAxis(a,g))}s[m].crossVectors(r[m],o[m])}if(n===!0){let m=Math.acos(At(o[0].dot(o[e]),-1,1));m/=e,r[0].dot(a.crossVectors(o[0],o[e]))>0&&(m=-m);for(let g=1;g<=e;g++)o[g].applyMatrix4(l.makeRotationAxis(r[g],m*g)),s[g].crossVectors(r[g],o[g])}return{tangents:r,normals:o,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class gx extends Ko{constructor(e=0,n=0,i=1,r=1,o=0,s=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=i,this.yRadius=r,this.aStartAngle=o,this.aEndAngle=s,this.aClockwise=a,this.aRotation=l}getPoint(e,n=new Ce){const i=n,r=Math.PI*2;let o=this.aEndAngle-this.aStartAngle;const s=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=r;for(;o>r;)o-=r;o<Number.EPSILON&&(s?o=0:o=r),this.aClockwise===!0&&!s&&(o===r?o=-r:o=o-r);const a=this.aStartAngle+e*o;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),d=Math.sin(this.aRotation),f=l-this.aX,m=c-this.aY;l=f*u-m*d+this.aX,c=f*d+m*u+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class n5 extends gx{constructor(e,n,i,r,o,s){super(e,n,i,i,r,o,s),this.isArcCurve=!0,this.type="ArcCurve"}}function LC(){let t=0,e=0,n=0,i=0;function r(o,s,a,l){t=o,e=a,n=-3*o+3*s-2*a-l,i=2*o-2*s+a+l}return{initCatmullRom:function(o,s,a,l,c){r(s,a,c*(a-o),c*(l-s))},initNonuniformCatmullRom:function(o,s,a,l,c,u,d){let f=(s-o)/c-(a-o)/(c+u)+(a-s)/u,m=(a-s)/u-(l-s)/(u+d)+(l-a)/d;f*=u,m*=u,r(s,a,f,m)},calc:function(o){const s=o*o,a=s*o;return t+e*o+n*s+i*a}}}const Vg=new W,r_=new LC,o_=new LC,s_=new LC;class i5 extends Ko{constructor(e=[],n=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=i,this.tension=r}getPoint(e,n=new W){const i=n,r=this.points,o=r.length,s=(o-(this.closed?0:1))*e;let a=Math.floor(s),l=s-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/o)+1)*o:l===0&&a===o-1&&(a=o-2,l=1);let c,u;this.closed||a>0?c=r[(a-1)%o]:(Vg.subVectors(r[0],r[1]).add(r[0]),c=Vg);const d=r[a%o],f=r[(a+1)%o];if(this.closed||a+2<o?u=r[(a+2)%o]:(Vg.subVectors(r[o-1],r[o-2]).add(r[o-1]),u=Vg),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let g=Math.pow(c.distanceToSquared(d),m),y=Math.pow(d.distanceToSquared(f),m),x=Math.pow(f.distanceToSquared(u),m);y<1e-4&&(y=1),g<1e-4&&(g=y),x<1e-4&&(x=y),r_.initNonuniformCatmullRom(c.x,d.x,f.x,u.x,g,y,x),o_.initNonuniformCatmullRom(c.y,d.y,f.y,u.y,g,y,x),s_.initNonuniformCatmullRom(c.z,d.z,f.z,u.z,g,y,x)}else this.curveType==="catmullrom"&&(r_.initCatmullRom(c.x,d.x,f.x,u.x,this.tension),o_.initCatmullRom(c.y,d.y,f.y,u.y,this.tension),s_.initCatmullRom(c.z,d.z,f.z,u.z,this.tension));return i.set(r_.calc(l),o_.calc(l),s_.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,i=this.points.length;n<i;n++){const r=this.points[n];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(new W().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function gR(t,e,n,i,r){const o=(i-e)*.5,s=(r-n)*.5,a=t*t,l=t*a;return(2*n-2*i+o+s)*l+(-3*n+3*i-2*o-s)*a+o*t+n}function bZ(t,e){const n=1-t;return n*n*e}function SZ(t,e){return 2*(1-t)*t*e}function MZ(t,e){return t*t*e}function lf(t,e,n,i){return bZ(t,e)+SZ(t,n)+MZ(t,i)}function CZ(t,e){const n=1-t;return n*n*n*e}function EZ(t,e){const n=1-t;return 3*n*n*t*e}function TZ(t,e){return 3*(1-t)*t*t*e}function AZ(t,e){return t*t*t*e}function cf(t,e,n,i,r){return CZ(t,e)+EZ(t,n)+TZ(t,i)+AZ(t,r)}class zC extends Ko{constructor(e=new Ce,n=new Ce,i=new Ce,r=new Ce){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=i,this.v3=r}getPoint(e,n=new Ce){const i=n,r=this.v0,o=this.v1,s=this.v2,a=this.v3;return i.set(cf(e,r.x,o.x,s.x,a.x),cf(e,r.y,o.y,s.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class r5 extends Ko{constructor(e=new W,n=new W,i=new W,r=new W){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=i,this.v3=r}getPoint(e,n=new W){const i=n,r=this.v0,o=this.v1,s=this.v2,a=this.v3;return i.set(cf(e,r.x,o.x,s.x,a.x),cf(e,r.y,o.y,s.y,a.y),cf(e,r.z,o.z,s.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class OC extends Ko{constructor(e=new Ce,n=new Ce){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new Ce){const i=n;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new Ce){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class o5 extends Ko{constructor(e=new W,n=new W){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new W){const i=n;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new W){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class FC extends Ko{constructor(e=new Ce,n=new Ce,i=new Ce){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=i}getPoint(e,n=new Ce){const i=n,r=this.v0,o=this.v1,s=this.v2;return i.set(lf(e,r.x,o.x,s.x),lf(e,r.y,o.y,s.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class UC extends Ko{constructor(e=new W,n=new W,i=new W){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=i}getPoint(e,n=new W){const i=n,r=this.v0,o=this.v1,s=this.v2;return i.set(lf(e,r.x,o.x,s.x),lf(e,r.y,o.y,s.y),lf(e,r.z,o.z,s.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class BC extends Ko{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new Ce){const i=n,r=this.points,o=(r.length-1)*e,s=Math.floor(o),a=o-s,l=r[s===0?s:s-1],c=r[s],u=r[s>r.length-2?r.length-1:s+1],d=r[s>r.length-3?r.length-1:s+2];return i.set(gR(a,l.x,c.x,u.x,d.x),gR(a,l.y,c.y,u.y,d.y)),i}copy(e){super.copy(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,i=this.points.length;n<i;n++){const r=this.points[n];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(new Ce().fromArray(r))}return this}}var oy=Object.freeze({__proto__:null,ArcCurve:n5,CatmullRomCurve3:i5,CubicBezierCurve:zC,CubicBezierCurve3:r5,EllipseCurve:gx,LineCurve:OC,LineCurve3:o5,QuadraticBezierCurve:FC,QuadraticBezierCurve3:UC,SplineCurve:BC});class s5 extends Ko{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(n)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new oy[i](n,e))}return this}getPoint(e,n){const i=e*this.getLength(),r=this.getCurveLengths();let o=0;for(;o<r.length;){if(r[o]>=i){const s=r[o]-i,a=this.curves[o],l=a.getLength(),c=l===0?0:1-s/l;return a.getPointAt(c,n)}o++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let i=0,r=this.curves.length;i<r;i++)n+=this.curves[i].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let i=0;i<=e;i++)n.push(this.getPoint(i/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let i;for(let r=0,o=this.curves;r<o.length;r++){const s=o[r],a=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,l=s.getPoints(a);for(let c=0;c<l.length;c++){const u=l[c];i&&i.equals(u)||(n.push(u),i=u)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,i=e.curves.length;n<i;n++){const r=e.curves[n];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,i=this.curves.length;n<i;n++){const r=this.curves[n];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,i=e.curves.length;n<i;n++){const r=e.curves[n];this.curves.push(new oy[r.type]().fromJSON(r))}return this}}class sy extends s5{constructor(e){super(),this.type="Path",this.currentPoint=new Ce,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,i=e.length;n<i;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const i=new OC(this.currentPoint.clone(),new Ce(e,n));return this.curves.push(i),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,i,r){const o=new FC(this.currentPoint.clone(),new Ce(e,n),new Ce(i,r));return this.curves.push(o),this.currentPoint.set(i,r),this}bezierCurveTo(e,n,i,r,o,s){const a=new zC(this.currentPoint.clone(),new Ce(e,n),new Ce(i,r),new Ce(o,s));return this.curves.push(a),this.currentPoint.set(o,s),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),i=new BC(n);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,i,r,o,s){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,n+l,i,r,o,s),this}absarc(e,n,i,r,o,s){return this.absellipse(e,n,i,i,r,o,s),this}ellipse(e,n,i,r,o,s,a,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,n+u,i,r,o,s,a,l),this}absellipse(e,n,i,r,o,s,a,l){const c=new gx(e,n,i,r,o,s,a,l);if(this.curves.length>0){const d=c.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class fc extends sy{constructor(e){super(e),this.uuid=Qr(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let i=0,r=this.holes.length;i<r;i++)n[i]=this.holes[i].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,i=e.holes.length;n<i;n++){const r=e.holes[n];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,i=this.holes.length;n<i;n++){const r=this.holes[n];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,i=e.holes.length;n<i;n++){const r=e.holes[n];this.holes.push(new sy().fromJSON(r))}return this}}function IZ(t,e,n=2){const i=e&&e.length,r=i?e[0]*n:t.length;let o=a5(t,0,r,n,!0);const s=[];if(!o||o.next===o.prev)return s;let a,l,c;if(i&&(o=NZ(t,e,o,n)),t.length>80*n){a=t[0],l=t[1];let u=a,d=l;for(let f=n;f<r;f+=n){const m=t[f],g=t[f+1];m<a&&(a=m),g<l&&(l=g),m>u&&(u=m),g>d&&(d=g)}c=Math.max(u-a,d-l),c=c!==0?32767/c:0}return jf(o,s,n,a,l,c,0),s}function a5(t,e,n,i,r){let o;if(r===GZ(t,e,n,i)>0)for(let s=e;s<n;s+=i)o=vR(s/i|0,t[s],t[s+1],o);else for(let s=n-i;s>=e;s-=i)o=vR(s/i|0,t[s],t[s+1],o);return o&&Sd(o,o.next)&&(Xf(o),o=o.next),o}function Tc(t,e){if(!t)return t;e||(e=t);let n=t,i;do if(i=!1,!n.steiner&&(Sd(n,n.next)||Wn(n.prev,n,n.next)===0)){if(Xf(n),n=e=n.prev,n===n.next)break;i=!0}else n=n.next;while(i||n!==e);return e}function jf(t,e,n,i,r,o,s){if(!t)return;!s&&o&&UZ(t,i,r,o);let a=t;for(;t.prev!==t.next;){const l=t.prev,c=t.next;if(o?RZ(t,i,r,o):PZ(t)){e.push(l.i,t.i,c.i),Xf(t),t=c.next,a=c.next;continue}if(t=c,t===a){s?s===1?(t=DZ(Tc(t),e),jf(t,e,n,i,r,o,2)):s===2&&kZ(t,e,n,i,r,o):jf(Tc(t),e,n,i,r,o,1);break}}}function PZ(t){const e=t.prev,n=t,i=t.next;if(Wn(e,n,i)>=0)return!1;const r=e.x,o=n.x,s=i.x,a=e.y,l=n.y,c=i.y,u=Math.min(r,o,s),d=Math.min(a,l,c),f=Math.max(r,o,s),m=Math.max(a,l,c);let g=i.next;for(;g!==e;){if(g.x>=u&&g.x<=f&&g.y>=d&&g.y<=m&&$h(r,a,o,l,s,c,g.x,g.y)&&Wn(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function RZ(t,e,n,i){const r=t.prev,o=t,s=t.next;if(Wn(r,o,s)>=0)return!1;const a=r.x,l=o.x,c=s.x,u=r.y,d=o.y,f=s.y,m=Math.min(a,l,c),g=Math.min(u,d,f),y=Math.max(a,l,c),x=Math.max(u,d,f),v=sS(m,g,e,n,i),w=sS(y,x,e,n,i);let _=t.prevZ,S=t.nextZ;for(;_&&_.z>=v&&S&&S.z<=w;){if(_.x>=m&&_.x<=y&&_.y>=g&&_.y<=x&&_!==r&&_!==s&&$h(a,u,l,d,c,f,_.x,_.y)&&Wn(_.prev,_,_.next)>=0||(_=_.prevZ,S.x>=m&&S.x<=y&&S.y>=g&&S.y<=x&&S!==r&&S!==s&&$h(a,u,l,d,c,f,S.x,S.y)&&Wn(S.prev,S,S.next)>=0))return!1;S=S.nextZ}for(;_&&_.z>=v;){if(_.x>=m&&_.x<=y&&_.y>=g&&_.y<=x&&_!==r&&_!==s&&$h(a,u,l,d,c,f,_.x,_.y)&&Wn(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;S&&S.z<=w;){if(S.x>=m&&S.x<=y&&S.y>=g&&S.y<=x&&S!==r&&S!==s&&$h(a,u,l,d,c,f,S.x,S.y)&&Wn(S.prev,S,S.next)>=0)return!1;S=S.nextZ}return!0}function DZ(t,e){let n=t;do{const i=n.prev,r=n.next.next;!Sd(i,r)&&c5(i,n,n.next,r)&&qf(i,r)&&qf(r,i)&&(e.push(i.i,n.i,r.i),Xf(n),Xf(n.next),n=t=r),n=n.next}while(n!==t);return Tc(n)}function kZ(t,e,n,i,r,o){let s=t;do{let a=s.next.next;for(;a!==s.prev;){if(s.i!==a.i&&VZ(s,a)){let l=u5(s,a);s=Tc(s,s.next),l=Tc(l,l.next),jf(s,e,n,i,r,o,0),jf(l,e,n,i,r,o,0);return}a=a.next}s=s.next}while(s!==t)}function NZ(t,e,n,i){const r=[];for(let o=0,s=e.length;o<s;o++){const a=e[o]*i,l=o<s-1?e[o+1]*i:t.length,c=a5(t,a,l,i,!1);c===c.next&&(c.steiner=!0),r.push(HZ(c))}r.sort(LZ);for(let o=0;o<r.length;o++)n=zZ(r[o],n);return n}function LZ(t,e){let n=t.x-e.x;if(n===0&&(n=t.y-e.y,n===0)){const i=(t.next.y-t.y)/(t.next.x-t.x),r=(e.next.y-e.y)/(e.next.x-e.x);n=i-r}return n}function zZ(t,e){const n=OZ(t,e);if(!n)return e;const i=u5(n,t);return Tc(i,i.next),Tc(n,n.next)}function OZ(t,e){let n=e;const i=t.x,r=t.y;let o=-1/0,s;if(Sd(t,n))return n;do{if(Sd(t,n.next))return n.next;if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){const d=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(d<=i&&d>o&&(o=d,s=n.x<n.next.x?n:n.next,d===i))return s}n=n.next}while(n!==e);if(!s)return null;const a=s,l=s.x,c=s.y;let u=1/0;n=s;do{if(i>=n.x&&n.x>=l&&i!==n.x&&l5(r<c?i:o,r,l,c,r<c?o:i,r,n.x,n.y)){const d=Math.abs(r-n.y)/(i-n.x);qf(n,t)&&(d<u||d===u&&(n.x>s.x||n.x===s.x&&FZ(s,n)))&&(s=n,u=d)}n=n.next}while(n!==a);return s}function FZ(t,e){return Wn(t.prev,t,e.prev)<0&&Wn(e.next,t,t.next)<0}function UZ(t,e,n,i){let r=t;do r.z===0&&(r.z=sS(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,BZ(r)}function BZ(t){let e,n=1;do{let i=t,r;t=null;let o=null;for(e=0;i;){e++;let s=i,a=0;for(let c=0;c<n&&(a++,s=s.nextZ,!!s);c++);let l=n;for(;a>0||l>0&&s;)a!==0&&(l===0||!s||i.z<=s.z)?(r=i,i=i.nextZ,a--):(r=s,s=s.nextZ,l--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;i=s}o.nextZ=null,n*=2}while(e>1);return t}function sS(t,e,n,i,r){return t=(t-n)*r|0,e=(e-i)*r|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function HZ(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function l5(t,e,n,i,r,o,s,a){return(r-s)*(e-a)>=(t-s)*(o-a)&&(t-s)*(i-a)>=(n-s)*(e-a)&&(n-s)*(o-a)>=(r-s)*(i-a)}function $h(t,e,n,i,r,o,s,a){return!(t===s&&e===a)&&l5(t,e,n,i,r,o,s,a)}function VZ(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!$Z(t,e)&&(qf(t,e)&&qf(e,t)&&WZ(t,e)&&(Wn(t.prev,t,e.prev)||Wn(t,e.prev,e))||Sd(t,e)&&Wn(t.prev,t,t.next)>0&&Wn(e.prev,e,e.next)>0)}function Wn(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Sd(t,e){return t.x===e.x&&t.y===e.y}function c5(t,e,n,i){const r=Wg(Wn(t,e,n)),o=Wg(Wn(t,e,i)),s=Wg(Wn(n,i,t)),a=Wg(Wn(n,i,e));return!!(r!==o&&s!==a||r===0&&$g(t,n,e)||o===0&&$g(t,i,e)||s===0&&$g(n,t,i)||a===0&&$g(n,e,i))}function $g(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Wg(t){return t>0?1:t<0?-1:0}function $Z(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&c5(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function qf(t,e){return Wn(t.prev,t,t.next)<0?Wn(t,e,t.next)>=0&&Wn(t,t.prev,e)>=0:Wn(t,e,t.prev)<0||Wn(t,t.next,e)<0}function WZ(t,e){let n=t,i=!1;const r=(t.x+e.x)/2,o=(t.y+e.y)/2;do n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==t);return i}function u5(t,e){const n=aS(t.i,t.x,t.y),i=aS(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function vR(t,e,n,i){const r=aS(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Xf(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function aS(t,e,n){return{i:t,x:e,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function GZ(t,e,n,i){let r=0;for(let o=e,s=n-i;o<n;o+=i)r+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return r}class jZ{static triangulate(e,n,i=2){return IZ(e,n,i)}}class Wo{static area(e){const n=e.length;let i=0;for(let r=n-1,o=0;o<n;r=o++)i+=e[r].x*e[o].y-e[o].x*e[r].y;return i*.5}static isClockWise(e){return Wo.area(e)<0}static triangulateShape(e,n){const i=[],r=[],o=[];yR(e),xR(i,e);let s=e.length;n.forEach(yR);for(let l=0;l<n.length;l++)r.push(s),s+=n[l].length,xR(i,n[l]);const a=jZ.triangulate(i,r);for(let l=0;l<a.length;l+=3)o.push(a.slice(l,l+3));return o}}function yR(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function xR(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class vx extends zt{constructor(e=new fc([new Ce(.5,.5),new Ce(-.5,.5),new Ce(-.5,-.5),new Ce(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const i=this,r=[],o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];s(c)}this.setAttribute("position",new at(r,3)),this.setAttribute("uv",new at(o,2)),this.computeVertexNormals();function s(a){const l=[],c=n.curveSegments!==void 0?n.curveSegments:12,u=n.steps!==void 0?n.steps:1,d=n.depth!==void 0?n.depth:1;let f=n.bevelEnabled!==void 0?n.bevelEnabled:!0,m=n.bevelThickness!==void 0?n.bevelThickness:.2,g=n.bevelSize!==void 0?n.bevelSize:m-.1,y=n.bevelOffset!==void 0?n.bevelOffset:0,x=n.bevelSegments!==void 0?n.bevelSegments:3;const v=n.extrudePath,w=n.UVGenerator!==void 0?n.UVGenerator:qZ;let _,S=!1,E,T,P,D;if(v){_=v.getSpacedPoints(u),S=!0,f=!1;const le=v.isCatmullRomCurve3?v.closed:!1;E=v.computeFrenetFrames(u,le),T=new W,P=new W,D=new W}f||(x=0,m=0,g=0,y=0);const A=a.extractPoints(c);let R=A.shape;const N=A.holes;if(!Wo.isClockWise(R)){R=R.reverse();for(let le=0,we=N.length;le<we;le++){const ve=N[le];Wo.isClockWise(ve)&&(N[le]=ve.reverse())}}function H(le){const ve=10000000000000001e-36;let Ae=le[0];for(let V=1;V<=le.length;V++){const mt=V%le.length,$e=le[mt],_t=$e.x-Ae.x,Ne=$e.y-Ae.y,B=_t*_t+Ne*Ne,L=Math.max(Math.abs($e.x),Math.abs($e.y),Math.abs(Ae.x),Math.abs(Ae.y)),Q=ve*L*L;if(B<=Q){le.splice(mt,1),V--;continue}Ae=$e}}H(R),N.forEach(H);const q=N.length,Z=R;for(let le=0;le<q;le++){const we=N[le];R=R.concat(we)}function G(le,we,ve){return we||wt("ExtrudeGeometry: vec does not exist"),le.clone().addScaledVector(we,ve)}const Y=R.length;function z(le,we,ve){let Ae,V,mt;const $e=le.x-we.x,_t=le.y-we.y,Ne=ve.x-le.x,B=ve.y-le.y,L=$e*$e+_t*_t,Q=$e*B-_t*Ne;if(Math.abs(Q)>Number.EPSILON){const re=Math.sqrt(L),Se=Math.sqrt(Ne*Ne+B*B),he=we.x-_t/re,rt=we.y+$e/re,Ue=ve.x-B/Se,ut=ve.y+Ne/Se,Ct=((Ue-he)*B-(ut-rt)*Ne)/($e*B-_t*Ne);Ae=he+$e*Ct-le.x,V=rt+_t*Ct-le.y;const Ie=Ae*Ae+V*V;if(Ie<=2)return new Ce(Ae,V);mt=Math.sqrt(Ie/2)}else{let re=!1;$e>Number.EPSILON?Ne>Number.EPSILON&&(re=!0):$e<-Number.EPSILON?Ne<-Number.EPSILON&&(re=!0):Math.sign(_t)===Math.sign(B)&&(re=!0),re?(Ae=-_t,V=$e,mt=Math.sqrt(L)):(Ae=$e,V=_t,mt=Math.sqrt(L/2))}return new Ce(Ae/mt,V/mt)}const $=[];for(let le=0,we=Z.length,ve=we-1,Ae=le+1;le<we;le++,ve++,Ae++)ve===we&&(ve=0),Ae===we&&(Ae=0),$[le]=z(Z[le],Z[ve],Z[Ae]);const X=[];let K,oe=$.concat();for(let le=0,we=q;le<we;le++){const ve=N[le];K=[];for(let Ae=0,V=ve.length,mt=V-1,$e=Ae+1;Ae<V;Ae++,mt++,$e++)mt===V&&(mt=0),$e===V&&($e=0),K[Ae]=z(ve[Ae],ve[mt],ve[$e]);X.push(K),oe=oe.concat(K)}let pe;if(x===0)pe=Wo.triangulateShape(Z,N);else{const le=[],we=[];for(let ve=0;ve<x;ve++){const Ae=ve/x,V=m*Math.cos(Ae*Math.PI/2),mt=g*Math.sin(Ae*Math.PI/2)+y;for(let $e=0,_t=Z.length;$e<_t;$e++){const Ne=G(Z[$e],$[$e],mt);tt(Ne.x,Ne.y,-V),Ae===0&&le.push(Ne)}for(let $e=0,_t=q;$e<_t;$e++){const Ne=N[$e];K=X[$e];const B=[];for(let L=0,Q=Ne.length;L<Q;L++){const re=G(Ne[L],K[L],mt);tt(re.x,re.y,-V),Ae===0&&B.push(re)}Ae===0&&we.push(B)}}pe=Wo.triangulateShape(le,we)}const be=pe.length,it=g+y;for(let le=0;le<Y;le++){const we=f?G(R[le],oe[le],it):R[le];S?(P.copy(E.normals[0]).multiplyScalar(we.x),T.copy(E.binormals[0]).multiplyScalar(we.y),D.copy(_[0]).add(P).add(T),tt(D.x,D.y,D.z)):tt(we.x,we.y,0)}for(let le=1;le<=u;le++)for(let we=0;we<Y;we++){const ve=f?G(R[we],oe[we],it):R[we];S?(P.copy(E.normals[le]).multiplyScalar(ve.x),T.copy(E.binormals[le]).multiplyScalar(ve.y),D.copy(_[le]).add(P).add(T),tt(D.x,D.y,D.z)):tt(ve.x,ve.y,d/u*le)}for(let le=x-1;le>=0;le--){const we=le/x,ve=m*Math.cos(we*Math.PI/2),Ae=g*Math.sin(we*Math.PI/2)+y;for(let V=0,mt=Z.length;V<mt;V++){const $e=G(Z[V],$[V],Ae);tt($e.x,$e.y,d+ve)}for(let V=0,mt=N.length;V<mt;V++){const $e=N[V];K=X[V];for(let _t=0,Ne=$e.length;_t<Ne;_t++){const B=G($e[_t],K[_t],Ae);S?tt(B.x,B.y+_[u-1].y,_[u-1].x+ve):tt(B.x,B.y,d+ve)}}}ae(),me();function ae(){const le=r.length/3;if(f){let we=0,ve=Y*we;for(let Ae=0;Ae<be;Ae++){const V=pe[Ae];Be(V[2]+ve,V[1]+ve,V[0]+ve)}we=u+x*2,ve=Y*we;for(let Ae=0;Ae<be;Ae++){const V=pe[Ae];Be(V[0]+ve,V[1]+ve,V[2]+ve)}}else{for(let we=0;we<be;we++){const ve=pe[we];Be(ve[2],ve[1],ve[0])}for(let we=0;we<be;we++){const ve=pe[we];Be(ve[0]+Y*u,ve[1]+Y*u,ve[2]+Y*u)}}i.addGroup(le,r.length/3-le,0)}function me(){const le=r.length/3;let we=0;Fe(Z,we),we+=Z.length;for(let ve=0,Ae=N.length;ve<Ae;ve++){const V=N[ve];Fe(V,we),we+=V.length}i.addGroup(le,r.length/3-le,1)}function Fe(le,we){let ve=le.length;for(;--ve>=0;){const Ae=ve;let V=ve-1;V<0&&(V=le.length-1);for(let mt=0,$e=u+x*2;mt<$e;mt++){const _t=Y*mt,Ne=Y*(mt+1),B=we+Ae+_t,L=we+V+_t,Q=we+V+Ne,re=we+Ae+Ne;yt(B,L,Q,re)}}}function tt(le,we,ve){l.push(le),l.push(we),l.push(ve)}function Be(le,we,ve){It(le),It(we),It(ve);const Ae=r.length/3,V=w.generateTopUV(i,r,Ae-3,Ae-2,Ae-1);Re(V[0]),Re(V[1]),Re(V[2])}function yt(le,we,ve,Ae){It(le),It(we),It(Ae),It(we),It(ve),It(Ae);const V=r.length/3,mt=w.generateSideWallUV(i,r,V-6,V-3,V-2,V-1);Re(mt[0]),Re(mt[1]),Re(mt[3]),Re(mt[1]),Re(mt[2]),Re(mt[3])}function It(le){r.push(l[le*3+0]),r.push(l[le*3+1]),r.push(l[le*3+2])}function Re(le){o.push(le.x),o.push(le.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,i=this.parameters.options;return XZ(n,i,e)}static fromJSON(e,n){const i=[];for(let o=0,s=e.shapes.length;o<s;o++){const a=n[e.shapes[o]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new oy[r.type]().fromJSON(r)),new vx(i,e.options)}}const qZ={generateTopUV:function(t,e,n,i,r){const o=e[n*3],s=e[n*3+1],a=e[i*3],l=e[i*3+1],c=e[r*3],u=e[r*3+1];return[new Ce(o,s),new Ce(a,l),new Ce(c,u)]},generateSideWallUV:function(t,e,n,i,r,o){const s=e[n*3],a=e[n*3+1],l=e[n*3+2],c=e[i*3],u=e[i*3+1],d=e[i*3+2],f=e[r*3],m=e[r*3+1],g=e[r*3+2],y=e[o*3],x=e[o*3+1],v=e[o*3+2];return Math.abs(a-u)<Math.abs(s-c)?[new Ce(s,1-l),new Ce(c,1-d),new Ce(f,1-g),new Ce(y,1-v)]:[new Ce(a,1-l),new Ce(u,1-d),new Ce(m,1-g),new Ce(x,1-v)]}};function XZ(t,e,n){if(n.shapes=[],Array.isArray(t))for(let i=0,r=t.length;i<r;i++){const o=t[i];n.shapes.push(o.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class yx extends vl{constructor(e=1,n=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,o,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new yx(e.radius,e.detail)}}class xx extends zt{constructor(e=[new Ce(0,-.5),new Ce(.5,0),new Ce(0,.5)],n=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:i,phiLength:r},n=Math.floor(n),r=At(r,0,Math.PI*2);const o=[],s=[],a=[],l=[],c=[],u=1/n,d=new W,f=new Ce,m=new W,g=new W,y=new W;let x=0,v=0;for(let w=0;w<=e.length-1;w++)switch(w){case 0:x=e[w+1].x-e[w].x,v=e[w+1].y-e[w].y,m.x=v*1,m.y=-x,m.z=v*0,y.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(y.x,y.y,y.z);break;default:x=e[w+1].x-e[w].x,v=e[w+1].y-e[w].y,m.x=v*1,m.y=-x,m.z=v*0,g.copy(m),m.x+=y.x,m.y+=y.y,m.z+=y.z,m.normalize(),l.push(m.x,m.y,m.z),y.copy(g)}for(let w=0;w<=n;w++){const _=i+w*u*r,S=Math.sin(_),E=Math.cos(_);for(let T=0;T<=e.length-1;T++){d.x=e[T].x*S,d.y=e[T].y,d.z=e[T].x*E,s.push(d.x,d.y,d.z),f.x=w/n,f.y=T/(e.length-1),a.push(f.x,f.y);const P=l[3*T+0]*S,D=l[3*T+1],A=l[3*T+0]*E;c.push(P,D,A)}}for(let w=0;w<n;w++)for(let _=0;_<e.length-1;_++){const S=_+w*e.length,E=S,T=S+e.length,P=S+e.length+1,D=S+1;o.push(E,T,D),o.push(P,D,T)}this.setIndex(o),this.setAttribute("position",new at(s,3)),this.setAttribute("uv",new at(a,2)),this.setAttribute("normal",new at(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xx(e.points,e.segments,e.phiStart,e.phiLength)}}class Cp extends vl{constructor(e=1,n=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Cp(e.radius,e.detail)}}class zd extends zt{constructor(e=1,n=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:i,heightSegments:r};const o=e/2,s=n/2,a=Math.floor(i),l=Math.floor(r),c=a+1,u=l+1,d=e/a,f=n/l,m=[],g=[],y=[],x=[];for(let v=0;v<u;v++){const w=v*f-s;for(let _=0;_<c;_++){const S=_*d-o;g.push(S,-w,0),y.push(0,0,1),x.push(_/a),x.push(1-v/l)}}for(let v=0;v<l;v++)for(let w=0;w<a;w++){const _=w+c*v,S=w+c*(v+1),E=w+1+c*(v+1),T=w+1+c*v;m.push(_,S,T),m.push(S,E,T)}this.setIndex(m),this.setAttribute("position",new at(g,3)),this.setAttribute("normal",new at(y,3)),this.setAttribute("uv",new at(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zd(e.width,e.height,e.widthSegments,e.heightSegments)}}class wx extends zt{constructor(e=.5,n=1,i=32,r=1,o=0,s=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:i,phiSegments:r,thetaStart:o,thetaLength:s},i=Math.max(3,i),r=Math.max(1,r);const a=[],l=[],c=[],u=[];let d=e;const f=(n-e)/r,m=new W,g=new Ce;for(let y=0;y<=r;y++){for(let x=0;x<=i;x++){const v=o+x/i*s;m.x=d*Math.cos(v),m.y=d*Math.sin(v),l.push(m.x,m.y,m.z),c.push(0,0,1),g.x=(m.x/n+1)/2,g.y=(m.y/n+1)/2,u.push(g.x,g.y)}d+=f}for(let y=0;y<r;y++){const x=y*(i+1);for(let v=0;v<i;v++){const w=v+x,_=w,S=w+i+1,E=w+i+2,T=w+1;a.push(_,S,T),a.push(S,E,T)}}this.setIndex(a),this.setAttribute("position",new at(l,3)),this.setAttribute("normal",new at(c,3)),this.setAttribute("uv",new at(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new wx(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class _x extends zt{constructor(e=new fc([new Ce(0,.5),new Ce(-.5,-.5),new Ce(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const i=[],r=[],o=[],s=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new at(r,3)),this.setAttribute("normal",new at(o,3)),this.setAttribute("uv",new at(s,2));function c(u){const d=r.length/3,f=u.extractPoints(n);let m=f.shape;const g=f.holes;Wo.isClockWise(m)===!1&&(m=m.reverse());for(let x=0,v=g.length;x<v;x++){const w=g[x];Wo.isClockWise(w)===!0&&(g[x]=w.reverse())}const y=Wo.triangulateShape(m,g);for(let x=0,v=g.length;x<v;x++){const w=g[x];m=m.concat(w)}for(let x=0,v=m.length;x<v;x++){const w=m[x];r.push(w.x,w.y,0),o.push(0,0,1),s.push(w.x,w.y)}for(let x=0,v=y.length;x<v;x++){const w=y[x],_=w[0]+d,S=w[1]+d,E=w[2]+d;i.push(_,S,E),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return YZ(n,e)}static fromJSON(e,n){const i=[];for(let r=0,o=e.shapes.length;r<o;r++){const s=n[e.shapes[r]];i.push(s)}return new _x(i,e.curveSegments)}}function YZ(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,i=t.length;n<i;n++){const r=t[n];e.shapes.push(r.uuid)}else e.shapes.push(t.uuid);return e}class Ep extends zt{constructor(e=1,n=32,i=16,r=0,o=Math.PI*2,s=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:i,phiStart:r,phiLength:o,thetaStart:s,thetaLength:a},n=Math.max(3,Math.floor(n)),i=Math.max(2,Math.floor(i));const l=Math.min(s+a,Math.PI);let c=0;const u=[],d=new W,f=new W,m=[],g=[],y=[],x=[];for(let v=0;v<=i;v++){const w=[],_=v/i;let S=0;v===0&&s===0?S=.5/n:v===i&&l===Math.PI&&(S=-.5/n);for(let E=0;E<=n;E++){const T=E/n;d.x=-e*Math.cos(r+T*o)*Math.sin(s+_*a),d.y=e*Math.cos(s+_*a),d.z=e*Math.sin(r+T*o)*Math.sin(s+_*a),g.push(d.x,d.y,d.z),f.copy(d).normalize(),y.push(f.x,f.y,f.z),x.push(T+S,1-_),w.push(c++)}u.push(w)}for(let v=0;v<i;v++)for(let w=0;w<n;w++){const _=u[v][w+1],S=u[v][w],E=u[v+1][w],T=u[v+1][w+1];(v!==0||s>0)&&m.push(_,S,T),(v!==i-1||l<Math.PI)&&m.push(S,E,T)}this.setIndex(m),this.setAttribute("position",new at(g,3)),this.setAttribute("normal",new at(y,3)),this.setAttribute("uv",new at(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ep(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class bx extends vl{constructor(e=1,n=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new bx(e.radius,e.detail)}}class Sx extends zt{constructor(e=1,n=.4,i=12,r=48,o=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:i,tubularSegments:r,arc:o},i=Math.floor(i),r=Math.floor(r);const s=[],a=[],l=[],c=[],u=new W,d=new W,f=new W;for(let m=0;m<=i;m++)for(let g=0;g<=r;g++){const y=g/r*o,x=m/i*Math.PI*2;d.x=(e+n*Math.cos(x))*Math.cos(y),d.y=(e+n*Math.cos(x))*Math.sin(y),d.z=n*Math.sin(x),a.push(d.x,d.y,d.z),u.x=e*Math.cos(y),u.y=e*Math.sin(y),f.subVectors(d,u).normalize(),l.push(f.x,f.y,f.z),c.push(g/r),c.push(m/i)}for(let m=1;m<=i;m++)for(let g=1;g<=r;g++){const y=(r+1)*m+g-1,x=(r+1)*(m-1)+g-1,v=(r+1)*(m-1)+g,w=(r+1)*m+g;s.push(y,x,w),s.push(x,v,w)}this.setIndex(s),this.setAttribute("position",new at(a,3)),this.setAttribute("normal",new at(l,3)),this.setAttribute("uv",new at(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Sx(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Mx extends zt{constructor(e=1,n=.4,i=64,r=8,o=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:i,radialSegments:r,p:o,q:s},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],c=[],u=[],d=new W,f=new W,m=new W,g=new W,y=new W,x=new W,v=new W;for(let _=0;_<=i;++_){const S=_/i*o*Math.PI*2;w(S,o,s,e,m),w(S+.01,o,s,e,g),x.subVectors(g,m),v.addVectors(g,m),y.crossVectors(x,v),v.crossVectors(y,x),y.normalize(),v.normalize();for(let E=0;E<=r;++E){const T=E/r*Math.PI*2,P=-n*Math.cos(T),D=n*Math.sin(T);d.x=m.x+(P*v.x+D*y.x),d.y=m.y+(P*v.y+D*y.y),d.z=m.z+(P*v.z+D*y.z),l.push(d.x,d.y,d.z),f.subVectors(d,m).normalize(),c.push(f.x,f.y,f.z),u.push(_/i),u.push(E/r)}}for(let _=1;_<=i;_++)for(let S=1;S<=r;S++){const E=(r+1)*(_-1)+(S-1),T=(r+1)*_+(S-1),P=(r+1)*_+S,D=(r+1)*(_-1)+S;a.push(E,T,D),a.push(T,P,D)}this.setIndex(a),this.setAttribute("position",new at(l,3)),this.setAttribute("normal",new at(c,3)),this.setAttribute("uv",new at(u,2));function w(_,S,E,T,P){const D=Math.cos(_),A=Math.sin(_),R=E/S*_,N=Math.cos(R);P.x=T*(2+N)*.5*D,P.y=T*(2+N)*A*.5,P.z=T*Math.sin(R)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mx(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Cx extends zt{constructor(e=new UC(new W(-1,-1,0),new W(-1,1,0),new W(1,1,0)),n=64,i=1,r=8,o=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:i,radialSegments:r,closed:o};const s=e.computeFrenetFrames(n,o);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;const a=new W,l=new W,c=new Ce;let u=new W;const d=[],f=[],m=[],g=[];y(),this.setIndex(g),this.setAttribute("position",new at(d,3)),this.setAttribute("normal",new at(f,3)),this.setAttribute("uv",new at(m,2));function y(){for(let _=0;_<n;_++)x(_);x(o===!1?n:0),w(),v()}function x(_){u=e.getPointAt(_/n,u);const S=s.normals[_],E=s.binormals[_];for(let T=0;T<=r;T++){const P=T/r*Math.PI*2,D=Math.sin(P),A=-Math.cos(P);l.x=A*S.x+D*E.x,l.y=A*S.y+D*E.y,l.z=A*S.z+D*E.z,l.normalize(),f.push(l.x,l.y,l.z),a.x=u.x+i*l.x,a.y=u.y+i*l.y,a.z=u.z+i*l.z,d.push(a.x,a.y,a.z)}}function v(){for(let _=1;_<=n;_++)for(let S=1;S<=r;S++){const E=(r+1)*(_-1)+(S-1),T=(r+1)*_+(S-1),P=(r+1)*_+S,D=(r+1)*(_-1)+S;g.push(E,T,D),g.push(T,P,D)}}function w(){for(let _=0;_<=n;_++)for(let S=0;S<=r;S++)c.x=_/n,c.y=S/r,m.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Cx(new oy[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class d5 extends zt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],i=new Set,r=new W,o=new W;if(e.index!==null){const s=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const d=l[c],f=d.start,m=d.count;for(let g=f,y=f+m;g<y;g+=3)for(let x=0;x<3;x++){const v=a.getX(g+x),w=a.getX(g+(x+1)%3);r.fromBufferAttribute(s,v),o.fromBufferAttribute(s,w),wR(r,o,i)===!0&&(n.push(r.x,r.y,r.z),n.push(o.x,o.y,o.z))}}}else{const s=e.attributes.position;for(let a=0,l=s.count/3;a<l;a++)for(let c=0;c<3;c++){const u=3*a+c,d=3*a+(c+1)%3;r.fromBufferAttribute(s,u),o.fromBufferAttribute(s,d),wR(r,o,i)===!0&&(n.push(r.x,r.y,r.z),n.push(o.x,o.y,o.z))}}this.setAttribute("position",new at(n,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function wR(t,e,n){const i=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return n.has(i)===!0||n.has(r)===!0?!1:(n.add(i),n.add(r),!0)}var _R=Object.freeze({__proto__:null,BoxGeometry:Nc,CapsuleGeometry:fx,CircleGeometry:px,ConeGeometry:Mp,CylinderGeometry:Sp,DodecahedronGeometry:mx,EdgesGeometry:t5,ExtrudeGeometry:vx,IcosahedronGeometry:yx,LatheGeometry:xx,OctahedronGeometry:Cp,PlaneGeometry:zd,PolyhedronGeometry:vl,RingGeometry:wx,ShapeGeometry:_x,SphereGeometry:Ep,TetrahedronGeometry:bx,TorusGeometry:Sx,TorusKnotGeometry:Mx,TubeGeometry:Cx,WireframeGeometry:d5});class h5 extends tr{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new et(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class HC extends no{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class VC extends tr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new et(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new et(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ml,this.normalScale=new Ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new to,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class f5 extends VC{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ce(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return At(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new et(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new et(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new et(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class p5 extends tr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new et(16777215),this.specular=new et(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new et(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ml,this.normalScale=new Ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new to,this.combine=xp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class m5 extends tr{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new et(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new et(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ml,this.normalScale=new Ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class g5 extends tr{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ml,this.normalScale=new Ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class v5 extends tr{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new et(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new et(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ml,this.normalScale=new Ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new to,this.combine=xp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class $C extends tr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=IU,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class WC extends tr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class y5 extends tr{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new et(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ml,this.normalScale=new Ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this.fog=e.fog,this}}class x5 extends gr{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function oc(t,e){return!t||t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function w5(t){function e(r,o){return t[r]-t[o]}const n=t.length,i=new Array(n);for(let r=0;r!==n;++r)i[r]=r;return i.sort(e),i}function lS(t,e,n){const i=t.length,r=new t.constructor(i);for(let o=0,s=0;s!==i;++o){const a=n[o]*e;for(let l=0;l!==e;++l)r[s++]=t[a+l]}return r}function GC(t,e,n,i){let r=1,o=t[0];for(;o!==void 0&&o[i]===void 0;)o=t[r++];if(o===void 0)return;let s=o[i];if(s!==void 0)if(Array.isArray(s))do s=o[i],s!==void 0&&(e.push(o.time),n.push(...s)),o=t[r++];while(o!==void 0);else if(s.toArray!==void 0)do s=o[i],s!==void 0&&(e.push(o.time),s.toArray(n,n.length)),o=t[r++];while(o!==void 0);else do s=o[i],s!==void 0&&(e.push(o.time),n.push(s)),o=t[r++];while(o!==void 0)}function ZZ(t,e,n,i,r=30){const o=t.clone();o.name=e;const s=[];for(let l=0;l<o.tracks.length;++l){const c=o.tracks[l],u=c.getValueSize(),d=[],f=[];for(let m=0;m<c.times.length;++m){const g=c.times[m]*r;if(!(g<n||g>=i)){d.push(c.times[m]);for(let y=0;y<u;++y)f.push(c.values[m*u+y])}}d.length!==0&&(c.times=oc(d,c.times.constructor),c.values=oc(f,c.values.constructor),s.push(c))}o.tracks=s;let a=1/0;for(let l=0;l<o.tracks.length;++l)a>o.tracks[l].times[0]&&(a=o.tracks[l].times[0]);for(let l=0;l<o.tracks.length;++l)o.tracks[l].shift(-1*a);return o.resetDuration(),o}function KZ(t,e=0,n=t,i=30){i<=0&&(i=30);const r=n.tracks.length,o=e/i;for(let s=0;s<r;++s){const a=n.tracks[s],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=t.tracks.find(function(v){return v.name===a.name&&v.ValueTypeName===l});if(c===void 0)continue;let u=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=d/3);let f=0;const m=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=m/3);const g=a.times.length-1;let y;if(o<=a.times[0]){const v=u,w=d-u;y=a.values.slice(v,w)}else if(o>=a.times[g]){const v=g*d+u,w=v+d-u;y=a.values.slice(v,w)}else{const v=a.createInterpolant(),w=u,_=d-u;v.evaluate(o),y=v.resultBuffer.slice(w,_)}l==="quaternion"&&new Lr().fromArray(y).normalize().conjugate().toArray(y);const x=c.times.length;for(let v=0;v<x;++v){const w=v*m+f;if(l==="quaternion")Lr.multiplyQuaternionsFlat(c.values,w,y,0,c.values,w);else{const _=m-f*2;for(let S=0;S<_;++S)c.values[w+S]-=y[S]}}}return t.blendMode=MC,t}class QZ{static convertArray(e,n){return oc(e,n)}static isTypedArray(e){return FU(e)}static getKeyframeOrder(e){return w5(e)}static sortedArray(e,n,i){return lS(e,n,i)}static flattenJSON(e,n,i,r){GC(e,n,i,r)}static subclip(e,n,i,r,o=30){return ZZ(e,n,i,r,o)}static makeClipAdditive(e,n=0,i=e,r=30){return KZ(e,n,i,r)}}class Tp{constructor(e,n,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new n.constructor(i),this.sampleValues=n,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let i=this._cachedIndex,r=n[i],o=n[i-1];e:{t:{let s;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<o)break i;return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(o=r,r=n[++i],e<r)break t}s=n.length;break n}if(!(e>=o)){const a=n[1];e<a&&(i=2,o=a);for(let l=i-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=o,o=n[--i-1],e>=o)break t}s=i,i=0;break n}break e}for(;i<s;){const a=i+s>>>1;e<n[a]?s=a:i=a+1}if(r=n[i],o=n[i-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,o,r)}return this.interpolate_(i,o,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,i=this.sampleValues,r=this.valueSize,o=e*r;for(let s=0;s!==r;++s)n[s]=i[o+s];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class _5 extends Tp{constructor(e,n,i,r){super(e,n,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ic,endingEnd:ic}}intervalChanged_(e,n,i){const r=this.parameterPositions;let o=e-2,s=e+1,a=r[o],l=r[s];if(a===void 0)switch(this.getSettings_().endingStart){case rc:o=e,a=2*n-i;break;case Hf:o=r.length-2,a=n+r[o]-r[o+1];break;default:o=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case rc:s=e,l=2*i-n;break;case Hf:s=1,l=i+r[1]-r[0];break;default:s=e-1,l=n}const c=(i-n)*.5,u=this.valueSize;this._weightPrev=c/(n-a),this._weightNext=c/(l-i),this._offsetPrev=o*u,this._offsetNext=s*u}interpolate_(e,n,i,r){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,d=this._offsetNext,f=this._weightPrev,m=this._weightNext,g=(i-n)/(r-n),y=g*g,x=y*g,v=-f*x+2*f*y-f*g,w=(1+f)*x+(-1.5-2*f)*y+(-.5+f)*g+1,_=(-1-m)*x+(1.5+m)*y+.5*g,S=m*x-m*y;for(let E=0;E!==a;++E)o[E]=v*s[u+E]+w*s[c+E]+_*s[l+E]+S*s[d+E];return o}}class jC extends Tp{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e,n,i,r){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(i-n)/(r-n),d=1-u;for(let f=0;f!==a;++f)o[f]=s[c+f]*d+s[l+f]*u;return o}}class b5 extends Tp{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Io{constructor(e,n,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=oc(n,this.TimeBufferType),this.values=oc(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let i;if(n.toJSON!==this.toJSON)i=n.toJSON(e);else{i={name:e.name,times:oc(e.times,Array),values:oc(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new b5(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new jC(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new _5(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case Bf:n=this.InterpolantFactoryMethodDiscrete;break;case ny:n=this.InterpolantFactoryMethodLinear;break;case xv:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return qe("KeyframeTrack:",i),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Bf;case this.InterpolantFactoryMethodLinear:return ny;case this.InterpolantFactoryMethodSmooth:return xv}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let i=0,r=n.length;i!==r;++i)n[i]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let i=0,r=n.length;i!==r;++i)n[i]*=e}return this}trim(e,n){const i=this.times,r=i.length;let o=0,s=r-1;for(;o!==r&&i[o]<e;)++o;for(;s!==-1&&i[s]>n;)--s;if(++s,o!==0||s!==r){o>=s&&(s=Math.max(s,1),o=s-1);const a=this.getValueSize();this.times=i.slice(o,s),this.values=this.values.slice(o*a,s*a)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(wt("KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,o=i.length;o===0&&(wt("KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let a=0;a!==o;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){wt("KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(s!==null&&s>l){wt("KeyframeTrack: Out of order keys.",this,a,l,s),e=!1;break}s=l}if(r!==void 0&&FU(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){wt("KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),n=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===xv,o=e.length-1;let s=1;for(let a=1;a<o;++a){let l=!1;const c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(r)l=!0;else{const d=a*i,f=d-i,m=d+i;for(let g=0;g!==i;++g){const y=n[d+g];if(y!==n[f+g]||y!==n[m+g]){l=!0;break}}}if(l){if(a!==s){e[s]=e[a];const d=a*i,f=s*i;for(let m=0;m!==i;++m)n[f+m]=n[d+m]}++s}}if(o>0){e[s]=e[o];for(let a=o*i,l=s*i,c=0;c!==i;++c)n[l+c]=n[a+c];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=n.slice(0,s*i)):(this.times=e,this.values=n),this}clone(){const e=this.times.slice(),n=this.values.slice(),i=this.constructor,r=new i(this.name,e,n);return r.createInterpolant=this.createInterpolant,r}}Io.prototype.ValueTypeName="";Io.prototype.TimeBufferType=Float32Array;Io.prototype.ValueBufferType=Float32Array;Io.prototype.DefaultInterpolation=ny;class Lc extends Io{constructor(e,n,i){super(e,n,i)}}Lc.prototype.ValueTypeName="bool";Lc.prototype.ValueBufferType=Array;Lc.prototype.DefaultInterpolation=Bf;Lc.prototype.InterpolantFactoryMethodLinear=void 0;Lc.prototype.InterpolantFactoryMethodSmooth=void 0;class qC extends Io{constructor(e,n,i,r){super(e,n,i,r)}}qC.prototype.ValueTypeName="color";class Yf extends Io{constructor(e,n,i,r){super(e,n,i,r)}}Yf.prototype.ValueTypeName="number";class S5 extends Tp{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e,n,i,r){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=(i-n)/(r-n);let c=e*a;for(let u=c+a;c!==u;c+=4)Lr.slerpFlat(o,0,s,c-a,s,c,l);return o}}class Ap extends Io{constructor(e,n,i,r){super(e,n,i,r)}InterpolantFactoryMethodLinear(e){return new S5(this.times,this.values,this.getValueSize(),e)}}Ap.prototype.ValueTypeName="quaternion";Ap.prototype.InterpolantFactoryMethodSmooth=void 0;class zc extends Io{constructor(e,n,i){super(e,n,i)}}zc.prototype.ValueTypeName="string";zc.prototype.ValueBufferType=Array;zc.prototype.DefaultInterpolation=Bf;zc.prototype.InterpolantFactoryMethodLinear=void 0;zc.prototype.InterpolantFactoryMethodSmooth=void 0;class Zf extends Io{constructor(e,n,i,r){super(e,n,i,r)}}Zf.prototype.ValueTypeName="vector";class Kf{constructor(e="",n=-1,i=[],r=nx){this.name=e,this.tracks=i,this.duration=n,this.blendMode=r,this.uuid=Qr(),this.userData={},this.duration<0&&this.resetDuration()}static parse(e){const n=[],i=e.tracks,r=1/(e.fps||1);for(let s=0,a=i.length;s!==a;++s)n.push(eK(i[s]).scale(r));const o=new this(e.name,e.duration,n,e.blendMode);return o.uuid=e.uuid,o.userData=JSON.parse(e.userData||"{}"),o}static toJSON(e){const n=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode,userData:JSON.stringify(e.userData)};for(let o=0,s=i.length;o!==s;++o)n.push(Io.toJSON(i[o]));return r}static CreateFromMorphTargetSequence(e,n,i,r){const o=n.length,s=[];for(let a=0;a<o;a++){let l=[],c=[];l.push((a+o-1)%o,a,(a+1)%o),c.push(0,1,0);const u=w5(l);l=lS(l,1,u),c=lS(c,1,u),!r&&l[0]===0&&(l.push(o),c.push(c[0])),s.push(new Yf(".morphTargetInfluences["+n[a].name+"]",l,c).scale(1/i))}return new this(e,-1,s)}static findByName(e,n){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===n)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,n,i){const r={},o=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(o);if(u&&u.length>1){const d=u[1];let f=r[d];f||(r[d]=f=[]),f.push(c)}}const s=[];for(const a in r)s.push(this.CreateFromMorphTargetSequence(a,r[a],n,i));return s}static parseAnimation(e,n){if(qe("AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return wt("AnimationClip: No animation in JSONLoader data."),null;const i=function(d,f,m,g,y){if(m.length!==0){const x=[],v=[];GC(m,x,v,g),x.length!==0&&y.push(new d(f,x,v))}},r=[],o=e.name||"default",s=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let d=0;d<c.length;d++){const f=c[d].keys;if(!(!f||f.length===0))if(f[0].morphTargets){const m={};let g;for(g=0;g<f.length;g++)if(f[g].morphTargets)for(let y=0;y<f[g].morphTargets.length;y++)m[f[g].morphTargets[y]]=-1;for(const y in m){const x=[],v=[];for(let w=0;w!==f[g].morphTargets.length;++w){const _=f[g];x.push(_.time),v.push(_.morphTarget===y?1:0)}r.push(new Yf(".morphTargetInfluence["+y+"]",x,v))}l=m.length*s}else{const m=".bones["+n[d].name+"]";i(Zf,m+".position",f,"pos",r),i(Ap,m+".quaternion",f,"rot",r),i(Zf,m+".scale",f,"scl",r)}}return r.length===0?null:new this(o,l,r,a)}resetDuration(){const e=this.tracks;let n=0;for(let i=0,r=e.length;i!==r;++i){const o=this.tracks[i];n=Math.max(n,o.times[o.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let i=0;i<this.tracks.length;i++)e.push(this.tracks[i].clone());const n=new this.constructor(this.name,this.duration,e,this.blendMode);return n.userData=JSON.parse(JSON.stringify(this.userData)),n}toJSON(){return this.constructor.toJSON(this)}}function JZ(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Yf;case"vector":case"vector2":case"vector3":case"vector4":return Zf;case"color":return qC;case"quaternion":return Ap;case"bool":case"boolean":return Lc;case"string":return zc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function eK(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=JZ(t.type);if(t.times===void 0){const n=[],i=[];GC(t.keys,n,i,"value"),t.times=n,t.values=i}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const gs={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class XC{constructor(e,n,i){const r=this;let o=!1,s=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=i,this._abortController=null,this.itemStart=function(u){a++,o===!1&&r.onStart!==void 0&&r.onStart(u,s,a),o=!0},this.itemEnd=function(u){s++,r.onProgress!==void 0&&r.onProgress(u,s,a),s===a&&(o=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(u){r.onError!==void 0&&r.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,d){return c.push(u,d),this},this.removeHandler=function(u){const d=c.indexOf(u);return d!==-1&&c.splice(d,2),this},this.getHandler=function(u){for(let d=0,f=c.length;d<f;d+=2){const m=c[d],g=c[d+1];if(m.global&&(m.lastIndex=0),m.test(u))return g}return null},this.abort=function(){return this.abortController.abort(),this._abortController=null,this}}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}}const M5=new XC;class Or{constructor(e){this.manager=e!==void 0?e:M5,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const i=this;return new Promise(function(r,o){i.load(e,r,n,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}Or.DEFAULT_MATERIAL_NAME="__DEFAULT";const Gs={};class tK extends Error{constructor(e,n){super(e),this.response=n}}class ua extends Or{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,n,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=gs.get(`file:${e}`);if(o!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(o),this.manager.itemEnd(e)},0),o;if(Gs[e]!==void 0){Gs[e].push({onLoad:n,onProgress:i,onError:r});return}Gs[e]=[],Gs[e].push({onLoad:n,onProgress:i,onError:r});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),a=this.mimeType,l=this.responseType;fetch(s).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&qe("FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=Gs[e],d=c.body.getReader(),f=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),m=f?parseInt(f):0,g=m!==0;let y=0;const x=new ReadableStream({start(v){w();function w(){d.read().then(({done:_,value:S})=>{if(_)v.close();else{y+=S.byteLength;const E=new ProgressEvent("progress",{lengthComputable:g,loaded:y,total:m});for(let T=0,P=u.length;T<P;T++){const D=u[T];D.onProgress&&D.onProgress(E)}v.enqueue(S),w()}},_=>{v.error(_)})}}});return new Response(x)}else throw new tK(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return c.json();default:if(a==="")return c.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),f=d&&d[1]?d[1].toLowerCase():void 0,m=new TextDecoder(f);return c.arrayBuffer().then(g=>m.decode(g))}}}).then(c=>{gs.add(`file:${e}`,c);const u=Gs[e];delete Gs[e];for(let d=0,f=u.length;d<f;d++){const m=u[d];m.onLoad&&m.onLoad(c)}}).catch(c=>{const u=Gs[e];if(u===void 0)throw this.manager.itemError(e),c;delete Gs[e];for(let d=0,f=u.length;d<f;d++){const m=u[d];m.onError&&m.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class nK extends Or{constructor(e){super(e)}load(e,n,i,r){const o=this,s=new ua(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(a){try{n(o.parse(JSON.parse(a)))}catch(l){r?r(l):wt(l),o.manager.itemError(e)}},i,r)}parse(e){const n=[];for(let i=0;i<e.length;i++){const r=Kf.parse(e[i]);n.push(r)}return n}}class iK extends Or{constructor(e){super(e)}load(e,n,i,r){const o=this,s=[],a=new hx,l=new ua(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(o.withCredentials);let c=0;function u(d){l.load(e[d],function(f){const m=o.parse(f,!0);s[d]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},c+=1,c===6&&(m.mipmapCount===1&&(a.minFilter=Nn),a.image=s,a.format=m.format,a.needsUpdate=!0,n&&n(a))},i,r)}if(Array.isArray(e))for(let d=0,f=e.length;d<f;++d)u(d);else l.load(e,function(d){const f=o.parse(d,!0);if(f.isCubemap){const m=f.mipmaps.length/f.mipmapCount;for(let g=0;g<m;g++){s[g]={mipmaps:[]};for(let y=0;y<f.mipmapCount;y++)s[g].mipmaps.push(f.mipmaps[g*f.mipmapCount+y]),s[g].format=f.format,s[g].width=f.width,s[g].height=f.height}a.image=s}else a.image.width=f.width,a.image.height=f.height,a.mipmaps=f.mipmaps;f.mipmapCount===1&&(a.minFilter=Nn),a.format=f.format,a.needsUpdate=!0,n&&n(a)},i,r);return a}}const wu=new WeakMap;class Qf extends Or{constructor(e){super(e)}load(e,n,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,s=gs.get(`image:${e}`);if(s!==void 0){if(s.complete===!0)o.manager.itemStart(e),setTimeout(function(){n&&n(s),o.manager.itemEnd(e)},0);else{let d=wu.get(s);d===void 0&&(d=[],wu.set(s,d)),d.push({onLoad:n,onError:r})}return s}const a=Wf("img");function l(){u(),n&&n(this);const d=wu.get(this)||[];for(let f=0;f<d.length;f++){const m=d[f];m.onLoad&&m.onLoad(this)}wu.delete(this),o.manager.itemEnd(e)}function c(d){u(),r&&r(d),gs.remove(`image:${e}`);const f=wu.get(this)||[];for(let m=0;m<f.length;m++){const g=f[m];g.onError&&g.onError(d)}wu.delete(this),o.manager.itemError(e),o.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),gs.add(`image:${e}`,a),o.manager.itemStart(e),a.src=e,a}}class rK extends Or{constructor(e){super(e)}load(e,n,i,r){const o=new bp;o.colorSpace=Cr;const s=new Qf(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let a=0;function l(c){s.load(e[c],function(u){o.images[c]=u,a++,a===6&&(o.needsUpdate=!0,n&&n(o))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return o}}class oK extends Or{constructor(e){super(e)}load(e,n,i,r){const o=this,s=new Yo,a=new ua(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(o.withCredentials),a.load(e,function(l){let c;try{c=o.parse(l)}catch(u){if(r!==void 0)r(u);else{u(u);return}}c.image!==void 0?s.image=c.image:c.data!==void 0&&(s.image.width=c.width,s.image.height=c.height,s.image.data=c.data),s.wrapS=c.wrapS!==void 0?c.wrapS:Pr,s.wrapT=c.wrapT!==void 0?c.wrapT:Pr,s.magFilter=c.magFilter!==void 0?c.magFilter:Nn,s.minFilter=c.minFilter!==void 0?c.minFilter:Nn,s.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0&&(s.colorSpace=c.colorSpace),c.flipY!==void 0&&(s.flipY=c.flipY),c.format!==void 0&&(s.format=c.format),c.type!==void 0&&(s.type=c.type),c.mipmaps!==void 0&&(s.mipmaps=c.mipmaps,s.minFilter=ms),c.mipmapCount===1&&(s.minFilter=Nn),c.generateMipmaps!==void 0&&(s.generateMipmaps=c.generateMipmaps),s.needsUpdate=!0,n&&n(s,c)},i,r),s}}class sK extends Or{constructor(e){super(e)}load(e,n,i,r){const o=new Kn,s=new Qf(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(a){o.image=a,o.needsUpdate=!0,n!==void 0&&n(o)},i,r),o}}class yl extends rn{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new et(e),this.intensity=n}dispose(){this.dispatchEvent({type:"dispose"})}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,n}}class C5 extends yl{constructor(e,n,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(rn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new et(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}toJSON(e){const n=super.toJSON(e);return n.object.groundColor=this.groundColor.getHex(),n}}const a_=new Dt,bR=new W,SR=new W;class YC{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ce(512,512),this.mapType=cr,this.map=null,this.mapPass=null,this.matrix=new Dt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Ld,this._frameExtents=new Ce(1,1),this._viewportCount=1,this._viewports=[new Sn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,i=this.matrix;bR.setFromMatrixPosition(e.matrixWorld),n.position.copy(bR),SR.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(SR),n.updateMatrixWorld(),a_.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(a_,n.coordinateSystem,n.reversedDepth),n.reversedDepth?i.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(a_)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class aK extends YC{constructor(){super(new Pi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const n=this.camera,i=xd*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height*this.aspect,o=e.distance||n.far;(i!==n.fov||r!==n.aspect||o!==n.far)&&(n.fov=i,n.aspect=r,n.far=o,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class E5 extends yl{constructor(e,n,i=0,r=Math.PI/3,o=0,s=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(rn.DEFAULT_UP),this.updateMatrix(),this.target=new rn,this.distance=i,this.angle=r,this.penumbra=o,this.decay=s,this.map=null,this.shadow=new aK}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){super.dispose(),this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.map=e.map,this.shadow=e.shadow.clone(),this}toJSON(e){const n=super.toJSON(e);return n.object.distance=this.distance,n.object.angle=this.angle,n.object.decay=this.decay,n.object.penumbra=this.penumbra,n.object.target=this.target.uuid,this.map&&this.map.isTexture&&(n.object.map=this.map.toJSON(e).uuid),n.object.shadow=this.shadow.toJSON(),n}}class lK extends YC{constructor(){super(new Pi(90,1,.5,500)),this.isPointLightShadow=!0}}class T5 extends yl{constructor(e,n,i=0,r=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new lK}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){super.dispose(),this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}toJSON(e){const n=super.toJSON(e);return n.object.distance=this.distance,n.object.decay=this.decay,n.object.shadow=this.shadow.toJSON(),n}}class Od extends _p{constructor(e=-1,n=1,i=1,r=-1,o=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=i,this.bottom=r,this.near=o,this.far=s,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,i,r,o,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let o=i-e,s=i+e,a=r+n,l=r-n;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=c*this.view.offsetX,s=o+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(o,s,a,l,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}class cK extends YC{constructor(){super(new Od(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class A5 extends yl{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(rn.DEFAULT_UP),this.updateMatrix(),this.target=new rn,this.shadow=new cK}dispose(){super.dispose(),this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}toJSON(e){const n=super.toJSON(e);return n.object.shadow=this.shadow.toJSON(),n.object.target=this.target.uuid,n}}class I5 extends yl{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class P5 extends yl{constructor(e,n,i=10,r=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class ZC{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new W)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const i=e.x,r=e.y,o=e.z,s=this.coefficients;return n.copy(s[0]).multiplyScalar(.282095),n.addScaledVector(s[1],.488603*r),n.addScaledVector(s[2],.488603*o),n.addScaledVector(s[3],.488603*i),n.addScaledVector(s[4],1.092548*(i*r)),n.addScaledVector(s[5],1.092548*(r*o)),n.addScaledVector(s[6],.315392*(3*o*o-1)),n.addScaledVector(s[7],1.092548*(i*o)),n.addScaledVector(s[8],.546274*(i*i-r*r)),n}getIrradianceAt(e,n){const i=e.x,r=e.y,o=e.z,s=this.coefficients;return n.copy(s[0]).multiplyScalar(.886227),n.addScaledVector(s[1],2*.511664*r),n.addScaledVector(s[2],2*.511664*o),n.addScaledVector(s[3],2*.511664*i),n.addScaledVector(s[4],2*.429043*i*r),n.addScaledVector(s[5],2*.429043*r*o),n.addScaledVector(s[6],.743125*o*o-.247708),n.addScaledVector(s[7],2*.429043*i*o),n.addScaledVector(s[8],.429043*(i*i-r*r)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,n+r*3);return this}toArray(e=[],n=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,n+r*3);return e}static getBasisAt(e,n){const i=e.x,r=e.y,o=e.z;n[0]=.282095,n[1]=.488603*r,n[2]=.488603*o,n[3]=.488603*i,n[4]=1.092548*i*r,n[5]=1.092548*r*o,n[6]=.315392*(3*o*o-1),n[7]=1.092548*i*o,n[8]=.546274*(i*i-r*r)}}class R5 extends yl{constructor(e=new ZC,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class Ex extends Or{constructor(e){super(e),this.textures={}}load(e,n,i,r){const o=this,s=new ua(o.manager);s.setPath(o.path),s.setRequestHeader(o.requestHeader),s.setWithCredentials(o.withCredentials),s.load(e,function(a){try{n(o.parse(JSON.parse(a)))}catch(l){r?r(l):wt(l),o.manager.itemError(e)}},i,r)}parse(e){const n=this.textures;function i(o){return n[o]===void 0&&qe("MaterialLoader: Undefined texture",o),n[o]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new et().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.allowOverride!==void 0&&(r.allowOverride=e.allowOverride),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const o in e.uniforms){const s=e.uniforms[o];switch(r.uniforms[o]={},s.type){case"t":r.uniforms[o].value=i(s.value);break;case"c":r.uniforms[o].value=new et().setHex(s.value);break;case"v2":r.uniforms[o].value=new Ce().fromArray(s.value);break;case"v3":r.uniforms[o].value=new W().fromArray(s.value);break;case"v4":r.uniforms[o].value=new Sn().fromArray(s.value);break;case"m3":r.uniforms[o].value=new Ut().fromArray(s.value);break;case"m4":r.uniforms[o].value=new Dt().fromArray(s.value);break;default:r.uniforms[o].value=s.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const o in e.extensions)r.extensions[o]=e.extensions[o];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let o=e.normalScale;Array.isArray(o)===!1&&(o=[o,o]),r.normalScale=new Ce().fromArray(o)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new Ce().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return Ex.createMaterialFromType(e)}static createMaterialFromType(e){const n={ShadowMaterial:h5,SpriteMaterial:RC,RawShaderMaterial:HC,ShaderMaterial:no,PointsMaterial:kC,MeshPhysicalMaterial:f5,MeshStandardMaterial:VC,MeshPhongMaterial:p5,MeshToonMaterial:m5,MeshNormalMaterial:g5,MeshLambertMaterial:v5,MeshDepthMaterial:$C,MeshDistanceMaterial:WC,MeshBasicMaterial:gl,MeshMatcapMaterial:y5,LineDashedMaterial:x5,LineBasicMaterial:gr,Material:tr};return new n[e]}}class cS{static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class D5 extends zt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class k5 extends Or{constructor(e){super(e)}load(e,n,i,r){const o=this,s=new ua(o.manager);s.setPath(o.path),s.setRequestHeader(o.requestHeader),s.setWithCredentials(o.withCredentials),s.load(e,function(a){try{n(o.parse(JSON.parse(a)))}catch(l){r?r(l):wt(l),o.manager.itemError(e)}},i,r)}parse(e){const n={},i={};function r(m,g){if(n[g]!==void 0)return n[g];const x=m.interleavedBuffers[g],v=o(m,x.buffer),w=Gu(x.type,v),_=new cx(w,x.stride);return _.uuid=x.uuid,n[g]=_,_}function o(m,g){if(i[g]!==void 0)return i[g];const x=m.arrayBuffers[g],v=new Uint32Array(x).buffer;return i[g]=v,v}const s=e.isInstancedBufferGeometry?new D5:new zt,a=e.data.index;if(a!==void 0){const m=Gu(a.type,a.array);s.setIndex(new wn(m,1))}const l=e.data.attributes;for(const m in l){const g=l[m];let y;if(g.isInterleavedBufferAttribute){const x=r(e.data,g.data);y=new Ec(x,g.itemSize,g.offset,g.normalized)}else{const x=Gu(g.type,g.array),v=g.isInstancedBufferAttribute?_d:wn;y=new v(x,g.itemSize,g.normalized)}g.name!==void 0&&(y.name=g.name),g.usage!==void 0&&y.setUsage(g.usage),s.setAttribute(m,y)}const c=e.data.morphAttributes;if(c)for(const m in c){const g=c[m],y=[];for(let x=0,v=g.length;x<v;x++){const w=g[x];let _;if(w.isInterleavedBufferAttribute){const S=r(e.data,w.data);_=new Ec(S,w.itemSize,w.offset,w.normalized)}else{const S=Gu(w.type,w.array);_=new wn(S,w.itemSize,w.normalized)}w.name!==void 0&&(_.name=w.name),y.push(_)}s.morphAttributes[m]=y}e.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let m=0,g=d.length;m!==g;++m){const y=d[m];s.addGroup(y.start,y.count,y.materialIndex)}const f=e.data.boundingSphere;return f!==void 0&&(s.boundingSphere=new zi().fromJSON(f)),e.name&&(s.name=e.name),e.userData&&(s.userData=e.userData),s}}class uK extends Or{constructor(e){super(e)}load(e,n,i,r){const o=this,s=this.path===""?cS.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const a=new ua(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(d){r!==void 0&&r(d),d("ObjectLoader: Can't parse "+e+".",d.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),wt("ObjectLoader: Can't load "+e);return}o.parse(c,n)},i,r)}async loadAsync(e,n){const i=this,r=this.path===""?cS.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const o=new ua(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials);const s=await o.loadAsync(e,n),a=JSON.parse(s),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,n){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),o=this.parseGeometries(e.geometries,r),s=this.parseImages(e.images,function(){n!==void 0&&n(c)}),a=this.parseTextures(e.textures,s),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,o,l,a,i),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),this.bindLightTargets(c),n!==void 0){let d=!1;for(const f in s)if(s[f].data instanceof HTMLImageElement){d=!0;break}d===!1&&n(c)}return c}async parseAsync(e){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),o=await this.parseImagesAsync(e.images),s=this.parseTextures(e.textures,o),a=this.parseMaterials(e.materials,s),l=this.parseObject(e.object,r,a,s,n),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),this.bindLightTargets(l),l}parseShapes(e){const n={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const o=new fc().fromJSON(e[i]);n[o.uuid]=o}return n}parseSkeletons(e,n){const i={},r={};if(n.traverse(function(o){o.isBone&&(r[o.uuid]=o)}),e!==void 0)for(let o=0,s=e.length;o<s;o++){const a=new ux().fromJSON(e[o],r);i[a.uuid]=a}return i}parseGeometries(e,n){const i={};if(e!==void 0){const r=new k5;for(let o=0,s=e.length;o<s;o++){let a;const l=e[o];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in _R?a=_R[l.type].fromJSON(l,n):qe(`ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,n){const i={},r={};if(e!==void 0){const o=new Ex;o.setTextures(n);for(let s=0,a=e.length;s<a;s++){const l=e[s];i[l.uuid]===void 0&&(i[l.uuid]=o.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const n={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],o=Kf.parse(r);n[o.uuid]=o}return n}parseImages(e,n){const i=this,r={};let o;function s(l){return i.manager.itemStart(l),o.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:i.resourcePath+c;return s(u)}else return l.data?{data:Gu(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new XC(n);o=new Qf(l),o.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const d=e[c],f=d.url;if(Array.isArray(f)){const m=[];for(let g=0,y=f.length;g<y;g++){const x=f[g],v=a(x);v!==null&&(v instanceof HTMLImageElement?m.push(v):m.push(new Yo(v.data,v.width,v.height)))}r[d.uuid]=new Ya(m)}else{const m=a(d.url);r[d.uuid]=new Ya(m)}}}return r}async parseImagesAsync(e){const n=this,i={};let r;async function o(s){if(typeof s=="string"){const a=s,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:n.resourcePath+a;return await r.loadAsync(l)}else return s.data?{data:Gu(s.type,s.data),width:s.width,height:s.height}:null}if(e!==void 0&&e.length>0){r=new Qf(this.manager),r.setCrossOrigin(this.crossOrigin);for(let s=0,a=e.length;s<a;s++){const l=e[s],c=l.url;if(Array.isArray(c)){const u=[];for(let d=0,f=c.length;d<f;d++){const m=c[d],g=await o(m);g!==null&&(g instanceof HTMLImageElement?u.push(g):u.push(new Yo(g.data,g.width,g.height)))}i[l.uuid]=new Ya(u)}else{const u=await o(l.url);i[l.uuid]=new Ya(u)}}}return i}parseTextures(e,n){function i(o,s){return typeof o=="number"?o:(qe("ObjectLoader.parseTexture: Constant should be in numeric form.",o),s[o])}const r={};if(e!==void 0)for(let o=0,s=e.length;o<s;o++){const a=e[o];a.image===void 0&&qe('ObjectLoader: No "image" specified for',a.uuid),n[a.image]===void 0&&qe("ObjectLoader: Undefined image",a.image);const l=n[a.image],c=l.data;let u;Array.isArray(c)?(u=new bp,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new Yo:u=new Kn,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=a.uuid,a.name!==void 0&&(u.name=a.name),a.mapping!==void 0&&(u.mapping=i(a.mapping,dK)),a.channel!==void 0&&(u.channel=a.channel),a.offset!==void 0&&u.offset.fromArray(a.offset),a.repeat!==void 0&&u.repeat.fromArray(a.repeat),a.center!==void 0&&u.center.fromArray(a.center),a.rotation!==void 0&&(u.rotation=a.rotation),a.wrap!==void 0&&(u.wrapS=i(a.wrap[0],MR),u.wrapT=i(a.wrap[1],MR)),a.format!==void 0&&(u.format=a.format),a.internalFormat!==void 0&&(u.internalFormat=a.internalFormat),a.type!==void 0&&(u.type=a.type),a.colorSpace!==void 0&&(u.colorSpace=a.colorSpace),a.minFilter!==void 0&&(u.minFilter=i(a.minFilter,CR)),a.magFilter!==void 0&&(u.magFilter=i(a.magFilter,CR)),a.anisotropy!==void 0&&(u.anisotropy=a.anisotropy),a.flipY!==void 0&&(u.flipY=a.flipY),a.generateMipmaps!==void 0&&(u.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(u.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(u.compareFunction=a.compareFunction),a.userData!==void 0&&(u.userData=a.userData),r[a.uuid]=u}return r}parseObject(e,n,i,r,o){let s;function a(f){return n[f]===void 0&&qe("ObjectLoader: Undefined geometry",f),n[f]}function l(f){if(f!==void 0){if(Array.isArray(f)){const m=[];for(let g=0,y=f.length;g<y;g++){const x=f[g];i[x]===void 0&&qe("ObjectLoader: Undefined material",x),m.push(i[x])}return m}return i[f]===void 0&&qe("ObjectLoader: Undefined material",f),i[f]}}function c(f){return r[f]===void 0&&qe("ObjectLoader: Undefined texture",f),r[f]}let u,d;switch(e.type){case"Scene":s=new PC,e.background!==void 0&&(Number.isInteger(e.background)?s.background=new et(e.background):s.background=c(e.background)),e.environment!==void 0&&(s.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?s.fog=new lx(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(s.fog=new ax(e.fog.color,e.fog.density)),e.fog.name!==""&&(s.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(s.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&s.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(s.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&s.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":s=new Pi(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(s.focus=e.focus),e.zoom!==void 0&&(s.zoom=e.zoom),e.filmGauge!==void 0&&(s.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(s.filmOffset=e.filmOffset),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new Od(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(s.zoom=e.zoom),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"AmbientLight":s=new I5(e.color,e.intensity);break;case"DirectionalLight":s=new A5(e.color,e.intensity),s.target=e.target||"";break;case"PointLight":s=new T5(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":s=new P5(e.color,e.intensity,e.width,e.height);break;case"SpotLight":s=new E5(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),s.target=e.target||"";break;case"HemisphereLight":s=new C5(e.color,e.groundColor,e.intensity);break;case"LightProbe":const f=new ZC().fromArray(e.sh);s=new R5(f,e.intensity);break;case"SkinnedMesh":u=a(e.geometry),d=l(e.material),s=new XU(u,d),e.bindMode!==void 0&&(s.bindMode=e.bindMode),e.bindMatrix!==void 0&&s.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(s.skeleton=e.skeleton);break;case"Mesh":u=a(e.geometry),d=l(e.material),s=new fi(u,d);break;case"InstancedMesh":u=a(e.geometry),d=l(e.material);const m=e.count,g=e.instanceMatrix,y=e.instanceColor;s=new YU(u,d,m),s.instanceMatrix=new _d(new Float32Array(g.array),16),y!==void 0&&(s.instanceColor=new _d(new Float32Array(y.array),y.itemSize));break;case"BatchedMesh":u=a(e.geometry),d=l(e.material),s=new ZU(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,d),s.geometry=u,s.perObjectFrustumCulled=e.perObjectFrustumCulled,s.sortObjects=e.sortObjects,s._drawRanges=e.drawRanges,s._reservedRanges=e.reservedRanges,s._geometryInfo=e.geometryInfo.map(x=>{let v=null,w=null;return x.boundingBox!==void 0&&(v=new Ji().fromJSON(x.boundingBox)),x.boundingSphere!==void 0&&(w=new zi().fromJSON(x.boundingSphere)),{...x,boundingBox:v,boundingSphere:w}}),s._instanceInfo=e.instanceInfo,s._availableInstanceIds=e._availableInstanceIds,s._availableGeometryIds=e._availableGeometryIds,s._nextIndexStart=e.nextIndexStart,s._nextVertexStart=e.nextVertexStart,s._geometryCount=e.geometryCount,s._maxInstanceCount=e.maxInstanceCount,s._maxVertexCount=e.maxVertexCount,s._maxIndexCount=e.maxIndexCount,s._geometryInitialized=e.geometryInitialized,s._matricesTexture=c(e.matricesTexture.uuid),s._indirectTexture=c(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(s._colorsTexture=c(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(s.boundingSphere=new zi().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(s.boundingBox=new Ji().fromJSON(e.boundingBox));break;case"LOD":s=new qU;break;case"Line":s=new dl(a(e.geometry),l(e.material));break;case"LineLoop":s=new KU(a(e.geometry),l(e.material));break;case"LineSegments":s=new Ps(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":s=new QU(a(e.geometry),l(e.material));break;case"Sprite":s=new jU(l(e.material));break;case"Group":s=new ju;break;case"Bone":s=new DC;break;default:s=new rn}if(s.uuid=e.uuid,e.name!==void 0&&(s.name=e.name),e.matrix!==void 0?(s.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(s.matrixAutoUpdate=e.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(e.position!==void 0&&s.position.fromArray(e.position),e.rotation!==void 0&&s.rotation.fromArray(e.rotation),e.quaternion!==void 0&&s.quaternion.fromArray(e.quaternion),e.scale!==void 0&&s.scale.fromArray(e.scale)),e.up!==void 0&&s.up.fromArray(e.up),e.castShadow!==void 0&&(s.castShadow=e.castShadow),e.receiveShadow!==void 0&&(s.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(s.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(s.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(s.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(s.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&s.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(s.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(s.visible=e.visible),e.frustumCulled!==void 0&&(s.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(s.renderOrder=e.renderOrder),e.userData!==void 0&&(s.userData=e.userData),e.layers!==void 0&&(s.layers.mask=e.layers),e.children!==void 0){const f=e.children;for(let m=0;m<f.length;m++)s.add(this.parseObject(f[m],n,i,r,o))}if(e.animations!==void 0){const f=e.animations;for(let m=0;m<f.length;m++){const g=f[m];s.animations.push(o[g])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(s.autoUpdate=e.autoUpdate);const f=e.levels;for(let m=0;m<f.length;m++){const g=f[m],y=s.getObjectByProperty("uuid",g.object);y!==void 0&&s.addLevel(y,g.distance,g.hysteresis)}}return s}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=n[i.skeleton];r===void 0?qe("ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(n){if(n.isDirectionalLight||n.isSpotLight){const i=n.target,r=e.getObjectByProperty("uuid",i);r!==void 0?n.target=r:n.target=new rn}})}}const dK={UVMapping:Yy,CubeReflectionMapping:Cs,CubeRefractionMapping:cl,EquirectangularReflectionMapping:zf,EquirectangularRefractionMapping:Of,CubeUVReflectionMapping:kd},MR={RepeatWrapping:Ff,ClampToEdgeWrapping:Pr,MirroredRepeatWrapping:Uf},CR={NearestFilter:ri,NearestMipmapNearestFilter:vC,NearestMipmapLinearFilter:Wu,LinearFilter:Nn,LinearMipmapNearestFilter:tf,LinearMipmapLinearFilter:ms},l_=new WeakMap;class hK extends Or{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&qe("ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&qe("ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,n,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,s=gs.get(`image-bitmap:${e}`);if(s!==void 0){if(o.manager.itemStart(e),s.then){s.then(c=>{if(l_.has(s)===!0)r&&r(l_.get(s)),o.manager.itemError(e),o.manager.itemEnd(e);else return n&&n(c),o.manager.itemEnd(e),c});return}return setTimeout(function(){n&&n(s),o.manager.itemEnd(e)},0),s}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,a.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const l=fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(c){return gs.add(`image-bitmap:${e}`,c),n&&n(c),o.manager.itemEnd(e),c}).catch(function(c){r&&r(c),l_.set(l,c),gs.remove(`image-bitmap:${e}`),o.manager.itemError(e),o.manager.itemEnd(e)});gs.add(`image-bitmap:${e}`,l),o.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let Gg;class KC{static getContext(){return Gg===void 0&&(Gg=new(window.AudioContext||window.webkitAudioContext)),Gg}static setContext(e){Gg=e}}class fK extends Or{constructor(e){super(e)}load(e,n,i,r){const o=this,s=new ua(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(l){try{const c=l.slice(0);KC.getContext().decodeAudioData(c,function(d){n(d)}).catch(a)}catch(c){a(c)}},i,r);function a(l){r?r(l):wt(l),o.manager.itemError(e)}}}const ER=new Dt,TR=new Dt,Fl=new Dt;class pK{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Pi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Pi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,Fl.copy(e.projectionMatrix);const r=n.eyeSep/2,o=r*n.near/n.focus,s=n.near*Math.tan(dc*n.fov*.5)/n.zoom;let a,l;TR.elements[12]=-r,ER.elements[12]=r,a=-s*n.aspect+o,l=s*n.aspect+o,Fl.elements[0]=2*n.near/(l-a),Fl.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Fl),a=-s*n.aspect-o,l=s*n.aspect-o,Fl.elements[0]=2*n.near/(l-a),Fl.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Fl)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(TR),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(ER)}}class N5 extends Pi{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class QC{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=performance.now();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}const Ul=new W,c_=new Lr,mK=new W,Bl=new W,Hl=new W;class gK extends rn{constructor(){super(),this.type="AudioListener",this.context=KC.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new QC}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Ul,c_,mK),Bl.set(0,0,-1).applyQuaternion(c_),Hl.set(0,1,0).applyQuaternion(c_),n.positionX){const i=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(Ul.x,i),n.positionY.linearRampToValueAtTime(Ul.y,i),n.positionZ.linearRampToValueAtTime(Ul.z,i),n.forwardX.linearRampToValueAtTime(Bl.x,i),n.forwardY.linearRampToValueAtTime(Bl.y,i),n.forwardZ.linearRampToValueAtTime(Bl.z,i),n.upX.linearRampToValueAtTime(Hl.x,i),n.upY.linearRampToValueAtTime(Hl.y,i),n.upZ.linearRampToValueAtTime(Hl.z,i)}else n.setPosition(Ul.x,Ul.y,Ul.z),n.setOrientation(Bl.x,Bl.y,Bl.z,Hl.x,Hl.y,Hl.z)}}class L5 extends rn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){qe("Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){qe("Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){qe("Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){qe("Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){qe("Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(qe("Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){qe("Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,n){return super.copy(e,n),e.sourceType!=="buffer"?(qe("Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const Vl=new W,AR=new Lr,vK=new W,$l=new W;class yK extends L5{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Vl,AR,vK),$l.set(0,0,1).applyQuaternion(AR);const n=this.panner;if(n.positionX){const i=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(Vl.x,i),n.positionY.linearRampToValueAtTime(Vl.y,i),n.positionZ.linearRampToValueAtTime(Vl.z,i),n.orientationX.linearRampToValueAtTime($l.x,i),n.orientationY.linearRampToValueAtTime($l.y,i),n.orientationZ.linearRampToValueAtTime($l.z,i)}else n.setPosition(Vl.x,Vl.y,Vl.z),n.setOrientation($l.x,$l.y,$l.z)}}class xK{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let i=0;i<n.length;i++)e+=n[i];return e/n.length}}class z5{constructor(e,n,i){this.binding=e,this.valueSize=i;let r,o,s;switch(n){case"quaternion":r=this._slerp,o=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,o=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,o=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=o,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const i=this.buffer,r=this.valueSize,o=e*r+r;let s=this.cumulativeWeight;if(s===0){for(let a=0;a!==r;++a)i[o+a]=i[a];s=n}else{s+=n;const a=n/s;this._mixBufferRegion(i,o,0,a,r)}this.cumulativeWeight=s}accumulateAdditive(e){const n=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,i=this.buffer,r=e*n+n,o=this.cumulativeWeight,s=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){const l=n*this._origIndex;this._mixBufferRegion(i,r,l,1-o,n)}s>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*n,1,n);for(let l=n,c=n+n;l!==c;++l)if(i[l]!==i[l+n]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,n=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(n,r);for(let o=i,s=r;o!==s;++o)n[o]=n[r+o%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let i=e;i<n;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[n+i]=this.buffer[e+i]}_select(e,n,i,r,o){if(r>=.5)for(let s=0;s!==o;++s)e[n+s]=e[i+s]}_slerp(e,n,i,r){Lr.slerpFlat(e,n,e,n,e,i,r)}_slerpAdditive(e,n,i,r,o){const s=this._workIndex*o;Lr.multiplyQuaternionsFlat(e,s,e,n,e,i),Lr.slerpFlat(e,n,e,n,e,s,r)}_lerp(e,n,i,r,o){const s=1-r;for(let a=0;a!==o;++a){const l=n+a;e[l]=e[l]*s+e[i+a]*r}}_lerpAdditive(e,n,i,r,o){for(let s=0;s!==o;++s){const a=n+s;e[a]=e[a]+e[i+s]*r}}}const JC="\\[\\]\\.:\\/",wK=new RegExp("["+JC+"]","g"),eE="[^"+JC+"]",_K="[^"+JC.replace("\\.","")+"]",bK=/((?:WC+[\/:])*)/.source.replace("WC",eE),SK=/(WCOD+)?/.source.replace("WCOD",_K),MK=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",eE),CK=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",eE),EK=new RegExp("^"+bK+SK+MK+CK+"$"),TK=["material","materials","bones","map"];class AK{constructor(e,n,i){const r=i||tn.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,r)}getValue(e,n){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,n)}setValue(e,n){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,o=i.length;r!==o;++r)i[r].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=e.length;n!==i;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=e.length;n!==i;++n)e[n].unbind()}}class tn{constructor(e,n,i){this.path=n,this.parsedPath=i||tn.parseTrackName(n),this.node=tn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,i){return e&&e.isAnimationObjectGroup?new tn.Composite(e,n,i):new tn(e,n,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(wK,"")}static parseTrackName(e){const n=EK.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const o=i.nodeName.substring(r+1);TK.indexOf(o)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=o)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(n);if(i!==void 0)return i}if(e.children){const i=function(o){for(let s=0;s<o.length;s++){const a=o[s];if(a.name===n||a.uuid===n)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const i=this.resolvedProperty;for(let r=0,o=i.length;r!==o;++r)e[n++]=i[r]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const i=this.resolvedProperty;for(let r=0,o=i.length;r!==o;++r)i[r]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const i=this.resolvedProperty;for(let r=0,o=i.length;r!==o;++r)i[r]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const i=this.resolvedProperty;for(let r=0,o=i.length;r!==o;++r)i[r]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,i=n.objectName,r=n.propertyName;let o=n.propertyIndex;if(e||(e=tn.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){qe("PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let c=n.objectIndex;switch(i){case"materials":if(!e.material){wt("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){wt("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){wt("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){wt("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){wt("PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){wt("PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(c!==void 0){if(e[c]===void 0){wt("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const s=e[r];if(s===void 0){const c=n.nodeName;wt("PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?a=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(o!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){wt("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){wt("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[o]!==void 0&&(o=e.morphTargetDictionary[o])}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=o}else s.fromArray!==void 0&&s.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}tn.Composite=AK;tn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};tn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};tn.prototype.GetterByBindingType=[tn.prototype._getValue_direct,tn.prototype._getValue_array,tn.prototype._getValue_arrayElement,tn.prototype._getValue_toArray];tn.prototype.SetterByBindingTypeAndVersioning=[[tn.prototype._setValue_direct,tn.prototype._setValue_direct_setNeedsUpdate,tn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[tn.prototype._setValue_array,tn.prototype._setValue_array_setNeedsUpdate,tn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[tn.prototype._setValue_arrayElement,tn.prototype._setValue_arrayElement_setNeedsUpdate,tn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[tn.prototype._setValue_fromArray,tn.prototype._setValue_fromArray_setNeedsUpdate,tn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class IK{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Qr(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,i=this._paths,r=this._parsedPaths,o=this._bindings,s=o.length;let a,l=e.length,c=this.nCachedObjects_;for(let u=0,d=arguments.length;u!==d;++u){const f=arguments[u],m=f.uuid;let g=n[m];if(g===void 0){g=l++,n[m]=g,e.push(f);for(let y=0,x=s;y!==x;++y)o[y].push(new tn(f,i[y],r[y]))}else if(g<c){a=e[g];const y=--c,x=e[y];n[x.uuid]=g,e[g]=x,n[m]=y,e[y]=f;for(let v=0,w=s;v!==w;++v){const _=o[v],S=_[y];let E=_[g];_[g]=S,E===void 0&&(E=new tn(f,i[v],r[v])),_[y]=E}}else e[g]!==a&&wt("AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,n=this._indicesByUUID,i=this._bindings,r=i.length;let o=this.nCachedObjects_;for(let s=0,a=arguments.length;s!==a;++s){const l=arguments[s],c=l.uuid,u=n[c];if(u!==void 0&&u>=o){const d=o++,f=e[d];n[f.uuid]=u,e[u]=f,n[c]=d,e[d]=l;for(let m=0,g=r;m!==g;++m){const y=i[m],x=y[d],v=y[u];y[u]=x,y[d]=v}}}this.nCachedObjects_=o}uncache(){const e=this._objects,n=this._indicesByUUID,i=this._bindings,r=i.length;let o=this.nCachedObjects_,s=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],u=c.uuid,d=n[u];if(d!==void 0)if(delete n[u],d<o){const f=--o,m=e[f],g=--s,y=e[g];n[m.uuid]=d,e[d]=m,n[y.uuid]=f,e[f]=y,e.pop();for(let x=0,v=r;x!==v;++x){const w=i[x],_=w[f],S=w[g];w[d]=_,w[f]=S,w.pop()}}else{const f=--s,m=e[f];f>0&&(n[m.uuid]=d),e[d]=m,e.pop();for(let g=0,y=r;g!==y;++g){const x=i[g];x[d]=x[f],x.pop()}}}this.nCachedObjects_=o}subscribe_(e,n){const i=this._bindingsIndicesByPath;let r=i[e];const o=this._bindings;if(r!==void 0)return o[r];const s=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,d=new Array(c);r=o.length,i[e]=r,s.push(e),a.push(n),o.push(d);for(let f=u,m=l.length;f!==m;++f){const g=l[f];d[f]=new tn(g,e,n)}return d}unsubscribe_(e){const n=this._bindingsIndicesByPath,i=n[e];if(i!==void 0){const r=this._paths,o=this._parsedPaths,s=this._bindings,a=s.length-1,l=s[a],c=e[a];n[c]=i,s[i]=l,s.pop(),o[i]=o[a],o.pop(),r[i]=r[a],r.pop()}}}class O5{constructor(e,n,i=null,r=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=i,this.blendMode=r;const o=n.tracks,s=o.length,a=new Array(s),l={endingStart:ic,endingEnd:ic};for(let c=0;c!==s;++c){const u=o[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=TU,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,i=!1){if(e.fadeOut(n),this.fadeIn(n),i===!0){const r=this._clip.duration,o=e._clip.duration,s=o/r,a=r/o;e.warp(1,s,n),this.warp(a,1,n)}return this}crossFadeTo(e,n,i=!1){return e.crossFadeFrom(this,n,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,i){const r=this._mixer,o=r.time,s=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=o,l[1]=o+i,c[0]=e/s,c[1]=n/s,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,i,r){if(!this.enabled){this._updateWeight(e);return}const o=this._startTime;if(o!==null){const l=(e-o)*i;l<0||i===0?n=0:(this._startTime=null,n=i*l)}n*=this._updateTimeScale(e);const s=this._updateTime(n),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case MC:for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(s),c[u].accumulateAdditive(a);break;case nx:default:for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(s),c[u].accumulate(r,a)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];n*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];n*=r,e>i.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,i=this.loop;let r=this.time+e,o=this._loopCount;const s=i===AU;if(e===0)return o===-1?r:s&&(o&1)===1?n-r:r;if(i===EU){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=n)r=n;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(o===-1&&(e>=0?(o=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),r>=n||r<0){const a=Math.floor(r/n);r-=n*a,o+=Math.abs(a);const l=this.repetitions-o;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?n:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,s)}else this._setEndings(!1,!1,s);this._loopCount=o,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(s&&(o&1)===1)return n-r}return r}_setEndings(e,n,i){const r=this._interpolantSettings;i?(r.endingStart=rc,r.endingEnd=rc):(e?r.endingStart=this.zeroSlopeAtStart?rc:ic:r.endingStart=Hf,n?r.endingEnd=this.zeroSlopeAtEnd?rc:ic:r.endingEnd=Hf)}_scheduleFading(e,n,i){const r=this._mixer,o=r.time;let s=this._weightInterpolant;s===null&&(s=r._lendControlInterpolant(),this._weightInterpolant=s);const a=s.parameterPositions,l=s.sampleValues;return a[0]=o,l[0]=n,a[1]=o+e,l[1]=i,this}}const PK=new Float32Array(1);class RK extends Is{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const i=e._localRoot||this._root,r=e._clip.tracks,o=r.length,s=e._propertyBindings,a=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let d=0;d!==o;++d){const f=r[d],m=f.name;let g=u[m];if(g!==void 0)++g.referenceCount,s[d]=g;else{if(g=s[d],g!==void 0){g._cacheIndex===null&&(++g.referenceCount,this._addInactiveBinding(g,l,m));continue}const y=n&&n._propertyBindings[d].binding.parsedPath;g=new z5(tn.create(i,m,y),f.ValueTypeName,f.getValueSize()),++g.referenceCount,this._addInactiveBinding(g,l,m),s[d]=g}a[d].resultBuffer=g.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,o=this._actionsByClip[r];this._bindAction(e,o&&o.knownActions[0]),this._addInactiveAction(e,r,i)}const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const o=n[i];o.useCount++===0&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const o=n[i];--o.useCount===0&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,i){const r=this._actions,o=this._actionsByClip;let s=o[n];if(s===void 0)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,o[n]=s;else{const a=s.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),s.actionByRoot[i]=e}_removeInactiveAction(e){const n=this._actions,i=n[n.length-1],r=e._cacheIndex;i._cacheIndex=r,n[r]=i,n.pop(),e._cacheIndex=null;const o=e._clip.uuid,s=this._actionsByClip,a=s[o],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const d=a.actionByRoot,f=(e._localRoot||this._root).uuid;delete d[f],l.length===0&&delete s[o],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const o=n[i];--o.referenceCount===0&&this._removeInactiveBinding(o)}}_lendAction(e){const n=this._actions,i=e._cacheIndex,r=this._nActiveActions++,o=n[r];e._cacheIndex=r,n[r]=e,o._cacheIndex=i,n[i]=o}_takeBackAction(e){const n=this._actions,i=e._cacheIndex,r=--this._nActiveActions,o=n[r];e._cacheIndex=r,n[r]=e,o._cacheIndex=i,n[i]=o}_addInactiveBinding(e,n,i){const r=this._bindingsByRootAndName,o=this._bindings;let s=r[n];s===void 0&&(s={},r[n]=s),s[i]=e,e._cacheIndex=o.length,o.push(e)}_removeInactiveBinding(e){const n=this._bindings,i=e.binding,r=i.rootNode.uuid,o=i.path,s=this._bindingsByRootAndName,a=s[r],l=n[n.length-1],c=e._cacheIndex;l._cacheIndex=c,n[c]=l,n.pop(),delete a[o],Object.keys(a).length===0&&delete s[r]}_lendBinding(e){const n=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,o=n[r];e._cacheIndex=r,n[r]=e,o._cacheIndex=i,n[i]=o}_takeBackBinding(e){const n=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,o=n[r];e._cacheIndex=r,n[r]=e,o._cacheIndex=i,n[i]=o}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let i=e[n];return i===void 0&&(i=new jC(new Float32Array(2),new Float32Array(2),1,PK),i.__cacheIndex=n,e[n]=i),i}_takeBackControlInterpolant(e){const n=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,o=n[r];e.__cacheIndex=r,n[r]=e,o.__cacheIndex=i,n[i]=o}clipAction(e,n,i){const r=n||this._root,o=r.uuid;let s=typeof e=="string"?Kf.findByName(r,e):e;const a=s!==null?s.uuid:e,l=this._actionsByClip[a];let c=null;if(i===void 0&&(s!==null?i=s.blendMode:i=nx),l!==void 0){const d=l.actionByRoot[o];if(d!==void 0&&d.blendMode===i)return d;c=l.knownActions[0],s===null&&(s=c._clip)}if(s===null)return null;const u=new O5(this,s,n,i);return this._bindAction(u,c),this._addInactiveAction(u,a,o),u}existingAction(e,n){const i=n||this._root,r=i.uuid,o=typeof e=="string"?Kf.findByName(i,e):e,s=o?o.uuid:e,a=this._actionsByClip[s];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let i=n-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const n=this._actions,i=this._nActiveActions,r=this.time+=e,o=Math.sign(e),s=this._accuIndex^=1;for(let c=0;c!==i;++c)n[c]._update(r,e,o,s);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(s);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,i=e.uuid,r=this._actionsByClip,o=r[i];if(o!==void 0){const s=o.knownActions;for(let a=0,l=s.length;a!==l;++a){const c=s[a];this._deactivateAction(c);const u=c._cacheIndex,d=n[n.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,d._cacheIndex=u,n[u]=d,n.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}}uncacheRoot(e){const n=e.uuid,i=this._actionsByClip;for(const s in i){const a=i[s].actionByRoot,l=a[n];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,o=r[n];if(o!==void 0)for(const s in o){const a=o[s];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,n){const i=this.existingAction(e,n);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class DK extends EC{constructor(e=1,n=1,i=1,r={}){super(e,n,r),this.isRenderTarget3D=!0,this.depth=i,this.texture=new sx(null,e,n,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class tE{constructor(e){this.value=e}clone(){return new tE(this.value.clone===void 0?this.value:this.value.clone())}}let kK=0;class NK extends Is{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:kK++}),this.name="",this.usage=$f,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let i=0,r=n.length;i<r;i++){const o=Array.isArray(n[i])?n[i]:[n[i]];for(let s=0;s<o.length;s++)this.uniforms.push(o[s].clone())}return this}clone(){return new this.constructor().copy(this)}}class LK extends cx{constructor(e,n,i=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class zK{constructor(e,n,i,r,o,s=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=n,this.itemSize=i,this.elementSize=r,this.count=o,this.normalized=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const IR=new Dt;class F5{constructor(e,n,i=0,r=1/0){this.ray=new Nd(e,n),this.near=i,this.far=r,this.camera=null,this.layers=new hc,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):wt("Raycaster: Unsupported camera type: "+n.type)}setFromXRController(e){return IR.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(IR),this}intersectObject(e,n=!0,i=[]){return uS(e,this,i,n),i.sort(PR),i}intersectObjects(e,n=!0,i=[]){for(let r=0,o=e.length;r<o;r++)uS(e[r],this,i,n);return i.sort(PR),i}}function PR(t,e){return t.distance-e.distance}function uS(t,e,n,i){let r=!0;if(t.layers.test(e.layers)&&t.raycast(e,n)===!1&&(r=!1),r===!0&&i===!0){const o=t.children;for(let s=0,a=o.length;s<a;s++)uS(o[s],e,n,!0)}}class OK{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,e.hidden!==void 0&&(this._pageVisibilityHandler=FK.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(e!==void 0?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function FK(){this._document.hidden===!1&&this.reset()}class U5{constructor(e=1,n=0,i=0){this.radius=e,this.phi=n,this.theta=i}set(e,n,i){return this.radius=e,this.phi=n,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=At(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,i){return this.radius=Math.sqrt(e*e+n*n+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(At(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class UK{constructor(e=1,n=0,i=0){this.radius=e,this.theta=n,this.y=i}set(e,n,i){return this.radius=e,this.theta=n,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=n,this}clone(){return new this.constructor().copy(this)}}class nE{constructor(e,n,i,r){nE.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,n,i,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,n=0){for(let i=0;i<4;i++)this.elements[i]=e[i+n];return this}set(e,n,i,r){const o=this.elements;return o[0]=e,o[2]=n,o[1]=i,o[3]=r,this}}const RR=new Ce;class BK{constructor(e=new Ce(1/0,1/0),n=new Ce(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=RR.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,RR).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const DR=new W,jg=new W,_u=new W,bu=new W,u_=new W,HK=new W,VK=new W;class $K{constructor(e=new W,n=new W){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){DR.subVectors(e,this.start),jg.subVectors(this.end,this.start);const i=jg.dot(jg);let o=jg.dot(DR)/i;return n&&(o=At(o,0,1)),o}closestPointToPoint(e,n,i){const r=this.closestPointToPointParameter(e,n);return this.delta(i).multiplyScalar(r).add(this.start)}distanceSqToLine3(e,n=HK,i=VK){const r=10000000000000001e-32;let o,s;const a=this.start,l=e.start,c=this.end,u=e.end;_u.subVectors(c,a),bu.subVectors(u,l),u_.subVectors(a,l);const d=_u.dot(_u),f=bu.dot(bu),m=bu.dot(u_);if(d<=r&&f<=r)return n.copy(a),i.copy(l),n.sub(i),n.dot(n);if(d<=r)o=0,s=m/f,s=At(s,0,1);else{const g=_u.dot(u_);if(f<=r)s=0,o=At(-g/d,0,1);else{const y=_u.dot(bu),x=d*f-y*y;x!==0?o=At((y*m-g*f)/x,0,1):o=0,s=(y*o+m)/f,s<0?(s=0,o=At(-g/d,0,1)):s>1&&(s=1,o=At((y-g)/d,0,1))}}return n.copy(a).add(_u.multiplyScalar(o)),i.copy(l).add(bu.multiplyScalar(s)),n.sub(i),n.dot(n)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const kR=new W;class WK extends rn{constructor(e,n){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const i=new zt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,a=1,l=32;s<l;s++,a++){const c=s/l*Math.PI*2,u=a/l*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}i.setAttribute("position",new at(r,3));const o=new gr({fog:!1,toneMapped:!1});this.cone=new Ps(i,o),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),kR.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(kR),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const La=new W,qg=new Dt,d_=new Dt;class GK extends Ps{constructor(e){const n=B5(e),i=new zt,r=[],o=[];for(let c=0;c<n.length;c++){const u=n[c];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),o.push(0,0,0),o.push(0,0,0))}i.setAttribute("position",new at(r,3)),i.setAttribute("color",new at(o,3));const s=new gr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,s),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const a=new et(255),l=new et(65280);this.setColors(a,l)}updateMatrixWorld(e){const n=this.bones,i=this.geometry,r=i.getAttribute("position");d_.copy(this.root.matrixWorld).invert();for(let o=0,s=0;o<n.length;o++){const a=n[o];a.parent&&a.parent.isBone&&(qg.multiplyMatrices(d_,a.matrixWorld),La.setFromMatrixPosition(qg),r.setXYZ(s,La.x,La.y,La.z),qg.multiplyMatrices(d_,a.parent.matrixWorld),La.setFromMatrixPosition(qg),r.setXYZ(s+1,La.x,La.y,La.z),s+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,n){const r=this.geometry.getAttribute("color");for(let o=0;o<r.count;o+=2)r.setXYZ(o,e.r,e.g,e.b),r.setXYZ(o+1,n.r,n.g,n.b);return r.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function B5(t){const e=[];t.isBone===!0&&e.push(t);for(let n=0;n<t.children.length;n++)e.push(...B5(t.children[n]));return e}class jK extends fi{constructor(e,n,i){const r=new Ep(n,4,2),o=new gl({wireframe:!0,fog:!1,toneMapped:!1});super(r,o),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const qK=new W,NR=new et,LR=new et;class XK extends rn{constructor(e,n,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new Cp(n);r.rotateY(Math.PI*.5),this.material=new gl({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const o=r.getAttribute("position"),s=new Float32Array(o.count*3);r.setAttribute("color",new wn(s,3)),this.add(new fi(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");NR.copy(this.light.color),LR.copy(this.light.groundColor);for(let i=0,r=n.count;i<r;i++){const o=i<r/2?NR:LR;n.setXYZ(i,o.r,o.g,o.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(qK.setFromMatrixPosition(this.light.matrixWorld).negate())}}class YK extends Ps{constructor(e=10,n=10,i=4473924,r=8947848){i=new et(i),r=new et(r);const o=n/2,s=e/n,a=e/2,l=[],c=[];for(let f=0,m=0,g=-a;f<=n;f++,g+=s){l.push(-a,0,g,a,0,g),l.push(g,0,-a,g,0,a);const y=f===o?i:r;y.toArray(c,m),m+=3,y.toArray(c,m),m+=3,y.toArray(c,m),m+=3,y.toArray(c,m),m+=3}const u=new zt;u.setAttribute("position",new at(l,3)),u.setAttribute("color",new at(c,3));const d=new gr({vertexColors:!0,toneMapped:!1});super(u,d),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class ZK extends Ps{constructor(e=10,n=16,i=8,r=64,o=4473924,s=8947848){o=new et(o),s=new et(s);const a=[],l=[];if(n>1)for(let d=0;d<n;d++){const f=d/n*(Math.PI*2),m=Math.sin(f)*e,g=Math.cos(f)*e;a.push(0,0,0),a.push(m,0,g);const y=d&1?o:s;l.push(y.r,y.g,y.b),l.push(y.r,y.g,y.b)}for(let d=0;d<i;d++){const f=d&1?o:s,m=e-e/i*d;for(let g=0;g<r;g++){let y=g/r*(Math.PI*2),x=Math.sin(y)*m,v=Math.cos(y)*m;a.push(x,0,v),l.push(f.r,f.g,f.b),y=(g+1)/r*(Math.PI*2),x=Math.sin(y)*m,v=Math.cos(y)*m,a.push(x,0,v),l.push(f.r,f.g,f.b)}}const c=new zt;c.setAttribute("position",new at(a,3)),c.setAttribute("color",new at(l,3));const u=new gr({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const zR=new W,Xg=new W,OR=new W;class KK extends rn{constructor(e,n,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",n===void 0&&(n=1);let r=new zt;r.setAttribute("position",new at([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const o=new gr({fog:!1,toneMapped:!1});this.lightPlane=new dl(r,o),this.add(this.lightPlane),r=new zt,r.setAttribute("position",new at([0,0,0,0,0,1],3)),this.targetLine=new dl(r,o),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),zR.setFromMatrixPosition(this.light.matrixWorld),Xg.setFromMatrixPosition(this.light.target.matrixWorld),OR.subVectors(Xg,zR),this.lightPlane.lookAt(Xg),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Xg),this.targetLine.scale.z=OR.length()}}const Yg=new W,Xn=new _p;class QK extends Ps{constructor(e){const n=new zt,i=new gr({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],o=[],s={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(g,y){l(g),l(y)}function l(g){r.push(0,0,0),o.push(0,0,0),s[g]===void 0&&(s[g]=[]),s[g].push(r.length/3-1)}n.setAttribute("position",new at(r,3)),n.setAttribute("color",new at(o,3)),super(n,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();const c=new et(16755200),u=new et(16711680),d=new et(43775),f=new et(16777215),m=new et(3355443);this.setColors(c,u,d,f,m)}setColors(e,n,i,r,o){const a=this.geometry.getAttribute("color");return a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,n.r,n.g,n.b),a.setXYZ(25,n.r,n.g,n.b),a.setXYZ(26,n.r,n.g,n.b),a.setXYZ(27,n.r,n.g,n.b),a.setXYZ(28,n.r,n.g,n.b),a.setXYZ(29,n.r,n.g,n.b),a.setXYZ(30,n.r,n.g,n.b),a.setXYZ(31,n.r,n.g,n.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,o.r,o.g,o.b),a.setXYZ(41,o.r,o.g,o.b),a.setXYZ(42,o.r,o.g,o.b),a.setXYZ(43,o.r,o.g,o.b),a.setXYZ(44,o.r,o.g,o.b),a.setXYZ(45,o.r,o.g,o.b),a.setXYZ(46,o.r,o.g,o.b),a.setXYZ(47,o.r,o.g,o.b),a.setXYZ(48,o.r,o.g,o.b),a.setXYZ(49,o.r,o.g,o.b),a.needsUpdate=!0,this}update(){const e=this.geometry,n=this.pointMap,i=1,r=1;let o,s;if(Xn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)o=1,s=0;else if(this.camera.coordinateSystem===Zr)o=-1,s=1;else if(this.camera.coordinateSystem===vd)o=0,s=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);Jn("c",n,e,Xn,0,0,o),Jn("t",n,e,Xn,0,0,s),Jn("n1",n,e,Xn,-i,-r,o),Jn("n2",n,e,Xn,i,-r,o),Jn("n3",n,e,Xn,-i,r,o),Jn("n4",n,e,Xn,i,r,o),Jn("f1",n,e,Xn,-i,-r,s),Jn("f2",n,e,Xn,i,-r,s),Jn("f3",n,e,Xn,-i,r,s),Jn("f4",n,e,Xn,i,r,s),Jn("u1",n,e,Xn,i*.7,r*1.1,o),Jn("u2",n,e,Xn,-i*.7,r*1.1,o),Jn("u3",n,e,Xn,0,r*2,o),Jn("cf1",n,e,Xn,-i,0,s),Jn("cf2",n,e,Xn,i,0,s),Jn("cf3",n,e,Xn,0,-r,s),Jn("cf4",n,e,Xn,0,r,s),Jn("cn1",n,e,Xn,-i,0,o),Jn("cn2",n,e,Xn,i,0,o),Jn("cn3",n,e,Xn,0,-r,o),Jn("cn4",n,e,Xn,0,r,o),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Jn(t,e,n,i,r,o,s){Yg.set(r,o,s).unproject(i);const a=e[t];if(a!==void 0){const l=n.getAttribute("position");for(let c=0,u=a.length;c<u;c++)l.setXYZ(a[c],Yg.x,Yg.y,Yg.z)}}const Zg=new Ji;class JK extends Ps{constructor(e,n=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),o=new zt;o.setIndex(new wn(i,1)),o.setAttribute("position",new wn(r,3)),super(o,new gr({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&Zg.setFromObject(this.object),Zg.isEmpty())return;const e=Zg.min,n=Zg.max,i=this.geometry.attributes.position,r=i.array;r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=e.x,r[4]=n.y,r[5]=n.z,r[6]=e.x,r[7]=e.y,r[8]=n.z,r[9]=n.x,r[10]=e.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=e.z,r[15]=e.x,r[16]=n.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=n.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class eQ extends Ps{constructor(e,n=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new zt;o.setIndex(new wn(i,1)),o.setAttribute("position",new at(r,3)),super(o,new gr({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class tQ extends dl{constructor(e,n=1,i=16776960){const r=i,o=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],s=new zt;s.setAttribute("position",new at(o,3)),s.computeBoundingSphere(),super(s,new gr({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new zt;l.setAttribute("position",new at(a,3)),l.computeBoundingSphere(),this.add(new fi(l,new gl({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const FR=new W;let Kg,h_;class nQ extends rn{constructor(e=new W(0,0,1),n=new W(0,0,0),i=1,r=16776960,o=i*.2,s=o*.2){super(),this.type="ArrowHelper",Kg===void 0&&(Kg=new zt,Kg.setAttribute("position",new at([0,0,0,0,1,0],3)),h_=new Mp(.5,1,5,1),h_.translate(0,-.5,0)),this.position.copy(n),this.line=new dl(Kg,new gr({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new fi(h_,new gl({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,o,s)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{FR.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(FR,n)}}setLength(e,n=e*.2,i=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(i,n,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class iQ extends Ps{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new zt;r.setAttribute("position",new at(n,3)),r.setAttribute("color",new at(i,3));const o=new gr({vertexColors:!0,toneMapped:!1});super(r,o),this.type="AxesHelper"}setColors(e,n,i){const r=new et,o=this.geometry.attributes.color.array;return r.set(e),r.toArray(o,0),r.toArray(o,3),r.set(n),r.toArray(o,6),r.toArray(o,9),r.set(i),r.toArray(o,12),r.toArray(o,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class rQ{constructor(){this.type="ShapePath",this.color=new et,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new sy,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,i,r){return this.currentPath.quadraticCurveTo(e,n,i,r),this}bezierCurveTo(e,n,i,r,o,s){return this.currentPath.bezierCurveTo(e,n,i,r,o,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(v){const w=[];for(let _=0,S=v.length;_<S;_++){const E=v[_],T=new fc;T.curves=E.curves,w.push(T)}return w}function i(v,w){const _=w.length;let S=!1;for(let E=_-1,T=0;T<_;E=T++){let P=w[E],D=w[T],A=D.x-P.x,R=D.y-P.y;if(Math.abs(R)>Number.EPSILON){if(R<0&&(P=w[T],A=-A,D=w[E],R=-R),v.y<P.y||v.y>D.y)continue;if(v.y===P.y){if(v.x===P.x)return!0}else{const N=R*(v.x-P.x)-A*(v.y-P.y);if(N===0)return!0;if(N<0)continue;S=!S}}else{if(v.y!==P.y)continue;if(D.x<=v.x&&v.x<=P.x||P.x<=v.x&&v.x<=D.x)return!0}}return S}const r=Wo.isClockWise,o=this.subPaths;if(o.length===0)return[];let s,a,l;const c=[];if(o.length===1)return a=o[0],l=new fc,l.curves=a.curves,c.push(l),c;let u=!r(o[0].getPoints());u=e?!u:u;const d=[],f=[];let m=[],g=0,y;f[g]=void 0,m[g]=[];for(let v=0,w=o.length;v<w;v++)a=o[v],y=a.getPoints(),s=r(y),s=e?!s:s,s?(!u&&f[g]&&g++,f[g]={s:new fc,p:y},f[g].s.curves=a.curves,u&&g++,m[g]=[]):m[g].push({h:a,p:y[0]});if(!f[0])return n(o);if(f.length>1){let v=!1,w=0;for(let _=0,S=f.length;_<S;_++)d[_]=[];for(let _=0,S=f.length;_<S;_++){const E=m[_];for(let T=0;T<E.length;T++){const P=E[T];let D=!0;for(let A=0;A<f.length;A++)i(P.p,f[A].p)&&(_!==A&&w++,D?(D=!1,d[A].push(P)):v=!0);D&&d[_].push(P)}}w>0&&v===!1&&(m=d)}let x;for(let v=0,w=f.length;v<w;v++){l=f[v].s,c.push(l),x=m[v];for(let _=0,S=x.length;_<S;_++)l.holes.push(x[_].h)}return c}}class oQ extends Is{constructor(e,n=null){super(),this.object=e,this.domElement=n,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){qe("Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function sQ(t,e){const n=t.image&&t.image.width?t.image.width/t.image.height:1;return n>e?(t.repeat.x=1,t.repeat.y=n/e,t.offset.x=0,t.offset.y=(1-t.repeat.y)/2):(t.repeat.x=e/n,t.repeat.y=1,t.offset.x=(1-t.repeat.x)/2,t.offset.y=0),t}function aQ(t,e){const n=t.image&&t.image.width?t.image.width/t.image.height:1;return n>e?(t.repeat.x=e/n,t.repeat.y=1,t.offset.x=(1-t.repeat.x)/2,t.offset.y=0):(t.repeat.x=1,t.repeat.y=n/e,t.offset.x=0,t.offset.y=(1-t.repeat.y)/2),t}function lQ(t){return t.repeat.x=1,t.repeat.y=1,t.offset.x=0,t.offset.y=0,t}function dS(t,e,n,i){const r=cQ(i);switch(n){case bC:return t*e;case Jy:return t*e/r.components*r.byteLength;case wp:return t*e/r.components*r.byteLength;case Mc:return t*e*2/r.components*r.byteLength;case ex:return t*e*2/r.components*r.byteLength;case SC:return t*e*3/r.components*r.byteLength;case Ki:return t*e*4/r.components*r.byteLength;case tx:return t*e*4/r.components*r.byteLength;case nf:case rf:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case of:case sf:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case C0:case T0:return Math.max(t,16)*Math.max(e,8)/4;case M0:case E0:return Math.max(t,8)*Math.max(e,8)/2;case A0:case I0:case R0:case D0:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case P0:case k0:case N0:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case L0:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case z0:return Math.floor((t+4)/5)*Math.floor((e+3)/4)*16;case O0:return Math.floor((t+4)/5)*Math.floor((e+4)/5)*16;case F0:return Math.floor((t+5)/6)*Math.floor((e+4)/5)*16;case U0:return Math.floor((t+5)/6)*Math.floor((e+5)/6)*16;case B0:return Math.floor((t+7)/8)*Math.floor((e+4)/5)*16;case H0:return Math.floor((t+7)/8)*Math.floor((e+5)/6)*16;case V0:return Math.floor((t+7)/8)*Math.floor((e+7)/8)*16;case $0:return Math.floor((t+9)/10)*Math.floor((e+4)/5)*16;case W0:return Math.floor((t+9)/10)*Math.floor((e+5)/6)*16;case G0:return Math.floor((t+9)/10)*Math.floor((e+7)/8)*16;case j0:return Math.floor((t+9)/10)*Math.floor((e+9)/10)*16;case q0:return Math.floor((t+11)/12)*Math.floor((e+9)/10)*16;case X0:return Math.floor((t+11)/12)*Math.floor((e+11)/12)*16;case Y0:case Z0:case K0:return Math.ceil(t/4)*Math.ceil(e/4)*16;case Q0:case J0:return Math.ceil(t/4)*Math.ceil(e/4)*8;case ey:case ty:return Math.ceil(t/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}function cQ(t){switch(t){case cr:case yC:return{byteLength:1,components:1};case md:case xC:case Es:return{byteLength:2,components:1};case Ky:case Qy:return{byteLength:2,components:4};case Ao:case Zy:case dr:return{byteLength:4,components:1};case wC:case _C:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${t}.`)}class uQ{static contain(e,n){return sQ(e,n)}static cover(e,n){return aQ(e,n)}static fill(e){return lQ(e)}static getByteLength(e,n,i,r){return dS(e,n,i,r)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:yp}}));typeof window<"u"&&(window.__THREE__?qe("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=yp);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function H5(){let t=null,e=!1,n=null,i=null;function r(o,s){n(o,s),i=t.requestAnimationFrame(r)}return{start:function(){e!==!0&&n!==null&&(i=t.requestAnimationFrame(r),e=!0)},stop:function(){t.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(o){n=o},setContext:function(o){t=o}}}function dQ(t){const e=new WeakMap;function n(a,l){const c=a.array,u=a.usage,d=c.byteLength,f=t.createBuffer();t.bindBuffer(l,f),t.bufferData(l,c,u),a.onUploadCallback();let m;if(c instanceof Float32Array)m=t.FLOAT;else if(typeof Float16Array<"u"&&c instanceof Float16Array)m=t.HALF_FLOAT;else if(c instanceof Uint16Array)a.isFloat16BufferAttribute?m=t.HALF_FLOAT:m=t.UNSIGNED_SHORT;else if(c instanceof Int16Array)m=t.SHORT;else if(c instanceof Uint32Array)m=t.UNSIGNED_INT;else if(c instanceof Int32Array)m=t.INT;else if(c instanceof Int8Array)m=t.BYTE;else if(c instanceof Uint8Array)m=t.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)m=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:f,type:m,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:d}}function i(a,l,c){const u=l.array,d=l.updateRanges;if(t.bindBuffer(c,a),d.length===0)t.bufferSubData(c,0,u);else{d.sort((m,g)=>m.start-g.start);let f=0;for(let m=1;m<d.length;m++){const g=d[f],y=d[m];y.start<=g.start+g.count+1?g.count=Math.max(g.count,y.start+y.count-g.start):(++f,d[f]=y)}d.length=f+1;for(let m=0,g=d.length;m<g;m++){const y=d[m];t.bufferSubData(c,y.start*u.BYTES_PER_ELEMENT,u,y.start,y.count)}l.clearUpdateRanges()}l.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function o(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(t.deleteBuffer(l.buffer),e.delete(a))}function s(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const u=e.get(a);(!u||u.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const c=e.get(a);if(c===void 0)e.set(a,n(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(c.buffer,a,l),c.version=a.version}}return{get:r,remove:o,update:s}}var hQ=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,fQ=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,pQ=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,mQ=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,gQ=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,vQ=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,yQ=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,xQ=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,wQ=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,_Q=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,bQ=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,SQ=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,MQ=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,CQ=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,EQ=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,TQ=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,AQ=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,IQ=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,PQ=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,RQ=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,DQ=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,kQ=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,NQ=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,LQ=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,zQ=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,OQ=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,FQ=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,UQ=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,BQ=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,HQ=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,VQ="gl_FragColor = linearToOutputTexel( gl_FragColor );",$Q=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,WQ=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,GQ=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
#endif`,jQ=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,qQ=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,XQ=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,YQ=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,ZQ=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,KQ=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,QQ=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,JQ=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,eJ=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,tJ=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,nJ=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,iJ=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,rJ=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,oJ=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,sJ=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,aJ=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lJ=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,cJ=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.diffuseContribution = diffuseColor.rgb * ( 1.0 - metalnessFactor );
material.metalness = metalnessFactor;
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor;
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = vec3( 0.04 );
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.0001, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,uJ=`uniform sampler2D dfgLUT;
struct PhysicalMaterial {
	vec3 diffuseColor;
	vec3 diffuseContribution;
	vec3 specularColor;
	vec3 specularColorBlended;
	float roughness;
	float metalness;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
		vec3 iridescenceFresnelDielectric;
		vec3 iridescenceFresnelMetallic;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return v;
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColorBlended;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float rInv = 1.0 / ( roughness + 0.1 );
	float a = -1.9362 + 1.0678 * roughness + 0.4573 * r2 - 0.8469 * rInv;
	float b = -0.6014 + 0.5538 * roughness - 0.4670 * r2 - 0.1255 * rInv;
	float DG = exp( a * dotNV + b );
	return saturate( DG );
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
vec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 dfgV = texture2D( dfgLUT, vec2( material.roughness, dotNV ) ).rg;
	vec2 dfgL = texture2D( dfgLUT, vec2( material.roughness, dotNL ) ).rg;
	vec3 FssEss_V = material.specularColorBlended * dfgV.x + material.specularF90 * dfgV.y;
	vec3 FssEss_L = material.specularColorBlended * dfgL.x + material.specularF90 * dfgL.y;
	float Ess_V = dfgV.x + dfgV.y;
	float Ess_L = dfgL.x + dfgL.y;
	float Ems_V = 1.0 - Ess_V;
	float Ems_L = 1.0 - Ess_L;
	vec3 Favg = material.specularColorBlended + ( 1.0 - material.specularColorBlended ) * 0.047619;
	vec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg + EPSILON );
	float compensationFactor = Ems_V * Ems_L;
	vec3 multiScatter = Fms * compensationFactor;
	return singleScatter + multiScatter;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColorBlended * t2.x + ( vec3( 1.0 ) - material.specularColorBlended ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseContribution * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
 
 		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
 
 		float sheenAlbedoV = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
 		float sheenAlbedoL = IBLSheenBRDF( geometryNormal, directLight.direction, material.sheenRoughness );
 
 		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * max( sheenAlbedoV, sheenAlbedoL );
 
 		irradiance *= sheenEnergyComp;
 
 	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseContribution );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 diffuse = irradiance * BRDF_Lambert( material.diffuseContribution );
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		diffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectDiffuse += diffuse;
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness ) * RECIPROCAL_PI;
 	#endif
	vec3 singleScatteringDielectric = vec3( 0.0 );
	vec3 multiScatteringDielectric = vec3( 0.0 );
	vec3 singleScatteringMetallic = vec3( 0.0 );
	vec3 multiScatteringMetallic = vec3( 0.0 );
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnelDielectric, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.iridescence, material.iridescenceFresnelMetallic, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscattering( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#endif
	vec3 singleScattering = mix( singleScatteringDielectric, singleScatteringMetallic, material.metalness );
	vec3 multiScattering = mix( multiScatteringDielectric, multiScatteringMetallic, material.metalness );
	vec3 totalScatteringDielectric = singleScatteringDielectric + multiScatteringDielectric;
	vec3 diffuse = material.diffuseContribution * ( 1.0 - totalScatteringDielectric );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	vec3 indirectSpecular = radiance * singleScattering;
	indirectSpecular += multiScattering * cosineWeightedIrradiance;
	vec3 indirectDiffuse = diffuse * cosineWeightedIrradiance;
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		indirectSpecular *= sheenEnergyComp;
		indirectDiffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectSpecular += indirectSpecular;
	reflectedLight.indirectDiffuse += indirectDiffuse;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,dJ=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnelDielectric = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceFresnelMetallic = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.diffuseColor );
		material.iridescenceFresnel = mix( material.iridescenceFresnelDielectric, material.iridescenceFresnelMetallic, material.metalness );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS ) && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,hJ=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,fJ=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,pJ=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,mJ=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,gJ=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,vJ=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,yJ=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,xJ=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,wJ=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,_J=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,bJ=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,SJ=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,MJ=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,CJ=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,EJ=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,TJ=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,AJ=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,IJ=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,PJ=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,RJ=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,DJ=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,kJ=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,NJ=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,LJ=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,zJ=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,OJ=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,FJ=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,UJ=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,BJ=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,HJ=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,VJ=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,$J=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,WJ=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,GJ=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,jJ=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,qJ=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#else
			uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#endif
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#else
			uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#endif
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform samplerCubeShadow pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#elif defined( SHADOWMAP_TYPE_BASIC )
			uniform samplerCube pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#endif
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float interleavedGradientNoise( vec2 position ) {
			return fract( 52.9829189 * fract( dot( position, vec2( 0.06711056, 0.00583715 ) ) ) );
		}
		vec2 vogelDiskSample( int sampleIndex, int samplesCount, float phi ) {
			const float goldenAngle = 2.399963229728653;
			float r = sqrt( ( float( sampleIndex ) + 0.5 ) / float( samplesCount ) );
			float theta = float( sampleIndex ) * goldenAngle + phi;
			return vec2( cos( theta ), sin( theta ) ) * r;
		}
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float getShadow( sampler2DShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
				float radius = shadowRadius * texelSize.x;
				float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
				shadow = (
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 0, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 1, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 2, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 3, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 4, 5, phi ) * radius, shadowCoord.z ) )
				) * 0.2;
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#elif defined( SHADOWMAP_TYPE_VSM )
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 distribution = texture2D( shadowMap, shadowCoord.xy ).rg;
				float mean = distribution.x;
				float variance = distribution.y * distribution.y;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					float hard_shadow = step( mean, shadowCoord.z );
				#else
					float hard_shadow = step( shadowCoord.z, mean );
				#endif
				if ( hard_shadow == 1.0 ) {
					shadow = 1.0;
				} else {
					variance = max( variance, 0.0000001 );
					float d = shadowCoord.z - mean;
					float p_max = variance / ( variance + d * d );
					p_max = clamp( ( p_max - 0.3 ) / 0.65, 0.0, 1.0 );
					shadow = max( hard_shadow, p_max );
				}
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#else
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				float depth = texture2D( shadowMap, shadowCoord.xy ).r;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					shadow = step( depth, shadowCoord.z );
				#else
					shadow = step( shadowCoord.z, depth );
				#endif
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#if defined( SHADOWMAP_TYPE_PCF )
	float getPointShadow( samplerCubeShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float texelSize = shadowRadius / shadowMapSize.x;
			vec3 absDir = abs( bd3D );
			vec3 tangent = absDir.x > absDir.z ? vec3( 0.0, 1.0, 0.0 ) : vec3( 1.0, 0.0, 0.0 );
			tangent = normalize( cross( bd3D, tangent ) );
			vec3 bitangent = cross( bd3D, tangent );
			float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
			shadow = (
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 0, 5, phi ).x + bitangent * vogelDiskSample( 0, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 1, 5, phi ).x + bitangent * vogelDiskSample( 1, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 2, 5, phi ).x + bitangent * vogelDiskSample( 2, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 3, 5, phi ).x + bitangent * vogelDiskSample( 3, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 4, 5, phi ).x + bitangent * vogelDiskSample( 4, 5, phi ).y ) * texelSize, dp ) )
			) * 0.2;
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#elif defined( SHADOWMAP_TYPE_BASIC )
	float getPointShadow( samplerCube shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float depth = textureCube( shadowMap, bd3D ).r;
			#ifdef USE_REVERSED_DEPTH_BUFFER
				shadow = step( depth, dp );
			#else
				shadow = step( dp, depth );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#endif
	#endif
#endif`,XJ=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,YJ=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,ZJ=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0 && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,KJ=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,QJ=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,JJ=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,eee=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,tee=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,nee=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,iee=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,ree=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,oee=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseContribution, material.specularColorBlended, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,see=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,aee=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,lee=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,cee=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,uee=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const dee=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,hee=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,fee=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,pee=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,mee=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,gee=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vee=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,yee=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,xee=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,wee=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = vec4( dist, 0.0, 0.0, 1.0 );
}`,_ee=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,bee=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,See=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Mee=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Cee=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Eee=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Tee=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Aee=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Iee=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Pee=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Ree=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Dee=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( normalize( normal ) * 0.5 + 0.5, diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,kee=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Nee=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Lee=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,zee=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
 
		outgoingLight = outgoingLight + sheenSpecularDirect + sheenSpecularIndirect;
 
 	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Oee=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Fee=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Uee=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Bee=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Hee=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Vee=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,$ee=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Wee=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,$t={alphahash_fragment:hQ,alphahash_pars_fragment:fQ,alphamap_fragment:pQ,alphamap_pars_fragment:mQ,alphatest_fragment:gQ,alphatest_pars_fragment:vQ,aomap_fragment:yQ,aomap_pars_fragment:xQ,batching_pars_vertex:wQ,batching_vertex:_Q,begin_vertex:bQ,beginnormal_vertex:SQ,bsdfs:MQ,iridescence_fragment:CQ,bumpmap_pars_fragment:EQ,clipping_planes_fragment:TQ,clipping_planes_pars_fragment:AQ,clipping_planes_pars_vertex:IQ,clipping_planes_vertex:PQ,color_fragment:RQ,color_pars_fragment:DQ,color_pars_vertex:kQ,color_vertex:NQ,common:LQ,cube_uv_reflection_fragment:zQ,defaultnormal_vertex:OQ,displacementmap_pars_vertex:FQ,displacementmap_vertex:UQ,emissivemap_fragment:BQ,emissivemap_pars_fragment:HQ,colorspace_fragment:VQ,colorspace_pars_fragment:$Q,envmap_fragment:WQ,envmap_common_pars_fragment:GQ,envmap_pars_fragment:jQ,envmap_pars_vertex:qQ,envmap_physical_pars_fragment:rJ,envmap_vertex:XQ,fog_vertex:YQ,fog_pars_vertex:ZQ,fog_fragment:KQ,fog_pars_fragment:QQ,gradientmap_pars_fragment:JQ,lightmap_pars_fragment:eJ,lights_lambert_fragment:tJ,lights_lambert_pars_fragment:nJ,lights_pars_begin:iJ,lights_toon_fragment:oJ,lights_toon_pars_fragment:sJ,lights_phong_fragment:aJ,lights_phong_pars_fragment:lJ,lights_physical_fragment:cJ,lights_physical_pars_fragment:uJ,lights_fragment_begin:dJ,lights_fragment_maps:hJ,lights_fragment_end:fJ,logdepthbuf_fragment:pJ,logdepthbuf_pars_fragment:mJ,logdepthbuf_pars_vertex:gJ,logdepthbuf_vertex:vJ,map_fragment:yJ,map_pars_fragment:xJ,map_particle_fragment:wJ,map_particle_pars_fragment:_J,metalnessmap_fragment:bJ,metalnessmap_pars_fragment:SJ,morphinstance_vertex:MJ,morphcolor_vertex:CJ,morphnormal_vertex:EJ,morphtarget_pars_vertex:TJ,morphtarget_vertex:AJ,normal_fragment_begin:IJ,normal_fragment_maps:PJ,normal_pars_fragment:RJ,normal_pars_vertex:DJ,normal_vertex:kJ,normalmap_pars_fragment:NJ,clearcoat_normal_fragment_begin:LJ,clearcoat_normal_fragment_maps:zJ,clearcoat_pars_fragment:OJ,iridescence_pars_fragment:FJ,opaque_fragment:UJ,packing:BJ,premultiplied_alpha_fragment:HJ,project_vertex:VJ,dithering_fragment:$J,dithering_pars_fragment:WJ,roughnessmap_fragment:GJ,roughnessmap_pars_fragment:jJ,shadowmap_pars_fragment:qJ,shadowmap_pars_vertex:XJ,shadowmap_vertex:YJ,shadowmask_pars_fragment:ZJ,skinbase_vertex:KJ,skinning_pars_vertex:QJ,skinning_vertex:JJ,skinnormal_vertex:eee,specularmap_fragment:tee,specularmap_pars_fragment:nee,tonemapping_fragment:iee,tonemapping_pars_fragment:ree,transmission_fragment:oee,transmission_pars_fragment:see,uv_pars_fragment:aee,uv_pars_vertex:lee,uv_vertex:cee,worldpos_vertex:uee,background_vert:dee,background_frag:hee,backgroundCube_vert:fee,backgroundCube_frag:pee,cube_vert:mee,cube_frag:gee,depth_vert:vee,depth_frag:yee,distance_vert:xee,distance_frag:wee,equirect_vert:_ee,equirect_frag:bee,linedashed_vert:See,linedashed_frag:Mee,meshbasic_vert:Cee,meshbasic_frag:Eee,meshlambert_vert:Tee,meshlambert_frag:Aee,meshmatcap_vert:Iee,meshmatcap_frag:Pee,meshnormal_vert:Ree,meshnormal_frag:Dee,meshphong_vert:kee,meshphong_frag:Nee,meshphysical_vert:Lee,meshphysical_frag:zee,meshtoon_vert:Oee,meshtoon_frag:Fee,points_vert:Uee,points_frag:Bee,shadow_vert:Hee,shadow_frag:Vee,sprite_vert:$ee,sprite_frag:Wee},Xe={common:{diffuse:{value:new et(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Ut},alphaMap:{value:null},alphaMapTransform:{value:new Ut},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Ut}},envmap:{envMap:{value:null},envMapRotation:{value:new Ut},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},dfgLUT:{value:null}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Ut}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Ut}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Ut},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Ut},normalScale:{value:new Ce(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Ut},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Ut}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Ut}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Ut}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new et(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new et(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Ut},alphaTest:{value:0},uvTransform:{value:new Ut}},sprite:{diffuse:{value:new et(16777215)},opacity:{value:1},center:{value:new Ce(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Ut},alphaMap:{value:null},alphaMapTransform:{value:new Ut},alphaTest:{value:0}}},$o={basic:{uniforms:ar([Xe.common,Xe.specularmap,Xe.envmap,Xe.aomap,Xe.lightmap,Xe.fog]),vertexShader:$t.meshbasic_vert,fragmentShader:$t.meshbasic_frag},lambert:{uniforms:ar([Xe.common,Xe.specularmap,Xe.envmap,Xe.aomap,Xe.lightmap,Xe.emissivemap,Xe.bumpmap,Xe.normalmap,Xe.displacementmap,Xe.fog,Xe.lights,{emissive:{value:new et(0)}}]),vertexShader:$t.meshlambert_vert,fragmentShader:$t.meshlambert_frag},phong:{uniforms:ar([Xe.common,Xe.specularmap,Xe.envmap,Xe.aomap,Xe.lightmap,Xe.emissivemap,Xe.bumpmap,Xe.normalmap,Xe.displacementmap,Xe.fog,Xe.lights,{emissive:{value:new et(0)},specular:{value:new et(1118481)},shininess:{value:30}}]),vertexShader:$t.meshphong_vert,fragmentShader:$t.meshphong_frag},standard:{uniforms:ar([Xe.common,Xe.envmap,Xe.aomap,Xe.lightmap,Xe.emissivemap,Xe.bumpmap,Xe.normalmap,Xe.displacementmap,Xe.roughnessmap,Xe.metalnessmap,Xe.fog,Xe.lights,{emissive:{value:new et(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:$t.meshphysical_vert,fragmentShader:$t.meshphysical_frag},toon:{uniforms:ar([Xe.common,Xe.aomap,Xe.lightmap,Xe.emissivemap,Xe.bumpmap,Xe.normalmap,Xe.displacementmap,Xe.gradientmap,Xe.fog,Xe.lights,{emissive:{value:new et(0)}}]),vertexShader:$t.meshtoon_vert,fragmentShader:$t.meshtoon_frag},matcap:{uniforms:ar([Xe.common,Xe.bumpmap,Xe.normalmap,Xe.displacementmap,Xe.fog,{matcap:{value:null}}]),vertexShader:$t.meshmatcap_vert,fragmentShader:$t.meshmatcap_frag},points:{uniforms:ar([Xe.points,Xe.fog]),vertexShader:$t.points_vert,fragmentShader:$t.points_frag},dashed:{uniforms:ar([Xe.common,Xe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:$t.linedashed_vert,fragmentShader:$t.linedashed_frag},depth:{uniforms:ar([Xe.common,Xe.displacementmap]),vertexShader:$t.depth_vert,fragmentShader:$t.depth_frag},normal:{uniforms:ar([Xe.common,Xe.bumpmap,Xe.normalmap,Xe.displacementmap,{opacity:{value:1}}]),vertexShader:$t.meshnormal_vert,fragmentShader:$t.meshnormal_frag},sprite:{uniforms:ar([Xe.sprite,Xe.fog]),vertexShader:$t.sprite_vert,fragmentShader:$t.sprite_frag},background:{uniforms:{uvTransform:{value:new Ut},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:$t.background_vert,fragmentShader:$t.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Ut}},vertexShader:$t.backgroundCube_vert,fragmentShader:$t.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:$t.cube_vert,fragmentShader:$t.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:$t.equirect_vert,fragmentShader:$t.equirect_frag},distance:{uniforms:ar([Xe.common,Xe.displacementmap,{referencePosition:{value:new W},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:$t.distance_vert,fragmentShader:$t.distance_frag},shadow:{uniforms:ar([Xe.lights,Xe.fog,{color:{value:new et(0)},opacity:{value:1}}]),vertexShader:$t.shadow_vert,fragmentShader:$t.shadow_frag}};$o.physical={uniforms:ar([$o.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Ut},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Ut},clearcoatNormalScale:{value:new Ce(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Ut},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Ut},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Ut},sheen:{value:0},sheenColor:{value:new et(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Ut},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Ut},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Ut},transmissionSamplerSize:{value:new Ce},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Ut},attenuationDistance:{value:0},attenuationColor:{value:new et(0)},specularColor:{value:new et(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Ut},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Ut},anisotropyVector:{value:new Ce},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Ut}}]),vertexShader:$t.meshphysical_vert,fragmentShader:$t.meshphysical_frag};const Qg={r:0,b:0,g:0},Wl=new to,Gee=new Dt;function jee(t,e,n,i,r,o,s){const a=new et(0);let l=o===!0?0:1,c,u,d=null,f=0,m=null;function g(_){let S=_.isScene===!0?_.background:null;return S&&S.isTexture&&(S=(_.backgroundBlurriness>0?n:e).get(S)),S}function y(_){let S=!1;const E=g(_);E===null?v(a,l):E&&E.isColor&&(v(E,1),S=!0);const T=t.xr.getEnvironmentBlendMode();T==="additive"?i.buffers.color.setClear(0,0,0,1,s):T==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,s),(t.autoClear||S)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil))}function x(_,S){const E=g(S);E&&(E.isCubeTexture||E.mapping===kd)?(u===void 0&&(u=new fi(new Nc(1,1,1),new no({name:"BackgroundCubeMaterial",uniforms:wd($o.backgroundCube.uniforms),vertexShader:$o.backgroundCube.vertexShader,fragmentShader:$o.backgroundCube.fragmentShader,side:fr,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(T,P,D){this.matrixWorld.copyPosition(D.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),Wl.copy(S.backgroundRotation),Wl.x*=-1,Wl.y*=-1,Wl.z*=-1,E.isCubeTexture&&E.isRenderTargetTexture===!1&&(Wl.y*=-1,Wl.z*=-1),u.material.uniforms.envMap.value=E,u.material.uniforms.flipEnvMap.value=E.isCubeTexture&&E.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=S.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(Gee.makeRotationFromEuler(Wl)),u.material.toneMapped=Jt.getTransfer(E.colorSpace)!==dn,(d!==E||f!==E.version||m!==t.toneMapping)&&(u.material.needsUpdate=!0,d=E,f=E.version,m=t.toneMapping),u.layers.enableAll(),_.unshift(u,u.geometry,u.material,0,0,null)):E&&E.isTexture&&(c===void 0&&(c=new fi(new zd(2,2),new no({name:"BackgroundMaterial",uniforms:wd($o.background.uniforms),vertexShader:$o.background.vertexShader,fragmentShader:$o.background.fragmentShader,side:ca,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=E,c.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,c.material.toneMapped=Jt.getTransfer(E.colorSpace)!==dn,E.matrixAutoUpdate===!0&&E.updateMatrix(),c.material.uniforms.uvTransform.value.copy(E.matrix),(d!==E||f!==E.version||m!==t.toneMapping)&&(c.material.needsUpdate=!0,d=E,f=E.version,m=t.toneMapping),c.layers.enableAll(),_.unshift(c,c.geometry,c.material,0,0,null))}function v(_,S){_.getRGB(Qg,VU(t)),i.buffers.color.setClear(Qg.r,Qg.g,Qg.b,S,s)}function w(){u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0),c!==void 0&&(c.geometry.dispose(),c.material.dispose(),c=void 0)}return{getClearColor:function(){return a},setClearColor:function(_,S=1){a.set(_),l=S,v(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(_){l=_,v(a,l)},render:y,addToRenderList:x,dispose:w}}function qee(t,e){const n=t.getParameter(t.MAX_VERTEX_ATTRIBS),i={},r=f(null);let o=r,s=!1;function a(R,N,O,H,q){let Z=!1;const G=d(H,O,N);o!==G&&(o=G,c(o.object)),Z=m(R,H,O,q),Z&&g(R,H,O,q),q!==null&&e.update(q,t.ELEMENT_ARRAY_BUFFER),(Z||s)&&(s=!1,S(R,N,O,H),q!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.get(q).buffer))}function l(){return t.createVertexArray()}function c(R){return t.bindVertexArray(R)}function u(R){return t.deleteVertexArray(R)}function d(R,N,O){const H=O.wireframe===!0;let q=i[R.id];q===void 0&&(q={},i[R.id]=q);let Z=q[N.id];Z===void 0&&(Z={},q[N.id]=Z);let G=Z[H];return G===void 0&&(G=f(l()),Z[H]=G),G}function f(R){const N=[],O=[],H=[];for(let q=0;q<n;q++)N[q]=0,O[q]=0,H[q]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:N,enabledAttributes:O,attributeDivisors:H,object:R,attributes:{},index:null}}function m(R,N,O,H){const q=o.attributes,Z=N.attributes;let G=0;const Y=O.getAttributes();for(const z in Y)if(Y[z].location>=0){const X=q[z];let K=Z[z];if(K===void 0&&(z==="instanceMatrix"&&R.instanceMatrix&&(K=R.instanceMatrix),z==="instanceColor"&&R.instanceColor&&(K=R.instanceColor)),X===void 0||X.attribute!==K||K&&X.data!==K.data)return!0;G++}return o.attributesNum!==G||o.index!==H}function g(R,N,O,H){const q={},Z=N.attributes;let G=0;const Y=O.getAttributes();for(const z in Y)if(Y[z].location>=0){let X=Z[z];X===void 0&&(z==="instanceMatrix"&&R.instanceMatrix&&(X=R.instanceMatrix),z==="instanceColor"&&R.instanceColor&&(X=R.instanceColor));const K={};K.attribute=X,X&&X.data&&(K.data=X.data),q[z]=K,G++}o.attributes=q,o.attributesNum=G,o.index=H}function y(){const R=o.newAttributes;for(let N=0,O=R.length;N<O;N++)R[N]=0}function x(R){v(R,0)}function v(R,N){const O=o.newAttributes,H=o.enabledAttributes,q=o.attributeDivisors;O[R]=1,H[R]===0&&(t.enableVertexAttribArray(R),H[R]=1),q[R]!==N&&(t.vertexAttribDivisor(R,N),q[R]=N)}function w(){const R=o.newAttributes,N=o.enabledAttributes;for(let O=0,H=N.length;O<H;O++)N[O]!==R[O]&&(t.disableVertexAttribArray(O),N[O]=0)}function _(R,N,O,H,q,Z,G){G===!0?t.vertexAttribIPointer(R,N,O,q,Z):t.vertexAttribPointer(R,N,O,H,q,Z)}function S(R,N,O,H){y();const q=H.attributes,Z=O.getAttributes(),G=N.defaultAttributeValues;for(const Y in Z){const z=Z[Y];if(z.location>=0){let $=q[Y];if($===void 0&&(Y==="instanceMatrix"&&R.instanceMatrix&&($=R.instanceMatrix),Y==="instanceColor"&&R.instanceColor&&($=R.instanceColor)),$!==void 0){const X=$.normalized,K=$.itemSize,oe=e.get($);if(oe===void 0)continue;const pe=oe.buffer,be=oe.type,it=oe.bytesPerElement,ae=be===t.INT||be===t.UNSIGNED_INT||$.gpuType===Zy;if($.isInterleavedBufferAttribute){const me=$.data,Fe=me.stride,tt=$.offset;if(me.isInstancedInterleavedBuffer){for(let Be=0;Be<z.locationSize;Be++)v(z.location+Be,me.meshPerAttribute);R.isInstancedMesh!==!0&&H._maxInstanceCount===void 0&&(H._maxInstanceCount=me.meshPerAttribute*me.count)}else for(let Be=0;Be<z.locationSize;Be++)x(z.location+Be);t.bindBuffer(t.ARRAY_BUFFER,pe);for(let Be=0;Be<z.locationSize;Be++)_(z.location+Be,K/z.locationSize,be,X,Fe*it,(tt+K/z.locationSize*Be)*it,ae)}else{if($.isInstancedBufferAttribute){for(let me=0;me<z.locationSize;me++)v(z.location+me,$.meshPerAttribute);R.isInstancedMesh!==!0&&H._maxInstanceCount===void 0&&(H._maxInstanceCount=$.meshPerAttribute*$.count)}else for(let me=0;me<z.locationSize;me++)x(z.location+me);t.bindBuffer(t.ARRAY_BUFFER,pe);for(let me=0;me<z.locationSize;me++)_(z.location+me,K/z.locationSize,be,X,K*it,K/z.locationSize*me*it,ae)}}else if(G!==void 0){const X=G[Y];if(X!==void 0)switch(X.length){case 2:t.vertexAttrib2fv(z.location,X);break;case 3:t.vertexAttrib3fv(z.location,X);break;case 4:t.vertexAttrib4fv(z.location,X);break;default:t.vertexAttrib1fv(z.location,X)}}}}w()}function E(){D();for(const R in i){const N=i[R];for(const O in N){const H=N[O];for(const q in H)u(H[q].object),delete H[q];delete N[O]}delete i[R]}}function T(R){if(i[R.id]===void 0)return;const N=i[R.id];for(const O in N){const H=N[O];for(const q in H)u(H[q].object),delete H[q];delete N[O]}delete i[R.id]}function P(R){for(const N in i){const O=i[N];if(O[R.id]===void 0)continue;const H=O[R.id];for(const q in H)u(H[q].object),delete H[q];delete O[R.id]}}function D(){A(),s=!0,o!==r&&(o=r,c(o.object))}function A(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:D,resetDefaultState:A,dispose:E,releaseStatesOfGeometry:T,releaseStatesOfProgram:P,initAttributes:y,enableAttribute:x,disableUnusedAttributes:w}}function Xee(t,e,n){let i;function r(c){i=c}function o(c,u){t.drawArrays(i,c,u),n.update(u,i,1)}function s(c,u,d){d!==0&&(t.drawArraysInstanced(i,c,u,d),n.update(u,i,d))}function a(c,u,d){if(d===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,c,0,u,0,d);let m=0;for(let g=0;g<d;g++)m+=u[g];n.update(m,i,1)}function l(c,u,d,f){if(d===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let g=0;g<c.length;g++)s(c[g],u[g],f[g]);else{m.multiDrawArraysInstancedWEBGL(i,c,0,u,0,f,0,d);let g=0;for(let y=0;y<d;y++)g+=u[y]*f[y];n.update(g,i,1)}}this.setMode=r,this.render=o,this.renderInstances=s,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function Yee(t,e,n,i){let r;function o(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const P=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(P){return!(P!==Ki&&i.convert(P)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(P){const D=P===Es&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(P!==cr&&i.convert(P)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE)&&P!==dr&&!D)}function l(P){if(P==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";P="mediump"}return P==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=n.precision!==void 0?n.precision:"highp";const u=l(c);u!==c&&(qe("WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);const d=n.logarithmicDepthBuffer===!0,f=n.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),m=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),g=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),y=t.getParameter(t.MAX_TEXTURE_SIZE),x=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),v=t.getParameter(t.MAX_VERTEX_ATTRIBS),w=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),_=t.getParameter(t.MAX_VARYING_VECTORS),S=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),E=t.getParameter(t.MAX_SAMPLES),T=t.getParameter(t.SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:o,getMaxPrecision:l,textureFormatReadable:s,textureTypeReadable:a,precision:c,logarithmicDepthBuffer:d,reversedDepthBuffer:f,maxTextures:m,maxVertexTextures:g,maxTextureSize:y,maxCubemapSize:x,maxAttributes:v,maxVertexUniforms:w,maxVaryings:_,maxFragmentUniforms:S,maxSamples:E,samples:T}}function Zee(t){const e=this;let n=null,i=0,r=!1,o=!1;const s=new Fa,a=new Ut,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,f){const m=d.length!==0||f||i!==0||r;return r=f,i=d.length,m},this.beginShadows=function(){o=!0,u(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(d,f){n=u(d,f,0)},this.setState=function(d,f,m){const g=d.clippingPlanes,y=d.clipIntersection,x=d.clipShadows,v=t.get(d);if(!r||g===null||g.length===0||o&&!x)o?u(null):c();else{const w=o?0:i,_=w*4;let S=v.clippingState||null;l.value=S,S=u(g,f,_,m);for(let E=0;E!==_;++E)S[E]=n[E];v.clippingState=S,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=w}};function c(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(d,f,m,g){const y=d!==null?d.length:0;let x=null;if(y!==0){if(x=l.value,g!==!0||x===null){const v=m+y*4,w=f.matrixWorldInverse;a.getNormalMatrix(w),(x===null||x.length<v)&&(x=new Float32Array(v));for(let _=0,S=m;_!==y;++_,S+=4)s.copy(d[_]).applyMatrix4(w,a),s.normal.toArray(x,S),x[S+3]=s.constant}l.value=x,l.needsUpdate=!0}return e.numPlanes=y,e.numIntersection=0,x}}function Kee(t){let e=new WeakMap;function n(s,a){return a===zf?s.mapping=Cs:a===Of&&(s.mapping=cl),s}function i(s){if(s&&s.isTexture){const a=s.mapping;if(a===zf||a===Of)if(e.has(s)){const l=e.get(s).texture;return n(l,s.mapping)}else{const l=s.image;if(l&&l.height>0){const c=new IC(l.height);return c.fromEquirectangularTexture(t,s),e.set(s,c),s.addEventListener("dispose",r),n(c.texture,s.mapping)}else return null}}return s}function r(s){const a=s.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function o(){e=new WeakMap}return{get:i,dispose:o}}const Za=4,UR=[.125,.215,.35,.446,.526,.582],Ql=20,Qee=256,Ph=new Od,BR=new et;let f_=null,p_=0,m_=0,g_=!1;const Jee=new W;class hS{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._backgroundBox=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._blurMaterial=null,this._ggxMaterial=null}fromScene(e,n=0,i=.1,r=100,o={}){const{size:s=256,position:a=Jee}=o;f_=this._renderer.getRenderTarget(),p_=this._renderer.getActiveCubeFace(),m_=this._renderer.getActiveMipmapLevel(),g_=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(s);const l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,i,r,l,a),n>0&&this._blur(l,0,0,n),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=$R(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=VR(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._ggxMaterial!==null&&this._ggxMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodMeshes.length;e++)this._lodMeshes[e].geometry.dispose()}_cleanup(e){this._renderer.setRenderTarget(f_,p_,m_),this._renderer.xr.enabled=g_,e.scissorTest=!1,Su(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===Cs||e.mapping===cl?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),f_=this._renderer.getRenderTarget(),p_=this._renderer.getActiveCubeFace(),m_=this._renderer.getActiveMipmapLevel(),g_=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=n||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,i={magFilter:Nn,minFilter:Nn,generateMipmaps:!1,type:Es,format:Ki,colorSpace:Cc,depthBuffer:!1},r=HR(e,n,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=HR(e,n,i);const{_lodMax:o}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=ete(o)),this._blurMaterial=nte(o,e,n),this._ggxMaterial=tte(o,e,n)}return r}_compileMaterial(e){const n=new fi(new zt,e);this._renderer.compile(n,Ph)}_sceneToCubeUV(e,n,i,r,o){const l=new Pi(90,1,n,i),c=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],d=this._renderer,f=d.autoClear,m=d.toneMapping;d.getClearColor(BR),d.toneMapping=Mo,d.autoClear=!1,d.state.buffers.depth.getReversed()&&(d.setRenderTarget(r),d.clearDepth(),d.setRenderTarget(null)),this._backgroundBox===null&&(this._backgroundBox=new fi(new Nc,new gl({name:"PMREM.Background",side:fr,depthWrite:!1,depthTest:!1})));const y=this._backgroundBox,x=y.material;let v=!1;const w=e.background;w?w.isColor&&(x.color.copy(w),e.background=null,v=!0):(x.color.copy(BR),v=!0);for(let _=0;_<6;_++){const S=_%3;S===0?(l.up.set(0,c[_],0),l.position.set(o.x,o.y,o.z),l.lookAt(o.x+u[_],o.y,o.z)):S===1?(l.up.set(0,0,c[_]),l.position.set(o.x,o.y,o.z),l.lookAt(o.x,o.y+u[_],o.z)):(l.up.set(0,c[_],0),l.position.set(o.x,o.y,o.z),l.lookAt(o.x,o.y,o.z+u[_]));const E=this._cubeSize;Su(r,S*E,_>2?E:0,E,E),d.setRenderTarget(r),v&&d.render(y,l),d.render(e,l)}d.toneMapping=m,d.autoClear=f,e.background=w}_textureToCubeUV(e,n){const i=this._renderer,r=e.mapping===Cs||e.mapping===cl;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=$R()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=VR());const o=r?this._cubemapMaterial:this._equirectMaterial,s=this._lodMeshes[0];s.material=o;const a=o.uniforms;a.envMap.value=e;const l=this._cubeSize;Su(n,0,0,3*l,2*l),i.setRenderTarget(n),i.render(s,Ph)}_applyPMREM(e){const n=this._renderer,i=n.autoClear;n.autoClear=!1;const r=this._lodMeshes.length;for(let o=1;o<r;o++)this._applyGGXFilter(e,o-1,o);n.autoClear=i}_applyGGXFilter(e,n,i){const r=this._renderer,o=this._pingPongRenderTarget,s=this._ggxMaterial,a=this._lodMeshes[i];a.material=s;const l=s.uniforms,c=i/(this._lodMeshes.length-1),u=n/(this._lodMeshes.length-1),d=Math.sqrt(c*c-u*u),f=0+c*1.25,m=d*f,{_lodMax:g}=this,y=this._sizeLods[i],x=3*y*(i>g-Za?i-g+Za:0),v=4*(this._cubeSize-y);l.envMap.value=e.texture,l.roughness.value=m,l.mipInt.value=g-n,Su(o,x,v,3*y,2*y),r.setRenderTarget(o),r.render(a,Ph),l.envMap.value=o.texture,l.roughness.value=0,l.mipInt.value=g-i,Su(e,x,v,3*y,2*y),r.setRenderTarget(e),r.render(a,Ph)}_blur(e,n,i,r,o){const s=this._pingPongRenderTarget;this._halfBlur(e,s,n,i,r,"latitudinal",o),this._halfBlur(s,e,i,i,r,"longitudinal",o)}_halfBlur(e,n,i,r,o,s,a){const l=this._renderer,c=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&wt("blur direction must be either latitudinal or longitudinal!");const u=3,d=this._lodMeshes[r];d.material=c;const f=c.uniforms,m=this._sizeLods[i]-1,g=isFinite(o)?Math.PI/(2*m):2*Math.PI/(2*Ql-1),y=o/g,x=isFinite(o)?1+Math.floor(u*y):Ql;x>Ql&&qe(`sigmaRadians, ${o}, is too large and will clip, as it requested ${x} samples when the maximum is set to ${Ql}`);const v=[];let w=0;for(let P=0;P<Ql;++P){const D=P/y,A=Math.exp(-D*D/2);v.push(A),P===0?w+=A:P<x&&(w+=2*A)}for(let P=0;P<v.length;P++)v[P]=v[P]/w;f.envMap.value=e.texture,f.samples.value=x,f.weights.value=v,f.latitudinal.value=s==="latitudinal",a&&(f.poleAxis.value=a);const{_lodMax:_}=this;f.dTheta.value=g,f.mipInt.value=_-i;const S=this._sizeLods[r],E=3*S*(r>_-Za?r-_+Za:0),T=4*(this._cubeSize-S);Su(n,E,T,3*S,2*S),l.setRenderTarget(n),l.render(d,Ph)}}function ete(t){const e=[],n=[],i=[];let r=t;const o=t-Za+1+UR.length;for(let s=0;s<o;s++){const a=Math.pow(2,r);e.push(a);let l=1/a;s>t-Za?l=UR[s-t+Za-1]:s===0&&(l=0),n.push(l);const c=1/(a-2),u=-c,d=1+c,f=[u,u,d,u,d,d,u,u,d,d,u,d],m=6,g=6,y=3,x=2,v=1,w=new Float32Array(y*g*m),_=new Float32Array(x*g*m),S=new Float32Array(v*g*m);for(let T=0;T<m;T++){const P=T%3*2/3-1,D=T>2?0:-1,A=[P,D,0,P+2/3,D,0,P+2/3,D+1,0,P,D,0,P+2/3,D+1,0,P,D+1,0];w.set(A,y*g*T),_.set(f,x*g*T);const R=[T,T,T,T,T,T];S.set(R,v*g*T)}const E=new zt;E.setAttribute("position",new wn(w,y)),E.setAttribute("uv",new wn(_,x)),E.setAttribute("faceIndex",new wn(S,v)),i.push(new fi(E,null)),r>Za&&r--}return{lodMeshes:i,sizeLods:e,sigmas:n}}function HR(t,e,n){const i=new Jr(t,e,n);return i.texture.mapping=kd,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Su(t,e,n,i,r){t.viewport.set(e,n,i,r),t.scissor.set(e,n,i,r)}function tte(t,e,n){return new no({name:"PMREMGGXConvolution",defines:{GGX_SAMPLES:Qee,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},roughness:{value:0},mipInt:{value:0}},vertexShader:Tx(),fragmentShader:`

			precision highp float;
			precision highp int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform float roughness;
			uniform float mipInt;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			#define PI 3.14159265359

			// Van der Corput radical inverse
			float radicalInverse_VdC(uint bits) {
				bits = (bits << 16u) | (bits >> 16u);
				bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);
				bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);
				bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);
				bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);
				return float(bits) * 2.3283064365386963e-10; // / 0x100000000
			}

			// Hammersley sequence
			vec2 hammersley(uint i, uint N) {
				return vec2(float(i) / float(N), radicalInverse_VdC(i));
			}

			// GGX VNDF importance sampling (Eric Heitz 2018)
			// "Sampling the GGX Distribution of Visible Normals"
			// https://jcgt.org/published/0007/04/01/
			vec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {
				float alpha = roughness * roughness;

				// Section 3.2: Transform view direction to hemisphere configuration
				vec3 Vh = normalize(vec3(alpha * V.x, alpha * V.y, V.z));

				// Section 4.1: Orthonormal basis
				float lensq = Vh.x * Vh.x + Vh.y * Vh.y;
				vec3 T1 = lensq > 0.0 ? vec3(-Vh.y, Vh.x, 0.0) / sqrt(lensq) : vec3(1.0, 0.0, 0.0);
				vec3 T2 = cross(Vh, T1);

				// Section 4.2: Parameterization of projected area
				float r = sqrt(Xi.x);
				float phi = 2.0 * PI * Xi.y;
				float t1 = r * cos(phi);
				float t2 = r * sin(phi);
				float s = 0.5 * (1.0 + Vh.z);
				t2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;

				// Section 4.3: Reprojection onto hemisphere
				vec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * Vh;

				// Section 3.4: Transform back to ellipsoid configuration
				return normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));
			}

			void main() {
				vec3 N = normalize(vOutputDirection);
				vec3 V = N; // Assume view direction equals normal for pre-filtering

				vec3 prefilteredColor = vec3(0.0);
				float totalWeight = 0.0;

				// For very low roughness, just sample the environment directly
				if (roughness < 0.001) {
					gl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);
					return;
				}

				// Tangent space basis for VNDF sampling
				vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
				vec3 tangent = normalize(cross(up, N));
				vec3 bitangent = cross(N, tangent);

				for(uint i = 0u; i < uint(GGX_SAMPLES); i++) {
					vec2 Xi = hammersley(i, uint(GGX_SAMPLES));

					// For PMREM, V = N, so in tangent space V is always (0, 0, 1)
					vec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);

					// Transform H back to world space
					vec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);
					vec3 L = normalize(2.0 * dot(V, H) * H - V);

					float NdotL = max(dot(N, L), 0.0);

					if(NdotL > 0.0) {
						// Sample environment at fixed mip level
						// VNDF importance sampling handles the distribution filtering
						vec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);

						// Weight by NdotL for the split-sum approximation
						// VNDF PDF naturally accounts for the visible microfacet distribution
						prefilteredColor += sampleColor * NdotL;
						totalWeight += NdotL;
					}
				}

				if (totalWeight > 0.0) {
					prefilteredColor = prefilteredColor / totalWeight;
				}

				gl_FragColor = vec4(prefilteredColor, 1.0);
			}
		`,blending:Ss,depthTest:!1,depthWrite:!1})}function nte(t,e,n){const i=new Float32Array(Ql),r=new W(0,1,0);return new no({name:"SphericalGaussianBlur",defines:{n:Ql,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:Tx(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Ss,depthTest:!1,depthWrite:!1})}function VR(){return new no({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Tx(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Ss,depthTest:!1,depthWrite:!1})}function $R(){return new no({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Tx(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Ss,depthTest:!1,depthWrite:!1})}function Tx(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function ite(t){let e=new WeakMap,n=null;function i(a){if(a&&a.isTexture){const l=a.mapping,c=l===zf||l===Of,u=l===Cs||l===cl;if(c||u){let d=e.get(a);const f=d!==void 0?d.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==f)return n===null&&(n=new hS(t)),d=c?n.fromEquirectangular(a,d):n.fromCubemap(a,d),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),d.texture;if(d!==void 0)return d.texture;{const m=a.image;return c&&m&&m.height>0||u&&m&&r(m)?(n===null&&(n=new hS(t)),d=c?n.fromEquirectangular(a):n.fromCubemap(a),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),a.addEventListener("dispose",o),d.texture):null}}}return a}function r(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function o(a){const l=a.target;l.removeEventListener("dispose",o);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function s(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:i,dispose:s}}function rte(t){const e={};function n(i){if(e[i]!==void 0)return e[i];const r=t.getExtension(i);return e[i]=r,r}return{has:function(i){return n(i)!==null},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(i){const r=n(i);return r===null&&yd("WebGLRenderer: "+i+" extension not supported."),r}}}function ote(t,e,n,i){const r={},o=new WeakMap;function s(d){const f=d.target;f.index!==null&&e.remove(f.index);for(const g in f.attributes)e.remove(f.attributes[g]);f.removeEventListener("dispose",s),delete r[f.id];const m=o.get(f);m&&(e.remove(m),o.delete(f)),i.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,n.memory.geometries--}function a(d,f){return r[f.id]===!0||(f.addEventListener("dispose",s),r[f.id]=!0,n.memory.geometries++),f}function l(d){const f=d.attributes;for(const m in f)e.update(f[m],t.ARRAY_BUFFER)}function c(d){const f=[],m=d.index,g=d.attributes.position;let y=0;if(m!==null){const w=m.array;y=m.version;for(let _=0,S=w.length;_<S;_+=3){const E=w[_+0],T=w[_+1],P=w[_+2];f.push(E,T,T,P,P,E)}}else if(g!==void 0){const w=g.array;y=g.version;for(let _=0,S=w.length/3-1;_<S;_+=3){const E=_+0,T=_+1,P=_+2;f.push(E,T,T,P,P,E)}}else return;const x=new(OU(f)?AC:TC)(f,1);x.version=y;const v=o.get(d);v&&e.remove(v),o.set(d,x)}function u(d){const f=o.get(d);if(f){const m=d.index;m!==null&&f.version<m.version&&c(d)}else c(d);return o.get(d)}return{get:a,update:l,getWireframeAttribute:u}}function ste(t,e,n){let i;function r(f){i=f}let o,s;function a(f){o=f.type,s=f.bytesPerElement}function l(f,m){t.drawElements(i,m,o,f*s),n.update(m,i,1)}function c(f,m,g){g!==0&&(t.drawElementsInstanced(i,m,o,f*s,g),n.update(m,i,g))}function u(f,m,g){if(g===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,m,0,o,f,0,g);let x=0;for(let v=0;v<g;v++)x+=m[v];n.update(x,i,1)}function d(f,m,g,y){if(g===0)return;const x=e.get("WEBGL_multi_draw");if(x===null)for(let v=0;v<f.length;v++)c(f[v]/s,m[v],y[v]);else{x.multiDrawElementsInstancedWEBGL(i,m,0,o,f,0,y,0,g);let v=0;for(let w=0;w<g;w++)v+=m[w]*y[w];n.update(v,i,1)}}this.setMode=r,this.setIndex=a,this.render=l,this.renderInstances=c,this.renderMultiDraw=u,this.renderMultiDrawInstances=d}function ate(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function i(o,s,a){switch(n.calls++,s){case t.TRIANGLES:n.triangles+=a*(o/3);break;case t.LINES:n.lines+=a*(o/2);break;case t.LINE_STRIP:n.lines+=a*(o-1);break;case t.LINE_LOOP:n.lines+=a*o;break;case t.POINTS:n.points+=a*o;break;default:wt("WebGLInfo: Unknown draw mode:",s);break}}function r(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:r,update:i}}function lte(t,e,n){const i=new WeakMap,r=new Sn;function o(s,a,l){const c=s.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,d=u!==void 0?u.length:0;let f=i.get(a);if(f===void 0||f.count!==d){let A=function(){P.dispose(),i.delete(a),a.removeEventListener("dispose",A)};f!==void 0&&f.texture.dispose();const m=a.morphAttributes.position!==void 0,g=a.morphAttributes.normal!==void 0,y=a.morphAttributes.color!==void 0,x=a.morphAttributes.position||[],v=a.morphAttributes.normal||[],w=a.morphAttributes.color||[];let _=0;m===!0&&(_=1),g===!0&&(_=2),y===!0&&(_=3);let S=a.attributes.position.count*_,E=1;S>e.maxTextureSize&&(E=Math.ceil(S/e.maxTextureSize),S=e.maxTextureSize);const T=new Float32Array(S*E*4*d),P=new ox(T,S,E,d);P.type=dr,P.needsUpdate=!0;const D=_*4;for(let R=0;R<d;R++){const N=x[R],O=v[R],H=w[R],q=S*E*4*R;for(let Z=0;Z<N.count;Z++){const G=Z*D;m===!0&&(r.fromBufferAttribute(N,Z),T[q+G+0]=r.x,T[q+G+1]=r.y,T[q+G+2]=r.z,T[q+G+3]=0),g===!0&&(r.fromBufferAttribute(O,Z),T[q+G+4]=r.x,T[q+G+5]=r.y,T[q+G+6]=r.z,T[q+G+7]=0),y===!0&&(r.fromBufferAttribute(H,Z),T[q+G+8]=r.x,T[q+G+9]=r.y,T[q+G+10]=r.z,T[q+G+11]=H.itemSize===4?r.w:1)}}f={count:d,texture:P,size:new Ce(S,E)},i.set(a,f),a.addEventListener("dispose",A)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)l.getUniforms().setValue(t,"morphTexture",s.morphTexture,n);else{let m=0;for(let y=0;y<c.length;y++)m+=c[y];const g=a.morphTargetsRelative?1:1-m;l.getUniforms().setValue(t,"morphTargetBaseInfluence",g),l.getUniforms().setValue(t,"morphTargetInfluences",c)}l.getUniforms().setValue(t,"morphTargetsTexture",f.texture,n),l.getUniforms().setValue(t,"morphTargetsTextureSize",f.size)}return{update:o}}function cte(t,e,n,i){let r=new WeakMap;function o(l){const c=i.render.frame,u=l.geometry,d=e.get(l,u);if(r.get(d)!==c&&(e.update(d),r.set(d,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==c&&(n.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,t.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const f=l.skeleton;r.get(f)!==c&&(f.update(),r.set(f,c))}return d}function s(){r=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),n.remove(c.instanceMatrix),c.instanceColor!==null&&n.remove(c.instanceColor)}return{update:o,dispose:s}}const ute={[dC]:"LINEAR_TONE_MAPPING",[hC]:"REINHARD_TONE_MAPPING",[fC]:"CINEON_TONE_MAPPING",[Xy]:"ACES_FILMIC_TONE_MAPPING",[mC]:"AGX_TONE_MAPPING",[gC]:"NEUTRAL_TONE_MAPPING",[pC]:"CUSTOM_TONE_MAPPING"};function dte(t,e,n,i,r){const o=new Jr(e,n,{type:t,depthBuffer:i,stencilBuffer:r}),s=new Jr(e,n,{type:Es,depthBuffer:!1,stencilBuffer:!1}),a=new zt;a.setAttribute("position",new at([-1,3,0,-1,-1,0,3,-1,0],3)),a.setAttribute("uv",new at([0,2,0,0,2,0],2));const l=new HC({uniforms:{tDiffuse:{value:null}},vertexShader:`
			precision highp float;

			uniform mat4 modelViewMatrix;
			uniform mat4 projectionMatrix;

			attribute vec3 position;
			attribute vec2 uv;

			varying vec2 vUv;

			void main() {
				vUv = uv;
				gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			}`,fragmentShader:`
			precision highp float;

			uniform sampler2D tDiffuse;

			varying vec2 vUv;

			#include <tonemapping_pars_fragment>
			#include <colorspace_pars_fragment>

			void main() {
				gl_FragColor = texture2D( tDiffuse, vUv );

				#ifdef LINEAR_TONE_MAPPING
					gl_FragColor.rgb = LinearToneMapping( gl_FragColor.rgb );
				#elif defined( REINHARD_TONE_MAPPING )
					gl_FragColor.rgb = ReinhardToneMapping( gl_FragColor.rgb );
				#elif defined( CINEON_TONE_MAPPING )
					gl_FragColor.rgb = CineonToneMapping( gl_FragColor.rgb );
				#elif defined( ACES_FILMIC_TONE_MAPPING )
					gl_FragColor.rgb = ACESFilmicToneMapping( gl_FragColor.rgb );
				#elif defined( AGX_TONE_MAPPING )
					gl_FragColor.rgb = AgXToneMapping( gl_FragColor.rgb );
				#elif defined( NEUTRAL_TONE_MAPPING )
					gl_FragColor.rgb = NeutralToneMapping( gl_FragColor.rgb );
				#elif defined( CUSTOM_TONE_MAPPING )
					gl_FragColor.rgb = CustomToneMapping( gl_FragColor.rgb );
				#endif

				#ifdef SRGB_TRANSFER
					gl_FragColor = sRGBTransferOETF( gl_FragColor );
				#endif
			}`,depthTest:!1,depthWrite:!1}),c=new fi(a,l),u=new Od(-1,1,1,-1,0,1);let d=null,f=null,m=!1,g,y=null,x=[],v=!1;this.setSize=function(w,_){o.setSize(w,_),s.setSize(w,_);for(let S=0;S<x.length;S++){const E=x[S];E.setSize&&E.setSize(w,_)}},this.setEffects=function(w){x=w,v=x.length>0&&x[0].isRenderPass===!0;const _=o.width,S=o.height;for(let E=0;E<x.length;E++){const T=x[E];T.setSize&&T.setSize(_,S)}},this.begin=function(w,_){if(m||w.toneMapping===Mo&&x.length===0)return!1;if(y=_,_!==null){const S=_.width,E=_.height;(o.width!==S||o.height!==E)&&this.setSize(S,E)}return v===!1&&w.setRenderTarget(o),g=w.toneMapping,w.toneMapping=Mo,!0},this.hasRenderPass=function(){return v},this.end=function(w,_){w.toneMapping=g,m=!0;let S=o,E=s;for(let T=0;T<x.length;T++){const P=x[T];if(P.enabled!==!1&&(P.render(w,E,S,_),P.needsSwap!==!1)){const D=S;S=E,E=D}}if(d!==w.outputColorSpace||f!==w.toneMapping){d=w.outputColorSpace,f=w.toneMapping,l.defines={},Jt.getTransfer(d)===dn&&(l.defines.SRGB_TRANSFER="");const T=ute[f];T&&(l.defines[T]=""),l.needsUpdate=!0}l.uniforms.tDiffuse.value=S.texture,w.setRenderTarget(y),w.render(c,u),y=null,m=!1},this.isCompositing=function(){return m},this.dispose=function(){o.dispose(),s.dispose(),a.dispose(),l.dispose()}}const V5=new Kn,fS=new bd(1,1),$5=new ox,W5=new sx,G5=new bp,WR=[],GR=[],jR=new Float32Array(16),qR=new Float32Array(9),XR=new Float32Array(4);function Fd(t,e,n){const i=t[0];if(i<=0||i>0)return t;const r=e*n;let o=WR[r];if(o===void 0&&(o=new Float32Array(r),WR[r]=o),e!==0){i.toArray(o,0);for(let s=1,a=0;s!==e;++s)a+=n,t[s].toArray(o,a)}return o}function _i(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function bi(t,e){for(let n=0,i=e.length;n<i;n++)t[n]=e[n]}function Ax(t,e){let n=GR[e];n===void 0&&(n=new Int32Array(e),GR[e]=n);for(let i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function hte(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function fte(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(_i(n,e))return;t.uniform2fv(this.addr,e),bi(n,e)}}function pte(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(_i(n,e))return;t.uniform3fv(this.addr,e),bi(n,e)}}function mte(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(_i(n,e))return;t.uniform4fv(this.addr,e),bi(n,e)}}function gte(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(_i(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),bi(n,e)}else{if(_i(n,i))return;XR.set(i),t.uniformMatrix2fv(this.addr,!1,XR),bi(n,i)}}function vte(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(_i(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),bi(n,e)}else{if(_i(n,i))return;qR.set(i),t.uniformMatrix3fv(this.addr,!1,qR),bi(n,i)}}function yte(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(_i(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),bi(n,e)}else{if(_i(n,i))return;jR.set(i),t.uniformMatrix4fv(this.addr,!1,jR),bi(n,i)}}function xte(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function wte(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(_i(n,e))return;t.uniform2iv(this.addr,e),bi(n,e)}}function _te(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(_i(n,e))return;t.uniform3iv(this.addr,e),bi(n,e)}}function bte(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(_i(n,e))return;t.uniform4iv(this.addr,e),bi(n,e)}}function Ste(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function Mte(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(_i(n,e))return;t.uniform2uiv(this.addr,e),bi(n,e)}}function Cte(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(_i(n,e))return;t.uniform3uiv(this.addr,e),bi(n,e)}}function Ete(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(_i(n,e))return;t.uniform4uiv(this.addr,e),bi(n,e)}}function Tte(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r);let o;this.type===t.SAMPLER_2D_SHADOW?(fS.compareFunction=n.isReversedDepthBuffer()?rx:ix,o=fS):o=V5,n.setTexture2D(e||o,r)}function Ate(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||W5,r)}function Ite(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(e||G5,r)}function Pte(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||$5,r)}function Rte(t){switch(t){case 5126:return hte;case 35664:return fte;case 35665:return pte;case 35666:return mte;case 35674:return gte;case 35675:return vte;case 35676:return yte;case 5124:case 35670:return xte;case 35667:case 35671:return wte;case 35668:case 35672:return _te;case 35669:case 35673:return bte;case 5125:return Ste;case 36294:return Mte;case 36295:return Cte;case 36296:return Ete;case 35678:case 36198:case 36298:case 36306:case 35682:return Tte;case 35679:case 36299:case 36307:return Ate;case 35680:case 36300:case 36308:case 36293:return Ite;case 36289:case 36303:case 36311:case 36292:return Pte}}function Dte(t,e){t.uniform1fv(this.addr,e)}function kte(t,e){const n=Fd(e,this.size,2);t.uniform2fv(this.addr,n)}function Nte(t,e){const n=Fd(e,this.size,3);t.uniform3fv(this.addr,n)}function Lte(t,e){const n=Fd(e,this.size,4);t.uniform4fv(this.addr,n)}function zte(t,e){const n=Fd(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function Ote(t,e){const n=Fd(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function Fte(t,e){const n=Fd(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function Ute(t,e){t.uniform1iv(this.addr,e)}function Bte(t,e){t.uniform2iv(this.addr,e)}function Hte(t,e){t.uniform3iv(this.addr,e)}function Vte(t,e){t.uniform4iv(this.addr,e)}function $te(t,e){t.uniform1uiv(this.addr,e)}function Wte(t,e){t.uniform2uiv(this.addr,e)}function Gte(t,e){t.uniform3uiv(this.addr,e)}function jte(t,e){t.uniform4uiv(this.addr,e)}function qte(t,e,n){const i=this.cache,r=e.length,o=Ax(n,r);_i(i,o)||(t.uniform1iv(this.addr,o),bi(i,o));let s;this.type===t.SAMPLER_2D_SHADOW?s=fS:s=V5;for(let a=0;a!==r;++a)n.setTexture2D(e[a]||s,o[a])}function Xte(t,e,n){const i=this.cache,r=e.length,o=Ax(n,r);_i(i,o)||(t.uniform1iv(this.addr,o),bi(i,o));for(let s=0;s!==r;++s)n.setTexture3D(e[s]||W5,o[s])}function Yte(t,e,n){const i=this.cache,r=e.length,o=Ax(n,r);_i(i,o)||(t.uniform1iv(this.addr,o),bi(i,o));for(let s=0;s!==r;++s)n.setTextureCube(e[s]||G5,o[s])}function Zte(t,e,n){const i=this.cache,r=e.length,o=Ax(n,r);_i(i,o)||(t.uniform1iv(this.addr,o),bi(i,o));for(let s=0;s!==r;++s)n.setTexture2DArray(e[s]||$5,o[s])}function Kte(t){switch(t){case 5126:return Dte;case 35664:return kte;case 35665:return Nte;case 35666:return Lte;case 35674:return zte;case 35675:return Ote;case 35676:return Fte;case 5124:case 35670:return Ute;case 35667:case 35671:return Bte;case 35668:case 35672:return Hte;case 35669:case 35673:return Vte;case 5125:return $te;case 36294:return Wte;case 36295:return Gte;case 36296:return jte;case 35678:case 36198:case 36298:case 36306:case 35682:return qte;case 35679:case 36299:case 36307:return Xte;case 35680:case 36300:case 36308:case 36293:return Yte;case 36289:case 36303:case 36311:case 36292:return Zte}}class Qte{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.type=n.type,this.setValue=Rte(n.type)}}class Jte{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=Kte(n.type)}}class ene{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,i){const r=this.seq;for(let o=0,s=r.length;o!==s;++o){const a=r[o];a.setValue(e,n[a.id],i)}}}const v_=/(\w+)(\])?(\[|\.)?/g;function YR(t,e){t.seq.push(e),t.map[e.id]=e}function tne(t,e,n){const i=t.name,r=i.length;for(v_.lastIndex=0;;){const o=v_.exec(i),s=v_.lastIndex;let a=o[1];const l=o[2]==="]",c=o[3];if(l&&(a=a|0),c===void 0||c==="["&&s+2===r){YR(n,c===void 0?new Qte(a,t,e):new Jte(a,t,e));break}else{let d=n.map[a];d===void 0&&(d=new ene(a),YR(n,d)),n=d}}}class _v{constructor(e,n){this.seq=[],this.map={};const i=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let s=0;s<i;++s){const a=e.getActiveUniform(n,s),l=e.getUniformLocation(n,a.name);tne(a,l,this)}const r=[],o=[];for(const s of this.seq)s.type===e.SAMPLER_2D_SHADOW||s.type===e.SAMPLER_CUBE_SHADOW||s.type===e.SAMPLER_2D_ARRAY_SHADOW?r.push(s):o.push(s);r.length>0&&(this.seq=r.concat(o))}setValue(e,n,i,r){const o=this.map[n];o!==void 0&&o.setValue(e,i,r)}setOptional(e,n,i){const r=n[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,n,i,r){for(let o=0,s=n.length;o!==s;++o){const a=n[o],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,n){const i=[];for(let r=0,o=e.length;r!==o;++r){const s=e[r];s.id in n&&i.push(s)}return i}}function ZR(t,e,n){const i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}const nne=37297;let ine=0;function rne(t,e){const n=t.split(`
`),i=[],r=Math.max(e-6,0),o=Math.min(e+6,n.length);for(let s=r;s<o;s++){const a=s+1;i.push(`${a===e?">":" "} ${a}: ${n[s]}`)}return i.join(`
`)}const KR=new Ut;function one(t){Jt._getMatrix(KR,Jt.workingColorSpace,t);const e=`mat3( ${KR.elements.map(n=>n.toFixed(4))} )`;switch(Jt.getTransfer(t)){case Vf:return[e,"LinearTransferOETF"];case dn:return[e,"sRGBTransferOETF"];default:return qe("WebGLProgram: Unsupported color space: ",t),[e,"LinearTransferOETF"]}}function QR(t,e,n){const i=t.getShaderParameter(e,t.COMPILE_STATUS),o=(t.getShaderInfoLog(e)||"").trim();if(i&&o==="")return"";const s=/ERROR: 0:(\d+)/.exec(o);if(s){const a=parseInt(s[1]);return n.toUpperCase()+`

`+o+`

`+rne(t.getShaderSource(e),a)}else return o}function sne(t,e){const n=one(e);return[`vec4 ${t}( vec4 value ) {`,`	return ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );`,"}"].join(`
`)}const ane={[dC]:"Linear",[hC]:"Reinhard",[fC]:"Cineon",[Xy]:"ACESFilmic",[mC]:"AgX",[gC]:"Neutral",[pC]:"Custom"};function lne(t,e){const n=ane[e];return n===void 0?(qe("WebGLProgram: Unsupported toneMapping:",e),"vec3 "+t+"( vec3 color ) { return LinearToneMapping( color ); }"):"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const Jg=new W;function cne(){Jt.getLuminanceCoefficients(Jg);const t=Jg.x.toFixed(4),e=Jg.y.toFixed(4),n=Jg.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${t}, ${e}, ${n} );`,"	return dot( weights, rgb );","}"].join(`
`)}function une(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Wh).join(`
`)}function dne(t){const e=[];for(const n in t){const i=t[n];i!==!1&&e.push("#define "+n+" "+i)}return e.join(`
`)}function hne(t,e){const n={},i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const o=t.getActiveAttrib(e,r),s=o.name;let a=1;o.type===t.FLOAT_MAT2&&(a=2),o.type===t.FLOAT_MAT3&&(a=3),o.type===t.FLOAT_MAT4&&(a=4),n[s]={type:o.type,location:t.getAttribLocation(e,s),locationSize:a}}return n}function Wh(t){return t!==""}function JR(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function eD(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const fne=/^[ \t]*#include +<([\w\d./]+)>/gm;function pS(t){return t.replace(fne,mne)}const pne=new Map;function mne(t,e){let n=$t[e];if(n===void 0){const i=pne.get(e);if(i!==void 0)n=$t[i],qe('WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return pS(n)}const gne=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function tD(t){return t.replace(gne,vne)}function vne(t,e,n,i){let r="";for(let o=parseInt(e);o<parseInt(n);o++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return r}function nD(t){let e=`precision ${t.precision} float;
	precision ${t.precision} int;
	precision ${t.precision} sampler2D;
	precision ${t.precision} samplerCube;
	precision ${t.precision} sampler3D;
	precision ${t.precision} sampler2DArray;
	precision ${t.precision} sampler2DShadow;
	precision ${t.precision} samplerCubeShadow;
	precision ${t.precision} sampler2DArrayShadow;
	precision ${t.precision} isampler2D;
	precision ${t.precision} isampler3D;
	precision ${t.precision} isamplerCube;
	precision ${t.precision} isampler2DArray;
	precision ${t.precision} usampler2D;
	precision ${t.precision} usampler3D;
	precision ${t.precision} usamplerCube;
	precision ${t.precision} usampler2DArray;
	`;return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}const yne={[nd]:"SHADOWMAP_TYPE_PCF",[nc]:"SHADOWMAP_TYPE_VSM"};function xne(t){return yne[t.shadowMapType]||"SHADOWMAP_TYPE_BASIC"}const wne={[Cs]:"ENVMAP_TYPE_CUBE",[cl]:"ENVMAP_TYPE_CUBE",[kd]:"ENVMAP_TYPE_CUBE_UV"};function _ne(t){return t.envMap===!1?"ENVMAP_TYPE_CUBE":wne[t.envMapMode]||"ENVMAP_TYPE_CUBE"}const bne={[cl]:"ENVMAP_MODE_REFRACTION"};function Sne(t){return t.envMap===!1?"ENVMAP_MODE_REFLECTION":bne[t.envMapMode]||"ENVMAP_MODE_REFLECTION"}const Mne={[xp]:"ENVMAP_BLENDING_MULTIPLY",[SU]:"ENVMAP_BLENDING_MIX",[MU]:"ENVMAP_BLENDING_ADD"};function Cne(t){return t.envMap===!1?"ENVMAP_BLENDING_NONE":Mne[t.combine]||"ENVMAP_BLENDING_NONE"}function Ene(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:i,maxMip:n}}function Tne(t,e,n,i){const r=t.getContext(),o=n.defines;let s=n.vertexShader,a=n.fragmentShader;const l=xne(n),c=_ne(n),u=Sne(n),d=Cne(n),f=Ene(n),m=une(n),g=dne(o),y=r.createProgram();let x,v,w=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(x=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,g].filter(Wh).join(`
`),x.length>0&&(x+=`
`),v=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,g].filter(Wh).join(`
`),v.length>0&&(v+=`
`)):(x=[nD(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,g,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",n.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Wh).join(`
`),v=[nD(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,g,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+d:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",n.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Mo?"#define TONE_MAPPING":"",n.toneMapping!==Mo?$t.tonemapping_pars_fragment:"",n.toneMapping!==Mo?lne("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",$t.colorspace_pars_fragment,sne("linearToOutputTexel",n.outputColorSpace),cne(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(Wh).join(`
`)),s=pS(s),s=JR(s,n),s=eD(s,n),a=pS(a),a=JR(a,n),a=eD(a,n),s=tD(s),a=tD(a),n.isRawShaderMaterial!==!0&&(w=`#version 300 es
`,x=[m,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+x,v=["#define varying in",n.glslVersion===rS?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===rS?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+v);const _=w+x+s,S=w+v+a,E=ZR(r,r.VERTEX_SHADER,_),T=ZR(r,r.FRAGMENT_SHADER,S);r.attachShader(y,E),r.attachShader(y,T),n.index0AttributeName!==void 0?r.bindAttribLocation(y,0,n.index0AttributeName):n.morphTargets===!0&&r.bindAttribLocation(y,0,"position"),r.linkProgram(y);function P(N){if(t.debug.checkShaderErrors){const O=r.getProgramInfoLog(y)||"",H=r.getShaderInfoLog(E)||"",q=r.getShaderInfoLog(T)||"",Z=O.trim(),G=H.trim(),Y=q.trim();let z=!0,$=!0;if(r.getProgramParameter(y,r.LINK_STATUS)===!1)if(z=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(r,y,E,T);else{const X=QR(r,E,"vertex"),K=QR(r,T,"fragment");wt("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(y,r.VALIDATE_STATUS)+`

Material Name: `+N.name+`
Material Type: `+N.type+`

Program Info Log: `+Z+`
`+X+`
`+K)}else Z!==""?qe("WebGLProgram: Program Info Log:",Z):(G===""||Y==="")&&($=!1);$&&(N.diagnostics={runnable:z,programLog:Z,vertexShader:{log:G,prefix:x},fragmentShader:{log:Y,prefix:v}})}r.deleteShader(E),r.deleteShader(T),D=new _v(r,y),A=hne(r,y)}let D;this.getUniforms=function(){return D===void 0&&P(this),D};let A;this.getAttributes=function(){return A===void 0&&P(this),A};let R=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return R===!1&&(R=r.getProgramParameter(y,nne)),R},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(y),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=ine++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=E,this.fragmentShader=T,this}let Ane=0;class Ine{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(n),o=this._getShaderStage(i),s=this._getShaderCacheForMaterial(e);return s.has(r)===!1&&(s.add(r),r.usedTimes++),s.has(o)===!1&&(s.add(o),o.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const i of n)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let i=n.get(e);return i===void 0&&(i=new Set,n.set(e,i)),i}_getShaderStage(e){const n=this.shaderCache;let i=n.get(e);return i===void 0&&(i=new Pne(e),n.set(e,i)),i}}class Pne{constructor(e){this.id=Ane++,this.code=e,this.usedTimes=0}}function Rne(t,e,n,i,r,o,s){const a=new hc,l=new Ine,c=new Set,u=[],d=new Map,f=r.logarithmicDepthBuffer;let m=r.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distance",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function y(A){return c.add(A),A===0?"uv":`uv${A}`}function x(A,R,N,O,H){const q=O.fog,Z=H.geometry,G=A.isMeshStandardMaterial?O.environment:null,Y=(A.isMeshStandardMaterial?n:e).get(A.envMap||G),z=Y&&Y.mapping===kd?Y.image.height:null,$=g[A.type];A.precision!==null&&(m=r.getMaxPrecision(A.precision),m!==A.precision&&qe("WebGLProgram.getParameters:",A.precision,"not supported, using",m,"instead."));const X=Z.morphAttributes.position||Z.morphAttributes.normal||Z.morphAttributes.color,K=X!==void 0?X.length:0;let oe=0;Z.morphAttributes.position!==void 0&&(oe=1),Z.morphAttributes.normal!==void 0&&(oe=2),Z.morphAttributes.color!==void 0&&(oe=3);let pe,be,it,ae;if($){const on=$o[$];pe=on.vertexShader,be=on.fragmentShader}else pe=A.vertexShader,be=A.fragmentShader,l.update(A),it=l.getVertexShaderID(A),ae=l.getFragmentShaderID(A);const me=t.getRenderTarget(),Fe=t.state.buffers.depth.getReversed(),tt=H.isInstancedMesh===!0,Be=H.isBatchedMesh===!0,yt=!!A.map,It=!!A.matcap,Re=!!Y,le=!!A.aoMap,we=!!A.lightMap,ve=!!A.bumpMap,Ae=!!A.normalMap,V=!!A.displacementMap,mt=!!A.emissiveMap,$e=!!A.metalnessMap,_t=!!A.roughnessMap,Ne=A.anisotropy>0,B=A.clearcoat>0,L=A.dispersion>0,Q=A.iridescence>0,re=A.sheen>0,Se=A.transmission>0,he=Ne&&!!A.anisotropyMap,rt=B&&!!A.clearcoatMap,Ue=B&&!!A.clearcoatNormalMap,ut=B&&!!A.clearcoatRoughnessMap,Ct=Q&&!!A.iridescenceMap,Ie=Q&&!!A.iridescenceThicknessMap,je=re&&!!A.sheenColorMap,dt=re&&!!A.sheenRoughnessMap,gt=!!A.specularMap,We=!!A.specularColorMap,Vt=!!A.specularIntensityMap,J=Se&&!!A.transmissionMap,Ze=Se&&!!A.thicknessMap,ze=!!A.gradientMap,Je=!!A.alphaMap,De=A.alphaTest>0,Me=!!A.alphaHash,Ve=!!A.extensions;let kt=Mo;A.toneMapped&&(me===null||me.isXRRenderTarget===!0)&&(kt=t.toneMapping);const pn={shaderID:$,shaderType:A.type,shaderName:A.name,vertexShader:pe,fragmentShader:be,defines:A.defines,customVertexShaderID:it,customFragmentShaderID:ae,isRawShaderMaterial:A.isRawShaderMaterial===!0,glslVersion:A.glslVersion,precision:m,batching:Be,batchingColor:Be&&H._colorsTexture!==null,instancing:tt,instancingColor:tt&&H.instanceColor!==null,instancingMorph:tt&&H.morphTexture!==null,outputColorSpace:me===null?t.outputColorSpace:me.isXRRenderTarget===!0?me.texture.colorSpace:Cc,alphaToCoverage:!!A.alphaToCoverage,map:yt,matcap:It,envMap:Re,envMapMode:Re&&Y.mapping,envMapCubeUVHeight:z,aoMap:le,lightMap:we,bumpMap:ve,normalMap:Ae,displacementMap:V,emissiveMap:mt,normalMapObjectSpace:Ae&&A.normalMapType===PU,normalMapTangentSpace:Ae&&A.normalMapType===ml,metalnessMap:$e,roughnessMap:_t,anisotropy:Ne,anisotropyMap:he,clearcoat:B,clearcoatMap:rt,clearcoatNormalMap:Ue,clearcoatRoughnessMap:ut,dispersion:L,iridescence:Q,iridescenceMap:Ct,iridescenceThicknessMap:Ie,sheen:re,sheenColorMap:je,sheenRoughnessMap:dt,specularMap:gt,specularColorMap:We,specularIntensityMap:Vt,transmission:Se,transmissionMap:J,thicknessMap:Ze,gradientMap:ze,opaque:A.transparent===!1&&A.blending===uc&&A.alphaToCoverage===!1,alphaMap:Je,alphaTest:De,alphaHash:Me,combine:A.combine,mapUv:yt&&y(A.map.channel),aoMapUv:le&&y(A.aoMap.channel),lightMapUv:we&&y(A.lightMap.channel),bumpMapUv:ve&&y(A.bumpMap.channel),normalMapUv:Ae&&y(A.normalMap.channel),displacementMapUv:V&&y(A.displacementMap.channel),emissiveMapUv:mt&&y(A.emissiveMap.channel),metalnessMapUv:$e&&y(A.metalnessMap.channel),roughnessMapUv:_t&&y(A.roughnessMap.channel),anisotropyMapUv:he&&y(A.anisotropyMap.channel),clearcoatMapUv:rt&&y(A.clearcoatMap.channel),clearcoatNormalMapUv:Ue&&y(A.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ut&&y(A.clearcoatRoughnessMap.channel),iridescenceMapUv:Ct&&y(A.iridescenceMap.channel),iridescenceThicknessMapUv:Ie&&y(A.iridescenceThicknessMap.channel),sheenColorMapUv:je&&y(A.sheenColorMap.channel),sheenRoughnessMapUv:dt&&y(A.sheenRoughnessMap.channel),specularMapUv:gt&&y(A.specularMap.channel),specularColorMapUv:We&&y(A.specularColorMap.channel),specularIntensityMapUv:Vt&&y(A.specularIntensityMap.channel),transmissionMapUv:J&&y(A.transmissionMap.channel),thicknessMapUv:Ze&&y(A.thicknessMap.channel),alphaMapUv:Je&&y(A.alphaMap.channel),vertexTangents:!!Z.attributes.tangent&&(Ae||Ne),vertexColors:A.vertexColors,vertexAlphas:A.vertexColors===!0&&!!Z.attributes.color&&Z.attributes.color.itemSize===4,pointsUvs:H.isPoints===!0&&!!Z.attributes.uv&&(yt||Je),fog:!!q,useFog:A.fog===!0,fogExp2:!!q&&q.isFogExp2,flatShading:A.flatShading===!0&&A.wireframe===!1,sizeAttenuation:A.sizeAttenuation===!0,logarithmicDepthBuffer:f,reversedDepthBuffer:Fe,skinning:H.isSkinnedMesh===!0,morphTargets:Z.morphAttributes.position!==void 0,morphNormals:Z.morphAttributes.normal!==void 0,morphColors:Z.morphAttributes.color!==void 0,morphTargetsCount:K,morphTextureStride:oe,numDirLights:R.directional.length,numPointLights:R.point.length,numSpotLights:R.spot.length,numSpotLightMaps:R.spotLightMap.length,numRectAreaLights:R.rectArea.length,numHemiLights:R.hemi.length,numDirLightShadows:R.directionalShadowMap.length,numPointLightShadows:R.pointShadowMap.length,numSpotLightShadows:R.spotShadowMap.length,numSpotLightShadowsWithMaps:R.numSpotLightShadowsWithMaps,numLightProbes:R.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:A.dithering,shadowMapEnabled:t.shadowMap.enabled&&N.length>0,shadowMapType:t.shadowMap.type,toneMapping:kt,decodeVideoTexture:yt&&A.map.isVideoTexture===!0&&Jt.getTransfer(A.map.colorSpace)===dn,decodeVideoTextureEmissive:mt&&A.emissiveMap.isVideoTexture===!0&&Jt.getTransfer(A.emissiveMap.colorSpace)===dn,premultipliedAlpha:A.premultipliedAlpha,doubleSided:A.side===ps,flipSided:A.side===fr,useDepthPacking:A.depthPacking>=0,depthPacking:A.depthPacking||0,index0AttributeName:A.index0AttributeName,extensionClipCullDistance:Ve&&A.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Ve&&A.extensions.multiDraw===!0||Be)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:A.customProgramCacheKey()};return pn.vertexUv1s=c.has(1),pn.vertexUv2s=c.has(2),pn.vertexUv3s=c.has(3),c.clear(),pn}function v(A){const R=[];if(A.shaderID?R.push(A.shaderID):(R.push(A.customVertexShaderID),R.push(A.customFragmentShaderID)),A.defines!==void 0)for(const N in A.defines)R.push(N),R.push(A.defines[N]);return A.isRawShaderMaterial===!1&&(w(R,A),_(R,A),R.push(t.outputColorSpace)),R.push(A.customProgramCacheKey),R.join()}function w(A,R){A.push(R.precision),A.push(R.outputColorSpace),A.push(R.envMapMode),A.push(R.envMapCubeUVHeight),A.push(R.mapUv),A.push(R.alphaMapUv),A.push(R.lightMapUv),A.push(R.aoMapUv),A.push(R.bumpMapUv),A.push(R.normalMapUv),A.push(R.displacementMapUv),A.push(R.emissiveMapUv),A.push(R.metalnessMapUv),A.push(R.roughnessMapUv),A.push(R.anisotropyMapUv),A.push(R.clearcoatMapUv),A.push(R.clearcoatNormalMapUv),A.push(R.clearcoatRoughnessMapUv),A.push(R.iridescenceMapUv),A.push(R.iridescenceThicknessMapUv),A.push(R.sheenColorMapUv),A.push(R.sheenRoughnessMapUv),A.push(R.specularMapUv),A.push(R.specularColorMapUv),A.push(R.specularIntensityMapUv),A.push(R.transmissionMapUv),A.push(R.thicknessMapUv),A.push(R.combine),A.push(R.fogExp2),A.push(R.sizeAttenuation),A.push(R.morphTargetsCount),A.push(R.morphAttributeCount),A.push(R.numDirLights),A.push(R.numPointLights),A.push(R.numSpotLights),A.push(R.numSpotLightMaps),A.push(R.numHemiLights),A.push(R.numRectAreaLights),A.push(R.numDirLightShadows),A.push(R.numPointLightShadows),A.push(R.numSpotLightShadows),A.push(R.numSpotLightShadowsWithMaps),A.push(R.numLightProbes),A.push(R.shadowMapType),A.push(R.toneMapping),A.push(R.numClippingPlanes),A.push(R.numClipIntersection),A.push(R.depthPacking)}function _(A,R){a.disableAll(),R.instancing&&a.enable(0),R.instancingColor&&a.enable(1),R.instancingMorph&&a.enable(2),R.matcap&&a.enable(3),R.envMap&&a.enable(4),R.normalMapObjectSpace&&a.enable(5),R.normalMapTangentSpace&&a.enable(6),R.clearcoat&&a.enable(7),R.iridescence&&a.enable(8),R.alphaTest&&a.enable(9),R.vertexColors&&a.enable(10),R.vertexAlphas&&a.enable(11),R.vertexUv1s&&a.enable(12),R.vertexUv2s&&a.enable(13),R.vertexUv3s&&a.enable(14),R.vertexTangents&&a.enable(15),R.anisotropy&&a.enable(16),R.alphaHash&&a.enable(17),R.batching&&a.enable(18),R.dispersion&&a.enable(19),R.batchingColor&&a.enable(20),R.gradientMap&&a.enable(21),A.push(a.mask),a.disableAll(),R.fog&&a.enable(0),R.useFog&&a.enable(1),R.flatShading&&a.enable(2),R.logarithmicDepthBuffer&&a.enable(3),R.reversedDepthBuffer&&a.enable(4),R.skinning&&a.enable(5),R.morphTargets&&a.enable(6),R.morphNormals&&a.enable(7),R.morphColors&&a.enable(8),R.premultipliedAlpha&&a.enable(9),R.shadowMapEnabled&&a.enable(10),R.doubleSided&&a.enable(11),R.flipSided&&a.enable(12),R.useDepthPacking&&a.enable(13),R.dithering&&a.enable(14),R.transmission&&a.enable(15),R.sheen&&a.enable(16),R.opaque&&a.enable(17),R.pointsUvs&&a.enable(18),R.decodeVideoTexture&&a.enable(19),R.decodeVideoTextureEmissive&&a.enable(20),R.alphaToCoverage&&a.enable(21),A.push(a.mask)}function S(A){const R=g[A.type];let N;if(R){const O=$o[R];N=$U.clone(O.uniforms)}else N=A.uniforms;return N}function E(A,R){let N=d.get(R);return N!==void 0?++N.usedTimes:(N=new Tne(t,R,A,o),u.push(N),d.set(R,N)),N}function T(A){if(--A.usedTimes===0){const R=u.indexOf(A);u[R]=u[u.length-1],u.pop(),d.delete(A.cacheKey),A.destroy()}}function P(A){l.remove(A)}function D(){l.dispose()}return{getParameters:x,getProgramCacheKey:v,getUniforms:S,acquireProgram:E,releaseProgram:T,releaseShaderCache:P,programs:u,dispose:D}}function Dne(){let t=new WeakMap;function e(s){return t.has(s)}function n(s){let a=t.get(s);return a===void 0&&(a={},t.set(s,a)),a}function i(s){t.delete(s)}function r(s,a,l){t.get(s)[a]=l}function o(){t=new WeakMap}return{has:e,get:n,remove:i,update:r,dispose:o}}function kne(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function iD(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function rD(){const t=[];let e=0;const n=[],i=[],r=[];function o(){e=0,n.length=0,i.length=0,r.length=0}function s(d,f,m,g,y,x){let v=t[e];return v===void 0?(v={id:d.id,object:d,geometry:f,material:m,groupOrder:g,renderOrder:d.renderOrder,z:y,group:x},t[e]=v):(v.id=d.id,v.object=d,v.geometry=f,v.material=m,v.groupOrder=g,v.renderOrder=d.renderOrder,v.z=y,v.group=x),e++,v}function a(d,f,m,g,y,x){const v=s(d,f,m,g,y,x);m.transmission>0?i.push(v):m.transparent===!0?r.push(v):n.push(v)}function l(d,f,m,g,y,x){const v=s(d,f,m,g,y,x);m.transmission>0?i.unshift(v):m.transparent===!0?r.unshift(v):n.unshift(v)}function c(d,f){n.length>1&&n.sort(d||kne),i.length>1&&i.sort(f||iD),r.length>1&&r.sort(f||iD)}function u(){for(let d=e,f=t.length;d<f;d++){const m=t[d];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:n,transmissive:i,transparent:r,init:o,push:a,unshift:l,finish:u,sort:c}}function Nne(){let t=new WeakMap;function e(i,r){const o=t.get(i);let s;return o===void 0?(s=new rD,t.set(i,[s])):r>=o.length?(s=new rD,o.push(s)):s=o[r],s}function n(){t=new WeakMap}return{get:e,dispose:n}}function Lne(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new W,color:new et};break;case"SpotLight":n={position:new W,direction:new W,color:new et,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new W,color:new et,distance:0,decay:0};break;case"HemisphereLight":n={direction:new W,skyColor:new et,groundColor:new et};break;case"RectAreaLight":n={color:new et,position:new W,halfWidth:new W,halfHeight:new W};break}return t[e.id]=n,n}}}function zne(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ce};break;case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ce};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ce,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let One=0;function Fne(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function Une(t){const e=new Lne,n=zne(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)i.probe.push(new W);const r=new W,o=new Dt,s=new Dt;function a(c){let u=0,d=0,f=0;for(let A=0;A<9;A++)i.probe[A].set(0,0,0);let m=0,g=0,y=0,x=0,v=0,w=0,_=0,S=0,E=0,T=0,P=0;c.sort(Fne);for(let A=0,R=c.length;A<R;A++){const N=c[A],O=N.color,H=N.intensity,q=N.distance;let Z=null;if(N.shadow&&N.shadow.map&&(N.shadow.map.texture.format===Mc?Z=N.shadow.map.texture:Z=N.shadow.map.depthTexture||N.shadow.map.texture),N.isAmbientLight)u+=O.r*H,d+=O.g*H,f+=O.b*H;else if(N.isLightProbe){for(let G=0;G<9;G++)i.probe[G].addScaledVector(N.sh.coefficients[G],H);P++}else if(N.isDirectionalLight){const G=e.get(N);if(G.color.copy(N.color).multiplyScalar(N.intensity),N.castShadow){const Y=N.shadow,z=n.get(N);z.shadowIntensity=Y.intensity,z.shadowBias=Y.bias,z.shadowNormalBias=Y.normalBias,z.shadowRadius=Y.radius,z.shadowMapSize=Y.mapSize,i.directionalShadow[m]=z,i.directionalShadowMap[m]=Z,i.directionalShadowMatrix[m]=N.shadow.matrix,w++}i.directional[m]=G,m++}else if(N.isSpotLight){const G=e.get(N);G.position.setFromMatrixPosition(N.matrixWorld),G.color.copy(O).multiplyScalar(H),G.distance=q,G.coneCos=Math.cos(N.angle),G.penumbraCos=Math.cos(N.angle*(1-N.penumbra)),G.decay=N.decay,i.spot[y]=G;const Y=N.shadow;if(N.map&&(i.spotLightMap[E]=N.map,E++,Y.updateMatrices(N),N.castShadow&&T++),i.spotLightMatrix[y]=Y.matrix,N.castShadow){const z=n.get(N);z.shadowIntensity=Y.intensity,z.shadowBias=Y.bias,z.shadowNormalBias=Y.normalBias,z.shadowRadius=Y.radius,z.shadowMapSize=Y.mapSize,i.spotShadow[y]=z,i.spotShadowMap[y]=Z,S++}y++}else if(N.isRectAreaLight){const G=e.get(N);G.color.copy(O).multiplyScalar(H),G.halfWidth.set(N.width*.5,0,0),G.halfHeight.set(0,N.height*.5,0),i.rectArea[x]=G,x++}else if(N.isPointLight){const G=e.get(N);if(G.color.copy(N.color).multiplyScalar(N.intensity),G.distance=N.distance,G.decay=N.decay,N.castShadow){const Y=N.shadow,z=n.get(N);z.shadowIntensity=Y.intensity,z.shadowBias=Y.bias,z.shadowNormalBias=Y.normalBias,z.shadowRadius=Y.radius,z.shadowMapSize=Y.mapSize,z.shadowCameraNear=Y.camera.near,z.shadowCameraFar=Y.camera.far,i.pointShadow[g]=z,i.pointShadowMap[g]=Z,i.pointShadowMatrix[g]=N.shadow.matrix,_++}i.point[g]=G,g++}else if(N.isHemisphereLight){const G=e.get(N);G.skyColor.copy(N.color).multiplyScalar(H),G.groundColor.copy(N.groundColor).multiplyScalar(H),i.hemi[v]=G,v++}}x>0&&(t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Xe.LTC_FLOAT_1,i.rectAreaLTC2=Xe.LTC_FLOAT_2):(i.rectAreaLTC1=Xe.LTC_HALF_1,i.rectAreaLTC2=Xe.LTC_HALF_2)),i.ambient[0]=u,i.ambient[1]=d,i.ambient[2]=f;const D=i.hash;(D.directionalLength!==m||D.pointLength!==g||D.spotLength!==y||D.rectAreaLength!==x||D.hemiLength!==v||D.numDirectionalShadows!==w||D.numPointShadows!==_||D.numSpotShadows!==S||D.numSpotMaps!==E||D.numLightProbes!==P)&&(i.directional.length=m,i.spot.length=y,i.rectArea.length=x,i.point.length=g,i.hemi.length=v,i.directionalShadow.length=w,i.directionalShadowMap.length=w,i.pointShadow.length=_,i.pointShadowMap.length=_,i.spotShadow.length=S,i.spotShadowMap.length=S,i.directionalShadowMatrix.length=w,i.pointShadowMatrix.length=_,i.spotLightMatrix.length=S+E-T,i.spotLightMap.length=E,i.numSpotLightShadowsWithMaps=T,i.numLightProbes=P,D.directionalLength=m,D.pointLength=g,D.spotLength=y,D.rectAreaLength=x,D.hemiLength=v,D.numDirectionalShadows=w,D.numPointShadows=_,D.numSpotShadows=S,D.numSpotMaps=E,D.numLightProbes=P,i.version=One++)}function l(c,u){let d=0,f=0,m=0,g=0,y=0;const x=u.matrixWorldInverse;for(let v=0,w=c.length;v<w;v++){const _=c[v];if(_.isDirectionalLight){const S=i.directional[d];S.direction.setFromMatrixPosition(_.matrixWorld),r.setFromMatrixPosition(_.target.matrixWorld),S.direction.sub(r),S.direction.transformDirection(x),d++}else if(_.isSpotLight){const S=i.spot[m];S.position.setFromMatrixPosition(_.matrixWorld),S.position.applyMatrix4(x),S.direction.setFromMatrixPosition(_.matrixWorld),r.setFromMatrixPosition(_.target.matrixWorld),S.direction.sub(r),S.direction.transformDirection(x),m++}else if(_.isRectAreaLight){const S=i.rectArea[g];S.position.setFromMatrixPosition(_.matrixWorld),S.position.applyMatrix4(x),s.identity(),o.copy(_.matrixWorld),o.premultiply(x),s.extractRotation(o),S.halfWidth.set(_.width*.5,0,0),S.halfHeight.set(0,_.height*.5,0),S.halfWidth.applyMatrix4(s),S.halfHeight.applyMatrix4(s),g++}else if(_.isPointLight){const S=i.point[f];S.position.setFromMatrixPosition(_.matrixWorld),S.position.applyMatrix4(x),f++}else if(_.isHemisphereLight){const S=i.hemi[y];S.direction.setFromMatrixPosition(_.matrixWorld),S.direction.transformDirection(x),y++}}}return{setup:a,setupView:l,state:i}}function oD(t){const e=new Une(t),n=[],i=[];function r(u){c.camera=u,n.length=0,i.length=0}function o(u){n.push(u)}function s(u){i.push(u)}function a(){e.setup(n)}function l(u){e.setupView(n,u)}const c={lightsArray:n,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:c,setupLights:a,setupLightsView:l,pushLight:o,pushShadow:s}}function Bne(t){let e=new WeakMap;function n(r,o=0){const s=e.get(r);let a;return s===void 0?(a=new oD(t),e.set(r,[a])):o>=s.length?(a=new oD(t),s.push(a)):a=s[o],a}function i(){e=new WeakMap}return{get:n,dispose:i}}const Hne=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Vne=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ).rg;
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ).r;
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( max( 0.0, squared_mean - mean * mean ) );
	gl_FragColor = vec4( mean, std_dev, 0.0, 1.0 );
}`,$ne=[new W(1,0,0),new W(-1,0,0),new W(0,1,0),new W(0,-1,0),new W(0,0,1),new W(0,0,-1)],Wne=[new W(0,-1,0),new W(0,-1,0),new W(0,0,1),new W(0,0,-1),new W(0,-1,0),new W(0,-1,0)],sD=new Dt,Rh=new W,y_=new W;function Gne(t,e,n){let i=new Ld;const r=new Ce,o=new Ce,s=new Sn,a=new $C,l=new WC,c={},u=n.maxTextureSize,d={[ca]:fr,[fr]:ca,[ps]:ps},f=new no({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ce},radius:{value:4}},vertexShader:Hne,fragmentShader:Vne}),m=f.clone();m.defines.HORIZONTAL_PASS=1;const g=new zt;g.setAttribute("position",new wn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const y=new fi(g,f),x=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=nd;let v=this.type;this.render=function(T,P,D){if(x.enabled===!1||x.autoUpdate===!1&&x.needsUpdate===!1||T.length===0)return;T.type===ef&&(qe("WebGLShadowMap: PCFSoftShadowMap has been deprecated. Using PCFShadowMap instead."),T.type=nd);const A=t.getRenderTarget(),R=t.getActiveCubeFace(),N=t.getActiveMipmapLevel(),O=t.state;O.setBlending(Ss),O.buffers.depth.getReversed()===!0?O.buffers.color.setClear(0,0,0,0):O.buffers.color.setClear(1,1,1,1),O.buffers.depth.setTest(!0),O.setScissorTest(!1);const H=v!==this.type;H&&P.traverse(function(q){q.material&&(Array.isArray(q.material)?q.material.forEach(Z=>Z.needsUpdate=!0):q.material.needsUpdate=!0)});for(let q=0,Z=T.length;q<Z;q++){const G=T[q],Y=G.shadow;if(Y===void 0){qe("WebGLShadowMap:",G,"has no shadow.");continue}if(Y.autoUpdate===!1&&Y.needsUpdate===!1)continue;r.copy(Y.mapSize);const z=Y.getFrameExtents();if(r.multiply(z),o.copy(Y.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(o.x=Math.floor(u/z.x),r.x=o.x*z.x,Y.mapSize.x=o.x),r.y>u&&(o.y=Math.floor(u/z.y),r.y=o.y*z.y,Y.mapSize.y=o.y)),Y.map===null||H===!0){if(Y.map!==null&&(Y.map.depthTexture!==null&&(Y.map.depthTexture.dispose(),Y.map.depthTexture=null),Y.map.dispose()),this.type===nc){if(G.isPointLight){qe("WebGLShadowMap: VSM shadow maps are not supported for PointLights. Use PCF or BasicShadowMap instead.");continue}Y.map=new Jr(r.x,r.y,{format:Mc,type:Es,minFilter:Nn,magFilter:Nn,generateMipmaps:!1}),Y.map.texture.name=G.name+".shadowMap",Y.map.depthTexture=new bd(r.x,r.y,dr),Y.map.depthTexture.name=G.name+".shadowMapDepth",Y.map.depthTexture.format=Ts,Y.map.depthTexture.compareFunction=null,Y.map.depthTexture.minFilter=ri,Y.map.depthTexture.magFilter=ri}else{G.isPointLight?(Y.map=new IC(r.x),Y.map.depthTexture=new e5(r.x,Ao)):(Y.map=new Jr(r.x,r.y),Y.map.depthTexture=new bd(r.x,r.y,Ao)),Y.map.depthTexture.name=G.name+".shadowMap",Y.map.depthTexture.format=Ts;const X=t.state.buffers.depth.getReversed();this.type===nd?(Y.map.depthTexture.compareFunction=X?rx:ix,Y.map.depthTexture.minFilter=Nn,Y.map.depthTexture.magFilter=Nn):(Y.map.depthTexture.compareFunction=null,Y.map.depthTexture.minFilter=ri,Y.map.depthTexture.magFilter=ri)}Y.camera.updateProjectionMatrix()}const $=Y.map.isWebGLCubeRenderTarget?6:1;for(let X=0;X<$;X++){if(Y.map.isWebGLCubeRenderTarget)t.setRenderTarget(Y.map,X),t.clear();else{X===0&&(t.setRenderTarget(Y.map),t.clear());const K=Y.getViewport(X);s.set(o.x*K.x,o.y*K.y,o.x*K.z,o.y*K.w),O.viewport(s)}if(G.isPointLight){const K=Y.camera,oe=Y.matrix,pe=G.distance||K.far;pe!==K.far&&(K.far=pe,K.updateProjectionMatrix()),Rh.setFromMatrixPosition(G.matrixWorld),K.position.copy(Rh),y_.copy(K.position),y_.add($ne[X]),K.up.copy(Wne[X]),K.lookAt(y_),K.updateMatrixWorld(),oe.makeTranslation(-Rh.x,-Rh.y,-Rh.z),sD.multiplyMatrices(K.projectionMatrix,K.matrixWorldInverse),Y._frustum.setFromProjectionMatrix(sD,K.coordinateSystem,K.reversedDepth)}else Y.updateMatrices(G);i=Y.getFrustum(),S(P,D,Y.camera,G,this.type)}Y.isPointLightShadow!==!0&&this.type===nc&&w(Y,D),Y.needsUpdate=!1}v=this.type,x.needsUpdate=!1,t.setRenderTarget(A,R,N)};function w(T,P){const D=e.update(y);f.defines.VSM_SAMPLES!==T.blurSamples&&(f.defines.VSM_SAMPLES=T.blurSamples,m.defines.VSM_SAMPLES=T.blurSamples,f.needsUpdate=!0,m.needsUpdate=!0),T.mapPass===null&&(T.mapPass=new Jr(r.x,r.y,{format:Mc,type:Es})),f.uniforms.shadow_pass.value=T.map.depthTexture,f.uniforms.resolution.value=T.mapSize,f.uniforms.radius.value=T.radius,t.setRenderTarget(T.mapPass),t.clear(),t.renderBufferDirect(P,null,D,f,y,null),m.uniforms.shadow_pass.value=T.mapPass.texture,m.uniforms.resolution.value=T.mapSize,m.uniforms.radius.value=T.radius,t.setRenderTarget(T.map),t.clear(),t.renderBufferDirect(P,null,D,m,y,null)}function _(T,P,D,A){let R=null;const N=D.isPointLight===!0?T.customDistanceMaterial:T.customDepthMaterial;if(N!==void 0)R=N;else if(R=D.isPointLight===!0?l:a,t.localClippingEnabled&&P.clipShadows===!0&&Array.isArray(P.clippingPlanes)&&P.clippingPlanes.length!==0||P.displacementMap&&P.displacementScale!==0||P.alphaMap&&P.alphaTest>0||P.map&&P.alphaTest>0||P.alphaToCoverage===!0){const O=R.uuid,H=P.uuid;let q=c[O];q===void 0&&(q={},c[O]=q);let Z=q[H];Z===void 0&&(Z=R.clone(),q[H]=Z,P.addEventListener("dispose",E)),R=Z}if(R.visible=P.visible,R.wireframe=P.wireframe,A===nc?R.side=P.shadowSide!==null?P.shadowSide:P.side:R.side=P.shadowSide!==null?P.shadowSide:d[P.side],R.alphaMap=P.alphaMap,R.alphaTest=P.alphaToCoverage===!0?.5:P.alphaTest,R.map=P.map,R.clipShadows=P.clipShadows,R.clippingPlanes=P.clippingPlanes,R.clipIntersection=P.clipIntersection,R.displacementMap=P.displacementMap,R.displacementScale=P.displacementScale,R.displacementBias=P.displacementBias,R.wireframeLinewidth=P.wireframeLinewidth,R.linewidth=P.linewidth,D.isPointLight===!0&&R.isMeshDistanceMaterial===!0){const O=t.properties.get(R);O.light=D}return R}function S(T,P,D,A,R){if(T.visible===!1)return;if(T.layers.test(P.layers)&&(T.isMesh||T.isLine||T.isPoints)&&(T.castShadow||T.receiveShadow&&R===nc)&&(!T.frustumCulled||i.intersectsObject(T))){T.modelViewMatrix.multiplyMatrices(D.matrixWorldInverse,T.matrixWorld);const H=e.update(T),q=T.material;if(Array.isArray(q)){const Z=H.groups;for(let G=0,Y=Z.length;G<Y;G++){const z=Z[G],$=q[z.materialIndex];if($&&$.visible){const X=_(T,$,A,R);T.onBeforeShadow(t,T,P,D,H,X,z),t.renderBufferDirect(D,null,H,X,T,z),T.onAfterShadow(t,T,P,D,H,X,z)}}}else if(q.visible){const Z=_(T,q,A,R);T.onBeforeShadow(t,T,P,D,H,Z,null),t.renderBufferDirect(D,null,H,Z,T,null),T.onAfterShadow(t,T,P,D,H,Z,null)}}const O=T.children;for(let H=0,q=O.length;H<q;H++)S(O[H],P,D,A,R)}function E(T){T.target.removeEventListener("dispose",E);for(const D in c){const A=c[D],R=T.target.uuid;R in A&&(A[R].dispose(),delete A[R])}}}const jne={[v0]:y0,[x0]:b0,[w0]:S0,[Sc]:_0,[y0]:v0,[b0]:x0,[S0]:w0,[_0]:Sc};function qne(t,e){function n(){let J=!1;const Ze=new Sn;let ze=null;const Je=new Sn(0,0,0,0);return{setMask:function(De){ze!==De&&!J&&(t.colorMask(De,De,De,De),ze=De)},setLocked:function(De){J=De},setClear:function(De,Me,Ve,kt,pn){pn===!0&&(De*=kt,Me*=kt,Ve*=kt),Ze.set(De,Me,Ve,kt),Je.equals(Ze)===!1&&(t.clearColor(De,Me,Ve,kt),Je.copy(Ze))},reset:function(){J=!1,ze=null,Je.set(-1,0,0,0)}}}function i(){let J=!1,Ze=!1,ze=null,Je=null,De=null;return{setReversed:function(Me){if(Ze!==Me){const Ve=e.get("EXT_clip_control");Me?Ve.clipControlEXT(Ve.LOWER_LEFT_EXT,Ve.ZERO_TO_ONE_EXT):Ve.clipControlEXT(Ve.LOWER_LEFT_EXT,Ve.NEGATIVE_ONE_TO_ONE_EXT),Ze=Me;const kt=De;De=null,this.setClear(kt)}},getReversed:function(){return Ze},setTest:function(Me){Me?me(t.DEPTH_TEST):Fe(t.DEPTH_TEST)},setMask:function(Me){ze!==Me&&!J&&(t.depthMask(Me),ze=Me)},setFunc:function(Me){if(Ze&&(Me=jne[Me]),Je!==Me){switch(Me){case v0:t.depthFunc(t.NEVER);break;case y0:t.depthFunc(t.ALWAYS);break;case x0:t.depthFunc(t.LESS);break;case Sc:t.depthFunc(t.LEQUAL);break;case w0:t.depthFunc(t.EQUAL);break;case _0:t.depthFunc(t.GEQUAL);break;case b0:t.depthFunc(t.GREATER);break;case S0:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}Je=Me}},setLocked:function(Me){J=Me},setClear:function(Me){De!==Me&&(Ze&&(Me=1-Me),t.clearDepth(Me),De=Me)},reset:function(){J=!1,ze=null,Je=null,De=null,Ze=!1}}}function r(){let J=!1,Ze=null,ze=null,Je=null,De=null,Me=null,Ve=null,kt=null,pn=null;return{setTest:function(on){J||(on?me(t.STENCIL_TEST):Fe(t.STENCIL_TEST))},setMask:function(on){Ze!==on&&!J&&(t.stencilMask(on),Ze=on)},setFunc:function(on,Fr,Po){(ze!==on||Je!==Fr||De!==Po)&&(t.stencilFunc(on,Fr,Po),ze=on,Je=Fr,De=Po)},setOp:function(on,Fr,Po){(Me!==on||Ve!==Fr||kt!==Po)&&(t.stencilOp(on,Fr,Po),Me=on,Ve=Fr,kt=Po)},setLocked:function(on){J=on},setClear:function(on){pn!==on&&(t.clearStencil(on),pn=on)},reset:function(){J=!1,Ze=null,ze=null,Je=null,De=null,Me=null,Ve=null,kt=null,pn=null}}}const o=new n,s=new i,a=new r,l=new WeakMap,c=new WeakMap;let u={},d={},f=new WeakMap,m=[],g=null,y=!1,x=null,v=null,w=null,_=null,S=null,E=null,T=null,P=new et(0,0,0),D=0,A=!1,R=null,N=null,O=null,H=null,q=null;const Z=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let G=!1,Y=0;const z=t.getParameter(t.VERSION);z.indexOf("WebGL")!==-1?(Y=parseFloat(/^WebGL (\d)/.exec(z)[1]),G=Y>=1):z.indexOf("OpenGL ES")!==-1&&(Y=parseFloat(/^OpenGL ES (\d)/.exec(z)[1]),G=Y>=2);let $=null,X={};const K=t.getParameter(t.SCISSOR_BOX),oe=t.getParameter(t.VIEWPORT),pe=new Sn().fromArray(K),be=new Sn().fromArray(oe);function it(J,Ze,ze,Je){const De=new Uint8Array(4),Me=t.createTexture();t.bindTexture(J,Me),t.texParameteri(J,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(J,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let Ve=0;Ve<ze;Ve++)J===t.TEXTURE_3D||J===t.TEXTURE_2D_ARRAY?t.texImage3D(Ze,0,t.RGBA,1,1,Je,0,t.RGBA,t.UNSIGNED_BYTE,De):t.texImage2D(Ze+Ve,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,De);return Me}const ae={};ae[t.TEXTURE_2D]=it(t.TEXTURE_2D,t.TEXTURE_2D,1),ae[t.TEXTURE_CUBE_MAP]=it(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),ae[t.TEXTURE_2D_ARRAY]=it(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),ae[t.TEXTURE_3D]=it(t.TEXTURE_3D,t.TEXTURE_3D,1,1),o.setClear(0,0,0,1),s.setClear(1),a.setClear(0),me(t.DEPTH_TEST),s.setFunc(Sc),ve(!1),Ae(Jb),me(t.CULL_FACE),le(Ss);function me(J){u[J]!==!0&&(t.enable(J),u[J]=!0)}function Fe(J){u[J]!==!1&&(t.disable(J),u[J]=!1)}function tt(J,Ze){return d[J]!==Ze?(t.bindFramebuffer(J,Ze),d[J]=Ze,J===t.DRAW_FRAMEBUFFER&&(d[t.FRAMEBUFFER]=Ze),J===t.FRAMEBUFFER&&(d[t.DRAW_FRAMEBUFFER]=Ze),!0):!1}function Be(J,Ze){let ze=m,Je=!1;if(J){ze=f.get(Ze),ze===void 0&&(ze=[],f.set(Ze,ze));const De=J.textures;if(ze.length!==De.length||ze[0]!==t.COLOR_ATTACHMENT0){for(let Me=0,Ve=De.length;Me<Ve;Me++)ze[Me]=t.COLOR_ATTACHMENT0+Me;ze.length=De.length,Je=!0}}else ze[0]!==t.BACK&&(ze[0]=t.BACK,Je=!0);Je&&t.drawBuffers(ze)}function yt(J){return g!==J?(t.useProgram(J),g=J,!0):!1}const It={[Va]:t.FUNC_ADD,[sU]:t.FUNC_SUBTRACT,[aU]:t.FUNC_REVERSE_SUBTRACT};It[lU]=t.MIN,It[cU]=t.MAX;const Re={[uU]:t.ZERO,[dU]:t.ONE,[hU]:t.SRC_COLOR,[m0]:t.SRC_ALPHA,[yU]:t.SRC_ALPHA_SATURATE,[gU]:t.DST_COLOR,[pU]:t.DST_ALPHA,[fU]:t.ONE_MINUS_SRC_COLOR,[g0]:t.ONE_MINUS_SRC_ALPHA,[vU]:t.ONE_MINUS_DST_COLOR,[mU]:t.ONE_MINUS_DST_ALPHA,[xU]:t.CONSTANT_COLOR,[wU]:t.ONE_MINUS_CONSTANT_COLOR,[_U]:t.CONSTANT_ALPHA,[bU]:t.ONE_MINUS_CONSTANT_ALPHA};function le(J,Ze,ze,Je,De,Me,Ve,kt,pn,on){if(J===Ss){y===!0&&(Fe(t.BLEND),y=!1);return}if(y===!1&&(me(t.BLEND),y=!0),J!==oU){if(J!==x||on!==A){if((v!==Va||S!==Va)&&(t.blendEquation(t.FUNC_ADD),v=Va,S=Va),on)switch(J){case uc:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case Lf:t.blendFunc(t.ONE,t.ONE);break;case eS:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case tS:t.blendFuncSeparate(t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ZERO,t.ONE);break;default:wt("WebGLState: Invalid blending: ",J);break}else switch(J){case uc:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case Lf:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE,t.ONE,t.ONE);break;case eS:wt("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case tS:wt("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:wt("WebGLState: Invalid blending: ",J);break}w=null,_=null,E=null,T=null,P.set(0,0,0),D=0,x=J,A=on}return}De=De||Ze,Me=Me||ze,Ve=Ve||Je,(Ze!==v||De!==S)&&(t.blendEquationSeparate(It[Ze],It[De]),v=Ze,S=De),(ze!==w||Je!==_||Me!==E||Ve!==T)&&(t.blendFuncSeparate(Re[ze],Re[Je],Re[Me],Re[Ve]),w=ze,_=Je,E=Me,T=Ve),(kt.equals(P)===!1||pn!==D)&&(t.blendColor(kt.r,kt.g,kt.b,pn),P.copy(kt),D=pn),x=J,A=!1}function we(J,Ze){J.side===ps?Fe(t.CULL_FACE):me(t.CULL_FACE);let ze=J.side===fr;Ze&&(ze=!ze),ve(ze),J.blending===uc&&J.transparent===!1?le(Ss):le(J.blending,J.blendEquation,J.blendSrc,J.blendDst,J.blendEquationAlpha,J.blendSrcAlpha,J.blendDstAlpha,J.blendColor,J.blendAlpha,J.premultipliedAlpha),s.setFunc(J.depthFunc),s.setTest(J.depthTest),s.setMask(J.depthWrite),o.setMask(J.colorWrite);const Je=J.stencilWrite;a.setTest(Je),Je&&(a.setMask(J.stencilWriteMask),a.setFunc(J.stencilFunc,J.stencilRef,J.stencilFuncMask),a.setOp(J.stencilFail,J.stencilZFail,J.stencilZPass)),mt(J.polygonOffset,J.polygonOffsetFactor,J.polygonOffsetUnits),J.alphaToCoverage===!0?me(t.SAMPLE_ALPHA_TO_COVERAGE):Fe(t.SAMPLE_ALPHA_TO_COVERAGE)}function ve(J){R!==J&&(J?t.frontFace(t.CW):t.frontFace(t.CCW),R=J)}function Ae(J){J!==nU?(me(t.CULL_FACE),J!==N&&(J===Jb?t.cullFace(t.BACK):J===iU?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):Fe(t.CULL_FACE),N=J}function V(J){J!==O&&(G&&t.lineWidth(J),O=J)}function mt(J,Ze,ze){J?(me(t.POLYGON_OFFSET_FILL),(H!==Ze||q!==ze)&&(t.polygonOffset(Ze,ze),H=Ze,q=ze)):Fe(t.POLYGON_OFFSET_FILL)}function $e(J){J?me(t.SCISSOR_TEST):Fe(t.SCISSOR_TEST)}function _t(J){J===void 0&&(J=t.TEXTURE0+Z-1),$!==J&&(t.activeTexture(J),$=J)}function Ne(J,Ze,ze){ze===void 0&&($===null?ze=t.TEXTURE0+Z-1:ze=$);let Je=X[ze];Je===void 0&&(Je={type:void 0,texture:void 0},X[ze]=Je),(Je.type!==J||Je.texture!==Ze)&&($!==ze&&(t.activeTexture(ze),$=ze),t.bindTexture(J,Ze||ae[J]),Je.type=J,Je.texture=Ze)}function B(){const J=X[$];J!==void 0&&J.type!==void 0&&(t.bindTexture(J.type,null),J.type=void 0,J.texture=void 0)}function L(){try{t.compressedTexImage2D(...arguments)}catch(J){wt("WebGLState:",J)}}function Q(){try{t.compressedTexImage3D(...arguments)}catch(J){wt("WebGLState:",J)}}function re(){try{t.texSubImage2D(...arguments)}catch(J){wt("WebGLState:",J)}}function Se(){try{t.texSubImage3D(...arguments)}catch(J){wt("WebGLState:",J)}}function he(){try{t.compressedTexSubImage2D(...arguments)}catch(J){wt("WebGLState:",J)}}function rt(){try{t.compressedTexSubImage3D(...arguments)}catch(J){wt("WebGLState:",J)}}function Ue(){try{t.texStorage2D(...arguments)}catch(J){wt("WebGLState:",J)}}function ut(){try{t.texStorage3D(...arguments)}catch(J){wt("WebGLState:",J)}}function Ct(){try{t.texImage2D(...arguments)}catch(J){wt("WebGLState:",J)}}function Ie(){try{t.texImage3D(...arguments)}catch(J){wt("WebGLState:",J)}}function je(J){pe.equals(J)===!1&&(t.scissor(J.x,J.y,J.z,J.w),pe.copy(J))}function dt(J){be.equals(J)===!1&&(t.viewport(J.x,J.y,J.z,J.w),be.copy(J))}function gt(J,Ze){let ze=c.get(Ze);ze===void 0&&(ze=new WeakMap,c.set(Ze,ze));let Je=ze.get(J);Je===void 0&&(Je=t.getUniformBlockIndex(Ze,J.name),ze.set(J,Je))}function We(J,Ze){const Je=c.get(Ze).get(J);l.get(Ze)!==Je&&(t.uniformBlockBinding(Ze,Je,J.__bindingPointIndex),l.set(Ze,Je))}function Vt(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),s.setReversed(!1),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),u={},$=null,X={},d={},f=new WeakMap,m=[],g=null,y=!1,x=null,v=null,w=null,_=null,S=null,E=null,T=null,P=new et(0,0,0),D=0,A=!1,R=null,N=null,O=null,H=null,q=null,pe.set(0,0,t.canvas.width,t.canvas.height),be.set(0,0,t.canvas.width,t.canvas.height),o.reset(),s.reset(),a.reset()}return{buffers:{color:o,depth:s,stencil:a},enable:me,disable:Fe,bindFramebuffer:tt,drawBuffers:Be,useProgram:yt,setBlending:le,setMaterial:we,setFlipSided:ve,setCullFace:Ae,setLineWidth:V,setPolygonOffset:mt,setScissorTest:$e,activeTexture:_t,bindTexture:Ne,unbindTexture:B,compressedTexImage2D:L,compressedTexImage3D:Q,texImage2D:Ct,texImage3D:Ie,updateUBOMapping:gt,uniformBlockBinding:We,texStorage2D:Ue,texStorage3D:ut,texSubImage2D:re,texSubImage3D:Se,compressedTexSubImage2D:he,compressedTexSubImage3D:rt,scissor:je,viewport:dt,reset:Vt}}function Xne(t,e,n,i,r,o,s){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new Ce,u=new WeakMap;let d;const f=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function g(B,L){return m?new OffscreenCanvas(B,L):Wf("canvas")}function y(B,L,Q){let re=1;const Se=Ne(B);if((Se.width>Q||Se.height>Q)&&(re=Q/Math.max(Se.width,Se.height)),re<1)if(typeof HTMLImageElement<"u"&&B instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&B instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&B instanceof ImageBitmap||typeof VideoFrame<"u"&&B instanceof VideoFrame){const he=Math.floor(re*Se.width),rt=Math.floor(re*Se.height);d===void 0&&(d=g(he,rt));const Ue=L?g(he,rt):d;return Ue.width=he,Ue.height=rt,Ue.getContext("2d").drawImage(B,0,0,he,rt),qe("WebGLRenderer: Texture has been resized from ("+Se.width+"x"+Se.height+") to ("+he+"x"+rt+")."),Ue}else return"data"in B&&qe("WebGLRenderer: Image in DataTexture is too big ("+Se.width+"x"+Se.height+")."),B;return B}function x(B){return B.generateMipmaps}function v(B){t.generateMipmap(B)}function w(B){return B.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:B.isWebGL3DRenderTarget?t.TEXTURE_3D:B.isWebGLArrayRenderTarget||B.isCompressedArrayTexture?t.TEXTURE_2D_ARRAY:t.TEXTURE_2D}function _(B,L,Q,re,Se=!1){if(B!==null){if(t[B]!==void 0)return t[B];qe("WebGLRenderer: Attempt to use non-existing WebGL internal format '"+B+"'")}let he=L;if(L===t.RED&&(Q===t.FLOAT&&(he=t.R32F),Q===t.HALF_FLOAT&&(he=t.R16F),Q===t.UNSIGNED_BYTE&&(he=t.R8)),L===t.RED_INTEGER&&(Q===t.UNSIGNED_BYTE&&(he=t.R8UI),Q===t.UNSIGNED_SHORT&&(he=t.R16UI),Q===t.UNSIGNED_INT&&(he=t.R32UI),Q===t.BYTE&&(he=t.R8I),Q===t.SHORT&&(he=t.R16I),Q===t.INT&&(he=t.R32I)),L===t.RG&&(Q===t.FLOAT&&(he=t.RG32F),Q===t.HALF_FLOAT&&(he=t.RG16F),Q===t.UNSIGNED_BYTE&&(he=t.RG8)),L===t.RG_INTEGER&&(Q===t.UNSIGNED_BYTE&&(he=t.RG8UI),Q===t.UNSIGNED_SHORT&&(he=t.RG16UI),Q===t.UNSIGNED_INT&&(he=t.RG32UI),Q===t.BYTE&&(he=t.RG8I),Q===t.SHORT&&(he=t.RG16I),Q===t.INT&&(he=t.RG32I)),L===t.RGB_INTEGER&&(Q===t.UNSIGNED_BYTE&&(he=t.RGB8UI),Q===t.UNSIGNED_SHORT&&(he=t.RGB16UI),Q===t.UNSIGNED_INT&&(he=t.RGB32UI),Q===t.BYTE&&(he=t.RGB8I),Q===t.SHORT&&(he=t.RGB16I),Q===t.INT&&(he=t.RGB32I)),L===t.RGBA_INTEGER&&(Q===t.UNSIGNED_BYTE&&(he=t.RGBA8UI),Q===t.UNSIGNED_SHORT&&(he=t.RGBA16UI),Q===t.UNSIGNED_INT&&(he=t.RGBA32UI),Q===t.BYTE&&(he=t.RGBA8I),Q===t.SHORT&&(he=t.RGBA16I),Q===t.INT&&(he=t.RGBA32I)),L===t.RGB&&(Q===t.UNSIGNED_INT_5_9_9_9_REV&&(he=t.RGB9_E5),Q===t.UNSIGNED_INT_10F_11F_11F_REV&&(he=t.R11F_G11F_B10F)),L===t.RGBA){const rt=Se?Vf:Jt.getTransfer(re);Q===t.FLOAT&&(he=t.RGBA32F),Q===t.HALF_FLOAT&&(he=t.RGBA16F),Q===t.UNSIGNED_BYTE&&(he=rt===dn?t.SRGB8_ALPHA8:t.RGBA8),Q===t.UNSIGNED_SHORT_4_4_4_4&&(he=t.RGBA4),Q===t.UNSIGNED_SHORT_5_5_5_1&&(he=t.RGB5_A1)}return(he===t.R16F||he===t.R32F||he===t.RG16F||he===t.RG32F||he===t.RGBA16F||he===t.RGBA32F)&&e.get("EXT_color_buffer_float"),he}function S(B,L){let Q;return B?L===null||L===Ao||L===gd?Q=t.DEPTH24_STENCIL8:L===dr?Q=t.DEPTH32F_STENCIL8:L===md&&(Q=t.DEPTH24_STENCIL8,qe("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):L===null||L===Ao||L===gd?Q=t.DEPTH_COMPONENT24:L===dr?Q=t.DEPTH_COMPONENT32F:L===md&&(Q=t.DEPTH_COMPONENT16),Q}function E(B,L){return x(B)===!0||B.isFramebufferTexture&&B.minFilter!==ri&&B.minFilter!==Nn?Math.log2(Math.max(L.width,L.height))+1:B.mipmaps!==void 0&&B.mipmaps.length>0?B.mipmaps.length:B.isCompressedTexture&&Array.isArray(B.image)?L.mipmaps.length:1}function T(B){const L=B.target;L.removeEventListener("dispose",T),D(L),L.isVideoTexture&&u.delete(L)}function P(B){const L=B.target;L.removeEventListener("dispose",P),R(L)}function D(B){const L=i.get(B);if(L.__webglInit===void 0)return;const Q=B.source,re=f.get(Q);if(re){const Se=re[L.__cacheKey];Se.usedTimes--,Se.usedTimes===0&&A(B),Object.keys(re).length===0&&f.delete(Q)}i.remove(B)}function A(B){const L=i.get(B);t.deleteTexture(L.__webglTexture);const Q=B.source,re=f.get(Q);delete re[L.__cacheKey],s.memory.textures--}function R(B){const L=i.get(B);if(B.depthTexture&&(B.depthTexture.dispose(),i.remove(B.depthTexture)),B.isWebGLCubeRenderTarget)for(let re=0;re<6;re++){if(Array.isArray(L.__webglFramebuffer[re]))for(let Se=0;Se<L.__webglFramebuffer[re].length;Se++)t.deleteFramebuffer(L.__webglFramebuffer[re][Se]);else t.deleteFramebuffer(L.__webglFramebuffer[re]);L.__webglDepthbuffer&&t.deleteRenderbuffer(L.__webglDepthbuffer[re])}else{if(Array.isArray(L.__webglFramebuffer))for(let re=0;re<L.__webglFramebuffer.length;re++)t.deleteFramebuffer(L.__webglFramebuffer[re]);else t.deleteFramebuffer(L.__webglFramebuffer);if(L.__webglDepthbuffer&&t.deleteRenderbuffer(L.__webglDepthbuffer),L.__webglMultisampledFramebuffer&&t.deleteFramebuffer(L.__webglMultisampledFramebuffer),L.__webglColorRenderbuffer)for(let re=0;re<L.__webglColorRenderbuffer.length;re++)L.__webglColorRenderbuffer[re]&&t.deleteRenderbuffer(L.__webglColorRenderbuffer[re]);L.__webglDepthRenderbuffer&&t.deleteRenderbuffer(L.__webglDepthRenderbuffer)}const Q=B.textures;for(let re=0,Se=Q.length;re<Se;re++){const he=i.get(Q[re]);he.__webglTexture&&(t.deleteTexture(he.__webglTexture),s.memory.textures--),i.remove(Q[re])}i.remove(B)}let N=0;function O(){N=0}function H(){const B=N;return B>=r.maxTextures&&qe("WebGLTextures: Trying to use "+B+" texture units while this GPU supports only "+r.maxTextures),N+=1,B}function q(B){const L=[];return L.push(B.wrapS),L.push(B.wrapT),L.push(B.wrapR||0),L.push(B.magFilter),L.push(B.minFilter),L.push(B.anisotropy),L.push(B.internalFormat),L.push(B.format),L.push(B.type),L.push(B.generateMipmaps),L.push(B.premultiplyAlpha),L.push(B.flipY),L.push(B.unpackAlignment),L.push(B.colorSpace),L.join()}function Z(B,L){const Q=i.get(B);if(B.isVideoTexture&&$e(B),B.isRenderTargetTexture===!1&&B.isExternalTexture!==!0&&B.version>0&&Q.__version!==B.version){const re=B.image;if(re===null)qe("WebGLRenderer: Texture marked for update but no image data found.");else if(re.complete===!1)qe("WebGLRenderer: Texture marked for update but image is incomplete");else{ae(Q,B,L);return}}else B.isExternalTexture&&(Q.__webglTexture=B.sourceTexture?B.sourceTexture:null);n.bindTexture(t.TEXTURE_2D,Q.__webglTexture,t.TEXTURE0+L)}function G(B,L){const Q=i.get(B);if(B.isRenderTargetTexture===!1&&B.version>0&&Q.__version!==B.version){ae(Q,B,L);return}else B.isExternalTexture&&(Q.__webglTexture=B.sourceTexture?B.sourceTexture:null);n.bindTexture(t.TEXTURE_2D_ARRAY,Q.__webglTexture,t.TEXTURE0+L)}function Y(B,L){const Q=i.get(B);if(B.isRenderTargetTexture===!1&&B.version>0&&Q.__version!==B.version){ae(Q,B,L);return}n.bindTexture(t.TEXTURE_3D,Q.__webglTexture,t.TEXTURE0+L)}function z(B,L){const Q=i.get(B);if(B.isCubeDepthTexture!==!0&&B.version>0&&Q.__version!==B.version){me(Q,B,L);return}n.bindTexture(t.TEXTURE_CUBE_MAP,Q.__webglTexture,t.TEXTURE0+L)}const $={[Ff]:t.REPEAT,[Pr]:t.CLAMP_TO_EDGE,[Uf]:t.MIRRORED_REPEAT},X={[ri]:t.NEAREST,[vC]:t.NEAREST_MIPMAP_NEAREST,[Wu]:t.NEAREST_MIPMAP_LINEAR,[Nn]:t.LINEAR,[tf]:t.LINEAR_MIPMAP_NEAREST,[ms]:t.LINEAR_MIPMAP_LINEAR},K={[RU]:t.NEVER,[zU]:t.ALWAYS,[DU]:t.LESS,[ix]:t.LEQUAL,[kU]:t.EQUAL,[rx]:t.GEQUAL,[NU]:t.GREATER,[LU]:t.NOTEQUAL};function oe(B,L){if(L.type===dr&&e.has("OES_texture_float_linear")===!1&&(L.magFilter===Nn||L.magFilter===tf||L.magFilter===Wu||L.magFilter===ms||L.minFilter===Nn||L.minFilter===tf||L.minFilter===Wu||L.minFilter===ms)&&qe("WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),t.texParameteri(B,t.TEXTURE_WRAP_S,$[L.wrapS]),t.texParameteri(B,t.TEXTURE_WRAP_T,$[L.wrapT]),(B===t.TEXTURE_3D||B===t.TEXTURE_2D_ARRAY)&&t.texParameteri(B,t.TEXTURE_WRAP_R,$[L.wrapR]),t.texParameteri(B,t.TEXTURE_MAG_FILTER,X[L.magFilter]),t.texParameteri(B,t.TEXTURE_MIN_FILTER,X[L.minFilter]),L.compareFunction&&(t.texParameteri(B,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(B,t.TEXTURE_COMPARE_FUNC,K[L.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(L.magFilter===ri||L.minFilter!==Wu&&L.minFilter!==ms||L.type===dr&&e.has("OES_texture_float_linear")===!1)return;if(L.anisotropy>1||i.get(L).__currentAnisotropy){const Q=e.get("EXT_texture_filter_anisotropic");t.texParameterf(B,Q.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(L.anisotropy,r.getMaxAnisotropy())),i.get(L).__currentAnisotropy=L.anisotropy}}}function pe(B,L){let Q=!1;B.__webglInit===void 0&&(B.__webglInit=!0,L.addEventListener("dispose",T));const re=L.source;let Se=f.get(re);Se===void 0&&(Se={},f.set(re,Se));const he=q(L);if(he!==B.__cacheKey){Se[he]===void 0&&(Se[he]={texture:t.createTexture(),usedTimes:0},s.memory.textures++,Q=!0),Se[he].usedTimes++;const rt=Se[B.__cacheKey];rt!==void 0&&(Se[B.__cacheKey].usedTimes--,rt.usedTimes===0&&A(L)),B.__cacheKey=he,B.__webglTexture=Se[he].texture}return Q}function be(B,L,Q){return Math.floor(Math.floor(B/Q)/L)}function it(B,L,Q,re){const he=B.updateRanges;if(he.length===0)n.texSubImage2D(t.TEXTURE_2D,0,0,0,L.width,L.height,Q,re,L.data);else{he.sort((Ie,je)=>Ie.start-je.start);let rt=0;for(let Ie=1;Ie<he.length;Ie++){const je=he[rt],dt=he[Ie],gt=je.start+je.count,We=be(dt.start,L.width,4),Vt=be(je.start,L.width,4);dt.start<=gt+1&&We===Vt&&be(dt.start+dt.count-1,L.width,4)===We?je.count=Math.max(je.count,dt.start+dt.count-je.start):(++rt,he[rt]=dt)}he.length=rt+1;const Ue=t.getParameter(t.UNPACK_ROW_LENGTH),ut=t.getParameter(t.UNPACK_SKIP_PIXELS),Ct=t.getParameter(t.UNPACK_SKIP_ROWS);t.pixelStorei(t.UNPACK_ROW_LENGTH,L.width);for(let Ie=0,je=he.length;Ie<je;Ie++){const dt=he[Ie],gt=Math.floor(dt.start/4),We=Math.ceil(dt.count/4),Vt=gt%L.width,J=Math.floor(gt/L.width),Ze=We,ze=1;t.pixelStorei(t.UNPACK_SKIP_PIXELS,Vt),t.pixelStorei(t.UNPACK_SKIP_ROWS,J),n.texSubImage2D(t.TEXTURE_2D,0,Vt,J,Ze,ze,Q,re,L.data)}B.clearUpdateRanges(),t.pixelStorei(t.UNPACK_ROW_LENGTH,Ue),t.pixelStorei(t.UNPACK_SKIP_PIXELS,ut),t.pixelStorei(t.UNPACK_SKIP_ROWS,Ct)}}function ae(B,L,Q){let re=t.TEXTURE_2D;(L.isDataArrayTexture||L.isCompressedArrayTexture)&&(re=t.TEXTURE_2D_ARRAY),L.isData3DTexture&&(re=t.TEXTURE_3D);const Se=pe(B,L),he=L.source;n.bindTexture(re,B.__webglTexture,t.TEXTURE0+Q);const rt=i.get(he);if(he.version!==rt.__version||Se===!0){n.activeTexture(t.TEXTURE0+Q);const Ue=Jt.getPrimaries(Jt.workingColorSpace),ut=L.colorSpace===Zs?null:Jt.getPrimaries(L.colorSpace),Ct=L.colorSpace===Zs||Ue===ut?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,L.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,L.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,L.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ct);let Ie=y(L.image,!1,r.maxTextureSize);Ie=_t(L,Ie);const je=o.convert(L.format,L.colorSpace),dt=o.convert(L.type);let gt=_(L.internalFormat,je,dt,L.colorSpace,L.isVideoTexture);oe(re,L);let We;const Vt=L.mipmaps,J=L.isVideoTexture!==!0,Ze=rt.__version===void 0||Se===!0,ze=he.dataReady,Je=E(L,Ie);if(L.isDepthTexture)gt=S(L.format===Xa,L.type),Ze&&(J?n.texStorage2D(t.TEXTURE_2D,1,gt,Ie.width,Ie.height):n.texImage2D(t.TEXTURE_2D,0,gt,Ie.width,Ie.height,0,je,dt,null));else if(L.isDataTexture)if(Vt.length>0){J&&Ze&&n.texStorage2D(t.TEXTURE_2D,Je,gt,Vt[0].width,Vt[0].height);for(let De=0,Me=Vt.length;De<Me;De++)We=Vt[De],J?ze&&n.texSubImage2D(t.TEXTURE_2D,De,0,0,We.width,We.height,je,dt,We.data):n.texImage2D(t.TEXTURE_2D,De,gt,We.width,We.height,0,je,dt,We.data);L.generateMipmaps=!1}else J?(Ze&&n.texStorage2D(t.TEXTURE_2D,Je,gt,Ie.width,Ie.height),ze&&it(L,Ie,je,dt)):n.texImage2D(t.TEXTURE_2D,0,gt,Ie.width,Ie.height,0,je,dt,Ie.data);else if(L.isCompressedTexture)if(L.isCompressedArrayTexture){J&&Ze&&n.texStorage3D(t.TEXTURE_2D_ARRAY,Je,gt,Vt[0].width,Vt[0].height,Ie.depth);for(let De=0,Me=Vt.length;De<Me;De++)if(We=Vt[De],L.format!==Ki)if(je!==null)if(J){if(ze)if(L.layerUpdates.size>0){const Ve=dS(We.width,We.height,L.format,L.type);for(const kt of L.layerUpdates){const pn=We.data.subarray(kt*Ve/We.data.BYTES_PER_ELEMENT,(kt+1)*Ve/We.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,De,0,0,kt,We.width,We.height,1,je,pn)}L.clearLayerUpdates()}else n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,De,0,0,0,We.width,We.height,Ie.depth,je,We.data)}else n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,De,gt,We.width,We.height,Ie.depth,0,We.data,0,0);else qe("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else J?ze&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,De,0,0,0,We.width,We.height,Ie.depth,je,dt,We.data):n.texImage3D(t.TEXTURE_2D_ARRAY,De,gt,We.width,We.height,Ie.depth,0,je,dt,We.data)}else{J&&Ze&&n.texStorage2D(t.TEXTURE_2D,Je,gt,Vt[0].width,Vt[0].height);for(let De=0,Me=Vt.length;De<Me;De++)We=Vt[De],L.format!==Ki?je!==null?J?ze&&n.compressedTexSubImage2D(t.TEXTURE_2D,De,0,0,We.width,We.height,je,We.data):n.compressedTexImage2D(t.TEXTURE_2D,De,gt,We.width,We.height,0,We.data):qe("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):J?ze&&n.texSubImage2D(t.TEXTURE_2D,De,0,0,We.width,We.height,je,dt,We.data):n.texImage2D(t.TEXTURE_2D,De,gt,We.width,We.height,0,je,dt,We.data)}else if(L.isDataArrayTexture)if(J){if(Ze&&n.texStorage3D(t.TEXTURE_2D_ARRAY,Je,gt,Ie.width,Ie.height,Ie.depth),ze)if(L.layerUpdates.size>0){const De=dS(Ie.width,Ie.height,L.format,L.type);for(const Me of L.layerUpdates){const Ve=Ie.data.subarray(Me*De/Ie.data.BYTES_PER_ELEMENT,(Me+1)*De/Ie.data.BYTES_PER_ELEMENT);n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,Me,Ie.width,Ie.height,1,je,dt,Ve)}L.clearLayerUpdates()}else n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,Ie.width,Ie.height,Ie.depth,je,dt,Ie.data)}else n.texImage3D(t.TEXTURE_2D_ARRAY,0,gt,Ie.width,Ie.height,Ie.depth,0,je,dt,Ie.data);else if(L.isData3DTexture)J?(Ze&&n.texStorage3D(t.TEXTURE_3D,Je,gt,Ie.width,Ie.height,Ie.depth),ze&&n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,Ie.width,Ie.height,Ie.depth,je,dt,Ie.data)):n.texImage3D(t.TEXTURE_3D,0,gt,Ie.width,Ie.height,Ie.depth,0,je,dt,Ie.data);else if(L.isFramebufferTexture){if(Ze)if(J)n.texStorage2D(t.TEXTURE_2D,Je,gt,Ie.width,Ie.height);else{let De=Ie.width,Me=Ie.height;for(let Ve=0;Ve<Je;Ve++)n.texImage2D(t.TEXTURE_2D,Ve,gt,De,Me,0,je,dt,null),De>>=1,Me>>=1}}else if(Vt.length>0){if(J&&Ze){const De=Ne(Vt[0]);n.texStorage2D(t.TEXTURE_2D,Je,gt,De.width,De.height)}for(let De=0,Me=Vt.length;De<Me;De++)We=Vt[De],J?ze&&n.texSubImage2D(t.TEXTURE_2D,De,0,0,je,dt,We):n.texImage2D(t.TEXTURE_2D,De,gt,je,dt,We);L.generateMipmaps=!1}else if(J){if(Ze){const De=Ne(Ie);n.texStorage2D(t.TEXTURE_2D,Je,gt,De.width,De.height)}ze&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,je,dt,Ie)}else n.texImage2D(t.TEXTURE_2D,0,gt,je,dt,Ie);x(L)&&v(re),rt.__version=he.version,L.onUpdate&&L.onUpdate(L)}B.__version=L.version}function me(B,L,Q){if(L.image.length!==6)return;const re=pe(B,L),Se=L.source;n.bindTexture(t.TEXTURE_CUBE_MAP,B.__webglTexture,t.TEXTURE0+Q);const he=i.get(Se);if(Se.version!==he.__version||re===!0){n.activeTexture(t.TEXTURE0+Q);const rt=Jt.getPrimaries(Jt.workingColorSpace),Ue=L.colorSpace===Zs?null:Jt.getPrimaries(L.colorSpace),ut=L.colorSpace===Zs||rt===Ue?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,L.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,L.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,L.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,ut);const Ct=L.isCompressedTexture||L.image[0].isCompressedTexture,Ie=L.image[0]&&L.image[0].isDataTexture,je=[];for(let Me=0;Me<6;Me++)!Ct&&!Ie?je[Me]=y(L.image[Me],!0,r.maxCubemapSize):je[Me]=Ie?L.image[Me].image:L.image[Me],je[Me]=_t(L,je[Me]);const dt=je[0],gt=o.convert(L.format,L.colorSpace),We=o.convert(L.type),Vt=_(L.internalFormat,gt,We,L.colorSpace),J=L.isVideoTexture!==!0,Ze=he.__version===void 0||re===!0,ze=Se.dataReady;let Je=E(L,dt);oe(t.TEXTURE_CUBE_MAP,L);let De;if(Ct){J&&Ze&&n.texStorage2D(t.TEXTURE_CUBE_MAP,Je,Vt,dt.width,dt.height);for(let Me=0;Me<6;Me++){De=je[Me].mipmaps;for(let Ve=0;Ve<De.length;Ve++){const kt=De[Ve];L.format!==Ki?gt!==null?J?ze&&n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Me,Ve,0,0,kt.width,kt.height,gt,kt.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Me,Ve,Vt,kt.width,kt.height,0,kt.data):qe("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):J?ze&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Me,Ve,0,0,kt.width,kt.height,gt,We,kt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Me,Ve,Vt,kt.width,kt.height,0,gt,We,kt.data)}}}else{if(De=L.mipmaps,J&&Ze){De.length>0&&Je++;const Me=Ne(je[0]);n.texStorage2D(t.TEXTURE_CUBE_MAP,Je,Vt,Me.width,Me.height)}for(let Me=0;Me<6;Me++)if(Ie){J?ze&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0,0,0,je[Me].width,je[Me].height,gt,We,je[Me].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0,Vt,je[Me].width,je[Me].height,0,gt,We,je[Me].data);for(let Ve=0;Ve<De.length;Ve++){const pn=De[Ve].image[Me].image;J?ze&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Me,Ve+1,0,0,pn.width,pn.height,gt,We,pn.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Me,Ve+1,Vt,pn.width,pn.height,0,gt,We,pn.data)}}else{J?ze&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0,0,0,gt,We,je[Me]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0,Vt,gt,We,je[Me]);for(let Ve=0;Ve<De.length;Ve++){const kt=De[Ve];J?ze&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Me,Ve+1,0,0,gt,We,kt.image[Me]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Me,Ve+1,Vt,gt,We,kt.image[Me])}}}x(L)&&v(t.TEXTURE_CUBE_MAP),he.__version=Se.version,L.onUpdate&&L.onUpdate(L)}B.__version=L.version}function Fe(B,L,Q,re,Se,he){const rt=o.convert(Q.format,Q.colorSpace),Ue=o.convert(Q.type),ut=_(Q.internalFormat,rt,Ue,Q.colorSpace),Ct=i.get(L),Ie=i.get(Q);if(Ie.__renderTarget=L,!Ct.__hasExternalTextures){const je=Math.max(1,L.width>>he),dt=Math.max(1,L.height>>he);Se===t.TEXTURE_3D||Se===t.TEXTURE_2D_ARRAY?n.texImage3D(Se,he,ut,je,dt,L.depth,0,rt,Ue,null):n.texImage2D(Se,he,ut,je,dt,0,rt,Ue,null)}n.bindFramebuffer(t.FRAMEBUFFER,B),mt(L)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,re,Se,Ie.__webglTexture,0,V(L)):(Se===t.TEXTURE_2D||Se>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&Se<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,re,Se,Ie.__webglTexture,he),n.bindFramebuffer(t.FRAMEBUFFER,null)}function tt(B,L,Q){if(t.bindRenderbuffer(t.RENDERBUFFER,B),L.depthBuffer){const re=L.depthTexture,Se=re&&re.isDepthTexture?re.type:null,he=S(L.stencilBuffer,Se),rt=L.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;mt(L)?a.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,V(L),he,L.width,L.height):Q?t.renderbufferStorageMultisample(t.RENDERBUFFER,V(L),he,L.width,L.height):t.renderbufferStorage(t.RENDERBUFFER,he,L.width,L.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,rt,t.RENDERBUFFER,B)}else{const re=L.textures;for(let Se=0;Se<re.length;Se++){const he=re[Se],rt=o.convert(he.format,he.colorSpace),Ue=o.convert(he.type),ut=_(he.internalFormat,rt,Ue,he.colorSpace);mt(L)?a.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,V(L),ut,L.width,L.height):Q?t.renderbufferStorageMultisample(t.RENDERBUFFER,V(L),ut,L.width,L.height):t.renderbufferStorage(t.RENDERBUFFER,ut,L.width,L.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function Be(B,L,Q){const re=L.isWebGLCubeRenderTarget===!0;if(n.bindFramebuffer(t.FRAMEBUFFER,B),!(L.depthTexture&&L.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Se=i.get(L.depthTexture);if(Se.__renderTarget=L,(!Se.__webglTexture||L.depthTexture.image.width!==L.width||L.depthTexture.image.height!==L.height)&&(L.depthTexture.image.width=L.width,L.depthTexture.image.height=L.height,L.depthTexture.needsUpdate=!0),re){if(Se.__webglInit===void 0&&(Se.__webglInit=!0,L.depthTexture.addEventListener("dispose",T)),Se.__webglTexture===void 0){Se.__webglTexture=t.createTexture(),n.bindTexture(t.TEXTURE_CUBE_MAP,Se.__webglTexture),oe(t.TEXTURE_CUBE_MAP,L.depthTexture);const Ct=o.convert(L.depthTexture.format),Ie=o.convert(L.depthTexture.type);let je;L.depthTexture.format===Ts?je=t.DEPTH_COMPONENT24:L.depthTexture.format===Xa&&(je=t.DEPTH24_STENCIL8);for(let dt=0;dt<6;dt++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+dt,0,je,L.width,L.height,0,Ct,Ie,null)}}else Z(L.depthTexture,0);const he=Se.__webglTexture,rt=V(L),Ue=re?t.TEXTURE_CUBE_MAP_POSITIVE_X+Q:t.TEXTURE_2D,ut=L.depthTexture.format===Xa?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;if(L.depthTexture.format===Ts)mt(L)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,ut,Ue,he,0,rt):t.framebufferTexture2D(t.FRAMEBUFFER,ut,Ue,he,0);else if(L.depthTexture.format===Xa)mt(L)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,ut,Ue,he,0,rt):t.framebufferTexture2D(t.FRAMEBUFFER,ut,Ue,he,0);else throw new Error("Unknown depthTexture format")}function yt(B){const L=i.get(B),Q=B.isWebGLCubeRenderTarget===!0;if(L.__boundDepthTexture!==B.depthTexture){const re=B.depthTexture;if(L.__depthDisposeCallback&&L.__depthDisposeCallback(),re){const Se=()=>{delete L.__boundDepthTexture,delete L.__depthDisposeCallback,re.removeEventListener("dispose",Se)};re.addEventListener("dispose",Se),L.__depthDisposeCallback=Se}L.__boundDepthTexture=re}if(B.depthTexture&&!L.__autoAllocateDepthBuffer)if(Q)for(let re=0;re<6;re++)Be(L.__webglFramebuffer[re],B,re);else{const re=B.texture.mipmaps;re&&re.length>0?Be(L.__webglFramebuffer[0],B,0):Be(L.__webglFramebuffer,B,0)}else if(Q){L.__webglDepthbuffer=[];for(let re=0;re<6;re++)if(n.bindFramebuffer(t.FRAMEBUFFER,L.__webglFramebuffer[re]),L.__webglDepthbuffer[re]===void 0)L.__webglDepthbuffer[re]=t.createRenderbuffer(),tt(L.__webglDepthbuffer[re],B,!1);else{const Se=B.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,he=L.__webglDepthbuffer[re];t.bindRenderbuffer(t.RENDERBUFFER,he),t.framebufferRenderbuffer(t.FRAMEBUFFER,Se,t.RENDERBUFFER,he)}}else{const re=B.texture.mipmaps;if(re&&re.length>0?n.bindFramebuffer(t.FRAMEBUFFER,L.__webglFramebuffer[0]):n.bindFramebuffer(t.FRAMEBUFFER,L.__webglFramebuffer),L.__webglDepthbuffer===void 0)L.__webglDepthbuffer=t.createRenderbuffer(),tt(L.__webglDepthbuffer,B,!1);else{const Se=B.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,he=L.__webglDepthbuffer;t.bindRenderbuffer(t.RENDERBUFFER,he),t.framebufferRenderbuffer(t.FRAMEBUFFER,Se,t.RENDERBUFFER,he)}}n.bindFramebuffer(t.FRAMEBUFFER,null)}function It(B,L,Q){const re=i.get(B);L!==void 0&&Fe(re.__webglFramebuffer,B,B.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),Q!==void 0&&yt(B)}function Re(B){const L=B.texture,Q=i.get(B),re=i.get(L);B.addEventListener("dispose",P);const Se=B.textures,he=B.isWebGLCubeRenderTarget===!0,rt=Se.length>1;if(rt||(re.__webglTexture===void 0&&(re.__webglTexture=t.createTexture()),re.__version=L.version,s.memory.textures++),he){Q.__webglFramebuffer=[];for(let Ue=0;Ue<6;Ue++)if(L.mipmaps&&L.mipmaps.length>0){Q.__webglFramebuffer[Ue]=[];for(let ut=0;ut<L.mipmaps.length;ut++)Q.__webglFramebuffer[Ue][ut]=t.createFramebuffer()}else Q.__webglFramebuffer[Ue]=t.createFramebuffer()}else{if(L.mipmaps&&L.mipmaps.length>0){Q.__webglFramebuffer=[];for(let Ue=0;Ue<L.mipmaps.length;Ue++)Q.__webglFramebuffer[Ue]=t.createFramebuffer()}else Q.__webglFramebuffer=t.createFramebuffer();if(rt)for(let Ue=0,ut=Se.length;Ue<ut;Ue++){const Ct=i.get(Se[Ue]);Ct.__webglTexture===void 0&&(Ct.__webglTexture=t.createTexture(),s.memory.textures++)}if(B.samples>0&&mt(B)===!1){Q.__webglMultisampledFramebuffer=t.createFramebuffer(),Q.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,Q.__webglMultisampledFramebuffer);for(let Ue=0;Ue<Se.length;Ue++){const ut=Se[Ue];Q.__webglColorRenderbuffer[Ue]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,Q.__webglColorRenderbuffer[Ue]);const Ct=o.convert(ut.format,ut.colorSpace),Ie=o.convert(ut.type),je=_(ut.internalFormat,Ct,Ie,ut.colorSpace,B.isXRRenderTarget===!0),dt=V(B);t.renderbufferStorageMultisample(t.RENDERBUFFER,dt,je,B.width,B.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Ue,t.RENDERBUFFER,Q.__webglColorRenderbuffer[Ue])}t.bindRenderbuffer(t.RENDERBUFFER,null),B.depthBuffer&&(Q.__webglDepthRenderbuffer=t.createRenderbuffer(),tt(Q.__webglDepthRenderbuffer,B,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(he){n.bindTexture(t.TEXTURE_CUBE_MAP,re.__webglTexture),oe(t.TEXTURE_CUBE_MAP,L);for(let Ue=0;Ue<6;Ue++)if(L.mipmaps&&L.mipmaps.length>0)for(let ut=0;ut<L.mipmaps.length;ut++)Fe(Q.__webglFramebuffer[Ue][ut],B,L,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,ut);else Fe(Q.__webglFramebuffer[Ue],B,L,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,0);x(L)&&v(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(rt){for(let Ue=0,ut=Se.length;Ue<ut;Ue++){const Ct=Se[Ue],Ie=i.get(Ct);let je=t.TEXTURE_2D;(B.isWebGL3DRenderTarget||B.isWebGLArrayRenderTarget)&&(je=B.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(je,Ie.__webglTexture),oe(je,Ct),Fe(Q.__webglFramebuffer,B,Ct,t.COLOR_ATTACHMENT0+Ue,je,0),x(Ct)&&v(je)}n.unbindTexture()}else{let Ue=t.TEXTURE_2D;if((B.isWebGL3DRenderTarget||B.isWebGLArrayRenderTarget)&&(Ue=B.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(Ue,re.__webglTexture),oe(Ue,L),L.mipmaps&&L.mipmaps.length>0)for(let ut=0;ut<L.mipmaps.length;ut++)Fe(Q.__webglFramebuffer[ut],B,L,t.COLOR_ATTACHMENT0,Ue,ut);else Fe(Q.__webglFramebuffer,B,L,t.COLOR_ATTACHMENT0,Ue,0);x(L)&&v(Ue),n.unbindTexture()}B.depthBuffer&&yt(B)}function le(B){const L=B.textures;for(let Q=0,re=L.length;Q<re;Q++){const Se=L[Q];if(x(Se)){const he=w(B),rt=i.get(Se).__webglTexture;n.bindTexture(he,rt),v(he),n.unbindTexture()}}}const we=[],ve=[];function Ae(B){if(B.samples>0){if(mt(B)===!1){const L=B.textures,Q=B.width,re=B.height;let Se=t.COLOR_BUFFER_BIT;const he=B.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,rt=i.get(B),Ue=L.length>1;if(Ue)for(let Ct=0;Ct<L.length;Ct++)n.bindFramebuffer(t.FRAMEBUFFER,rt.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Ct,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,rt.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Ct,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,rt.__webglMultisampledFramebuffer);const ut=B.texture.mipmaps;ut&&ut.length>0?n.bindFramebuffer(t.DRAW_FRAMEBUFFER,rt.__webglFramebuffer[0]):n.bindFramebuffer(t.DRAW_FRAMEBUFFER,rt.__webglFramebuffer);for(let Ct=0;Ct<L.length;Ct++){if(B.resolveDepthBuffer&&(B.depthBuffer&&(Se|=t.DEPTH_BUFFER_BIT),B.stencilBuffer&&B.resolveStencilBuffer&&(Se|=t.STENCIL_BUFFER_BIT)),Ue){t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,rt.__webglColorRenderbuffer[Ct]);const Ie=i.get(L[Ct]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,Ie,0)}t.blitFramebuffer(0,0,Q,re,0,0,Q,re,Se,t.NEAREST),l===!0&&(we.length=0,ve.length=0,we.push(t.COLOR_ATTACHMENT0+Ct),B.depthBuffer&&B.resolveDepthBuffer===!1&&(we.push(he),ve.push(he),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,ve)),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,we))}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),Ue)for(let Ct=0;Ct<L.length;Ct++){n.bindFramebuffer(t.FRAMEBUFFER,rt.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Ct,t.RENDERBUFFER,rt.__webglColorRenderbuffer[Ct]);const Ie=i.get(L[Ct]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,rt.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Ct,t.TEXTURE_2D,Ie,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,rt.__webglMultisampledFramebuffer)}else if(B.depthBuffer&&B.resolveDepthBuffer===!1&&l){const L=B.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[L])}}}function V(B){return Math.min(r.maxSamples,B.samples)}function mt(B){const L=i.get(B);return B.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&L.__useRenderToTexture!==!1}function $e(B){const L=s.render.frame;u.get(B)!==L&&(u.set(B,L),B.update())}function _t(B,L){const Q=B.colorSpace,re=B.format,Se=B.type;return B.isCompressedTexture===!0||B.isVideoTexture===!0||Q!==Cc&&Q!==Zs&&(Jt.getTransfer(Q)===dn?(re!==Ki||Se!==cr)&&qe("WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):wt("WebGLTextures: Unsupported texture color space:",Q)),L}function Ne(B){return typeof HTMLImageElement<"u"&&B instanceof HTMLImageElement?(c.width=B.naturalWidth||B.width,c.height=B.naturalHeight||B.height):typeof VideoFrame<"u"&&B instanceof VideoFrame?(c.width=B.displayWidth,c.height=B.displayHeight):(c.width=B.width,c.height=B.height),c}this.allocateTextureUnit=H,this.resetTextureUnits=O,this.setTexture2D=Z,this.setTexture2DArray=G,this.setTexture3D=Y,this.setTextureCube=z,this.rebindTextures=It,this.setupRenderTarget=Re,this.updateRenderTargetMipmap=le,this.updateMultisampleRenderTarget=Ae,this.setupDepthRenderbuffer=yt,this.setupFrameBufferTexture=Fe,this.useMultisampledRTT=mt,this.isReversedDepthBuffer=function(){return n.buffers.depth.getReversed()}}function j5(t,e){function n(i,r=Zs){let o;const s=Jt.getTransfer(r);if(i===cr)return t.UNSIGNED_BYTE;if(i===Ky)return t.UNSIGNED_SHORT_4_4_4_4;if(i===Qy)return t.UNSIGNED_SHORT_5_5_5_1;if(i===wC)return t.UNSIGNED_INT_5_9_9_9_REV;if(i===_C)return t.UNSIGNED_INT_10F_11F_11F_REV;if(i===yC)return t.BYTE;if(i===xC)return t.SHORT;if(i===md)return t.UNSIGNED_SHORT;if(i===Zy)return t.INT;if(i===Ao)return t.UNSIGNED_INT;if(i===dr)return t.FLOAT;if(i===Es)return t.HALF_FLOAT;if(i===bC)return t.ALPHA;if(i===SC)return t.RGB;if(i===Ki)return t.RGBA;if(i===Ts)return t.DEPTH_COMPONENT;if(i===Xa)return t.DEPTH_STENCIL;if(i===Jy)return t.RED;if(i===wp)return t.RED_INTEGER;if(i===Mc)return t.RG;if(i===ex)return t.RG_INTEGER;if(i===tx)return t.RGBA_INTEGER;if(i===nf||i===rf||i===of||i===sf)if(s===dn)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(i===nf)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===rf)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===of)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===sf)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(i===nf)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===rf)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===of)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===sf)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===M0||i===C0||i===E0||i===T0)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(i===M0)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===C0)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===E0)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===T0)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===A0||i===I0||i===P0||i===R0||i===D0||i===k0||i===N0)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(i===A0||i===I0)return s===dn?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(i===P0)return s===dn?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC;if(i===R0)return o.COMPRESSED_R11_EAC;if(i===D0)return o.COMPRESSED_SIGNED_R11_EAC;if(i===k0)return o.COMPRESSED_RG11_EAC;if(i===N0)return o.COMPRESSED_SIGNED_RG11_EAC}else return null;if(i===L0||i===z0||i===O0||i===F0||i===U0||i===B0||i===H0||i===V0||i===$0||i===W0||i===G0||i===j0||i===q0||i===X0)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(i===L0)return s===dn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===z0)return s===dn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===O0)return s===dn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===F0)return s===dn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===U0)return s===dn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===B0)return s===dn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===H0)return s===dn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===V0)return s===dn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===$0)return s===dn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===W0)return s===dn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===G0)return s===dn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===j0)return s===dn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===q0)return s===dn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===X0)return s===dn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===Y0||i===Z0||i===K0)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(i===Y0)return s===dn?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===Z0)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===K0)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===Q0||i===J0||i===ey||i===ty)if(o=e.get("EXT_texture_compression_rgtc"),o!==null){if(i===Q0)return o.COMPRESSED_RED_RGTC1_EXT;if(i===J0)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===ey)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===ty)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===gd?t.UNSIGNED_INT_24_8:t[i]!==void 0?t[i]:null}return{convert:n}}const Yne=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Zne=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Kne{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,n){if(this.texture===null){const i=new NC(e.texture);(e.depthNear!==n.depthNear||e.depthFar!==n.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const n=e.cameras[0].viewport,i=new no({vertexShader:Yne,fragmentShader:Zne,uniforms:{depthColor:{value:this.texture},depthWidth:{value:n.z},depthHeight:{value:n.w}}});this.mesh=new fi(new zd(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Qne extends Is{constructor(e,n){super();const i=this;let r=null,o=1,s=null,a="local-floor",l=1,c=null,u=null,d=null,f=null,m=null,g=null;const y=typeof XRWebGLBinding<"u",x=new Kne,v={},w=n.getContextAttributes();let _=null,S=null;const E=[],T=[],P=new Ce;let D=null;const A=new Pi;A.viewport=new Sn;const R=new Pi;R.viewport=new Sn;const N=[A,R],O=new N5;let H=null,q=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ae){let me=E[ae];return me===void 0&&(me=new wv,E[ae]=me),me.getTargetRaySpace()},this.getControllerGrip=function(ae){let me=E[ae];return me===void 0&&(me=new wv,E[ae]=me),me.getGripSpace()},this.getHand=function(ae){let me=E[ae];return me===void 0&&(me=new wv,E[ae]=me),me.getHandSpace()};function Z(ae){const me=T.indexOf(ae.inputSource);if(me===-1)return;const Fe=E[me];Fe!==void 0&&(Fe.update(ae.inputSource,ae.frame,c||s),Fe.dispatchEvent({type:ae.type,data:ae.inputSource}))}function G(){r.removeEventListener("select",Z),r.removeEventListener("selectstart",Z),r.removeEventListener("selectend",Z),r.removeEventListener("squeeze",Z),r.removeEventListener("squeezestart",Z),r.removeEventListener("squeezeend",Z),r.removeEventListener("end",G),r.removeEventListener("inputsourceschange",Y);for(let ae=0;ae<E.length;ae++){const me=T[ae];me!==null&&(T[ae]=null,E[ae].disconnect(me))}H=null,q=null,x.reset();for(const ae in v)delete v[ae];e.setRenderTarget(_),m=null,f=null,d=null,r=null,S=null,it.stop(),i.isPresenting=!1,e.setPixelRatio(D),e.setSize(P.width,P.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ae){o=ae,i.isPresenting===!0&&qe("WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ae){a=ae,i.isPresenting===!0&&qe("WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||s},this.setReferenceSpace=function(ae){c=ae},this.getBaseLayer=function(){return f!==null?f:m},this.getBinding=function(){return d===null&&y&&(d=new XRWebGLBinding(r,n)),d},this.getFrame=function(){return g},this.getSession=function(){return r},this.setSession=async function(ae){if(r=ae,r!==null){if(_=e.getRenderTarget(),r.addEventListener("select",Z),r.addEventListener("selectstart",Z),r.addEventListener("selectend",Z),r.addEventListener("squeeze",Z),r.addEventListener("squeezestart",Z),r.addEventListener("squeezeend",Z),r.addEventListener("end",G),r.addEventListener("inputsourceschange",Y),w.xrCompatible!==!0&&await n.makeXRCompatible(),D=e.getPixelRatio(),e.getSize(P),y&&"createProjectionLayer"in XRWebGLBinding.prototype){let Fe=null,tt=null,Be=null;w.depth&&(Be=w.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,Fe=w.stencil?Xa:Ts,tt=w.stencil?gd:Ao);const yt={colorFormat:n.RGBA8,depthFormat:Be,scaleFactor:o};d=this.getBinding(),f=d.createProjectionLayer(yt),r.updateRenderState({layers:[f]}),e.setPixelRatio(1),e.setSize(f.textureWidth,f.textureHeight,!1),S=new Jr(f.textureWidth,f.textureHeight,{format:Ki,type:cr,depthTexture:new bd(f.textureWidth,f.textureHeight,tt,void 0,void 0,void 0,void 0,void 0,void 0,Fe),stencilBuffer:w.stencil,colorSpace:e.outputColorSpace,samples:w.antialias?4:0,resolveDepthBuffer:f.ignoreDepthValues===!1,resolveStencilBuffer:f.ignoreDepthValues===!1})}else{const Fe={antialias:w.antialias,alpha:!0,depth:w.depth,stencil:w.stencil,framebufferScaleFactor:o};m=new XRWebGLLayer(r,n,Fe),r.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),S=new Jr(m.framebufferWidth,m.framebufferHeight,{format:Ki,type:cr,colorSpace:e.outputColorSpace,stencilBuffer:w.stencil,resolveDepthBuffer:m.ignoreDepthValues===!1,resolveStencilBuffer:m.ignoreDepthValues===!1})}S.isXRRenderTarget=!0,this.setFoveation(l),c=null,s=await r.requestReferenceSpace(a),it.setContext(r),it.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return x.getDepthTexture()};function Y(ae){for(let me=0;me<ae.removed.length;me++){const Fe=ae.removed[me],tt=T.indexOf(Fe);tt>=0&&(T[tt]=null,E[tt].disconnect(Fe))}for(let me=0;me<ae.added.length;me++){const Fe=ae.added[me];let tt=T.indexOf(Fe);if(tt===-1){for(let yt=0;yt<E.length;yt++)if(yt>=T.length){T.push(Fe),tt=yt;break}else if(T[yt]===null){T[yt]=Fe,tt=yt;break}if(tt===-1)break}const Be=E[tt];Be&&Be.connect(Fe)}}const z=new W,$=new W;function X(ae,me,Fe){z.setFromMatrixPosition(me.matrixWorld),$.setFromMatrixPosition(Fe.matrixWorld);const tt=z.distanceTo($),Be=me.projectionMatrix.elements,yt=Fe.projectionMatrix.elements,It=Be[14]/(Be[10]-1),Re=Be[14]/(Be[10]+1),le=(Be[9]+1)/Be[5],we=(Be[9]-1)/Be[5],ve=(Be[8]-1)/Be[0],Ae=(yt[8]+1)/yt[0],V=It*ve,mt=It*Ae,$e=tt/(-ve+Ae),_t=$e*-ve;if(me.matrixWorld.decompose(ae.position,ae.quaternion,ae.scale),ae.translateX(_t),ae.translateZ($e),ae.matrixWorld.compose(ae.position,ae.quaternion,ae.scale),ae.matrixWorldInverse.copy(ae.matrixWorld).invert(),Be[10]===-1)ae.projectionMatrix.copy(me.projectionMatrix),ae.projectionMatrixInverse.copy(me.projectionMatrixInverse);else{const Ne=It+$e,B=Re+$e,L=V-_t,Q=mt+(tt-_t),re=le*Re/B*Ne,Se=we*Re/B*Ne;ae.projectionMatrix.makePerspective(L,Q,re,Se,Ne,B),ae.projectionMatrixInverse.copy(ae.projectionMatrix).invert()}}function K(ae,me){me===null?ae.matrixWorld.copy(ae.matrix):ae.matrixWorld.multiplyMatrices(me.matrixWorld,ae.matrix),ae.matrixWorldInverse.copy(ae.matrixWorld).invert()}this.updateCamera=function(ae){if(r===null)return;let me=ae.near,Fe=ae.far;x.texture!==null&&(x.depthNear>0&&(me=x.depthNear),x.depthFar>0&&(Fe=x.depthFar)),O.near=R.near=A.near=me,O.far=R.far=A.far=Fe,(H!==O.near||q!==O.far)&&(r.updateRenderState({depthNear:O.near,depthFar:O.far}),H=O.near,q=O.far),O.layers.mask=ae.layers.mask|6,A.layers.mask=O.layers.mask&3,R.layers.mask=O.layers.mask&5;const tt=ae.parent,Be=O.cameras;K(O,tt);for(let yt=0;yt<Be.length;yt++)K(Be[yt],tt);Be.length===2?X(O,A,R):O.projectionMatrix.copy(A.projectionMatrix),oe(ae,O,tt)};function oe(ae,me,Fe){Fe===null?ae.matrix.copy(me.matrixWorld):(ae.matrix.copy(Fe.matrixWorld),ae.matrix.invert(),ae.matrix.multiply(me.matrixWorld)),ae.matrix.decompose(ae.position,ae.quaternion,ae.scale),ae.updateMatrixWorld(!0),ae.projectionMatrix.copy(me.projectionMatrix),ae.projectionMatrixInverse.copy(me.projectionMatrixInverse),ae.isPerspectiveCamera&&(ae.fov=xd*2*Math.atan(1/ae.projectionMatrix.elements[5]),ae.zoom=1)}this.getCamera=function(){return O},this.getFoveation=function(){if(!(f===null&&m===null))return l},this.setFoveation=function(ae){l=ae,f!==null&&(f.fixedFoveation=ae),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=ae)},this.hasDepthSensing=function(){return x.texture!==null},this.getDepthSensingMesh=function(){return x.getMesh(O)},this.getCameraTexture=function(ae){return v[ae]};let pe=null;function be(ae,me){if(u=me.getViewerPose(c||s),g=me,u!==null){const Fe=u.views;m!==null&&(e.setRenderTargetFramebuffer(S,m.framebuffer),e.setRenderTarget(S));let tt=!1;Fe.length!==O.cameras.length&&(O.cameras.length=0,tt=!0);for(let Re=0;Re<Fe.length;Re++){const le=Fe[Re];let we=null;if(m!==null)we=m.getViewport(le);else{const Ae=d.getViewSubImage(f,le);we=Ae.viewport,Re===0&&(e.setRenderTargetTextures(S,Ae.colorTexture,Ae.depthStencilTexture),e.setRenderTarget(S))}let ve=N[Re];ve===void 0&&(ve=new Pi,ve.layers.enable(Re),ve.viewport=new Sn,N[Re]=ve),ve.matrix.fromArray(le.transform.matrix),ve.matrix.decompose(ve.position,ve.quaternion,ve.scale),ve.projectionMatrix.fromArray(le.projectionMatrix),ve.projectionMatrixInverse.copy(ve.projectionMatrix).invert(),ve.viewport.set(we.x,we.y,we.width,we.height),Re===0&&(O.matrix.copy(ve.matrix),O.matrix.decompose(O.position,O.quaternion,O.scale)),tt===!0&&O.cameras.push(ve)}const Be=r.enabledFeatures;if(Be&&Be.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&y){d=i.getBinding();const Re=d.getDepthInformation(Fe[0]);Re&&Re.isValid&&Re.texture&&x.init(Re,r.renderState)}if(Be&&Be.includes("camera-access")&&y){e.state.unbindTexture(),d=i.getBinding();for(let Re=0;Re<Fe.length;Re++){const le=Fe[Re].camera;if(le){let we=v[le];we||(we=new NC,v[le]=we);const ve=d.getCameraImage(le);we.sourceTexture=ve}}}}for(let Fe=0;Fe<E.length;Fe++){const tt=T[Fe],Be=E[Fe];tt!==null&&Be!==void 0&&Be.update(tt,me,c||s)}pe&&pe(ae,me),me.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:me}),g=null}const it=new H5;it.setAnimationLoop(be),this.setAnimationLoop=function(ae){pe=ae},this.dispose=function(){}}}const Gl=new to,Jne=new Dt;function eie(t,e){function n(x,v){x.matrixAutoUpdate===!0&&x.updateMatrix(),v.value.copy(x.matrix)}function i(x,v){v.color.getRGB(x.fogColor.value,VU(t)),v.isFog?(x.fogNear.value=v.near,x.fogFar.value=v.far):v.isFogExp2&&(x.fogDensity.value=v.density)}function r(x,v,w,_,S){v.isMeshBasicMaterial||v.isMeshLambertMaterial?o(x,v):v.isMeshToonMaterial?(o(x,v),d(x,v)):v.isMeshPhongMaterial?(o(x,v),u(x,v)):v.isMeshStandardMaterial?(o(x,v),f(x,v),v.isMeshPhysicalMaterial&&m(x,v,S)):v.isMeshMatcapMaterial?(o(x,v),g(x,v)):v.isMeshDepthMaterial?o(x,v):v.isMeshDistanceMaterial?(o(x,v),y(x,v)):v.isMeshNormalMaterial?o(x,v):v.isLineBasicMaterial?(s(x,v),v.isLineDashedMaterial&&a(x,v)):v.isPointsMaterial?l(x,v,w,_):v.isSpriteMaterial?c(x,v):v.isShadowMaterial?(x.color.value.copy(v.color),x.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}function o(x,v){x.opacity.value=v.opacity,v.color&&x.diffuse.value.copy(v.color),v.emissive&&x.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(x.map.value=v.map,n(v.map,x.mapTransform)),v.alphaMap&&(x.alphaMap.value=v.alphaMap,n(v.alphaMap,x.alphaMapTransform)),v.bumpMap&&(x.bumpMap.value=v.bumpMap,n(v.bumpMap,x.bumpMapTransform),x.bumpScale.value=v.bumpScale,v.side===fr&&(x.bumpScale.value*=-1)),v.normalMap&&(x.normalMap.value=v.normalMap,n(v.normalMap,x.normalMapTransform),x.normalScale.value.copy(v.normalScale),v.side===fr&&x.normalScale.value.negate()),v.displacementMap&&(x.displacementMap.value=v.displacementMap,n(v.displacementMap,x.displacementMapTransform),x.displacementScale.value=v.displacementScale,x.displacementBias.value=v.displacementBias),v.emissiveMap&&(x.emissiveMap.value=v.emissiveMap,n(v.emissiveMap,x.emissiveMapTransform)),v.specularMap&&(x.specularMap.value=v.specularMap,n(v.specularMap,x.specularMapTransform)),v.alphaTest>0&&(x.alphaTest.value=v.alphaTest);const w=e.get(v),_=w.envMap,S=w.envMapRotation;_&&(x.envMap.value=_,Gl.copy(S),Gl.x*=-1,Gl.y*=-1,Gl.z*=-1,_.isCubeTexture&&_.isRenderTargetTexture===!1&&(Gl.y*=-1,Gl.z*=-1),x.envMapRotation.value.setFromMatrix4(Jne.makeRotationFromEuler(Gl)),x.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,x.reflectivity.value=v.reflectivity,x.ior.value=v.ior,x.refractionRatio.value=v.refractionRatio),v.lightMap&&(x.lightMap.value=v.lightMap,x.lightMapIntensity.value=v.lightMapIntensity,n(v.lightMap,x.lightMapTransform)),v.aoMap&&(x.aoMap.value=v.aoMap,x.aoMapIntensity.value=v.aoMapIntensity,n(v.aoMap,x.aoMapTransform))}function s(x,v){x.diffuse.value.copy(v.color),x.opacity.value=v.opacity,v.map&&(x.map.value=v.map,n(v.map,x.mapTransform))}function a(x,v){x.dashSize.value=v.dashSize,x.totalSize.value=v.dashSize+v.gapSize,x.scale.value=v.scale}function l(x,v,w,_){x.diffuse.value.copy(v.color),x.opacity.value=v.opacity,x.size.value=v.size*w,x.scale.value=_*.5,v.map&&(x.map.value=v.map,n(v.map,x.uvTransform)),v.alphaMap&&(x.alphaMap.value=v.alphaMap,n(v.alphaMap,x.alphaMapTransform)),v.alphaTest>0&&(x.alphaTest.value=v.alphaTest)}function c(x,v){x.diffuse.value.copy(v.color),x.opacity.value=v.opacity,x.rotation.value=v.rotation,v.map&&(x.map.value=v.map,n(v.map,x.mapTransform)),v.alphaMap&&(x.alphaMap.value=v.alphaMap,n(v.alphaMap,x.alphaMapTransform)),v.alphaTest>0&&(x.alphaTest.value=v.alphaTest)}function u(x,v){x.specular.value.copy(v.specular),x.shininess.value=Math.max(v.shininess,1e-4)}function d(x,v){v.gradientMap&&(x.gradientMap.value=v.gradientMap)}function f(x,v){x.metalness.value=v.metalness,v.metalnessMap&&(x.metalnessMap.value=v.metalnessMap,n(v.metalnessMap,x.metalnessMapTransform)),x.roughness.value=v.roughness,v.roughnessMap&&(x.roughnessMap.value=v.roughnessMap,n(v.roughnessMap,x.roughnessMapTransform)),v.envMap&&(x.envMapIntensity.value=v.envMapIntensity)}function m(x,v,w){x.ior.value=v.ior,v.sheen>0&&(x.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),x.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&&(x.sheenColorMap.value=v.sheenColorMap,n(v.sheenColorMap,x.sheenColorMapTransform)),v.sheenRoughnessMap&&(x.sheenRoughnessMap.value=v.sheenRoughnessMap,n(v.sheenRoughnessMap,x.sheenRoughnessMapTransform))),v.clearcoat>0&&(x.clearcoat.value=v.clearcoat,x.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&&(x.clearcoatMap.value=v.clearcoatMap,n(v.clearcoatMap,x.clearcoatMapTransform)),v.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap,n(v.clearcoatRoughnessMap,x.clearcoatRoughnessMapTransform)),v.clearcoatNormalMap&&(x.clearcoatNormalMap.value=v.clearcoatNormalMap,n(v.clearcoatNormalMap,x.clearcoatNormalMapTransform),x.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),v.side===fr&&x.clearcoatNormalScale.value.negate())),v.dispersion>0&&(x.dispersion.value=v.dispersion),v.iridescence>0&&(x.iridescence.value=v.iridescence,x.iridescenceIOR.value=v.iridescenceIOR,x.iridescenceThicknessMinimum.value=v.iridescenceThicknessRange[0],x.iridescenceThicknessMaximum.value=v.iridescenceThicknessRange[1],v.iridescenceMap&&(x.iridescenceMap.value=v.iridescenceMap,n(v.iridescenceMap,x.iridescenceMapTransform)),v.iridescenceThicknessMap&&(x.iridescenceThicknessMap.value=v.iridescenceThicknessMap,n(v.iridescenceThicknessMap,x.iridescenceThicknessMapTransform))),v.transmission>0&&(x.transmission.value=v.transmission,x.transmissionSamplerMap.value=w.texture,x.transmissionSamplerSize.value.set(w.width,w.height),v.transmissionMap&&(x.transmissionMap.value=v.transmissionMap,n(v.transmissionMap,x.transmissionMapTransform)),x.thickness.value=v.thickness,v.thicknessMap&&(x.thicknessMap.value=v.thicknessMap,n(v.thicknessMap,x.thicknessMapTransform)),x.attenuationDistance.value=v.attenuationDistance,x.attenuationColor.value.copy(v.attenuationColor)),v.anisotropy>0&&(x.anisotropyVector.value.set(v.anisotropy*Math.cos(v.anisotropyRotation),v.anisotropy*Math.sin(v.anisotropyRotation)),v.anisotropyMap&&(x.anisotropyMap.value=v.anisotropyMap,n(v.anisotropyMap,x.anisotropyMapTransform))),x.specularIntensity.value=v.specularIntensity,x.specularColor.value.copy(v.specularColor),v.specularColorMap&&(x.specularColorMap.value=v.specularColorMap,n(v.specularColorMap,x.specularColorMapTransform)),v.specularIntensityMap&&(x.specularIntensityMap.value=v.specularIntensityMap,n(v.specularIntensityMap,x.specularIntensityMapTransform))}function g(x,v){v.matcap&&(x.matcap.value=v.matcap)}function y(x,v){const w=e.get(v).light;x.referencePosition.value.setFromMatrixPosition(w.matrixWorld),x.nearDistance.value=w.shadow.camera.near,x.farDistance.value=w.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function tie(t,e,n,i){let r={},o={},s=[];const a=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);function l(w,_){const S=_.program;i.uniformBlockBinding(w,S)}function c(w,_){let S=r[w.id];S===void 0&&(g(w),S=u(w),r[w.id]=S,w.addEventListener("dispose",x));const E=_.program;i.updateUBOMapping(w,E);const T=e.render.frame;o[w.id]!==T&&(f(w),o[w.id]=T)}function u(w){const _=d();w.__bindingPointIndex=_;const S=t.createBuffer(),E=w.__size,T=w.usage;return t.bindBuffer(t.UNIFORM_BUFFER,S),t.bufferData(t.UNIFORM_BUFFER,E,T),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,_,S),S}function d(){for(let w=0;w<a;w++)if(s.indexOf(w)===-1)return s.push(w),w;return wt("WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(w){const _=r[w.id],S=w.uniforms,E=w.__cache;t.bindBuffer(t.UNIFORM_BUFFER,_);for(let T=0,P=S.length;T<P;T++){const D=Array.isArray(S[T])?S[T]:[S[T]];for(let A=0,R=D.length;A<R;A++){const N=D[A];if(m(N,T,A,E)===!0){const O=N.__offset,H=Array.isArray(N.value)?N.value:[N.value];let q=0;for(let Z=0;Z<H.length;Z++){const G=H[Z],Y=y(G);typeof G=="number"||typeof G=="boolean"?(N.__data[0]=G,t.bufferSubData(t.UNIFORM_BUFFER,O+q,N.__data)):G.isMatrix3?(N.__data[0]=G.elements[0],N.__data[1]=G.elements[1],N.__data[2]=G.elements[2],N.__data[3]=0,N.__data[4]=G.elements[3],N.__data[5]=G.elements[4],N.__data[6]=G.elements[5],N.__data[7]=0,N.__data[8]=G.elements[6],N.__data[9]=G.elements[7],N.__data[10]=G.elements[8],N.__data[11]=0):(G.toArray(N.__data,q),q+=Y.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,O,N.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function m(w,_,S,E){const T=w.value,P=_+"_"+S;if(E[P]===void 0)return typeof T=="number"||typeof T=="boolean"?E[P]=T:E[P]=T.clone(),!0;{const D=E[P];if(typeof T=="number"||typeof T=="boolean"){if(D!==T)return E[P]=T,!0}else if(D.equals(T)===!1)return D.copy(T),!0}return!1}function g(w){const _=w.uniforms;let S=0;const E=16;for(let P=0,D=_.length;P<D;P++){const A=Array.isArray(_[P])?_[P]:[_[P]];for(let R=0,N=A.length;R<N;R++){const O=A[R],H=Array.isArray(O.value)?O.value:[O.value];for(let q=0,Z=H.length;q<Z;q++){const G=H[q],Y=y(G),z=S%E,$=z%Y.boundary,X=z+$;S+=$,X!==0&&E-X<Y.storage&&(S+=E-X),O.__data=new Float32Array(Y.storage/Float32Array.BYTES_PER_ELEMENT),O.__offset=S,S+=Y.storage}}}const T=S%E;return T>0&&(S+=E-T),w.__size=S,w.__cache={},this}function y(w){const _={boundary:0,storage:0};return typeof w=="number"||typeof w=="boolean"?(_.boundary=4,_.storage=4):w.isVector2?(_.boundary=8,_.storage=8):w.isVector3||w.isColor?(_.boundary=16,_.storage=12):w.isVector4?(_.boundary=16,_.storage=16):w.isMatrix3?(_.boundary=48,_.storage=48):w.isMatrix4?(_.boundary=64,_.storage=64):w.isTexture?qe("WebGLRenderer: Texture samplers can not be part of an uniforms group."):qe("WebGLRenderer: Unsupported uniform value type.",w),_}function x(w){const _=w.target;_.removeEventListener("dispose",x);const S=s.indexOf(_.__bindingPointIndex);s.splice(S,1),t.deleteBuffer(r[_.id]),delete r[_.id],delete o[_.id]}function v(){for(const w in r)t.deleteBuffer(r[w]);s=[],r={},o={}}return{bind:l,update:c,dispose:v}}const nie=new Uint16Array([12469,15057,12620,14925,13266,14620,13807,14376,14323,13990,14545,13625,14713,13328,14840,12882,14931,12528,14996,12233,15039,11829,15066,11525,15080,11295,15085,10976,15082,10705,15073,10495,13880,14564,13898,14542,13977,14430,14158,14124,14393,13732,14556,13410,14702,12996,14814,12596,14891,12291,14937,11834,14957,11489,14958,11194,14943,10803,14921,10506,14893,10278,14858,9960,14484,14039,14487,14025,14499,13941,14524,13740,14574,13468,14654,13106,14743,12678,14818,12344,14867,11893,14889,11509,14893,11180,14881,10751,14852,10428,14812,10128,14765,9754,14712,9466,14764,13480,14764,13475,14766,13440,14766,13347,14769,13070,14786,12713,14816,12387,14844,11957,14860,11549,14868,11215,14855,10751,14825,10403,14782,10044,14729,9651,14666,9352,14599,9029,14967,12835,14966,12831,14963,12804,14954,12723,14936,12564,14917,12347,14900,11958,14886,11569,14878,11247,14859,10765,14828,10401,14784,10011,14727,9600,14660,9289,14586,8893,14508,8533,15111,12234,15110,12234,15104,12216,15092,12156,15067,12010,15028,11776,14981,11500,14942,11205,14902,10752,14861,10393,14812,9991,14752,9570,14682,9252,14603,8808,14519,8445,14431,8145,15209,11449,15208,11451,15202,11451,15190,11438,15163,11384,15117,11274,15055,10979,14994,10648,14932,10343,14871,9936,14803,9532,14729,9218,14645,8742,14556,8381,14461,8020,14365,7603,15273,10603,15272,10607,15267,10619,15256,10631,15231,10614,15182,10535,15118,10389,15042,10167,14963,9787,14883,9447,14800,9115,14710,8665,14615,8318,14514,7911,14411,7507,14279,7198,15314,9675,15313,9683,15309,9712,15298,9759,15277,9797,15229,9773,15166,9668,15084,9487,14995,9274,14898,8910,14800,8539,14697,8234,14590,7790,14479,7409,14367,7067,14178,6621,15337,8619,15337,8631,15333,8677,15325,8769,15305,8871,15264,8940,15202,8909,15119,8775,15022,8565,14916,8328,14804,8009,14688,7614,14569,7287,14448,6888,14321,6483,14088,6171,15350,7402,15350,7419,15347,7480,15340,7613,15322,7804,15287,7973,15229,8057,15148,8012,15046,7846,14933,7611,14810,7357,14682,7069,14552,6656,14421,6316,14251,5948,14007,5528,15356,5942,15356,5977,15353,6119,15348,6294,15332,6551,15302,6824,15249,7044,15171,7122,15070,7050,14949,6861,14818,6611,14679,6349,14538,6067,14398,5651,14189,5311,13935,4958,15359,4123,15359,4153,15356,4296,15353,4646,15338,5160,15311,5508,15263,5829,15188,6042,15088,6094,14966,6001,14826,5796,14678,5543,14527,5287,14377,4985,14133,4586,13869,4257,15360,1563,15360,1642,15358,2076,15354,2636,15341,3350,15317,4019,15273,4429,15203,4732,15105,4911,14981,4932,14836,4818,14679,4621,14517,4386,14359,4156,14083,3795,13808,3437,15360,122,15360,137,15358,285,15355,636,15344,1274,15322,2177,15281,2765,15215,3223,15120,3451,14995,3569,14846,3567,14681,3466,14511,3305,14344,3121,14037,2800,13753,2467,15360,0,15360,1,15359,21,15355,89,15346,253,15325,479,15287,796,15225,1148,15133,1492,15008,1749,14856,1882,14685,1886,14506,1783,14324,1608,13996,1398,13702,1183]);let ls=null;function iie(){return ls===null&&(ls=new Yo(nie,16,16,Mc,Es),ls.name="DFG_LUT",ls.minFilter=Nn,ls.magFilter=Nn,ls.wrapS=Pr,ls.wrapT=Pr,ls.generateMipmaps=!1,ls.needsUpdate=!0),ls}class q5{constructor(e={}){const{canvas:n=UU(),context:i=null,depth:r=!0,stencil:o=!1,alpha:s=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1,reversedDepthBuffer:f=!1,outputBufferType:m=cr}=e;this.isWebGLRenderer=!0;let g;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");g=i.getContextAttributes().alpha}else g=s;const y=m,x=new Set([tx,ex,wp]),v=new Set([cr,Ao,md,gd,Ky,Qy]),w=new Uint32Array(4),_=new Int32Array(4);let S=null,E=null;const T=[],P=[];let D=null;this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Mo,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const A=this;let R=!1;this._outputColorSpace=Cr;let N=0,O=0,H=null,q=-1,Z=null;const G=new Sn,Y=new Sn;let z=null;const $=new et(0);let X=0,K=n.width,oe=n.height,pe=1,be=null,it=null;const ae=new Sn(0,0,K,oe),me=new Sn(0,0,K,oe);let Fe=!1;const tt=new Ld;let Be=!1,yt=!1;const It=new Dt,Re=new W,le=new Sn,we={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let ve=!1;function Ae(){return H===null?pe:1}let V=i;function mt(F,ne){return n.getContext(F,ne)}try{const F={alpha:!0,depth:r,stencil:o,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${yp}`),n.addEventListener("webglcontextlost",kt,!1),n.addEventListener("webglcontextrestored",pn,!1),n.addEventListener("webglcontextcreationerror",on,!1),V===null){const ne="webgl2";if(V=mt(ne,F),V===null)throw mt(ne)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(F){throw wt("WebGLRenderer: "+F.message),F}let $e,_t,Ne,B,L,Q,re,Se,he,rt,Ue,ut,Ct,Ie,je,dt,gt,We,Vt,J,Ze,ze,Je,De;function Me(){$e=new rte(V),$e.init(),ze=new j5(V,$e),_t=new Yee(V,$e,e,ze),Ne=new qne(V,$e),_t.reversedDepthBuffer&&f&&Ne.buffers.depth.setReversed(!0),B=new ate(V),L=new Dne,Q=new Xne(V,$e,Ne,L,_t,ze,B),re=new Kee(A),Se=new ite(A),he=new dQ(V),Je=new qee(V,he),rt=new ote(V,he,B,Je),Ue=new cte(V,rt,he,B),Vt=new lte(V,_t,Q),dt=new Zee(L),ut=new Rne(A,re,Se,$e,_t,Je,dt),Ct=new eie(A,L),Ie=new Nne,je=new Bne($e),We=new jee(A,re,Se,Ne,Ue,g,l),gt=new Gne(A,Ue,_t),De=new tie(V,B,_t,Ne),J=new Xee(V,$e,B),Ze=new ste(V,$e,B),B.programs=ut.programs,A.capabilities=_t,A.extensions=$e,A.properties=L,A.renderLists=Ie,A.shadowMap=gt,A.state=Ne,A.info=B}Me(),y!==cr&&(D=new dte(y,n.width,n.height,r,o));const Ve=new Qne(A,V);this.xr=Ve,this.getContext=function(){return V},this.getContextAttributes=function(){return V.getContextAttributes()},this.forceContextLoss=function(){const F=$e.get("WEBGL_lose_context");F&&F.loseContext()},this.forceContextRestore=function(){const F=$e.get("WEBGL_lose_context");F&&F.restoreContext()},this.getPixelRatio=function(){return pe},this.setPixelRatio=function(F){F!==void 0&&(pe=F,this.setSize(K,oe,!1))},this.getSize=function(F){return F.set(K,oe)},this.setSize=function(F,ne,de=!0){if(Ve.isPresenting){qe("WebGLRenderer: Can't change size while VR device is presenting.");return}K=F,oe=ne,n.width=Math.floor(F*pe),n.height=Math.floor(ne*pe),de===!0&&(n.style.width=F+"px",n.style.height=ne+"px"),D!==null&&D.setSize(n.width,n.height),this.setViewport(0,0,F,ne)},this.getDrawingBufferSize=function(F){return F.set(K*pe,oe*pe).floor()},this.setDrawingBufferSize=function(F,ne,de){K=F,oe=ne,pe=de,n.width=Math.floor(F*de),n.height=Math.floor(ne*de),this.setViewport(0,0,F,ne)},this.setEffects=function(F){if(y===cr){console.error("THREE.WebGLRenderer: setEffects() requires outputBufferType set to HalfFloatType or FloatType.");return}if(F){for(let ne=0;ne<F.length;ne++)if(F[ne].isOutputPass===!0){console.warn("THREE.WebGLRenderer: OutputPass is not needed in setEffects(). Tone mapping and color space conversion are applied automatically.");break}}D.setEffects(F||[])},this.getCurrentViewport=function(F){return F.copy(G)},this.getViewport=function(F){return F.copy(ae)},this.setViewport=function(F,ne,de,ue){F.isVector4?ae.set(F.x,F.y,F.z,F.w):ae.set(F,ne,de,ue),Ne.viewport(G.copy(ae).multiplyScalar(pe).round())},this.getScissor=function(F){return F.copy(me)},this.setScissor=function(F,ne,de,ue){F.isVector4?me.set(F.x,F.y,F.z,F.w):me.set(F,ne,de,ue),Ne.scissor(Y.copy(me).multiplyScalar(pe).round())},this.getScissorTest=function(){return Fe},this.setScissorTest=function(F){Ne.setScissorTest(Fe=F)},this.setOpaqueSort=function(F){be=F},this.setTransparentSort=function(F){it=F},this.getClearColor=function(F){return F.copy(We.getClearColor())},this.setClearColor=function(){We.setClearColor(...arguments)},this.getClearAlpha=function(){return We.getClearAlpha()},this.setClearAlpha=function(){We.setClearAlpha(...arguments)},this.clear=function(F=!0,ne=!0,de=!0){let ue=0;if(F){let se=!1;if(H!==null){const He=H.texture.format;se=x.has(He)}if(se){const He=H.texture.type,Ye=v.has(He),Te=We.getClearColor(),Le=We.getClearAlpha(),ot=Te.r,lt=Te.g,nt=Te.b;Ye?(w[0]=ot,w[1]=lt,w[2]=nt,w[3]=Le,V.clearBufferuiv(V.COLOR,0,w)):(_[0]=ot,_[1]=lt,_[2]=nt,_[3]=Le,V.clearBufferiv(V.COLOR,0,_))}else ue|=V.COLOR_BUFFER_BIT}ne&&(ue|=V.DEPTH_BUFFER_BIT),de&&(ue|=V.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),V.clear(ue)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",kt,!1),n.removeEventListener("webglcontextrestored",pn,!1),n.removeEventListener("webglcontextcreationerror",on,!1),We.dispose(),Ie.dispose(),je.dispose(),L.dispose(),re.dispose(),Se.dispose(),Ue.dispose(),Je.dispose(),De.dispose(),ut.dispose(),Ve.dispose(),Ve.removeEventListener("sessionstart",Rp),Ve.removeEventListener("sessionend",fa),Rs.stop()};function kt(F){F.preventDefault(),Gf("WebGLRenderer: Context Lost."),R=!0}function pn(){Gf("WebGLRenderer: Context Restored."),R=!1;const F=B.autoReset,ne=gt.enabled,de=gt.autoUpdate,ue=gt.needsUpdate,se=gt.type;Me(),B.autoReset=F,gt.enabled=ne,gt.autoUpdate=de,gt.needsUpdate=ue,gt.type=se}function on(F){wt("WebGLRenderer: A WebGL context could not be created. Reason: ",F.statusMessage)}function Fr(F){const ne=F.target;ne.removeEventListener("dispose",Fr),Po(ne)}function Po(F){Ix(F),L.remove(F)}function Ix(F){const ne=L.get(F).programs;ne!==void 0&&(ne.forEach(function(de){ut.releaseProgram(de)}),F.isShaderMaterial&&ut.releaseShaderCache(F))}this.renderBufferDirect=function(F,ne,de,ue,se,He){ne===null&&(ne=we);const Ye=se.isMesh&&se.matrixWorld.determinant()<0,Te=Px(F,ne,de,ue,se);Ne.setMaterial(ue,Ye);let Le=de.index,ot=1;if(ue.wireframe===!0){if(Le=rt.getWireframeAttribute(de),Le===void 0)return;ot=2}const lt=de.drawRange,nt=de.attributes.position;let Nt=lt.start*ot,Kt=(lt.start+lt.count)*ot;He!==null&&(Nt=Math.max(Nt,He.start*ot),Kt=Math.min(Kt,(He.start+He.count)*ot)),Le!==null?(Nt=Math.max(Nt,0),Kt=Math.min(Kt,Le.count)):nt!=null&&(Nt=Math.max(Nt,0),Kt=Math.min(Kt,nt.count));const Yt=Kt-Nt;if(Yt<0||Yt===1/0)return;Je.setup(se,ue,Te,de,Le);let _n,un=J;if(Le!==null&&(_n=he.get(Le),un=Ze,un.setIndex(_n)),se.isMesh)ue.wireframe===!0?(Ne.setLineWidth(ue.wireframeLinewidth*Ae()),un.setMode(V.LINES)):un.setMode(V.TRIANGLES);else if(se.isLine){let St=ue.linewidth;St===void 0&&(St=1),Ne.setLineWidth(St*Ae()),se.isLineSegments?un.setMode(V.LINES):se.isLineLoop?un.setMode(V.LINE_LOOP):un.setMode(V.LINE_STRIP)}else se.isPoints?un.setMode(V.POINTS):se.isSprite&&un.setMode(V.TRIANGLES);if(se.isBatchedMesh)if(se._multiDrawInstances!==null)yd("WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),un.renderMultiDrawInstances(se._multiDrawStarts,se._multiDrawCounts,se._multiDrawCount,se._multiDrawInstances);else if($e.get("WEBGL_multi_draw"))un.renderMultiDraw(se._multiDrawStarts,se._multiDrawCounts,se._multiDrawCount);else{const St=se._multiDrawStarts,en=se._multiDrawCounts,Qt=se._multiDrawCount,En=Le?he.get(Le).bytesPerElement:1,pa=L.get(ue).currentProgram.getUniforms();for(let nr=0;nr<Qt;nr++)pa.setValue(V,"_gl_DrawID",nr),un.render(St[nr]/En,en[nr])}else if(se.isInstancedMesh)un.renderInstances(Nt,Yt,se.count);else if(de.isInstancedBufferGeometry){const St=de._maxInstanceCount!==void 0?de._maxInstanceCount:1/0,en=Math.min(de.instanceCount,St);un.renderInstances(Nt,Yt,en)}else un.render(Nt,Yt)};function Pp(F,ne,de){F.transparent===!0&&F.side===ps&&F.forceSinglePass===!1?(F.side=fr,F.needsUpdate=!0,Bc(F,ne,de),F.side=ca,F.needsUpdate=!0,Bc(F,ne,de),F.side=ps):Bc(F,ne,de)}this.compile=function(F,ne,de=null){de===null&&(de=F),E=je.get(de),E.init(ne),P.push(E),de.traverseVisible(function(se){se.isLight&&se.layers.test(ne.layers)&&(E.pushLight(se),se.castShadow&&E.pushShadow(se))}),F!==de&&F.traverseVisible(function(se){se.isLight&&se.layers.test(ne.layers)&&(E.pushLight(se),se.castShadow&&E.pushShadow(se))}),E.setupLights();const ue=new Set;return F.traverse(function(se){if(!(se.isMesh||se.isPoints||se.isLine||se.isSprite))return;const He=se.material;if(He)if(Array.isArray(He))for(let Ye=0;Ye<He.length;Ye++){const Te=He[Ye];Pp(Te,de,se),ue.add(Te)}else Pp(He,de,se),ue.add(He)}),E=P.pop(),ue},this.compileAsync=function(F,ne,de=null){const ue=this.compile(F,ne,de);return new Promise(se=>{function He(){if(ue.forEach(function(Ye){L.get(Ye).currentProgram.isReady()&&ue.delete(Ye)}),ue.size===0){se(F);return}setTimeout(He,10)}$e.get("KHR_parallel_shader_compile")!==null?He():setTimeout(He,10)})};let Fc=null;function Ud(F){Fc&&Fc(F)}function Rp(){Rs.stop()}function fa(){Rs.start()}const Rs=new H5;Rs.setAnimationLoop(Ud),typeof self<"u"&&Rs.setContext(self),this.setAnimationLoop=function(F){Fc=F,Ve.setAnimationLoop(F),F===null?Rs.stop():Rs.start()},Ve.addEventListener("sessionstart",Rp),Ve.addEventListener("sessionend",fa),this.render=function(F,ne){if(ne!==void 0&&ne.isCamera!==!0){wt("WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(R===!0)return;const de=Ve.enabled===!0&&Ve.isPresenting===!0,ue=D!==null&&(H===null||de)&&D.begin(A,H);if(F.matrixWorldAutoUpdate===!0&&F.updateMatrixWorld(),ne.parent===null&&ne.matrixWorldAutoUpdate===!0&&ne.updateMatrixWorld(),Ve.enabled===!0&&Ve.isPresenting===!0&&(D===null||D.isCompositing()===!1)&&(Ve.cameraAutoUpdate===!0&&Ve.updateCamera(ne),ne=Ve.getCamera()),F.isScene===!0&&F.onBeforeRender(A,F,ne,H),E=je.get(F,P.length),E.init(ne),P.push(E),It.multiplyMatrices(ne.projectionMatrix,ne.matrixWorldInverse),tt.setFromProjectionMatrix(It,Zr,ne.reversedDepth),yt=this.localClippingEnabled,Be=dt.init(this.clippingPlanes,yt),S=Ie.get(F,T.length),S.init(),T.push(S),Ve.enabled===!0&&Ve.isPresenting===!0){const Ye=A.xr.getDepthSensingMesh();Ye!==null&&Bd(Ye,ne,-1/0,A.sortObjects)}Bd(F,ne,0,A.sortObjects),S.finish(),A.sortObjects===!0&&S.sort(be,it),ve=Ve.enabled===!1||Ve.isPresenting===!1||Ve.hasDepthSensing()===!1,ve&&We.addToRenderList(S,F),this.info.render.frame++,Be===!0&&dt.beginShadows();const se=E.state.shadowsArray;if(gt.render(se,F,ne),Be===!0&&dt.endShadows(),this.info.autoReset===!0&&this.info.reset(),(ue&&D.hasRenderPass())===!1){const Ye=S.opaque,Te=S.transmissive;if(E.setupLights(),ne.isArrayCamera){const Le=ne.cameras;if(Te.length>0)for(let ot=0,lt=Le.length;ot<lt;ot++){const nt=Le[ot];kp(Ye,Te,F,nt)}ve&&We.render(F);for(let ot=0,lt=Le.length;ot<lt;ot++){const nt=Le[ot];Dp(S,F,nt,nt.viewport)}}else Te.length>0&&kp(Ye,Te,F,ne),ve&&We.render(F),Dp(S,F,ne)}H!==null&&O===0&&(Q.updateMultisampleRenderTarget(H),Q.updateRenderTargetMipmap(H)),ue&&D.end(A),F.isScene===!0&&F.onAfterRender(A,F,ne),Je.resetDefaultState(),q=-1,Z=null,P.pop(),P.length>0?(E=P[P.length-1],Be===!0&&dt.setGlobalState(A.clippingPlanes,E.state.camera)):E=null,T.pop(),T.length>0?S=T[T.length-1]:S=null};function Bd(F,ne,de,ue){if(F.visible===!1)return;if(F.layers.test(ne.layers)){if(F.isGroup)de=F.renderOrder;else if(F.isLOD)F.autoUpdate===!0&&F.update(ne);else if(F.isLight)E.pushLight(F),F.castShadow&&E.pushShadow(F);else if(F.isSprite){if(!F.frustumCulled||tt.intersectsSprite(F)){ue&&le.setFromMatrixPosition(F.matrixWorld).applyMatrix4(It);const Ye=Ue.update(F),Te=F.material;Te.visible&&S.push(F,Ye,Te,de,le.z,null)}}else if((F.isMesh||F.isLine||F.isPoints)&&(!F.frustumCulled||tt.intersectsObject(F))){const Ye=Ue.update(F),Te=F.material;if(ue&&(F.boundingSphere!==void 0?(F.boundingSphere===null&&F.computeBoundingSphere(),le.copy(F.boundingSphere.center)):(Ye.boundingSphere===null&&Ye.computeBoundingSphere(),le.copy(Ye.boundingSphere.center)),le.applyMatrix4(F.matrixWorld).applyMatrix4(It)),Array.isArray(Te)){const Le=Ye.groups;for(let ot=0,lt=Le.length;ot<lt;ot++){const nt=Le[ot],Nt=Te[nt.materialIndex];Nt&&Nt.visible&&S.push(F,Ye,Nt,de,le.z,nt)}}else Te.visible&&S.push(F,Ye,Te,de,le.z,null)}}const He=F.children;for(let Ye=0,Te=He.length;Ye<Te;Ye++)Bd(He[Ye],ne,de,ue)}function Dp(F,ne,de,ue){const{opaque:se,transmissive:He,transparent:Ye}=F;E.setupLightsView(de),Be===!0&&dt.setGlobalState(A.clippingPlanes,de),ue&&Ne.viewport(G.copy(ue)),se.length>0&&Uc(se,ne,de),He.length>0&&Uc(He,ne,de),Ye.length>0&&Uc(Ye,ne,de),Ne.buffers.depth.setTest(!0),Ne.buffers.depth.setMask(!0),Ne.buffers.color.setMask(!0),Ne.setPolygonOffset(!1)}function kp(F,ne,de,ue){if((de.isScene===!0?de.overrideMaterial:null)!==null)return;if(E.state.transmissionRenderTarget[ue.id]===void 0){const Nt=$e.has("EXT_color_buffer_half_float")||$e.has("EXT_color_buffer_float");E.state.transmissionRenderTarget[ue.id]=new Jr(1,1,{generateMipmaps:!0,type:Nt?Es:cr,minFilter:ms,samples:_t.samples,stencilBuffer:o,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Jt.workingColorSpace})}const He=E.state.transmissionRenderTarget[ue.id],Ye=ue.viewport||G;He.setSize(Ye.z*A.transmissionResolutionScale,Ye.w*A.transmissionResolutionScale);const Te=A.getRenderTarget(),Le=A.getActiveCubeFace(),ot=A.getActiveMipmapLevel();A.setRenderTarget(He),A.getClearColor($),X=A.getClearAlpha(),X<1&&A.setClearColor(16777215,.5),A.clear(),ve&&We.render(de);const lt=A.toneMapping;A.toneMapping=Mo;const nt=ue.viewport;if(ue.viewport!==void 0&&(ue.viewport=void 0),E.setupLightsView(ue),Be===!0&&dt.setGlobalState(A.clippingPlanes,ue),Uc(F,de,ue),Q.updateMultisampleRenderTarget(He),Q.updateRenderTargetMipmap(He),$e.has("WEBGL_multisampled_render_to_texture")===!1){let Nt=!1;for(let Kt=0,Yt=ne.length;Kt<Yt;Kt++){const _n=ne[Kt],{object:un,geometry:St,material:en,group:Qt}=_n;if(en.side===ps&&un.layers.test(ue.layers)){const En=en.side;en.side=fr,en.needsUpdate=!0,Np(un,de,ue,St,en,Qt),en.side=En,en.needsUpdate=!0,Nt=!0}}Nt===!0&&(Q.updateMultisampleRenderTarget(He),Q.updateRenderTargetMipmap(He))}A.setRenderTarget(Te,Le,ot),A.setClearColor($,X),nt!==void 0&&(ue.viewport=nt),A.toneMapping=lt}function Uc(F,ne,de){const ue=ne.isScene===!0?ne.overrideMaterial:null;for(let se=0,He=F.length;se<He;se++){const Ye=F[se],{object:Te,geometry:Le,group:ot}=Ye;let lt=Ye.material;lt.allowOverride===!0&&ue!==null&&(lt=ue),Te.layers.test(de.layers)&&Np(Te,ne,de,Le,lt,ot)}}function Np(F,ne,de,ue,se,He){F.onBeforeRender(A,ne,de,ue,se,He),F.modelViewMatrix.multiplyMatrices(de.matrixWorldInverse,F.matrixWorld),F.normalMatrix.getNormalMatrix(F.modelViewMatrix),se.onBeforeRender(A,ne,de,ue,F,He),se.transparent===!0&&se.side===ps&&se.forceSinglePass===!1?(se.side=fr,se.needsUpdate=!0,A.renderBufferDirect(de,ne,ue,se,F,He),se.side=ca,se.needsUpdate=!0,A.renderBufferDirect(de,ne,ue,se,F,He),se.side=ps):A.renderBufferDirect(de,ne,ue,se,F,He),F.onAfterRender(A,ne,de,ue,se,He)}function Bc(F,ne,de){ne.isScene!==!0&&(ne=we);const ue=L.get(F),se=E.state.lights,He=E.state.shadowsArray,Ye=se.state.version,Te=ut.getParameters(F,se.state,He,ne,de),Le=ut.getProgramCacheKey(Te);let ot=ue.programs;ue.environment=F.isMeshStandardMaterial?ne.environment:null,ue.fog=ne.fog,ue.envMap=(F.isMeshStandardMaterial?Se:re).get(F.envMap||ue.environment),ue.envMapRotation=ue.environment!==null&&F.envMap===null?ne.environmentRotation:F.envMapRotation,ot===void 0&&(F.addEventListener("dispose",Fr),ot=new Map,ue.programs=ot);let lt=ot.get(Le);if(lt!==void 0){if(ue.currentProgram===lt&&ue.lightsStateVersion===Ye)return Lp(F,Te),lt}else Te.uniforms=ut.getUniforms(F),F.onBeforeCompile(Te,A),lt=ut.acquireProgram(Te,Le),ot.set(Le,lt),ue.uniforms=Te.uniforms;const nt=ue.uniforms;return(!F.isShaderMaterial&&!F.isRawShaderMaterial||F.clipping===!0)&&(nt.clippingPlanes=dt.uniform),Lp(F,Te),ue.needsLights=Dx(F),ue.lightsStateVersion=Ye,ue.needsLights&&(nt.ambientLightColor.value=se.state.ambient,nt.lightProbe.value=se.state.probe,nt.directionalLights.value=se.state.directional,nt.directionalLightShadows.value=se.state.directionalShadow,nt.spotLights.value=se.state.spot,nt.spotLightShadows.value=se.state.spotShadow,nt.rectAreaLights.value=se.state.rectArea,nt.ltc_1.value=se.state.rectAreaLTC1,nt.ltc_2.value=se.state.rectAreaLTC2,nt.pointLights.value=se.state.point,nt.pointLightShadows.value=se.state.pointShadow,nt.hemisphereLights.value=se.state.hemi,nt.directionalShadowMap.value=se.state.directionalShadowMap,nt.directionalShadowMatrix.value=se.state.directionalShadowMatrix,nt.spotShadowMap.value=se.state.spotShadowMap,nt.spotLightMatrix.value=se.state.spotLightMatrix,nt.spotLightMap.value=se.state.spotLightMap,nt.pointShadowMap.value=se.state.pointShadowMap,nt.pointShadowMatrix.value=se.state.pointShadowMatrix),ue.currentProgram=lt,ue.uniformsList=null,lt}function Hd(F){if(F.uniformsList===null){const ne=F.currentProgram.getUniforms();F.uniformsList=_v.seqWithValue(ne.seq,F.uniforms)}return F.uniformsList}function Lp(F,ne){const de=L.get(F);de.outputColorSpace=ne.outputColorSpace,de.batching=ne.batching,de.batchingColor=ne.batchingColor,de.instancing=ne.instancing,de.instancingColor=ne.instancingColor,de.instancingMorph=ne.instancingMorph,de.skinning=ne.skinning,de.morphTargets=ne.morphTargets,de.morphNormals=ne.morphNormals,de.morphColors=ne.morphColors,de.morphTargetsCount=ne.morphTargetsCount,de.numClippingPlanes=ne.numClippingPlanes,de.numIntersection=ne.numClipIntersection,de.vertexAlphas=ne.vertexAlphas,de.vertexTangents=ne.vertexTangents,de.toneMapping=ne.toneMapping}function Px(F,ne,de,ue,se){ne.isScene!==!0&&(ne=we),Q.resetTextureUnits();const He=ne.fog,Ye=ue.isMeshStandardMaterial?ne.environment:null,Te=H===null?A.outputColorSpace:H.isXRRenderTarget===!0?H.texture.colorSpace:Cc,Le=(ue.isMeshStandardMaterial?Se:re).get(ue.envMap||Ye),ot=ue.vertexColors===!0&&!!de.attributes.color&&de.attributes.color.itemSize===4,lt=!!de.attributes.tangent&&(!!ue.normalMap||ue.anisotropy>0),nt=!!de.morphAttributes.position,Nt=!!de.morphAttributes.normal,Kt=!!de.morphAttributes.color;let Yt=Mo;ue.toneMapped&&(H===null||H.isXRRenderTarget===!0)&&(Yt=A.toneMapping);const _n=de.morphAttributes.position||de.morphAttributes.normal||de.morphAttributes.color,un=_n!==void 0?_n.length:0,St=L.get(ue),en=E.state.lights;if(Be===!0&&(yt===!0||F!==Z)){const si=F===Z&&ue.id===q;dt.setState(ue,F,si)}let Qt=!1;ue.version===St.__version?(St.needsLights&&St.lightsStateVersion!==en.state.version||St.outputColorSpace!==Te||se.isBatchedMesh&&St.batching===!1||!se.isBatchedMesh&&St.batching===!0||se.isBatchedMesh&&St.batchingColor===!0&&se.colorTexture===null||se.isBatchedMesh&&St.batchingColor===!1&&se.colorTexture!==null||se.isInstancedMesh&&St.instancing===!1||!se.isInstancedMesh&&St.instancing===!0||se.isSkinnedMesh&&St.skinning===!1||!se.isSkinnedMesh&&St.skinning===!0||se.isInstancedMesh&&St.instancingColor===!0&&se.instanceColor===null||se.isInstancedMesh&&St.instancingColor===!1&&se.instanceColor!==null||se.isInstancedMesh&&St.instancingMorph===!0&&se.morphTexture===null||se.isInstancedMesh&&St.instancingMorph===!1&&se.morphTexture!==null||St.envMap!==Le||ue.fog===!0&&St.fog!==He||St.numClippingPlanes!==void 0&&(St.numClippingPlanes!==dt.numPlanes||St.numIntersection!==dt.numIntersection)||St.vertexAlphas!==ot||St.vertexTangents!==lt||St.morphTargets!==nt||St.morphNormals!==Nt||St.morphColors!==Kt||St.toneMapping!==Yt||St.morphTargetsCount!==un)&&(Qt=!0):(Qt=!0,St.__version=ue.version);let En=St.currentProgram;Qt===!0&&(En=Bc(ue,ne,se));let pa=!1,nr=!1,xl=!1;const cn=En.getUniforms(),pi=St.uniforms;if(Ne.useProgram(En.program)&&(pa=!0,nr=!0,xl=!0),ue.id!==q&&(q=ue.id,nr=!0),pa||Z!==F){Ne.buffers.depth.getReversed()&&F.reversedDepth!==!0&&(F._reversedDepth=!0,F.updateProjectionMatrix()),cn.setValue(V,"projectionMatrix",F.projectionMatrix),cn.setValue(V,"viewMatrix",F.matrixWorldInverse);const Fi=cn.map.cameraPosition;Fi!==void 0&&Fi.setValue(V,Re.setFromMatrixPosition(F.matrixWorld)),_t.logarithmicDepthBuffer&&cn.setValue(V,"logDepthBufFC",2/(Math.log(F.far+1)/Math.LN2)),(ue.isMeshPhongMaterial||ue.isMeshToonMaterial||ue.isMeshLambertMaterial||ue.isMeshBasicMaterial||ue.isMeshStandardMaterial||ue.isShaderMaterial)&&cn.setValue(V,"isOrthographic",F.isOrthographicCamera===!0),Z!==F&&(Z=F,nr=!0,xl=!0)}if(St.needsLights&&(en.state.directionalShadowMap.length>0&&cn.setValue(V,"directionalShadowMap",en.state.directionalShadowMap,Q),en.state.spotShadowMap.length>0&&cn.setValue(V,"spotShadowMap",en.state.spotShadowMap,Q),en.state.pointShadowMap.length>0&&cn.setValue(V,"pointShadowMap",en.state.pointShadowMap,Q)),se.isSkinnedMesh){cn.setOptional(V,se,"bindMatrix"),cn.setOptional(V,se,"bindMatrixInverse");const si=se.skeleton;si&&(si.boneTexture===null&&si.computeBoneTexture(),cn.setValue(V,"boneTexture",si.boneTexture,Q))}se.isBatchedMesh&&(cn.setOptional(V,se,"batchingTexture"),cn.setValue(V,"batchingTexture",se._matricesTexture,Q),cn.setOptional(V,se,"batchingIdTexture"),cn.setValue(V,"batchingIdTexture",se._indirectTexture,Q),cn.setOptional(V,se,"batchingColorTexture"),se._colorsTexture!==null&&cn.setValue(V,"batchingColorTexture",se._colorsTexture,Q));const Si=de.morphAttributes;if((Si.position!==void 0||Si.normal!==void 0||Si.color!==void 0)&&Vt.update(se,de,En),(nr||St.receiveShadow!==se.receiveShadow)&&(St.receiveShadow=se.receiveShadow,cn.setValue(V,"receiveShadow",se.receiveShadow)),ue.isMeshGouraudMaterial&&ue.envMap!==null&&(pi.envMap.value=Le,pi.flipEnvMap.value=Le.isCubeTexture&&Le.isRenderTargetTexture===!1?-1:1),ue.isMeshStandardMaterial&&ue.envMap===null&&ne.environment!==null&&(pi.envMapIntensity.value=ne.environmentIntensity),pi.dfgLUT!==void 0&&(pi.dfgLUT.value=iie()),nr&&(cn.setValue(V,"toneMappingExposure",A.toneMappingExposure),St.needsLights&&Rx(pi,xl),He&&ue.fog===!0&&Ct.refreshFogUniforms(pi,He),Ct.refreshMaterialUniforms(pi,ue,pe,oe,E.state.transmissionRenderTarget[F.id]),_v.upload(V,Hd(St),pi,Q)),ue.isShaderMaterial&&ue.uniformsNeedUpdate===!0&&(_v.upload(V,Hd(St),pi,Q),ue.uniformsNeedUpdate=!1),ue.isSpriteMaterial&&cn.setValue(V,"center",se.center),cn.setValue(V,"modelViewMatrix",se.modelViewMatrix),cn.setValue(V,"normalMatrix",se.normalMatrix),cn.setValue(V,"modelMatrix",se.matrixWorld),ue.isShaderMaterial||ue.isRawShaderMaterial){const si=ue.uniformsGroups;for(let Fi=0,$d=si.length;Fi<$d;Fi++){const Ro=si[Fi];De.update(Ro,En),De.bind(Ro,En)}}return En}function Rx(F,ne){F.ambientLightColor.needsUpdate=ne,F.lightProbe.needsUpdate=ne,F.directionalLights.needsUpdate=ne,F.directionalLightShadows.needsUpdate=ne,F.pointLights.needsUpdate=ne,F.pointLightShadows.needsUpdate=ne,F.spotLights.needsUpdate=ne,F.spotLightShadows.needsUpdate=ne,F.rectAreaLights.needsUpdate=ne,F.hemisphereLights.needsUpdate=ne}function Dx(F){return F.isMeshLambertMaterial||F.isMeshToonMaterial||F.isMeshPhongMaterial||F.isMeshStandardMaterial||F.isShadowMaterial||F.isShaderMaterial&&F.lights===!0}this.getActiveCubeFace=function(){return N},this.getActiveMipmapLevel=function(){return O},this.getRenderTarget=function(){return H},this.setRenderTargetTextures=function(F,ne,de){const ue=L.get(F);ue.__autoAllocateDepthBuffer=F.resolveDepthBuffer===!1,ue.__autoAllocateDepthBuffer===!1&&(ue.__useRenderToTexture=!1),L.get(F.texture).__webglTexture=ne,L.get(F.depthTexture).__webglTexture=ue.__autoAllocateDepthBuffer?void 0:de,ue.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(F,ne){const de=L.get(F);de.__webglFramebuffer=ne,de.__useDefaultFramebuffer=ne===void 0};const kx=V.createFramebuffer();this.setRenderTarget=function(F,ne=0,de=0){H=F,N=ne,O=de;let ue=null,se=!1,He=!1;if(F){const Te=L.get(F);if(Te.__useDefaultFramebuffer!==void 0){Ne.bindFramebuffer(V.FRAMEBUFFER,Te.__webglFramebuffer),G.copy(F.viewport),Y.copy(F.scissor),z=F.scissorTest,Ne.viewport(G),Ne.scissor(Y),Ne.setScissorTest(z),q=-1;return}else if(Te.__webglFramebuffer===void 0)Q.setupRenderTarget(F);else if(Te.__hasExternalTextures)Q.rebindTextures(F,L.get(F.texture).__webglTexture,L.get(F.depthTexture).__webglTexture);else if(F.depthBuffer){const lt=F.depthTexture;if(Te.__boundDepthTexture!==lt){if(lt!==null&&L.has(lt)&&(F.width!==lt.image.width||F.height!==lt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Q.setupDepthRenderbuffer(F)}}const Le=F.texture;(Le.isData3DTexture||Le.isDataArrayTexture||Le.isCompressedArrayTexture)&&(He=!0);const ot=L.get(F).__webglFramebuffer;F.isWebGLCubeRenderTarget?(Array.isArray(ot[ne])?ue=ot[ne][de]:ue=ot[ne],se=!0):F.samples>0&&Q.useMultisampledRTT(F)===!1?ue=L.get(F).__webglMultisampledFramebuffer:Array.isArray(ot)?ue=ot[de]:ue=ot,G.copy(F.viewport),Y.copy(F.scissor),z=F.scissorTest}else G.copy(ae).multiplyScalar(pe).floor(),Y.copy(me).multiplyScalar(pe).floor(),z=Fe;if(de!==0&&(ue=kx),Ne.bindFramebuffer(V.FRAMEBUFFER,ue)&&Ne.drawBuffers(F,ue),Ne.viewport(G),Ne.scissor(Y),Ne.setScissorTest(z),se){const Te=L.get(F.texture);V.framebufferTexture2D(V.FRAMEBUFFER,V.COLOR_ATTACHMENT0,V.TEXTURE_CUBE_MAP_POSITIVE_X+ne,Te.__webglTexture,de)}else if(He){const Te=ne;for(let Le=0;Le<F.textures.length;Le++){const ot=L.get(F.textures[Le]);V.framebufferTextureLayer(V.FRAMEBUFFER,V.COLOR_ATTACHMENT0+Le,ot.__webglTexture,de,Te)}}else if(F!==null&&de!==0){const Te=L.get(F.texture);V.framebufferTexture2D(V.FRAMEBUFFER,V.COLOR_ATTACHMENT0,V.TEXTURE_2D,Te.__webglTexture,de)}q=-1},this.readRenderTargetPixels=function(F,ne,de,ue,se,He,Ye,Te=0){if(!(F&&F.isWebGLRenderTarget)){wt("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Le=L.get(F).__webglFramebuffer;if(F.isWebGLCubeRenderTarget&&Ye!==void 0&&(Le=Le[Ye]),Le){Ne.bindFramebuffer(V.FRAMEBUFFER,Le);try{const ot=F.textures[Te],lt=ot.format,nt=ot.type;if(!_t.textureFormatReadable(lt)){wt("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!_t.textureTypeReadable(nt)){wt("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ne>=0&&ne<=F.width-ue&&de>=0&&de<=F.height-se&&(F.textures.length>1&&V.readBuffer(V.COLOR_ATTACHMENT0+Te),V.readPixels(ne,de,ue,se,ze.convert(lt),ze.convert(nt),He))}finally{const ot=H!==null?L.get(H).__webglFramebuffer:null;Ne.bindFramebuffer(V.FRAMEBUFFER,ot)}}},this.readRenderTargetPixelsAsync=async function(F,ne,de,ue,se,He,Ye,Te=0){if(!(F&&F.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Le=L.get(F).__webglFramebuffer;if(F.isWebGLCubeRenderTarget&&Ye!==void 0&&(Le=Le[Ye]),Le)if(ne>=0&&ne<=F.width-ue&&de>=0&&de<=F.height-se){Ne.bindFramebuffer(V.FRAMEBUFFER,Le);const ot=F.textures[Te],lt=ot.format,nt=ot.type;if(!_t.textureFormatReadable(lt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!_t.textureTypeReadable(nt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Nt=V.createBuffer();V.bindBuffer(V.PIXEL_PACK_BUFFER,Nt),V.bufferData(V.PIXEL_PACK_BUFFER,He.byteLength,V.STREAM_READ),F.textures.length>1&&V.readBuffer(V.COLOR_ATTACHMENT0+Te),V.readPixels(ne,de,ue,se,ze.convert(lt),ze.convert(nt),0);const Kt=H!==null?L.get(H).__webglFramebuffer:null;Ne.bindFramebuffer(V.FRAMEBUFFER,Kt);const Yt=V.fenceSync(V.SYNC_GPU_COMMANDS_COMPLETE,0);return V.flush(),await fY(V,Yt,4),V.bindBuffer(V.PIXEL_PACK_BUFFER,Nt),V.getBufferSubData(V.PIXEL_PACK_BUFFER,0,He),V.deleteBuffer(Nt),V.deleteSync(Yt),He}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(F,ne=null,de=0){const ue=Math.pow(2,-de),se=Math.floor(F.image.width*ue),He=Math.floor(F.image.height*ue),Ye=ne!==null?ne.x:0,Te=ne!==null?ne.y:0;Q.setTexture2D(F,0),V.copyTexSubImage2D(V.TEXTURE_2D,de,0,0,Ye,Te,se,He),Ne.unbindTexture()};const Nx=V.createFramebuffer(),Vd=V.createFramebuffer();this.copyTextureToTexture=function(F,ne,de=null,ue=null,se=0,He=null){He===null&&(se!==0?(yd("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),He=se,se=0):He=0);let Ye,Te,Le,ot,lt,nt,Nt,Kt,Yt;const _n=F.isCompressedTexture?F.mipmaps[He]:F.image;if(de!==null)Ye=de.max.x-de.min.x,Te=de.max.y-de.min.y,Le=de.isBox3?de.max.z-de.min.z:1,ot=de.min.x,lt=de.min.y,nt=de.isBox3?de.min.z:0;else{const Si=Math.pow(2,-se);Ye=Math.floor(_n.width*Si),Te=Math.floor(_n.height*Si),F.isDataArrayTexture?Le=_n.depth:F.isData3DTexture?Le=Math.floor(_n.depth*Si):Le=1,ot=0,lt=0,nt=0}ue!==null?(Nt=ue.x,Kt=ue.y,Yt=ue.z):(Nt=0,Kt=0,Yt=0);const un=ze.convert(ne.format),St=ze.convert(ne.type);let en;ne.isData3DTexture?(Q.setTexture3D(ne,0),en=V.TEXTURE_3D):ne.isDataArrayTexture||ne.isCompressedArrayTexture?(Q.setTexture2DArray(ne,0),en=V.TEXTURE_2D_ARRAY):(Q.setTexture2D(ne,0),en=V.TEXTURE_2D),V.pixelStorei(V.UNPACK_FLIP_Y_WEBGL,ne.flipY),V.pixelStorei(V.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ne.premultiplyAlpha),V.pixelStorei(V.UNPACK_ALIGNMENT,ne.unpackAlignment);const Qt=V.getParameter(V.UNPACK_ROW_LENGTH),En=V.getParameter(V.UNPACK_IMAGE_HEIGHT),pa=V.getParameter(V.UNPACK_SKIP_PIXELS),nr=V.getParameter(V.UNPACK_SKIP_ROWS),xl=V.getParameter(V.UNPACK_SKIP_IMAGES);V.pixelStorei(V.UNPACK_ROW_LENGTH,_n.width),V.pixelStorei(V.UNPACK_IMAGE_HEIGHT,_n.height),V.pixelStorei(V.UNPACK_SKIP_PIXELS,ot),V.pixelStorei(V.UNPACK_SKIP_ROWS,lt),V.pixelStorei(V.UNPACK_SKIP_IMAGES,nt);const cn=F.isDataArrayTexture||F.isData3DTexture,pi=ne.isDataArrayTexture||ne.isData3DTexture;if(F.isDepthTexture){const Si=L.get(F),si=L.get(ne),Fi=L.get(Si.__renderTarget),$d=L.get(si.__renderTarget);Ne.bindFramebuffer(V.READ_FRAMEBUFFER,Fi.__webglFramebuffer),Ne.bindFramebuffer(V.DRAW_FRAMEBUFFER,$d.__webglFramebuffer);for(let Ro=0;Ro<Le;Ro++)cn&&(V.framebufferTextureLayer(V.READ_FRAMEBUFFER,V.COLOR_ATTACHMENT0,L.get(F).__webglTexture,se,nt+Ro),V.framebufferTextureLayer(V.DRAW_FRAMEBUFFER,V.COLOR_ATTACHMENT0,L.get(ne).__webglTexture,He,Yt+Ro)),V.blitFramebuffer(ot,lt,Ye,Te,Nt,Kt,Ye,Te,V.DEPTH_BUFFER_BIT,V.NEAREST);Ne.bindFramebuffer(V.READ_FRAMEBUFFER,null),Ne.bindFramebuffer(V.DRAW_FRAMEBUFFER,null)}else if(se!==0||F.isRenderTargetTexture||L.has(F)){const Si=L.get(F),si=L.get(ne);Ne.bindFramebuffer(V.READ_FRAMEBUFFER,Nx),Ne.bindFramebuffer(V.DRAW_FRAMEBUFFER,Vd);for(let Fi=0;Fi<Le;Fi++)cn?V.framebufferTextureLayer(V.READ_FRAMEBUFFER,V.COLOR_ATTACHMENT0,Si.__webglTexture,se,nt+Fi):V.framebufferTexture2D(V.READ_FRAMEBUFFER,V.COLOR_ATTACHMENT0,V.TEXTURE_2D,Si.__webglTexture,se),pi?V.framebufferTextureLayer(V.DRAW_FRAMEBUFFER,V.COLOR_ATTACHMENT0,si.__webglTexture,He,Yt+Fi):V.framebufferTexture2D(V.DRAW_FRAMEBUFFER,V.COLOR_ATTACHMENT0,V.TEXTURE_2D,si.__webglTexture,He),se!==0?V.blitFramebuffer(ot,lt,Ye,Te,Nt,Kt,Ye,Te,V.COLOR_BUFFER_BIT,V.NEAREST):pi?V.copyTexSubImage3D(en,He,Nt,Kt,Yt+Fi,ot,lt,Ye,Te):V.copyTexSubImage2D(en,He,Nt,Kt,ot,lt,Ye,Te);Ne.bindFramebuffer(V.READ_FRAMEBUFFER,null),Ne.bindFramebuffer(V.DRAW_FRAMEBUFFER,null)}else pi?F.isDataTexture||F.isData3DTexture?V.texSubImage3D(en,He,Nt,Kt,Yt,Ye,Te,Le,un,St,_n.data):ne.isCompressedArrayTexture?V.compressedTexSubImage3D(en,He,Nt,Kt,Yt,Ye,Te,Le,un,_n.data):V.texSubImage3D(en,He,Nt,Kt,Yt,Ye,Te,Le,un,St,_n):F.isDataTexture?V.texSubImage2D(V.TEXTURE_2D,He,Nt,Kt,Ye,Te,un,St,_n.data):F.isCompressedTexture?V.compressedTexSubImage2D(V.TEXTURE_2D,He,Nt,Kt,_n.width,_n.height,un,_n.data):V.texSubImage2D(V.TEXTURE_2D,He,Nt,Kt,Ye,Te,un,St,_n);V.pixelStorei(V.UNPACK_ROW_LENGTH,Qt),V.pixelStorei(V.UNPACK_IMAGE_HEIGHT,En),V.pixelStorei(V.UNPACK_SKIP_PIXELS,pa),V.pixelStorei(V.UNPACK_SKIP_ROWS,nr),V.pixelStorei(V.UNPACK_SKIP_IMAGES,xl),He===0&&ne.generateMipmaps&&V.generateMipmap(en),Ne.unbindTexture()},this.initRenderTarget=function(F){L.get(F).__webglFramebuffer===void 0&&Q.setupRenderTarget(F)},this.initTexture=function(F){F.isCubeTexture?Q.setTextureCube(F,0):F.isData3DTexture?Q.setTexture3D(F,0):F.isDataArrayTexture||F.isCompressedArrayTexture?Q.setTexture2DArray(F,0):Q.setTexture2D(F,0),Ne.unbindTexture()},this.resetState=function(){N=0,O=0,H=null,Ne.reset(),Je.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Zr}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=Jt._getDrawingBufferColorSpace(e),n.unpackColorSpace=Jt._getUnpackColorSpace()}}const rie=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:Xy,AddEquation:Va,AddOperation:MU,AdditiveAnimationBlendMode:MC,AdditiveBlending:Lf,AgXToneMapping:mC,AlphaFormat:bC,AlwaysCompare:zU,AlwaysDepth:y0,AlwaysStencilFunc:iS,AmbientLight:I5,AnimationAction:O5,AnimationClip:Kf,AnimationLoader:nK,AnimationMixer:RK,AnimationObjectGroup:IK,AnimationUtils:QZ,ArcCurve:n5,ArrayCamera:N5,ArrowHelper:nQ,AttachedBindMode:nS,Audio:L5,AudioAnalyser:xK,AudioContext:KC,AudioListener:gK,AudioLoader:fK,AxesHelper:iQ,BackSide:fr,BasicDepthPacking:IU,BasicShadowMap:rU,BatchedMesh:ZU,Bone:DC,BooleanKeyframeTrack:Lc,Box2:BK,Box3:Ji,Box3Helper:eQ,BoxGeometry:Nc,BoxHelper:JK,BufferAttribute:wn,BufferGeometry:zt,BufferGeometryLoader:k5,ByteType:yC,Cache:gs,Camera:_p,CameraHelper:QK,CanvasTexture:_Z,CapsuleGeometry:fx,CatmullRomCurve3:i5,CineonToneMapping:fC,CircleGeometry:px,ClampToEdgeWrapping:Pr,Clock:QC,Color:et,ColorKeyframeTrack:qC,ColorManagement:Jt,CompressedArrayTexture:xZ,CompressedCubeTexture:wZ,CompressedTexture:hx,CompressedTextureLoader:iK,ConeGeometry:Mp,ConstantAlphaFactor:_U,ConstantColorFactor:xU,Controls:oQ,CubeCamera:WU,CubeDepthTexture:e5,CubeReflectionMapping:Cs,CubeRefractionMapping:cl,CubeTexture:bp,CubeTextureLoader:rK,CubeUVReflectionMapping:kd,CubicBezierCurve:zC,CubicBezierCurve3:r5,CubicInterpolant:_5,CullFaceBack:Jb,CullFaceFront:iU,CullFaceFrontBack:SX,CullFaceNone:nU,Curve:Ko,CurvePath:s5,CustomBlending:oU,CustomToneMapping:pC,CylinderGeometry:Sp,Cylindrical:UK,Data3DTexture:sx,DataArrayTexture:ox,DataTexture:Yo,DataTextureLoader:oK,DataUtils:WY,DecrementStencilOp:HX,DecrementWrapStencilOp:$X,DefaultLoadingManager:M5,DepthFormat:Ts,DepthStencilFormat:Xa,DepthTexture:bd,DetachedBindMode:CU,DirectionalLight:A5,DirectionalLightHelper:KK,DiscreteInterpolant:b5,DodecahedronGeometry:mx,DoubleSide:ps,DstAlphaFactor:pU,DstColorFactor:gU,DynamicCopyUsage:rY,DynamicDrawUsage:QX,DynamicReadUsage:tY,EdgesGeometry:t5,EllipseCurve:gx,EqualCompare:kU,EqualDepth:w0,EqualStencilFunc:qX,EquirectangularReflectionMapping:zf,EquirectangularRefractionMapping:Of,Euler:to,EventDispatcher:Is,ExternalTexture:NC,ExtrudeGeometry:vx,FileLoader:ua,Float16BufferAttribute:KY,Float32BufferAttribute:at,FloatType:dr,Fog:lx,FogExp2:ax,FramebufferTexture:yZ,FrontSide:ca,Frustum:Ld,FrustumArray:dx,GLBufferAttribute:zK,GLSL1:sY,GLSL3:rS,GreaterCompare:NU,GreaterDepth:b0,GreaterEqualCompare:rx,GreaterEqualDepth:_0,GreaterEqualStencilFunc:KX,GreaterStencilFunc:YX,GridHelper:YK,Group:ju,HalfFloatType:Es,HemisphereLight:C5,HemisphereLightHelper:XK,IcosahedronGeometry:yx,ImageBitmapLoader:hK,ImageLoader:Qf,ImageUtils:BU,IncrementStencilOp:BX,IncrementWrapStencilOp:VX,InstancedBufferAttribute:_d,InstancedBufferGeometry:D5,InstancedInterleavedBuffer:LK,InstancedMesh:YU,Int16BufferAttribute:YY,Int32BufferAttribute:ZY,Int8BufferAttribute:jY,IntType:Zy,InterleavedBuffer:cx,InterleavedBufferAttribute:Ec,Interpolant:Tp,InterpolateDiscrete:Bf,InterpolateLinear:ny,InterpolateSmooth:xv,InterpolationSamplingMode:cY,InterpolationSamplingType:lY,InvertStencilOp:WX,KeepStencilOp:Yl,KeyframeTrack:Io,LOD:qU,LatheGeometry:xx,Layers:hc,LessCompare:DU,LessDepth:x0,LessEqualCompare:ix,LessEqualDepth:Sc,LessEqualStencilFunc:XX,LessStencilFunc:jX,Light:yl,LightProbe:R5,Line:dl,Line3:$K,LineBasicMaterial:gr,LineCurve:OC,LineCurve3:o5,LineDashedMaterial:x5,LineLoop:KU,LineSegments:Ps,LinearFilter:Nn,LinearInterpolant:jC,LinearMipMapLinearFilter:TX,LinearMipMapNearestFilter:EX,LinearMipmapLinearFilter:ms,LinearMipmapNearestFilter:tf,LinearSRGBColorSpace:Cc,LinearToneMapping:dC,LinearTransfer:Vf,Loader:Or,LoaderUtils:cS,LoadingManager:XC,LoopOnce:EU,LoopPingPong:AU,LoopRepeat:TU,MOUSE:_X,Material:tr,MaterialLoader:Ex,MathUtils:vo,Matrix2:nE,Matrix3:Ut,Matrix4:Dt,MaxEquation:cU,Mesh:fi,MeshBasicMaterial:gl,MeshDepthMaterial:$C,MeshDistanceMaterial:WC,MeshLambertMaterial:v5,MeshMatcapMaterial:y5,MeshNormalMaterial:g5,MeshPhongMaterial:p5,MeshPhysicalMaterial:f5,MeshStandardMaterial:VC,MeshToonMaterial:m5,MinEquation:lU,MirroredRepeatWrapping:Uf,MixOperation:SU,MultiplyBlending:tS,MultiplyOperation:xp,NearestFilter:ri,NearestMipMapLinearFilter:CX,NearestMipMapNearestFilter:MX,NearestMipmapLinearFilter:Wu,NearestMipmapNearestFilter:vC,NeutralToneMapping:gC,NeverCompare:RU,NeverDepth:v0,NeverStencilFunc:GX,NoBlending:Ss,NoColorSpace:Zs,NoNormalPacking:LX,NoToneMapping:Mo,NormalAnimationBlendMode:nx,NormalBlending:uc,NormalGAPacking:OX,NormalRGPacking:zX,NotEqualCompare:LU,NotEqualDepth:S0,NotEqualStencilFunc:ZX,NumberKeyframeTrack:Yf,Object3D:rn,ObjectLoader:uK,ObjectSpaceNormalMap:PU,OctahedronGeometry:Cp,OneFactor:dU,OneMinusConstantAlphaFactor:bU,OneMinusConstantColorFactor:wU,OneMinusDstAlphaFactor:mU,OneMinusDstColorFactor:vU,OneMinusSrcAlphaFactor:g0,OneMinusSrcColorFactor:fU,OrthographicCamera:Od,PCFShadowMap:nd,PCFSoftShadowMap:ef,PMREMGenerator:hS,Path:sy,PerspectiveCamera:Pi,Plane:Fa,PlaneGeometry:zd,PlaneHelper:tQ,PointLight:T5,PointLightHelper:jK,Points:QU,PointsMaterial:kC,PolarGridHelper:ZK,PolyhedronGeometry:vl,PositionalAudio:yK,PropertyBinding:tn,PropertyMixer:z5,QuadraticBezierCurve:FC,QuadraticBezierCurve3:UC,Quaternion:Lr,QuaternionKeyframeTrack:Ap,QuaternionLinearInterpolant:S5,R11_EAC_Format:R0,RED_GREEN_RGTC2_Format:ey,RED_RGTC1_Format:Q0,REVISION:yp,RG11_EAC_Format:k0,RGBADepthPacking:DX,RGBAFormat:Ki,RGBAIntegerFormat:tx,RGBA_ASTC_10x10_Format:j0,RGBA_ASTC_10x5_Format:$0,RGBA_ASTC_10x6_Format:W0,RGBA_ASTC_10x8_Format:G0,RGBA_ASTC_12x10_Format:q0,RGBA_ASTC_12x12_Format:X0,RGBA_ASTC_4x4_Format:L0,RGBA_ASTC_5x4_Format:z0,RGBA_ASTC_5x5_Format:O0,RGBA_ASTC_6x5_Format:F0,RGBA_ASTC_6x6_Format:U0,RGBA_ASTC_8x5_Format:B0,RGBA_ASTC_8x6_Format:H0,RGBA_ASTC_8x8_Format:V0,RGBA_BPTC_Format:Y0,RGBA_ETC2_EAC_Format:P0,RGBA_PVRTC_2BPPV1_Format:T0,RGBA_PVRTC_4BPPV1_Format:E0,RGBA_S3TC_DXT1_Format:rf,RGBA_S3TC_DXT3_Format:of,RGBA_S3TC_DXT5_Format:sf,RGBDepthPacking:kX,RGBFormat:SC,RGBIntegerFormat:AX,RGB_BPTC_SIGNED_Format:Z0,RGB_BPTC_UNSIGNED_Format:K0,RGB_ETC1_Format:A0,RGB_ETC2_Format:I0,RGB_PVRTC_2BPPV1_Format:C0,RGB_PVRTC_4BPPV1_Format:M0,RGB_S3TC_DXT1_Format:nf,RGDepthPacking:NX,RGFormat:Mc,RGIntegerFormat:ex,RawShaderMaterial:HC,Ray:Nd,Raycaster:F5,RectAreaLight:P5,RedFormat:Jy,RedIntegerFormat:wp,ReinhardToneMapping:hC,RenderTarget:EC,RenderTarget3D:DK,RepeatWrapping:Ff,ReplaceStencilOp:UX,ReverseSubtractEquation:aU,RingGeometry:wx,SIGNED_R11_EAC_Format:D0,SIGNED_RED_GREEN_RGTC2_Format:ty,SIGNED_RED_RGTC1_Format:J0,SIGNED_RG11_EAC_Format:N0,SRGBColorSpace:Cr,SRGBTransfer:dn,Scene:PC,ShaderChunk:$t,ShaderLib:$o,ShaderMaterial:no,ShadowMaterial:h5,Shape:fc,ShapeGeometry:_x,ShapePath:rQ,ShapeUtils:Wo,ShortType:xC,Skeleton:ux,SkeletonHelper:GK,SkinnedMesh:XU,Source:Ya,Sphere:zi,SphereGeometry:Ep,Spherical:U5,SphericalHarmonics3:ZC,SplineCurve:BC,SpotLight:E5,SpotLightHelper:WK,Sprite:jU,SpriteMaterial:RC,SrcAlphaFactor:m0,SrcAlphaSaturateFactor:yU,SrcColorFactor:hU,StaticCopyUsage:iY,StaticDrawUsage:$f,StaticReadUsage:eY,StereoCamera:pK,StreamCopyUsage:oY,StreamDrawUsage:JX,StreamReadUsage:nY,StringKeyframeTrack:zc,SubtractEquation:sU,SubtractiveBlending:eS,TOUCH:bX,TangentSpaceNormalMap:ml,TetrahedronGeometry:bx,Texture:Kn,TextureLoader:sK,TextureUtils:uQ,Timer:OK,TimestampQuery:aY,TorusGeometry:Sx,TorusKnotGeometry:Mx,Triangle:Ar,TriangleFanDrawMode:RX,TriangleStripDrawMode:PX,TrianglesDrawMode:IX,TubeGeometry:Cx,UVMapping:Yy,Uint16BufferAttribute:TC,Uint32BufferAttribute:AC,Uint8BufferAttribute:qY,Uint8ClampedBufferAttribute:XY,Uniform:tE,UniformsGroup:NK,UniformsLib:Xe,UniformsUtils:$U,UnsignedByteType:cr,UnsignedInt101111Type:_C,UnsignedInt248Type:gd,UnsignedInt5999Type:wC,UnsignedIntType:Ao,UnsignedShort4444Type:Ky,UnsignedShort5551Type:Qy,UnsignedShortType:md,VSMShadowMap:nc,Vector2:Ce,Vector3:W,Vector4:Sn,VectorKeyframeTrack:Zf,VideoFrameTexture:vZ,VideoTexture:JU,WebGL3DRenderTarget:NY,WebGLArrayRenderTarget:kY,WebGLCoordinateSystem:Zr,WebGLCubeRenderTarget:IC,WebGLRenderTarget:Jr,WebGLRenderer:q5,WebGLUtils:j5,WebGPUCoordinateSystem:vd,WebXRController:wv,WireframeGeometry:d5,WrapAroundEnding:Hf,ZeroCurvatureEnding:ic,ZeroFactor:uU,ZeroSlopeEnding:rc,ZeroStencilOp:FX,createCanvasElement:UU,error:wt,getConsoleFunction:hY,log:Gf,setConsoleFunction:dY,warn:qe,warnOnce:yd},Symbol.toStringTag,{value:"Module"}));var X5={exports:{}},Oc={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Oc.ConcurrentRoot=1;Oc.ContinuousEventPriority=4;Oc.DefaultEventPriority=16;Oc.DiscreteEventPriority=1;Oc.IdleEventPriority=536870912;Oc.LegacyRoot=0;X5.exports=Oc;var qu=X5.exports;function oie(t){let e;const n=new Set,i=(c,u)=>{const d=typeof c=="function"?c(e):c;if(d!==e){const f=e;e=u?d:Object.assign({},e,d),n.forEach(m=>m(e,f))}},r=()=>e,o=(c,u=r,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let f=u(e);function m(){const g=u(e);if(!d(f,g)){const y=f;c(f=g,y)}}return n.add(m),()=>n.delete(m)},l={setState:i,getState:r,subscribe:(c,u,d)=>u||d?o(c,u,d):(n.add(c),()=>n.delete(c)),destroy:()=>n.clear()};return e=t(i,r,l),l}const sie=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),aD=sie?Pe.useEffect:Pe.useLayoutEffect;function aie(t){const e=typeof t=="function"?oie(t):t,n=(i=e.getState,r=Object.is)=>{const[,o]=Pe.useReducer(x=>x+1,0),s=e.getState(),a=Pe.useRef(s),l=Pe.useRef(i),c=Pe.useRef(r),u=Pe.useRef(!1),d=Pe.useRef();d.current===void 0&&(d.current=i(s));let f,m=!1;(a.current!==s||l.current!==i||c.current!==r||u.current)&&(f=i(s),m=!r(d.current,f)),aD(()=>{m&&(d.current=f),a.current=s,l.current=i,c.current=r,u.current=!1});const g=Pe.useRef(s);aD(()=>{const x=()=>{try{const w=e.getState(),_=l.current(w);c.current(d.current,_)||(a.current=w,d.current=_,o())}catch{u.current=!0,o()}},v=e.subscribe(x);return e.getState()!==g.current&&x(),v},[]);const y=m?f:d.current;return Pe.useDebugValue(y),y};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[n,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},n}var Y5={exports:{}},x_={exports:{}},w_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lD;function lie(){return lD||(lD=1,function(t){function e(z,$){var X=z.length;z.push($);e:for(;0<X;){var K=X-1>>>1,oe=z[K];if(0<r(oe,$))z[K]=$,z[X]=oe,X=K;else break e}}function n(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var $=z[0],X=z.pop();if(X!==$){z[0]=X;e:for(var K=0,oe=z.length,pe=oe>>>1;K<pe;){var be=2*(K+1)-1,it=z[be],ae=be+1,me=z[ae];if(0>r(it,X))ae<oe&&0>r(me,it)?(z[K]=me,z[ae]=X,K=ae):(z[K]=it,z[be]=X,K=be);else if(ae<oe&&0>r(me,X))z[K]=me,z[ae]=X,K=ae;else break e}}return $}function r(z,$){var X=z.sortIndex-$.sortIndex;return X!==0?X:z.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var l=[],c=[],u=1,d=null,f=3,m=!1,g=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(z){for(var $=n(c);$!==null;){if($.callback===null)i(c);else if($.startTime<=z)i(c),$.sortIndex=$.expirationTime,e(l,$);else break;$=n(c)}}function S(z){if(y=!1,_(z),!g)if(n(l)!==null)g=!0,G(E);else{var $=n(c);$!==null&&Y(S,$.startTime-z)}}function E(z,$){g=!1,y&&(y=!1,v(D),D=-1),m=!0;var X=f;try{for(_($),d=n(l);d!==null&&(!(d.expirationTime>$)||z&&!N());){var K=d.callback;if(typeof K=="function"){d.callback=null,f=d.priorityLevel;var oe=K(d.expirationTime<=$);$=t.unstable_now(),typeof oe=="function"?d.callback=oe:d===n(l)&&i(l),_($)}else i(l);d=n(l)}if(d!==null)var pe=!0;else{var be=n(c);be!==null&&Y(S,be.startTime-$),pe=!1}return pe}finally{d=null,f=X,m=!1}}var T=!1,P=null,D=-1,A=5,R=-1;function N(){return!(t.unstable_now()-R<A)}function O(){if(P!==null){var z=t.unstable_now();R=z;var $=!0;try{$=P(!0,z)}finally{$?H():(T=!1,P=null)}}else T=!1}var H;if(typeof w=="function")H=function(){w(O)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,Z=q.port2;q.port1.onmessage=O,H=function(){Z.postMessage(null)}}else H=function(){x(O,0)};function G(z){P=z,T||(T=!0,H())}function Y(z,$){D=x(function(){z(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){g||m||(g=!0,G(E))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(z){switch(f){case 1:case 2:case 3:var $=3;break;default:$=f}var X=f;f=$;try{return z()}finally{f=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,$){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var X=f;f=z;try{return $()}finally{f=X}},t.unstable_scheduleCallback=function(z,$,X){var K=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?K+X:K):X=K,z){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=X+oe,z={id:u++,callback:$,priorityLevel:z,startTime:X,expirationTime:oe,sortIndex:-1},X>K?(z.sortIndex=X,e(c,z),n(l)===null&&z===n(c)&&(y?(v(D),D=-1):y=!0,Y(S,X-K))):(z.sortIndex=oe,e(l,z),g||m||(g=!0,G(E))),z},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(z){var $=f;return function(){var X=f;f=$;try{return z.apply(this,arguments)}finally{f=X}}}}(w_)),w_}var cD;function cie(){return cD||(cD=1,x_.exports=lie()),x_.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uie=function(e){var n={},i=Pe,r=cie(),o=Object.assign;function s(h){for(var p="https://reactjs.org/docs/error-decoder.html?invariant="+h,b=1;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b]);return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),g=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),S=Symbol.for("react.offscreen"),E=Symbol.iterator;function T(h){return h===null||typeof h!="object"?null:(h=E&&h[E]||h["@@iterator"],typeof h=="function"?h:null)}function P(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case u:return"Fragment";case c:return"Portal";case f:return"Profiler";case d:return"StrictMode";case x:return"Suspense";case v:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case g:return(h.displayName||"Context")+".Consumer";case m:return(h._context.displayName||"Context")+".Provider";case y:var p=h.render;return h=h.displayName,h||(h=p.displayName||p.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case w:return p=h.displayName||null,p!==null?p:P(h.type)||"Memo";case _:p=h._payload,h=h._init;try{return P(h(p))}catch{}}return null}function D(h){var p=h.type;switch(h.tag){case 24:return"Cache";case 9:return(p.displayName||"Context")+".Consumer";case 10:return(p._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return h=p.render,h=h.displayName||h.name||"",p.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case 7:return"Fragment";case 5:return p;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return P(p);case 8:return p===d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p}return null}function A(h){var p=h,b=h;if(h.alternate)for(;p.return;)p=p.return;else{h=p;do p=h,p.flags&4098&&(b=p.return),h=p.return;while(h)}return p.tag===3?b:null}function R(h){if(A(h)!==h)throw Error(s(188))}function N(h){var p=h.alternate;if(!p){if(p=A(h),p===null)throw Error(s(188));return p!==h?null:h}for(var b=h,C=p;;){var I=b.return;if(I===null)break;var k=I.alternate;if(k===null){if(C=I.return,C!==null){b=C;continue}break}if(I.child===k.child){for(k=I.child;k;){if(k===b)return R(I),h;if(k===C)return R(I),p;k=k.sibling}throw Error(s(188))}if(b.return!==C.return)b=I,C=k;else{for(var j=!1,te=I.child;te;){if(te===b){j=!0,b=I,C=k;break}if(te===C){j=!0,C=I,b=k;break}te=te.sibling}if(!j){for(te=k.child;te;){if(te===b){j=!0,b=k,C=I;break}if(te===C){j=!0,C=k,b=I;break}te=te.sibling}if(!j)throw Error(s(189))}}if(b.alternate!==C)throw Error(s(190))}if(b.tag!==3)throw Error(s(188));return b.stateNode.current===b?h:p}function O(h){return h=N(h),h!==null?H(h):null}function H(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){var p=H(h);if(p!==null)return p;h=h.sibling}return null}function q(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){if(h.tag!==4){var p=q(h);if(p!==null)return p}h=h.sibling}return null}var Z=Array.isArray,G=e.getPublicInstance,Y=e.getRootHostContext,z=e.getChildHostContext,$=e.prepareForCommit,X=e.resetAfterCommit,K=e.createInstance,oe=e.appendInitialChild,pe=e.finalizeInitialChildren,be=e.prepareUpdate,it=e.shouldSetTextContent,ae=e.createTextInstance,me=e.scheduleTimeout,Fe=e.cancelTimeout,tt=e.noTimeout,Be=e.isPrimaryRenderer,yt=e.supportsMutation,It=e.supportsPersistence,Re=e.supportsHydration,le=e.getInstanceFromNode,we=e.preparePortalMount,ve=e.getCurrentEventPriority,Ae=e.detachDeletedInstance,V=e.supportsMicrotasks,mt=e.scheduleMicrotask,$e=e.supportsTestSelectors,_t=e.findFiberRoot,Ne=e.getBoundingRect,B=e.getTextContent,L=e.isHiddenSubtree,Q=e.matchAccessibilityRole,re=e.setFocusIfFocusable,Se=e.setupIntersectionObserver,he=e.appendChild,rt=e.appendChildToContainer,Ue=e.commitTextUpdate,ut=e.commitMount,Ct=e.commitUpdate,Ie=e.insertBefore,je=e.insertInContainerBefore,dt=e.removeChild,gt=e.removeChildFromContainer,We=e.resetTextContent,Vt=e.hideInstance,J=e.hideTextInstance,Ze=e.unhideInstance,ze=e.unhideTextInstance,Je=e.clearContainer,De=e.cloneInstance,Me=e.createContainerChildSet,Ve=e.appendChildToContainerChildSet,kt=e.finalizeContainerChildren,pn=e.replaceContainerChildren,on=e.cloneHiddenInstance,Fr=e.cloneHiddenTextInstance,Po=e.canHydrateInstance,Ix=e.canHydrateTextInstance,Pp=e.canHydrateSuspenseInstance,Fc=e.isSuspenseInstancePending,Ud=e.isSuspenseInstanceFallback,Rp=e.registerSuspenseInstanceRetry,fa=e.getNextHydratableSibling,Rs=e.getFirstHydratableChild,Bd=e.getFirstHydratableChildWithinContainer,Dp=e.getFirstHydratableChildWithinSuspenseInstance,kp=e.hydrateInstance,Uc=e.hydrateTextInstance,Np=e.hydrateSuspenseInstance,Bc=e.getNextHydratableInstanceAfterSuspenseInstance,Hd=e.commitHydratedContainer,Lp=e.commitHydratedSuspenseInstance,Px=e.clearSuspenseBoundary,Rx=e.clearSuspenseBoundaryFromContainer,Dx=e.shouldDeleteUnhydratedTailInstances,kx=e.didNotMatchHydratedContainerTextInstance,Nx=e.didNotMatchHydratedTextInstance,Vd;function F(h){if(Vd===void 0)try{throw Error()}catch(b){var p=b.stack.trim().match(/\n( *(at )?)/);Vd=p&&p[1]||""}return`
`+Vd+h}var ne=!1;function de(h,p){if(!h||ne)return"";ne=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(p)if(p=function(){throw Error()},Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(Oe){var C=Oe}Reflect.construct(h,[],p)}else{try{p.call()}catch(Oe){C=Oe}h.call(p.prototype)}else{try{throw Error()}catch(Oe){C=Oe}h()}}catch(Oe){if(Oe&&C&&typeof Oe.stack=="string"){for(var I=Oe.stack.split(`
`),k=C.stack.split(`
`),j=I.length-1,te=k.length-1;1<=j&&0<=te&&I[j]!==k[te];)te--;for(;1<=j&&0<=te;j--,te--)if(I[j]!==k[te]){if(j!==1||te!==1)do if(j--,te--,0>te||I[j]!==k[te]){var ye=`
`+I[j].replace(" at new "," at ");return h.displayName&&ye.includes("<anonymous>")&&(ye=ye.replace("<anonymous>",h.displayName)),ye}while(1<=j&&0<=te);break}}}finally{ne=!1,Error.prepareStackTrace=b}return(h=h?h.displayName||h.name:"")?F(h):""}var ue=Object.prototype.hasOwnProperty,se=[],He=-1;function Ye(h){return{current:h}}function Te(h){0>He||(h.current=se[He],se[He]=null,He--)}function Le(h,p){He++,se[He]=h.current,h.current=p}var ot={},lt=Ye(ot),nt=Ye(!1),Nt=ot;function Kt(h,p){var b=h.type.contextTypes;if(!b)return ot;var C=h.stateNode;if(C&&C.__reactInternalMemoizedUnmaskedChildContext===p)return C.__reactInternalMemoizedMaskedChildContext;var I={},k;for(k in b)I[k]=p[k];return C&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=p,h.__reactInternalMemoizedMaskedChildContext=I),I}function Yt(h){return h=h.childContextTypes,h!=null}function _n(){Te(nt),Te(lt)}function un(h,p,b){if(lt.current!==ot)throw Error(s(168));Le(lt,p),Le(nt,b)}function St(h,p,b){var C=h.stateNode;if(p=p.childContextTypes,typeof C.getChildContext!="function")return b;C=C.getChildContext();for(var I in C)if(!(I in p))throw Error(s(108,D(h)||"Unknown",I));return o({},b,C)}function en(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||ot,Nt=lt.current,Le(lt,h),Le(nt,nt.current),!0}function Qt(h,p,b){var C=h.stateNode;if(!C)throw Error(s(169));b?(h=St(h,p,Nt),C.__reactInternalMemoizedMergedChildContext=h,Te(nt),Te(lt),Le(lt,h)):Te(nt),Le(nt,b)}var En=Math.clz32?Math.clz32:xl,pa=Math.log,nr=Math.LN2;function xl(h){return h>>>=0,h===0?32:31-(pa(h)/nr|0)|0}var cn=64,pi=4194304;function Si(h){switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return h&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return h}}function si(h,p){var b=h.pendingLanes;if(b===0)return 0;var C=0,I=h.suspendedLanes,k=h.pingedLanes,j=b&268435455;if(j!==0){var te=j&~I;te!==0?C=Si(te):(k&=j,k!==0&&(C=Si(k)))}else j=b&~I,j!==0?C=Si(j):k!==0&&(C=Si(k));if(C===0)return 0;if(p!==0&&p!==C&&!(p&I)&&(I=C&-C,k=p&-p,I>=k||I===16&&(k&4194240)!==0))return p;if(C&4&&(C|=b&16),p=h.entangledLanes,p!==0)for(h=h.entanglements,p&=C;0<p;)b=31-En(p),I=1<<b,C|=h[b],p&=~I;return C}function Fi(h,p){switch(h){case 1:case 2:case 4:return p+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $d(h,p){for(var b=h.suspendedLanes,C=h.pingedLanes,I=h.expirationTimes,k=h.pendingLanes;0<k;){var j=31-En(k),te=1<<j,ye=I[j];ye===-1?(!(te&b)||te&C)&&(I[j]=Fi(te,p)):ye<=p&&(h.expiredLanes|=te),k&=~te}}function Ro(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function Lx(h){for(var p=[],b=0;31>b;b++)p.push(h);return p}function Wd(h,p,b){h.pendingLanes|=p,p!==536870912&&(h.suspendedLanes=0,h.pingedLanes=0),h=h.eventTimes,p=31-En(p),h[p]=b}function mB(h,p){var b=h.pendingLanes&~p;h.pendingLanes=p,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=p,h.mutableReadLanes&=p,h.entangledLanes&=p,p=h.entanglements;var C=h.eventTimes;for(h=h.expirationTimes;0<b;){var I=31-En(b),k=1<<I;p[I]=0,C[I]=-1,h[I]=-1,b&=~k}}function zx(h,p){var b=h.entangledLanes|=p;for(h=h.entanglements;b;){var C=31-En(b),I=1<<C;I&p|h[C]&p&&(h[C]|=p),b&=~I}}var sn=0;function oE(h){return h&=-h,1<h?4<h?h&268435455?16:536870912:4:1}var Ox=r.unstable_scheduleCallback,sE=r.unstable_cancelCallback,gB=r.unstable_shouldYield,vB=r.unstable_requestPaint,Mi=r.unstable_now,Fx=r.unstable_ImmediatePriority,yB=r.unstable_UserBlockingPriority,Ux=r.unstable_NormalPriority,xB=r.unstable_IdlePriority,zp=null,Qo=null;function wB(h){if(Qo&&typeof Qo.onCommitFiberRoot=="function")try{Qo.onCommitFiberRoot(zp,h,void 0,(h.current.flags&128)===128)}catch{}}function _B(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var Jo=typeof Object.is=="function"?Object.is:_B,Ds=null,Op=!1,Bx=!1;function aE(h){Ds===null?Ds=[h]:Ds.push(h)}function bB(h){Op=!0,aE(h)}function es(){if(!Bx&&Ds!==null){Bx=!0;var h=0,p=sn;try{var b=Ds;for(sn=1;h<b.length;h++){var C=b[h];do C=C(!0);while(C!==null)}Ds=null,Op=!1}catch(I){throw Ds!==null&&(Ds=Ds.slice(h+1)),Ox(Fx,es),I}finally{sn=p,Bx=!1}}return null}var SB=a.ReactCurrentBatchConfig;function Fp(h,p){if(Jo(h,p))return!0;if(typeof h!="object"||h===null||typeof p!="object"||p===null)return!1;var b=Object.keys(h),C=Object.keys(p);if(b.length!==C.length)return!1;for(C=0;C<b.length;C++){var I=b[C];if(!ue.call(p,I)||!Jo(h[I],p[I]))return!1}return!0}function MB(h){switch(h.tag){case 5:return F(h.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return h=de(h.type,!1),h;case 11:return h=de(h.type.render,!1),h;case 1:return h=de(h.type,!0),h;default:return""}}function Do(h,p){if(h&&h.defaultProps){p=o({},p),h=h.defaultProps;for(var b in h)p[b]===void 0&&(p[b]=h[b]);return p}return p}var Up=Ye(null),Bp=null,Hc=null,Hx=null;function Vx(){Hx=Hc=Bp=null}function lE(h,p,b){Be?(Le(Up,p._currentValue),p._currentValue=b):(Le(Up,p._currentValue2),p._currentValue2=b)}function $x(h){var p=Up.current;Te(Up),Be?h._currentValue=p:h._currentValue2=p}function Wx(h,p,b){for(;h!==null;){var C=h.alternate;if((h.childLanes&p)!==p?(h.childLanes|=p,C!==null&&(C.childLanes|=p)):C!==null&&(C.childLanes&p)!==p&&(C.childLanes|=p),h===b)break;h=h.return}}function Vc(h,p){Bp=h,Hx=Hc=null,h=h.dependencies,h!==null&&h.firstContext!==null&&(h.lanes&p&&(Hr=!0),h.firstContext=null)}function so(h){var p=Be?h._currentValue:h._currentValue2;if(Hx!==h)if(h={context:h,memoizedValue:p,next:null},Hc===null){if(Bp===null)throw Error(s(308));Hc=h,Bp.dependencies={lanes:0,firstContext:h}}else Hc=Hc.next=h;return p}var ts=null,ma=!1;function Gx(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cE(h,p){h=h.updateQueue,p.updateQueue===h&&(p.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function ks(h,p){return{eventTime:h,lane:p,tag:0,payload:null,callback:null,next:null}}function ga(h,p){var b=h.updateQueue;b!==null&&(b=b.shared,ai!==null&&h.mode&1&&!(jt&2)?(h=b.interleaved,h===null?(p.next=p,ts===null?ts=[b]:ts.push(b)):(p.next=h.next,h.next=p),b.interleaved=p):(h=b.pending,h===null?p.next=p:(p.next=h.next,h.next=p),b.pending=p))}function Hp(h,p,b){if(p=p.updateQueue,p!==null&&(p=p.shared,(b&4194240)!==0)){var C=p.lanes;C&=h.pendingLanes,b|=C,p.lanes=b,zx(h,b)}}function uE(h,p){var b=h.updateQueue,C=h.alternate;if(C!==null&&(C=C.updateQueue,b===C)){var I=null,k=null;if(b=b.firstBaseUpdate,b!==null){do{var j={eventTime:b.eventTime,lane:b.lane,tag:b.tag,payload:b.payload,callback:b.callback,next:null};k===null?I=k=j:k=k.next=j,b=b.next}while(b!==null);k===null?I=k=p:k=k.next=p}else I=k=p;b={baseState:C.baseState,firstBaseUpdate:I,lastBaseUpdate:k,shared:C.shared,effects:C.effects},h.updateQueue=b;return}h=b.lastBaseUpdate,h===null?b.firstBaseUpdate=p:h.next=p,b.lastBaseUpdate=p}function Vp(h,p,b,C){var I=h.updateQueue;ma=!1;var k=I.firstBaseUpdate,j=I.lastBaseUpdate,te=I.shared.pending;if(te!==null){I.shared.pending=null;var ye=te,Oe=ye.next;ye.next=null,j===null?k=Oe:j.next=Oe,j=ye;var ct=h.alternate;ct!==null&&(ct=ct.updateQueue,te=ct.lastBaseUpdate,te!==j&&(te===null?ct.firstBaseUpdate=Oe:te.next=Oe,ct.lastBaseUpdate=ye))}if(k!==null){var Ot=I.baseState;j=0,ct=Oe=ye=null,te=k;do{var Et=te.lane,bn=te.eventTime;if((C&Et)===Et){ct!==null&&(ct=ct.next={eventTime:bn,lane:0,tag:te.tag,payload:te.payload,callback:te.callback,next:null});e:{var bt=h,Vi=te;switch(Et=p,bn=b,Vi.tag){case 1:if(bt=Vi.payload,typeof bt=="function"){Ot=bt.call(bn,Ot,Et);break e}Ot=bt;break e;case 3:bt.flags=bt.flags&-65537|128;case 0:if(bt=Vi.payload,Et=typeof bt=="function"?bt.call(bn,Ot,Et):bt,Et==null)break e;Ot=o({},Ot,Et);break e;case 2:ma=!0}}te.callback!==null&&te.lane!==0&&(h.flags|=64,Et=I.effects,Et===null?I.effects=[te]:Et.push(te))}else bn={eventTime:bn,lane:Et,tag:te.tag,payload:te.payload,callback:te.callback,next:null},ct===null?(Oe=ct=bn,ye=Ot):ct=ct.next=bn,j|=Et;if(te=te.next,te===null){if(te=I.shared.pending,te===null)break;Et=te,te=Et.next,Et.next=null,I.lastBaseUpdate=Et,I.shared.pending=null}}while(!0);if(ct===null&&(ye=Ot),I.baseState=ye,I.firstBaseUpdate=Oe,I.lastBaseUpdate=ct,p=I.shared.interleaved,p!==null){I=p;do j|=I.lane,I=I.next;while(I!==p)}else k===null&&(I.shared.lanes=0);Kc|=j,h.lanes=j,h.memoizedState=Ot}}function dE(h,p,b){if(h=p.effects,p.effects=null,h!==null)for(p=0;p<h.length;p++){var C=h[p],I=C.callback;if(I!==null){if(C.callback=null,C=b,typeof I!="function")throw Error(s(191,I));I.call(C)}}}var hE=new i.Component().refs;function jx(h,p,b,C){p=h.memoizedState,b=b(C,p),b=b==null?p:o({},p,b),h.memoizedState=b,h.lanes===0&&(h.updateQueue.baseState=b)}var $p={isMounted:function(h){return(h=h._reactInternals)?A(h)===h:!1},enqueueSetState:function(h,p,b){h=h._reactInternals;var C=rr(),I=xa(h),k=ks(C,I);k.payload=p,b!=null&&(k.callback=b),ga(h,k),p=ho(h,I,C),p!==null&&Hp(p,h,I)},enqueueReplaceState:function(h,p,b){h=h._reactInternals;var C=rr(),I=xa(h),k=ks(C,I);k.tag=1,k.payload=p,b!=null&&(k.callback=b),ga(h,k),p=ho(h,I,C),p!==null&&Hp(p,h,I)},enqueueForceUpdate:function(h,p){h=h._reactInternals;var b=rr(),C=xa(h),I=ks(b,C);I.tag=2,p!=null&&(I.callback=p),ga(h,I),p=ho(h,C,b),p!==null&&Hp(p,h,C)}};function fE(h,p,b,C,I,k,j){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(C,k,j):p.prototype&&p.prototype.isPureReactComponent?!Fp(b,C)||!Fp(I,k):!0}function pE(h,p,b){var C=!1,I=ot,k=p.contextType;return typeof k=="object"&&k!==null?k=so(k):(I=Yt(p)?Nt:lt.current,C=p.contextTypes,k=(C=C!=null)?Kt(h,I):ot),p=new p(b,k),h.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=$p,h.stateNode=p,p._reactInternals=h,C&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=I,h.__reactInternalMemoizedMaskedChildContext=k),p}function mE(h,p,b,C){h=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(b,C),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(b,C),p.state!==h&&$p.enqueueReplaceState(p,p.state,null)}function qx(h,p,b,C){var I=h.stateNode;I.props=b,I.state=h.memoizedState,I.refs=hE,Gx(h);var k=p.contextType;typeof k=="object"&&k!==null?I.context=so(k):(k=Yt(p)?Nt:lt.current,I.context=Kt(h,k)),I.state=h.memoizedState,k=p.getDerivedStateFromProps,typeof k=="function"&&(jx(h,p,k,b),I.state=h.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof I.getSnapshotBeforeUpdate=="function"||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(p=I.state,typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount(),p!==I.state&&$p.enqueueReplaceState(I,I.state,null),Vp(h,b,I,C),I.state=h.memoizedState),typeof I.componentDidMount=="function"&&(h.flags|=4194308)}var $c=[],Wc=0,Wp=null,Gp=0,ao=[],lo=0,wl=null,Ns=1,Ls="";function _l(h,p){$c[Wc++]=Gp,$c[Wc++]=Wp,Wp=h,Gp=p}function gE(h,p,b){ao[lo++]=Ns,ao[lo++]=Ls,ao[lo++]=wl,wl=h;var C=Ns;h=Ls;var I=32-En(C)-1;C&=~(1<<I),b+=1;var k=32-En(p)+I;if(30<k){var j=I-I%5;k=(C&(1<<j)-1).toString(32),C>>=j,I-=j,Ns=1<<32-En(p)+I|b<<I|C,Ls=k+h}else Ns=1<<k|b<<I|C,Ls=h}function Xx(h){h.return!==null&&(_l(h,1),gE(h,1,0))}function Yx(h){for(;h===Wp;)Wp=$c[--Wc],$c[Wc]=null,Gp=$c[--Wc],$c[Wc]=null;for(;h===wl;)wl=ao[--lo],ao[lo]=null,Ls=ao[--lo],ao[lo]=null,Ns=ao[--lo],ao[lo]=null}var Ur=null,Br=null,zn=!1,Gd=!1,ko=null;function vE(h,p){var b=fo(5,null,null,0);b.elementType="DELETED",b.stateNode=p,b.return=h,p=h.deletions,p===null?(h.deletions=[b],h.flags|=16):p.push(b)}function yE(h,p){switch(h.tag){case 5:return p=Po(p,h.type,h.pendingProps),p!==null?(h.stateNode=p,Ur=h,Br=Rs(p),!0):!1;case 6:return p=Ix(p,h.pendingProps),p!==null?(h.stateNode=p,Ur=h,Br=null,!0):!1;case 13:if(p=Pp(p),p!==null){var b=wl!==null?{id:Ns,overflow:Ls}:null;return h.memoizedState={dehydrated:p,treeContext:b,retryLane:1073741824},b=fo(18,null,null,0),b.stateNode=p,b.return=h,h.child=b,Ur=h,Br=null,!0}return!1;default:return!1}}function Zx(h){return(h.mode&1)!==0&&(h.flags&128)===0}function Kx(h){if(zn){var p=Br;if(p){var b=p;if(!yE(h,p)){if(Zx(h))throw Error(s(418));p=fa(b);var C=Ur;p&&yE(h,p)?vE(C,b):(h.flags=h.flags&-4097|2,zn=!1,Ur=h)}}else{if(Zx(h))throw Error(s(418));h.flags=h.flags&-4097|2,zn=!1,Ur=h}}}function xE(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;Ur=h}function jd(h){if(!Re||h!==Ur)return!1;if(!zn)return xE(h),zn=!0,!1;if(h.tag!==3&&(h.tag!==5||Dx(h.type)&&!it(h.type,h.memoizedProps))){var p=Br;if(p){if(Zx(h)){for(h=Br;h;)h=fa(h);throw Error(s(418))}for(;p;)vE(h,p),p=fa(p)}}if(xE(h),h.tag===13){if(!Re)throw Error(s(316));if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));Br=Bc(h)}else Br=Ur?fa(h.stateNode):null;return!0}function Gc(){Re&&(Br=Ur=null,Gd=zn=!1)}function Qx(h){ko===null?ko=[h]:ko.push(h)}function qd(h,p,b){if(h=b.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if(b._owner){if(b=b._owner,b){if(b.tag!==1)throw Error(s(309));var C=b.stateNode}if(!C)throw Error(s(147,h));var I=C,k=""+h;return p!==null&&p.ref!==null&&typeof p.ref=="function"&&p.ref._stringRef===k?p.ref:(p=function(j){var te=I.refs;te===hE&&(te=I.refs={}),j===null?delete te[k]:te[k]=j},p._stringRef=k,p)}if(typeof h!="string")throw Error(s(284));if(!b._owner)throw Error(s(290,h))}return h}function jp(h,p){throw h=Object.prototype.toString.call(p),Error(s(31,h==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":h))}function wE(h){var p=h._init;return p(h._payload)}function _E(h){function p(ce,ie){if(h){var fe=ce.deletions;fe===null?(ce.deletions=[ie],ce.flags|=16):fe.push(ie)}}function b(ce,ie){if(!h)return null;for(;ie!==null;)p(ce,ie),ie=ie.sibling;return null}function C(ce,ie){for(ce=new Map;ie!==null;)ie.key!==null?ce.set(ie.key,ie):ce.set(ie.index,ie),ie=ie.sibling;return ce}function I(ce,ie){return ce=_a(ce,ie),ce.index=0,ce.sibling=null,ce}function k(ce,ie,fe){return ce.index=fe,h?(fe=ce.alternate,fe!==null?(fe=fe.index,fe<ie?(ce.flags|=2,ie):fe):(ce.flags|=2,ie)):(ce.flags|=1048576,ie)}function j(ce){return h&&ce.alternate===null&&(ce.flags|=2),ce}function te(ce,ie,fe,Qe){return ie===null||ie.tag!==6?(ie=L1(fe,ce.mode,Qe),ie.return=ce,ie):(ie=I(ie,fe),ie.return=ce,ie)}function ye(ce,ie,fe,Qe){var xt=fe.type;return xt===u?ct(ce,ie,fe.props.children,Qe,fe.key):ie!==null&&(ie.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===_&&wE(xt)===ie.type)?(Qe=I(ie,fe.props),Qe.ref=qd(ce,ie,fe),Qe.return=ce,Qe):(Qe=Sm(fe.type,fe.key,fe.props,null,ce.mode,Qe),Qe.ref=qd(ce,ie,fe),Qe.return=ce,Qe)}function Oe(ce,ie,fe,Qe){return ie===null||ie.tag!==4||ie.stateNode.containerInfo!==fe.containerInfo||ie.stateNode.implementation!==fe.implementation?(ie=z1(fe,ce.mode,Qe),ie.return=ce,ie):(ie=I(ie,fe.children||[]),ie.return=ce,ie)}function ct(ce,ie,fe,Qe,xt){return ie===null||ie.tag!==7?(ie=Al(fe,ce.mode,Qe,xt),ie.return=ce,ie):(ie=I(ie,fe),ie.return=ce,ie)}function Ot(ce,ie,fe){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return ie=L1(""+ie,ce.mode,fe),ie.return=ce,ie;if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case l:return fe=Sm(ie.type,ie.key,ie.props,null,ce.mode,fe),fe.ref=qd(ce,null,ie),fe.return=ce,fe;case c:return ie=z1(ie,ce.mode,fe),ie.return=ce,ie;case _:var Qe=ie._init;return Ot(ce,Qe(ie._payload),fe)}if(Z(ie)||T(ie))return ie=Al(ie,ce.mode,fe,null),ie.return=ce,ie;jp(ce,ie)}return null}function Et(ce,ie,fe,Qe){var xt=ie!==null?ie.key:null;if(typeof fe=="string"&&fe!==""||typeof fe=="number")return xt!==null?null:te(ce,ie,""+fe,Qe);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case l:return fe.key===xt?ye(ce,ie,fe,Qe):null;case c:return fe.key===xt?Oe(ce,ie,fe,Qe):null;case _:return xt=fe._init,Et(ce,ie,xt(fe._payload),Qe)}if(Z(fe)||T(fe))return xt!==null?null:ct(ce,ie,fe,Qe,null);jp(ce,fe)}return null}function bn(ce,ie,fe,Qe,xt){if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number")return ce=ce.get(fe)||null,te(ie,ce,""+Qe,xt);if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case l:return ce=ce.get(Qe.key===null?fe:Qe.key)||null,ye(ie,ce,Qe,xt);case c:return ce=ce.get(Qe.key===null?fe:Qe.key)||null,Oe(ie,ce,Qe,xt);case _:var Gt=Qe._init;return bn(ce,ie,fe,Gt(Qe._payload),xt)}if(Z(Qe)||T(Qe))return ce=ce.get(fe)||null,ct(ie,ce,Qe,xt,null);jp(ie,Qe)}return null}function bt(ce,ie,fe,Qe){for(var xt=null,Gt=null,Ft=ie,an=ie=0,Ei=null;Ft!==null&&an<fe.length;an++){Ft.index>an?(Ei=Ft,Ft=null):Ei=Ft.sibling;var ln=Et(ce,Ft,fe[an],Qe);if(ln===null){Ft===null&&(Ft=Ei);break}h&&Ft&&ln.alternate===null&&p(ce,Ft),ie=k(ln,ie,an),Gt===null?xt=ln:Gt.sibling=ln,Gt=ln,Ft=Ei}if(an===fe.length)return b(ce,Ft),zn&&_l(ce,an),xt;if(Ft===null){for(;an<fe.length;an++)Ft=Ot(ce,fe[an],Qe),Ft!==null&&(ie=k(Ft,ie,an),Gt===null?xt=Ft:Gt.sibling=Ft,Gt=Ft);return zn&&_l(ce,an),xt}for(Ft=C(ce,Ft);an<fe.length;an++)Ei=bn(Ft,ce,an,fe[an],Qe),Ei!==null&&(h&&Ei.alternate!==null&&Ft.delete(Ei.key===null?an:Ei.key),ie=k(Ei,ie,an),Gt===null?xt=Ei:Gt.sibling=Ei,Gt=Ei);return h&&Ft.forEach(function(ba){return p(ce,ba)}),zn&&_l(ce,an),xt}function Vi(ce,ie,fe,Qe){var xt=T(fe);if(typeof xt!="function")throw Error(s(150));if(fe=xt.call(fe),fe==null)throw Error(s(151));for(var Gt=xt=null,Ft=ie,an=ie=0,Ei=null,ln=fe.next();Ft!==null&&!ln.done;an++,ln=fe.next()){Ft.index>an?(Ei=Ft,Ft=null):Ei=Ft.sibling;var ba=Et(ce,Ft,ln.value,Qe);if(ba===null){Ft===null&&(Ft=Ei);break}h&&Ft&&ba.alternate===null&&p(ce,Ft),ie=k(ba,ie,an),Gt===null?xt=ba:Gt.sibling=ba,Gt=ba,Ft=Ei}if(ln.done)return b(ce,Ft),zn&&_l(ce,an),xt;if(Ft===null){for(;!ln.done;an++,ln=fe.next())ln=Ot(ce,ln.value,Qe),ln!==null&&(ie=k(ln,ie,an),Gt===null?xt=ln:Gt.sibling=ln,Gt=ln);return zn&&_l(ce,an),xt}for(Ft=C(ce,Ft);!ln.done;an++,ln=fe.next())ln=bn(Ft,ce,an,ln.value,Qe),ln!==null&&(h&&ln.alternate!==null&&Ft.delete(ln.key===null?an:ln.key),ie=k(ln,ie,an),Gt===null?xt=ln:Gt.sibling=ln,Gt=ln);return h&&Ft.forEach(function(e8){return p(ce,e8)}),zn&&_l(ce,an),xt}function po(ce,ie,fe,Qe){if(typeof fe=="object"&&fe!==null&&fe.type===u&&fe.key===null&&(fe=fe.props.children),typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case l:e:{for(var xt=fe.key,Gt=ie;Gt!==null;){if(Gt.key===xt){if(xt=fe.type,xt===u){if(Gt.tag===7){b(ce,Gt.sibling),ie=I(Gt,fe.props.children),ie.return=ce,ce=ie;break e}}else if(Gt.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===_&&wE(xt)===Gt.type){b(ce,Gt.sibling),ie=I(Gt,fe.props),ie.ref=qd(ce,Gt,fe),ie.return=ce,ce=ie;break e}b(ce,Gt);break}else p(ce,Gt);Gt=Gt.sibling}fe.type===u?(ie=Al(fe.props.children,ce.mode,Qe,fe.key),ie.return=ce,ce=ie):(Qe=Sm(fe.type,fe.key,fe.props,null,ce.mode,Qe),Qe.ref=qd(ce,ie,fe),Qe.return=ce,ce=Qe)}return j(ce);case c:e:{for(Gt=fe.key;ie!==null;){if(ie.key===Gt)if(ie.tag===4&&ie.stateNode.containerInfo===fe.containerInfo&&ie.stateNode.implementation===fe.implementation){b(ce,ie.sibling),ie=I(ie,fe.children||[]),ie.return=ce,ce=ie;break e}else{b(ce,ie);break}else p(ce,ie);ie=ie.sibling}ie=z1(fe,ce.mode,Qe),ie.return=ce,ce=ie}return j(ce);case _:return Gt=fe._init,po(ce,ie,Gt(fe._payload),Qe)}if(Z(fe))return bt(ce,ie,fe,Qe);if(T(fe))return Vi(ce,ie,fe,Qe);jp(ce,fe)}return typeof fe=="string"&&fe!==""||typeof fe=="number"?(fe=""+fe,ie!==null&&ie.tag===6?(b(ce,ie.sibling),ie=I(ie,fe),ie.return=ce,ce=ie):(b(ce,ie),ie=L1(fe,ce.mode,Qe),ie.return=ce,ce=ie),j(ce)):b(ce,ie)}return po}var jc=_E(!0),bE=_E(!1),Xd={},co=Ye(Xd),Yd=Ye(Xd),qc=Ye(Xd);function ns(h){if(h===Xd)throw Error(s(174));return h}function Jx(h,p){Le(qc,p),Le(Yd,h),Le(co,Xd),h=Y(p),Te(co),Le(co,h)}function Xc(){Te(co),Te(Yd),Te(qc)}function SE(h){var p=ns(qc.current),b=ns(co.current);p=z(b,h.type,p),b!==p&&(Le(Yd,h),Le(co,p))}function e1(h){Yd.current===h&&(Te(co),Te(Yd))}var Bn=Ye(0);function qp(h){for(var p=h;p!==null;){if(p.tag===13){var b=p.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||Fc(b)||Ud(b)))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if(p.flags&128)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===h)break;for(;p.sibling===null;){if(p.return===null||p.return===h)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var t1=[];function n1(){for(var h=0;h<t1.length;h++){var p=t1[h];Be?p._workInProgressVersionPrimary=null:p._workInProgressVersionSecondary=null}t1.length=0}var Xp=a.ReactCurrentDispatcher,uo=a.ReactCurrentBatchConfig,Yc=0,qn=null,Ui=null,Ci=null,Yp=!1,Zd=!1,Kd=0,CB=0;function Bi(){throw Error(s(321))}function i1(h,p){if(p===null)return!1;for(var b=0;b<p.length&&b<h.length;b++)if(!Jo(h[b],p[b]))return!1;return!0}function r1(h,p,b,C,I,k){if(Yc=k,qn=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,Xp.current=h===null||h.memoizedState===null?IB:PB,h=b(C,I),Zd){k=0;do{if(Zd=!1,Kd=0,25<=k)throw Error(s(301));k+=1,Ci=Ui=null,p.updateQueue=null,Xp.current=RB,h=b(C,I)}while(Zd)}if(Xp.current=em,p=Ui!==null&&Ui.next!==null,Yc=0,Ci=Ui=qn=null,Yp=!1,p)throw Error(s(300));return h}function o1(){var h=Kd!==0;return Kd=0,h}function zs(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ci===null?qn.memoizedState=Ci=h:Ci=Ci.next=h,Ci}function is(){if(Ui===null){var h=qn.alternate;h=h!==null?h.memoizedState:null}else h=Ui.next;var p=Ci===null?qn.memoizedState:Ci.next;if(p!==null)Ci=p,Ui=h;else{if(h===null)throw Error(s(310));Ui=h,h={memoizedState:Ui.memoizedState,baseState:Ui.baseState,baseQueue:Ui.baseQueue,queue:Ui.queue,next:null},Ci===null?qn.memoizedState=Ci=h:Ci=Ci.next=h}return Ci}function bl(h,p){return typeof p=="function"?p(h):p}function Zp(h){var p=is(),b=p.queue;if(b===null)throw Error(s(311));b.lastRenderedReducer=h;var C=Ui,I=C.baseQueue,k=b.pending;if(k!==null){if(I!==null){var j=I.next;I.next=k.next,k.next=j}C.baseQueue=I=k,b.pending=null}if(I!==null){k=I.next,C=C.baseState;var te=j=null,ye=null,Oe=k;do{var ct=Oe.lane;if((Yc&ct)===ct)ye!==null&&(ye=ye.next={lane:0,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null}),C=Oe.hasEagerState?Oe.eagerState:h(C,Oe.action);else{var Ot={lane:ct,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null};ye===null?(te=ye=Ot,j=C):ye=ye.next=Ot,qn.lanes|=ct,Kc|=ct}Oe=Oe.next}while(Oe!==null&&Oe!==k);ye===null?j=C:ye.next=te,Jo(C,p.memoizedState)||(Hr=!0),p.memoizedState=C,p.baseState=j,p.baseQueue=ye,b.lastRenderedState=C}if(h=b.interleaved,h!==null){I=h;do k=I.lane,qn.lanes|=k,Kc|=k,I=I.next;while(I!==h)}else I===null&&(b.lanes=0);return[p.memoizedState,b.dispatch]}function Kp(h){var p=is(),b=p.queue;if(b===null)throw Error(s(311));b.lastRenderedReducer=h;var C=b.dispatch,I=b.pending,k=p.memoizedState;if(I!==null){b.pending=null;var j=I=I.next;do k=h(k,j.action),j=j.next;while(j!==I);Jo(k,p.memoizedState)||(Hr=!0),p.memoizedState=k,p.baseQueue===null&&(p.baseState=k),b.lastRenderedState=k}return[k,C]}function ME(){}function CE(h,p){var b=qn,C=is(),I=p(),k=!Jo(C.memoizedState,I);if(k&&(C.memoizedState=I,Hr=!0),C=C.queue,Jd(AE.bind(null,b,C,h),[h]),C.getSnapshot!==p||k||Ci!==null&&Ci.memoizedState.tag&1){if(b.flags|=2048,Qd(9,TE.bind(null,b,C,I,p),void 0,null),ai===null)throw Error(s(349));Yc&30||EE(b,p,I)}return I}function EE(h,p,b){h.flags|=16384,h={getSnapshot:p,value:b},p=qn.updateQueue,p===null?(p={lastEffect:null,stores:null},qn.updateQueue=p,p.stores=[h]):(b=p.stores,b===null?p.stores=[h]:b.push(h))}function TE(h,p,b,C){p.value=b,p.getSnapshot=C,IE(p)&&ho(h,1,-1)}function AE(h,p,b){return b(function(){IE(p)&&ho(h,1,-1)})}function IE(h){var p=h.getSnapshot;h=h.value;try{var b=p();return!Jo(h,b)}catch{return!0}}function s1(h){var p=zs();return typeof h=="function"&&(h=h()),p.memoizedState=p.baseState=h,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bl,lastRenderedState:h},p.queue=h,h=h.dispatch=AB.bind(null,qn,h),[p.memoizedState,h]}function Qd(h,p,b,C){return h={tag:h,create:p,destroy:b,deps:C,next:null},p=qn.updateQueue,p===null?(p={lastEffect:null,stores:null},qn.updateQueue=p,p.lastEffect=h.next=h):(b=p.lastEffect,b===null?p.lastEffect=h.next=h:(C=b.next,b.next=h,h.next=C,p.lastEffect=h)),h}function PE(){return is().memoizedState}function Qp(h,p,b,C){var I=zs();qn.flags|=h,I.memoizedState=Qd(1|p,b,void 0,C===void 0?null:C)}function Jp(h,p,b,C){var I=is();C=C===void 0?null:C;var k=void 0;if(Ui!==null){var j=Ui.memoizedState;if(k=j.destroy,C!==null&&i1(C,j.deps)){I.memoizedState=Qd(p,b,k,C);return}}qn.flags|=h,I.memoizedState=Qd(1|p,b,k,C)}function a1(h,p){return Qp(8390656,8,h,p)}function Jd(h,p){return Jp(2048,8,h,p)}function RE(h,p){return Jp(4,2,h,p)}function DE(h,p){return Jp(4,4,h,p)}function kE(h,p){if(typeof p=="function")return h=h(),p(h),function(){p(null)};if(p!=null)return h=h(),p.current=h,function(){p.current=null}}function NE(h,p,b){return b=b!=null?b.concat([h]):null,Jp(4,4,kE.bind(null,p,h),b)}function l1(){}function LE(h,p){var b=is();p=p===void 0?null:p;var C=b.memoizedState;return C!==null&&p!==null&&i1(p,C[1])?C[0]:(b.memoizedState=[h,p],h)}function zE(h,p){var b=is();p=p===void 0?null:p;var C=b.memoizedState;return C!==null&&p!==null&&i1(p,C[1])?C[0]:(h=h(),b.memoizedState=[h,p],h)}function EB(h,p){var b=sn;sn=b!==0&&4>b?b:4,h(!0);var C=uo.transition;uo.transition={};try{h(!1),p()}finally{sn=b,uo.transition=C}}function OE(){return is().memoizedState}function TB(h,p,b){var C=xa(h);b={lane:C,action:b,hasEagerState:!1,eagerState:null,next:null},FE(h)?UE(p,b):(BE(h,p,b),b=rr(),h=ho(h,C,b),h!==null&&HE(h,p,C))}function AB(h,p,b){var C=xa(h),I={lane:C,action:b,hasEagerState:!1,eagerState:null,next:null};if(FE(h))UE(p,I);else{BE(h,p,I);var k=h.alternate;if(h.lanes===0&&(k===null||k.lanes===0)&&(k=p.lastRenderedReducer,k!==null))try{var j=p.lastRenderedState,te=k(j,b);if(I.hasEagerState=!0,I.eagerState=te,Jo(te,j))return}catch{}finally{}b=rr(),h=ho(h,C,b),h!==null&&HE(h,p,C)}}function FE(h){var p=h.alternate;return h===qn||p!==null&&p===qn}function UE(h,p){Zd=Yp=!0;var b=h.pending;b===null?p.next=p:(p.next=b.next,b.next=p),h.pending=p}function BE(h,p,b){ai!==null&&h.mode&1&&!(jt&2)?(h=p.interleaved,h===null?(b.next=b,ts===null?ts=[p]:ts.push(p)):(b.next=h.next,h.next=b),p.interleaved=b):(h=p.pending,h===null?b.next=b:(b.next=h.next,h.next=b),p.pending=b)}function HE(h,p,b){if(b&4194240){var C=p.lanes;C&=h.pendingLanes,b|=C,p.lanes=b,zx(h,b)}}var em={readContext:so,useCallback:Bi,useContext:Bi,useEffect:Bi,useImperativeHandle:Bi,useInsertionEffect:Bi,useLayoutEffect:Bi,useMemo:Bi,useReducer:Bi,useRef:Bi,useState:Bi,useDebugValue:Bi,useDeferredValue:Bi,useTransition:Bi,useMutableSource:Bi,useSyncExternalStore:Bi,useId:Bi,unstable_isNewReconciler:!1},IB={readContext:so,useCallback:function(h,p){return zs().memoizedState=[h,p===void 0?null:p],h},useContext:so,useEffect:a1,useImperativeHandle:function(h,p,b){return b=b!=null?b.concat([h]):null,Qp(4194308,4,kE.bind(null,p,h),b)},useLayoutEffect:function(h,p){return Qp(4194308,4,h,p)},useInsertionEffect:function(h,p){return Qp(4,2,h,p)},useMemo:function(h,p){var b=zs();return p=p===void 0?null:p,h=h(),b.memoizedState=[h,p],h},useReducer:function(h,p,b){var C=zs();return p=b!==void 0?b(p):p,C.memoizedState=C.baseState=p,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:p},C.queue=h,h=h.dispatch=TB.bind(null,qn,h),[C.memoizedState,h]},useRef:function(h){var p=zs();return h={current:h},p.memoizedState=h},useState:s1,useDebugValue:l1,useDeferredValue:function(h){var p=s1(h),b=p[0],C=p[1];return a1(function(){var I=uo.transition;uo.transition={};try{C(h)}finally{uo.transition=I}},[h]),b},useTransition:function(){var h=s1(!1),p=h[0];return h=EB.bind(null,h[1]),zs().memoizedState=h,[p,h]},useMutableSource:function(){},useSyncExternalStore:function(h,p,b){var C=qn,I=zs();if(zn){if(b===void 0)throw Error(s(407));b=b()}else{if(b=p(),ai===null)throw Error(s(349));Yc&30||EE(C,p,b)}I.memoizedState=b;var k={value:b,getSnapshot:p};return I.queue=k,a1(AE.bind(null,C,k,h),[h]),C.flags|=2048,Qd(9,TE.bind(null,C,k,b,p),void 0,null),b},useId:function(){var h=zs(),p=ai.identifierPrefix;if(zn){var b=Ls,C=Ns;b=(C&~(1<<32-En(C)-1)).toString(32)+b,p=":"+p+"R"+b,b=Kd++,0<b&&(p+="H"+b.toString(32)),p+=":"}else b=CB++,p=":"+p+"r"+b.toString(32)+":";return h.memoizedState=p},unstable_isNewReconciler:!1},PB={readContext:so,useCallback:LE,useContext:so,useEffect:Jd,useImperativeHandle:NE,useInsertionEffect:RE,useLayoutEffect:DE,useMemo:zE,useReducer:Zp,useRef:PE,useState:function(){return Zp(bl)},useDebugValue:l1,useDeferredValue:function(h){var p=Zp(bl),b=p[0],C=p[1];return Jd(function(){var I=uo.transition;uo.transition={};try{C(h)}finally{uo.transition=I}},[h]),b},useTransition:function(){var h=Zp(bl)[0],p=is().memoizedState;return[h,p]},useMutableSource:ME,useSyncExternalStore:CE,useId:OE,unstable_isNewReconciler:!1},RB={readContext:so,useCallback:LE,useContext:so,useEffect:Jd,useImperativeHandle:NE,useInsertionEffect:RE,useLayoutEffect:DE,useMemo:zE,useReducer:Kp,useRef:PE,useState:function(){return Kp(bl)},useDebugValue:l1,useDeferredValue:function(h){var p=Kp(bl),b=p[0],C=p[1];return Jd(function(){var I=uo.transition;uo.transition={};try{C(h)}finally{uo.transition=I}},[h]),b},useTransition:function(){var h=Kp(bl)[0],p=is().memoizedState;return[h,p]},useMutableSource:ME,useSyncExternalStore:CE,useId:OE,unstable_isNewReconciler:!1};function c1(h,p){try{var b="",C=p;do b+=MB(C),C=C.return;while(C);var I=b}catch(k){I=`
Error generating stack: `+k.message+`
`+k.stack}return{value:h,source:p,stack:I}}function u1(h,p){try{console.error(p.value)}catch(b){setTimeout(function(){throw b})}}var DB=typeof WeakMap=="function"?WeakMap:Map;function VE(h,p,b){b=ks(-1,b),b.tag=3,b.payload={element:null};var C=p.value;return b.callback=function(){gm||(gm=!0,A1=C),u1(h,p)},b}function $E(h,p,b){b=ks(-1,b),b.tag=3;var C=h.type.getDerivedStateFromError;if(typeof C=="function"){var I=p.value;b.payload=function(){return C(I)},b.callback=function(){u1(h,p)}}var k=h.stateNode;return k!==null&&typeof k.componentDidCatch=="function"&&(b.callback=function(){u1(h,p),typeof C!="function"&&(va===null?va=new Set([this]):va.add(this));var j=p.stack;this.componentDidCatch(p.value,{componentStack:j!==null?j:""})}),b}function WE(h,p,b){var C=h.pingCache;if(C===null){C=h.pingCache=new DB;var I=new Set;C.set(p,I)}else I=C.get(p),I===void 0&&(I=new Set,C.set(p,I));I.has(b)||(I.add(b),h=jB.bind(null,h,p,b),p.then(h,h))}function GE(h){do{var p;if((p=h.tag===13)&&(p=h.memoizedState,p=p!==null?p.dehydrated!==null:!0),p)return h;h=h.return}while(h!==null);return null}function jE(h,p,b,C,I){return h.mode&1?(h.flags|=65536,h.lanes=I,h):(h===p?h.flags|=65536:(h.flags|=128,b.flags|=131072,b.flags&=-52805,b.tag===1&&(b.alternate===null?b.tag=17:(p=ks(-1,1),p.tag=2,ga(b,p))),b.lanes|=1),h)}function rs(h){h.flags|=4}function qE(h,p){if(h!==null&&h.child===p.child)return!0;if(p.flags&16)return!1;for(h=p.child;h!==null;){if(h.flags&12854||h.subtreeFlags&12854)return!1;h=h.sibling}return!0}var eh,th,tm,nm;if(yt)eh=function(h,p){for(var b=p.child;b!==null;){if(b.tag===5||b.tag===6)oe(h,b.stateNode);else if(b.tag!==4&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===p)break;for(;b.sibling===null;){if(b.return===null||b.return===p)return;b=b.return}b.sibling.return=b.return,b=b.sibling}},th=function(){},tm=function(h,p,b,C,I){if(h=h.memoizedProps,h!==C){var k=p.stateNode,j=ns(co.current);b=be(k,b,h,C,I,j),(p.updateQueue=b)&&rs(p)}},nm=function(h,p,b,C){b!==C&&rs(p)};else if(It){eh=function(h,p,b,C){for(var I=p.child;I!==null;){if(I.tag===5){var k=I.stateNode;b&&C&&(k=on(k,I.type,I.memoizedProps,I)),oe(h,k)}else if(I.tag===6)k=I.stateNode,b&&C&&(k=Fr(k,I.memoizedProps,I)),oe(h,k);else if(I.tag!==4){if(I.tag===22&&I.memoizedState!==null)k=I.child,k!==null&&(k.return=I),eh(h,I,!0,!0);else if(I.child!==null){I.child.return=I,I=I.child;continue}}if(I===p)break;for(;I.sibling===null;){if(I.return===null||I.return===p)return;I=I.return}I.sibling.return=I.return,I=I.sibling}};var XE=function(h,p,b,C){for(var I=p.child;I!==null;){if(I.tag===5){var k=I.stateNode;b&&C&&(k=on(k,I.type,I.memoizedProps,I)),Ve(h,k)}else if(I.tag===6)k=I.stateNode,b&&C&&(k=Fr(k,I.memoizedProps,I)),Ve(h,k);else if(I.tag!==4){if(I.tag===22&&I.memoizedState!==null)k=I.child,k!==null&&(k.return=I),XE(h,I,!0,!0);else if(I.child!==null){I.child.return=I,I=I.child;continue}}if(I===p)break;for(;I.sibling===null;){if(I.return===null||I.return===p)return;I=I.return}I.sibling.return=I.return,I=I.sibling}};th=function(h,p){var b=p.stateNode;if(!qE(h,p)){h=b.containerInfo;var C=Me(h);XE(C,p,!1,!1),b.pendingChildren=C,rs(p),kt(h,C)}},tm=function(h,p,b,C,I){var k=h.stateNode,j=h.memoizedProps;if((h=qE(h,p))&&j===C)p.stateNode=k;else{var te=p.stateNode,ye=ns(co.current),Oe=null;j!==C&&(Oe=be(te,b,j,C,I,ye)),h&&Oe===null?p.stateNode=k:(k=De(k,Oe,b,j,C,p,h,te),pe(k,b,C,I,ye)&&rs(p),p.stateNode=k,h?rs(p):eh(k,p,!1,!1))}},nm=function(h,p,b,C){b!==C?(h=ns(qc.current),b=ns(co.current),p.stateNode=ae(C,h,b,p),rs(p)):p.stateNode=h.stateNode}}else th=function(){},tm=function(){},nm=function(){};function nh(h,p){if(!zn)switch(h.tailMode){case"hidden":p=h.tail;for(var b=null;p!==null;)p.alternate!==null&&(b=p),p=p.sibling;b===null?h.tail=null:b.sibling=null;break;case"collapsed":b=h.tail;for(var C=null;b!==null;)b.alternate!==null&&(C=b),b=b.sibling;C===null?p||h.tail===null?h.tail=null:h.tail.sibling=null:C.sibling=null}}function Hi(h){var p=h.alternate!==null&&h.alternate.child===h.child,b=0,C=0;if(p)for(var I=h.child;I!==null;)b|=I.lanes|I.childLanes,C|=I.subtreeFlags&14680064,C|=I.flags&14680064,I.return=h,I=I.sibling;else for(I=h.child;I!==null;)b|=I.lanes|I.childLanes,C|=I.subtreeFlags,C|=I.flags,I.return=h,I=I.sibling;return h.subtreeFlags|=C,h.childLanes=b,p}function kB(h,p,b){var C=p.pendingProps;switch(Yx(p),p.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hi(p),null;case 1:return Yt(p.type)&&_n(),Hi(p),null;case 3:return C=p.stateNode,Xc(),Te(nt),Te(lt),n1(),C.pendingContext&&(C.context=C.pendingContext,C.pendingContext=null),(h===null||h.child===null)&&(jd(p)?rs(p):h===null||h.memoizedState.isDehydrated&&!(p.flags&256)||(p.flags|=1024,ko!==null&&(R1(ko),ko=null))),th(h,p),Hi(p),null;case 5:e1(p),b=ns(qc.current);var I=p.type;if(h!==null&&p.stateNode!=null)tm(h,p,I,C,b),h.ref!==p.ref&&(p.flags|=512,p.flags|=2097152);else{if(!C){if(p.stateNode===null)throw Error(s(166));return Hi(p),null}if(h=ns(co.current),jd(p)){if(!Re)throw Error(s(175));h=kp(p.stateNode,p.type,p.memoizedProps,b,h,p,!Gd),p.updateQueue=h,h!==null&&rs(p)}else{var k=K(I,C,b,h,p);eh(k,p,!1,!1),p.stateNode=k,pe(k,I,C,b,h)&&rs(p)}p.ref!==null&&(p.flags|=512,p.flags|=2097152)}return Hi(p),null;case 6:if(h&&p.stateNode!=null)nm(h,p,h.memoizedProps,C);else{if(typeof C!="string"&&p.stateNode===null)throw Error(s(166));if(h=ns(qc.current),b=ns(co.current),jd(p)){if(!Re)throw Error(s(176));if(h=p.stateNode,C=p.memoizedProps,(b=Uc(h,C,p,!Gd))&&(I=Ur,I!==null))switch(k=(I.mode&1)!==0,I.tag){case 3:kx(I.stateNode.containerInfo,h,C,k);break;case 5:Nx(I.type,I.memoizedProps,I.stateNode,h,C,k)}b&&rs(p)}else p.stateNode=ae(C,h,b,p)}return Hi(p),null;case 13:if(Te(Bn),C=p.memoizedState,zn&&Br!==null&&p.mode&1&&!(p.flags&128)){for(h=Br;h;)h=fa(h);return Gc(),p.flags|=98560,p}if(C!==null&&C.dehydrated!==null){if(C=jd(p),h===null){if(!C)throw Error(s(318));if(!Re)throw Error(s(344));if(h=p.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));Np(h,p)}else Gc(),!(p.flags&128)&&(p.memoizedState=null),p.flags|=4;return Hi(p),null}return ko!==null&&(R1(ko),ko=null),p.flags&128?(p.lanes=b,p):(C=C!==null,b=!1,h===null?jd(p):b=h.memoizedState!==null,C&&!b&&(p.child.flags|=8192,p.mode&1&&(h===null||Bn.current&1?mi===0&&(mi=3):k1())),p.updateQueue!==null&&(p.flags|=4),Hi(p),null);case 4:return Xc(),th(h,p),h===null&&we(p.stateNode.containerInfo),Hi(p),null;case 10:return $x(p.type._context),Hi(p),null;case 17:return Yt(p.type)&&_n(),Hi(p),null;case 19:if(Te(Bn),I=p.memoizedState,I===null)return Hi(p),null;if(C=(p.flags&128)!==0,k=I.rendering,k===null)if(C)nh(I,!1);else{if(mi!==0||h!==null&&h.flags&128)for(h=p.child;h!==null;){if(k=qp(h),k!==null){for(p.flags|=128,nh(I,!1),h=k.updateQueue,h!==null&&(p.updateQueue=h,p.flags|=4),p.subtreeFlags=0,h=b,C=p.child;C!==null;)b=C,I=h,b.flags&=14680066,k=b.alternate,k===null?(b.childLanes=0,b.lanes=I,b.child=null,b.subtreeFlags=0,b.memoizedProps=null,b.memoizedState=null,b.updateQueue=null,b.dependencies=null,b.stateNode=null):(b.childLanes=k.childLanes,b.lanes=k.lanes,b.child=k.child,b.subtreeFlags=0,b.deletions=null,b.memoizedProps=k.memoizedProps,b.memoizedState=k.memoizedState,b.updateQueue=k.updateQueue,b.type=k.type,I=k.dependencies,b.dependencies=I===null?null:{lanes:I.lanes,firstContext:I.firstContext}),C=C.sibling;return Le(Bn,Bn.current&1|2),p.child}h=h.sibling}I.tail!==null&&Mi()>T1&&(p.flags|=128,C=!0,nh(I,!1),p.lanes=4194304)}else{if(!C)if(h=qp(k),h!==null){if(p.flags|=128,C=!0,h=h.updateQueue,h!==null&&(p.updateQueue=h,p.flags|=4),nh(I,!0),I.tail===null&&I.tailMode==="hidden"&&!k.alternate&&!zn)return Hi(p),null}else 2*Mi()-I.renderingStartTime>T1&&b!==1073741824&&(p.flags|=128,C=!0,nh(I,!1),p.lanes=4194304);I.isBackwards?(k.sibling=p.child,p.child=k):(h=I.last,h!==null?h.sibling=k:p.child=k,I.last=k)}return I.tail!==null?(p=I.tail,I.rendering=p,I.tail=p.sibling,I.renderingStartTime=Mi(),p.sibling=null,h=Bn.current,Le(Bn,C?h&1|2:h&1),p):(Hi(p),null);case 22:case 23:return D1(),C=p.memoizedState!==null,h!==null&&h.memoizedState!==null!==C&&(p.flags|=8192),C&&p.mode&1?Vr&1073741824&&(Hi(p),yt&&p.subtreeFlags&6&&(p.flags|=8192)):Hi(p),null;case 24:return null;case 25:return null}throw Error(s(156,p.tag))}var NB=a.ReactCurrentOwner,Hr=!1;function ir(h,p,b,C){p.child=h===null?bE(p,null,b,C):jc(p,h.child,b,C)}function YE(h,p,b,C,I){b=b.render;var k=p.ref;return Vc(p,I),C=r1(h,p,b,C,k,I),b=o1(),h!==null&&!Hr?(p.updateQueue=h.updateQueue,p.flags&=-2053,h.lanes&=~I,Os(h,p,I)):(zn&&b&&Xx(p),p.flags|=1,ir(h,p,C,I),p.child)}function ZE(h,p,b,C,I){if(h===null){var k=b.type;return typeof k=="function"&&!N1(k)&&k.defaultProps===void 0&&b.compare===null&&b.defaultProps===void 0?(p.tag=15,p.type=k,KE(h,p,k,C,I)):(h=Sm(b.type,null,C,p,p.mode,I),h.ref=p.ref,h.return=p,p.child=h)}if(k=h.child,!(h.lanes&I)){var j=k.memoizedProps;if(b=b.compare,b=b!==null?b:Fp,b(j,C)&&h.ref===p.ref)return Os(h,p,I)}return p.flags|=1,h=_a(k,C),h.ref=p.ref,h.return=p,p.child=h}function KE(h,p,b,C,I){if(h!==null&&Fp(h.memoizedProps,C)&&h.ref===p.ref)if(Hr=!1,(h.lanes&I)!==0)h.flags&131072&&(Hr=!0);else return p.lanes=h.lanes,Os(h,p,I);return d1(h,p,b,C,I)}function QE(h,p,b){var C=p.pendingProps,I=C.children,k=h!==null?h.memoizedState:null;if(C.mode==="hidden")if(!(p.mode&1))p.memoizedState={baseLanes:0,cachePool:null},Le(Zc,Vr),Vr|=b;else if(b&1073741824)p.memoizedState={baseLanes:0,cachePool:null},C=k!==null?k.baseLanes:b,Le(Zc,Vr),Vr|=C;else return h=k!==null?k.baseLanes|b:b,p.lanes=p.childLanes=1073741824,p.memoizedState={baseLanes:h,cachePool:null},p.updateQueue=null,Le(Zc,Vr),Vr|=h,null;else k!==null?(C=k.baseLanes|b,p.memoizedState=null):C=b,Le(Zc,Vr),Vr|=C;return ir(h,p,I,b),p.child}function JE(h,p){var b=p.ref;(h===null&&b!==null||h!==null&&h.ref!==b)&&(p.flags|=512,p.flags|=2097152)}function d1(h,p,b,C,I){var k=Yt(b)?Nt:lt.current;return k=Kt(p,k),Vc(p,I),b=r1(h,p,b,C,k,I),C=o1(),h!==null&&!Hr?(p.updateQueue=h.updateQueue,p.flags&=-2053,h.lanes&=~I,Os(h,p,I)):(zn&&C&&Xx(p),p.flags|=1,ir(h,p,b,I),p.child)}function e2(h,p,b,C,I){if(Yt(b)){var k=!0;en(p)}else k=!1;if(Vc(p,I),p.stateNode===null)h!==null&&(h.alternate=null,p.alternate=null,p.flags|=2),pE(p,b,C),qx(p,b,C,I),C=!0;else if(h===null){var j=p.stateNode,te=p.memoizedProps;j.props=te;var ye=j.context,Oe=b.contextType;typeof Oe=="object"&&Oe!==null?Oe=so(Oe):(Oe=Yt(b)?Nt:lt.current,Oe=Kt(p,Oe));var ct=b.getDerivedStateFromProps,Ot=typeof ct=="function"||typeof j.getSnapshotBeforeUpdate=="function";Ot||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(te!==C||ye!==Oe)&&mE(p,j,C,Oe),ma=!1;var Et=p.memoizedState;j.state=Et,Vp(p,C,j,I),ye=p.memoizedState,te!==C||Et!==ye||nt.current||ma?(typeof ct=="function"&&(jx(p,b,ct,C),ye=p.memoizedState),(te=ma||fE(p,b,te,C,Et,ye,Oe))?(Ot||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount()),typeof j.componentDidMount=="function"&&(p.flags|=4194308)):(typeof j.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=C,p.memoizedState=ye),j.props=C,j.state=ye,j.context=Oe,C=te):(typeof j.componentDidMount=="function"&&(p.flags|=4194308),C=!1)}else{j=p.stateNode,cE(h,p),te=p.memoizedProps,Oe=p.type===p.elementType?te:Do(p.type,te),j.props=Oe,Ot=p.pendingProps,Et=j.context,ye=b.contextType,typeof ye=="object"&&ye!==null?ye=so(ye):(ye=Yt(b)?Nt:lt.current,ye=Kt(p,ye));var bn=b.getDerivedStateFromProps;(ct=typeof bn=="function"||typeof j.getSnapshotBeforeUpdate=="function")||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(te!==Ot||Et!==ye)&&mE(p,j,C,ye),ma=!1,Et=p.memoizedState,j.state=Et,Vp(p,C,j,I);var bt=p.memoizedState;te!==Ot||Et!==bt||nt.current||ma?(typeof bn=="function"&&(jx(p,b,bn,C),bt=p.memoizedState),(Oe=ma||fE(p,b,Oe,C,Et,bt,ye)||!1)?(ct||typeof j.UNSAFE_componentWillUpdate!="function"&&typeof j.componentWillUpdate!="function"||(typeof j.componentWillUpdate=="function"&&j.componentWillUpdate(C,bt,ye),typeof j.UNSAFE_componentWillUpdate=="function"&&j.UNSAFE_componentWillUpdate(C,bt,ye)),typeof j.componentDidUpdate=="function"&&(p.flags|=4),typeof j.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof j.componentDidUpdate!="function"||te===h.memoizedProps&&Et===h.memoizedState||(p.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||te===h.memoizedProps&&Et===h.memoizedState||(p.flags|=1024),p.memoizedProps=C,p.memoizedState=bt),j.props=C,j.state=bt,j.context=ye,C=Oe):(typeof j.componentDidUpdate!="function"||te===h.memoizedProps&&Et===h.memoizedState||(p.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||te===h.memoizedProps&&Et===h.memoizedState||(p.flags|=1024),C=!1)}return h1(h,p,b,C,k,I)}function h1(h,p,b,C,I,k){JE(h,p);var j=(p.flags&128)!==0;if(!C&&!j)return I&&Qt(p,b,!1),Os(h,p,k);C=p.stateNode,NB.current=p;var te=j&&typeof b.getDerivedStateFromError!="function"?null:C.render();return p.flags|=1,h!==null&&j?(p.child=jc(p,h.child,null,k),p.child=jc(p,null,te,k)):ir(h,p,te,k),p.memoizedState=C.state,I&&Qt(p,b,!0),p.child}function t2(h){var p=h.stateNode;p.pendingContext?un(h,p.pendingContext,p.pendingContext!==p.context):p.context&&un(h,p.context,!1),Jx(h,p.containerInfo)}function n2(h,p,b,C,I){return Gc(),Qx(I),p.flags|=256,ir(h,p,b,C),p.child}var im={dehydrated:null,treeContext:null,retryLane:0};function rm(h){return{baseLanes:h,cachePool:null}}function i2(h,p,b){var C=p.pendingProps,I=Bn.current,k=!1,j=(p.flags&128)!==0,te;if((te=j)||(te=h!==null&&h.memoizedState===null?!1:(I&2)!==0),te?(k=!0,p.flags&=-129):(h===null||h.memoizedState!==null)&&(I|=1),Le(Bn,I&1),h===null)return Kx(p),h=p.memoizedState,h!==null&&(h=h.dehydrated,h!==null)?(p.mode&1?Ud(h)?p.lanes=8:p.lanes=1073741824:p.lanes=1,null):(I=C.children,h=C.fallback,k?(C=p.mode,k=p.child,I={mode:"hidden",children:I},!(C&1)&&k!==null?(k.childLanes=0,k.pendingProps=I):k=Mm(I,C,0,null),h=Al(h,C,b,null),k.return=p,h.return=p,k.sibling=h,p.child=k,p.child.memoizedState=rm(b),p.memoizedState=im,h):f1(p,I));if(I=h.memoizedState,I!==null){if(te=I.dehydrated,te!==null){if(j)return p.flags&256?(p.flags&=-257,om(h,p,b,Error(s(422)))):p.memoizedState!==null?(p.child=h.child,p.flags|=128,null):(k=C.fallback,I=p.mode,C=Mm({mode:"visible",children:C.children},I,0,null),k=Al(k,I,b,null),k.flags|=2,C.return=p,k.return=p,C.sibling=k,p.child=C,p.mode&1&&jc(p,h.child,null,b),p.child.memoizedState=rm(b),p.memoizedState=im,k);if(!(p.mode&1))p=om(h,p,b,null);else if(Ud(te))p=om(h,p,b,Error(s(419)));else if(C=(b&h.childLanes)!==0,Hr||C){if(C=ai,C!==null){switch(b&-b){case 4:k=2;break;case 16:k=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:k=32;break;case 536870912:k=268435456;break;default:k=0}C=k&(C.suspendedLanes|b)?0:k,C!==0&&C!==I.retryLane&&(I.retryLane=C,ho(h,C,-1))}k1(),p=om(h,p,b,Error(s(421)))}else Fc(te)?(p.flags|=128,p.child=h.child,p=qB.bind(null,h),Rp(te,p),p=null):(b=I.treeContext,Re&&(Br=Dp(te),Ur=p,zn=!0,ko=null,Gd=!1,b!==null&&(ao[lo++]=Ns,ao[lo++]=Ls,ao[lo++]=wl,Ns=b.id,Ls=b.overflow,wl=p)),p=f1(p,p.pendingProps.children),p.flags|=4096);return p}return k?(C=o2(h,p,C.children,C.fallback,b),k=p.child,I=h.child.memoizedState,k.memoizedState=I===null?rm(b):{baseLanes:I.baseLanes|b,cachePool:null},k.childLanes=h.childLanes&~b,p.memoizedState=im,C):(b=r2(h,p,C.children,b),p.memoizedState=null,b)}return k?(C=o2(h,p,C.children,C.fallback,b),k=p.child,I=h.child.memoizedState,k.memoizedState=I===null?rm(b):{baseLanes:I.baseLanes|b,cachePool:null},k.childLanes=h.childLanes&~b,p.memoizedState=im,C):(b=r2(h,p,C.children,b),p.memoizedState=null,b)}function f1(h,p){return p=Mm({mode:"visible",children:p},h.mode,0,null),p.return=h,h.child=p}function r2(h,p,b,C){var I=h.child;return h=I.sibling,b=_a(I,{mode:"visible",children:b}),!(p.mode&1)&&(b.lanes=C),b.return=p,b.sibling=null,h!==null&&(C=p.deletions,C===null?(p.deletions=[h],p.flags|=16):C.push(h)),p.child=b}function o2(h,p,b,C,I){var k=p.mode;h=h.child;var j=h.sibling,te={mode:"hidden",children:b};return!(k&1)&&p.child!==h?(b=p.child,b.childLanes=0,b.pendingProps=te,p.deletions=null):(b=_a(h,te),b.subtreeFlags=h.subtreeFlags&14680064),j!==null?C=_a(j,C):(C=Al(C,k,I,null),C.flags|=2),C.return=p,b.return=p,b.sibling=C,p.child=b,C}function om(h,p,b,C){return C!==null&&Qx(C),jc(p,h.child,null,b),h=f1(p,p.pendingProps.children),h.flags|=2,p.memoizedState=null,h}function s2(h,p,b){h.lanes|=p;var C=h.alternate;C!==null&&(C.lanes|=p),Wx(h.return,p,b)}function p1(h,p,b,C,I){var k=h.memoizedState;k===null?h.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:C,tail:b,tailMode:I}:(k.isBackwards=p,k.rendering=null,k.renderingStartTime=0,k.last=C,k.tail=b,k.tailMode=I)}function a2(h,p,b){var C=p.pendingProps,I=C.revealOrder,k=C.tail;if(ir(h,p,C.children,b),C=Bn.current,C&2)C=C&1|2,p.flags|=128;else{if(h!==null&&h.flags&128)e:for(h=p.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&s2(h,b,p);else if(h.tag===19)s2(h,b,p);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===p)break e;for(;h.sibling===null;){if(h.return===null||h.return===p)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}C&=1}if(Le(Bn,C),!(p.mode&1))p.memoizedState=null;else switch(I){case"forwards":for(b=p.child,I=null;b!==null;)h=b.alternate,h!==null&&qp(h)===null&&(I=b),b=b.sibling;b=I,b===null?(I=p.child,p.child=null):(I=b.sibling,b.sibling=null),p1(p,!1,I,b,k);break;case"backwards":for(b=null,I=p.child,p.child=null;I!==null;){if(h=I.alternate,h!==null&&qp(h)===null){p.child=I;break}h=I.sibling,I.sibling=b,b=I,I=h}p1(p,!0,b,null,k);break;case"together":p1(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function Os(h,p,b){if(h!==null&&(p.dependencies=h.dependencies),Kc|=p.lanes,!(b&p.childLanes))return null;if(h!==null&&p.child!==h.child)throw Error(s(153));if(p.child!==null){for(h=p.child,b=_a(h,h.pendingProps),p.child=b,b.return=p;h.sibling!==null;)h=h.sibling,b=b.sibling=_a(h,h.pendingProps),b.return=p;b.sibling=null}return p.child}function LB(h,p,b){switch(p.tag){case 3:t2(p),Gc();break;case 5:SE(p);break;case 1:Yt(p.type)&&en(p);break;case 4:Jx(p,p.stateNode.containerInfo);break;case 10:lE(p,p.type._context,p.memoizedProps.value);break;case 13:var C=p.memoizedState;if(C!==null)return C.dehydrated!==null?(Le(Bn,Bn.current&1),p.flags|=128,null):b&p.child.childLanes?i2(h,p,b):(Le(Bn,Bn.current&1),h=Os(h,p,b),h!==null?h.sibling:null);Le(Bn,Bn.current&1);break;case 19:if(C=(b&p.childLanes)!==0,h.flags&128){if(C)return a2(h,p,b);p.flags|=128}var I=p.memoizedState;if(I!==null&&(I.rendering=null,I.tail=null,I.lastEffect=null),Le(Bn,Bn.current),C)break;return null;case 22:case 23:return p.lanes=0,QE(h,p,b)}return Os(h,p,b)}function zB(h,p){switch(Yx(p),p.tag){case 1:return Yt(p.type)&&_n(),h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 3:return Xc(),Te(nt),Te(lt),n1(),h=p.flags,h&65536&&!(h&128)?(p.flags=h&-65537|128,p):null;case 5:return e1(p),null;case 13:if(Te(Bn),h=p.memoizedState,h!==null&&h.dehydrated!==null){if(p.alternate===null)throw Error(s(340));Gc()}return h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 19:return Te(Bn),null;case 4:return Xc(),null;case 10:return $x(p.type._context),null;case 22:case 23:return D1(),null;case 24:return null;default:return null}}var sm=!1,Sl=!1,OB=typeof WeakSet=="function"?WeakSet:Set,Ke=null;function am(h,p){var b=h.ref;if(b!==null)if(typeof b=="function")try{b(null)}catch(C){xr(h,p,C)}else b.current=null}function m1(h,p,b){try{b()}catch(C){xr(h,p,C)}}var l2=!1;function FB(h,p){for($(h.containerInfo),Ke=p;Ke!==null;)if(h=Ke,p=h.child,(h.subtreeFlags&1028)!==0&&p!==null)p.return=h,Ke=p;else for(;Ke!==null;){h=Ke;try{var b=h.alternate;if(h.flags&1024)switch(h.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var C=b.memoizedProps,I=b.memoizedState,k=h.stateNode,j=k.getSnapshotBeforeUpdate(h.elementType===h.type?C:Do(h.type,C),I);k.__reactInternalSnapshotBeforeUpdate=j}break;case 3:yt&&Je(h.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(te){xr(h,h.return,te)}if(p=h.sibling,p!==null){p.return=h.return,Ke=p;break}Ke=h.return}return b=l2,l2=!1,b}function Ml(h,p,b){var C=p.updateQueue;if(C=C!==null?C.lastEffect:null,C!==null){var I=C=C.next;do{if((I.tag&h)===h){var k=I.destroy;I.destroy=void 0,k!==void 0&&m1(p,b,k)}I=I.next}while(I!==C)}}function ih(h,p){if(p=p.updateQueue,p=p!==null?p.lastEffect:null,p!==null){var b=p=p.next;do{if((b.tag&h)===h){var C=b.create;b.destroy=C()}b=b.next}while(b!==p)}}function g1(h){var p=h.ref;if(p!==null){var b=h.stateNode;switch(h.tag){case 5:h=G(b);break;default:h=b}typeof p=="function"?p(h):p.current=h}}function c2(h,p,b){if(Qo&&typeof Qo.onCommitFiberUnmount=="function")try{Qo.onCommitFiberUnmount(zp,p)}catch{}switch(p.tag){case 0:case 11:case 14:case 15:if(h=p.updateQueue,h!==null&&(h=h.lastEffect,h!==null)){var C=h=h.next;do{var I=C,k=I.destroy;I=I.tag,k!==void 0&&(I&2||I&4)&&m1(p,b,k),C=C.next}while(C!==h)}break;case 1:if(am(p,b),h=p.stateNode,typeof h.componentWillUnmount=="function")try{h.props=p.memoizedProps,h.state=p.memoizedState,h.componentWillUnmount()}catch(j){xr(p,b,j)}break;case 5:am(p,b);break;case 4:yt?m2(h,p,b):It&&It&&(p=p.stateNode.containerInfo,b=Me(p),pn(p,b))}}function u2(h,p,b){for(var C=p;;)if(c2(h,C,b),C.child===null||yt&&C.tag===4){if(C===p)break;for(;C.sibling===null;){if(C.return===null||C.return===p)return;C=C.return}C.sibling.return=C.return,C=C.sibling}else C.child.return=C,C=C.child}function d2(h){var p=h.alternate;p!==null&&(h.alternate=null,d2(p)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(p=h.stateNode,p!==null&&Ae(p)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function h2(h){return h.tag===5||h.tag===3||h.tag===4}function f2(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||h2(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function p2(h){if(yt){e:{for(var p=h.return;p!==null;){if(h2(p))break e;p=p.return}throw Error(s(160))}var b=p;switch(b.tag){case 5:p=b.stateNode,b.flags&32&&(We(p),b.flags&=-33),b=f2(h),y1(h,b,p);break;case 3:case 4:p=b.stateNode.containerInfo,b=f2(h),v1(h,b,p);break;default:throw Error(s(161))}}}function v1(h,p,b){var C=h.tag;if(C===5||C===6)h=h.stateNode,p?je(b,h,p):rt(b,h);else if(C!==4&&(h=h.child,h!==null))for(v1(h,p,b),h=h.sibling;h!==null;)v1(h,p,b),h=h.sibling}function y1(h,p,b){var C=h.tag;if(C===5||C===6)h=h.stateNode,p?Ie(b,h,p):he(b,h);else if(C!==4&&(h=h.child,h!==null))for(y1(h,p,b),h=h.sibling;h!==null;)y1(h,p,b),h=h.sibling}function m2(h,p,b){for(var C=p,I=!1,k,j;;){if(!I){I=C.return;e:for(;;){if(I===null)throw Error(s(160));switch(k=I.stateNode,I.tag){case 5:j=!1;break e;case 3:k=k.containerInfo,j=!0;break e;case 4:k=k.containerInfo,j=!0;break e}I=I.return}I=!0}if(C.tag===5||C.tag===6)u2(h,C,b),j?gt(k,C.stateNode):dt(k,C.stateNode);else if(C.tag===18)j?Rx(k,C.stateNode):Px(k,C.stateNode);else if(C.tag===4){if(C.child!==null){k=C.stateNode.containerInfo,j=!0,C.child.return=C,C=C.child;continue}}else if(c2(h,C,b),C.child!==null){C.child.return=C,C=C.child;continue}if(C===p)break;for(;C.sibling===null;){if(C.return===null||C.return===p)return;C=C.return,C.tag===4&&(I=!1)}C.sibling.return=C.return,C=C.sibling}}function x1(h,p){if(yt){switch(p.tag){case 0:case 11:case 14:case 15:Ml(3,p,p.return),ih(3,p),Ml(5,p,p.return);return;case 1:return;case 5:var b=p.stateNode;if(b!=null){var C=p.memoizedProps;h=h!==null?h.memoizedProps:C;var I=p.type,k=p.updateQueue;p.updateQueue=null,k!==null&&Ct(b,k,I,h,C,p)}return;case 6:if(p.stateNode===null)throw Error(s(162));b=p.memoizedProps,Ue(p.stateNode,h!==null?h.memoizedProps:b,b);return;case 3:Re&&h!==null&&h.memoizedState.isDehydrated&&Hd(p.stateNode.containerInfo);return;case 12:return;case 13:lm(p);return;case 19:lm(p);return;case 17:return}throw Error(s(163))}switch(p.tag){case 0:case 11:case 14:case 15:Ml(3,p,p.return),ih(3,p),Ml(5,p,p.return);return;case 12:return;case 13:lm(p);return;case 19:lm(p);return;case 3:Re&&h!==null&&h.memoizedState.isDehydrated&&Hd(p.stateNode.containerInfo);break;case 22:case 23:return}e:if(It){switch(p.tag){case 1:case 5:case 6:break e;case 3:case 4:p=p.stateNode,pn(p.containerInfo,p.pendingChildren);break e}throw Error(s(163))}}function lm(h){var p=h.updateQueue;if(p!==null){h.updateQueue=null;var b=h.stateNode;b===null&&(b=h.stateNode=new OB),p.forEach(function(C){var I=XB.bind(null,h,C);b.has(C)||(b.add(C),C.then(I,I))})}}function UB(h,p){for(Ke=p;Ke!==null;){p=Ke;var b=p.deletions;if(b!==null)for(var C=0;C<b.length;C++){var I=b[C];try{var k=h;yt?m2(k,I,p):u2(k,I,p);var j=I.alternate;j!==null&&(j.return=null),I.return=null}catch(xt){xr(I,p,xt)}}if(b=p.child,p.subtreeFlags&12854&&b!==null)b.return=p,Ke=b;else for(;Ke!==null;){p=Ke;try{var te=p.flags;if(te&32&&yt&&We(p.stateNode),te&512){var ye=p.alternate;if(ye!==null){var Oe=ye.ref;Oe!==null&&(typeof Oe=="function"?Oe(null):Oe.current=null)}}if(te&8192)switch(p.tag){case 13:if(p.memoizedState!==null){var ct=p.alternate;(ct===null||ct.memoizedState===null)&&(E1=Mi())}break;case 22:var Ot=p.memoizedState!==null,Et=p.alternate,bn=Et!==null&&Et.memoizedState!==null;if(b=p,yt){e:if(C=b,I=Ot,k=null,yt)for(var bt=C;;){if(bt.tag===5){if(k===null){k=bt;var Vi=bt.stateNode;I?Vt(Vi):Ze(bt.stateNode,bt.memoizedProps)}}else if(bt.tag===6){if(k===null){var po=bt.stateNode;I?J(po):ze(po,bt.memoizedProps)}}else if((bt.tag!==22&&bt.tag!==23||bt.memoizedState===null||bt===C)&&bt.child!==null){bt.child.return=bt,bt=bt.child;continue}if(bt===C)break;for(;bt.sibling===null;){if(bt.return===null||bt.return===C)break e;k===bt&&(k=null),bt=bt.return}k===bt&&(k=null),bt.sibling.return=bt.return,bt=bt.sibling}}if(Ot&&!bn&&b.mode&1){Ke=b;for(var ce=b.child;ce!==null;){for(b=Ke=ce;Ke!==null;){C=Ke;var ie=C.child;switch(C.tag){case 0:case 11:case 14:case 15:Ml(4,C,C.return);break;case 1:am(C,C.return);var fe=C.stateNode;if(typeof fe.componentWillUnmount=="function"){var Qe=C.return;try{fe.props=C.memoizedProps,fe.state=C.memoizedState,fe.componentWillUnmount()}catch(xt){xr(C,Qe,xt)}}break;case 5:am(C,C.return);break;case 22:if(C.memoizedState!==null){y2(b);continue}}ie!==null?(ie.return=C,Ke=ie):y2(b)}ce=ce.sibling}}}switch(te&4102){case 2:p2(p),p.flags&=-3;break;case 6:p2(p),p.flags&=-3,x1(p.alternate,p);break;case 4096:p.flags&=-4097;break;case 4100:p.flags&=-4097,x1(p.alternate,p);break;case 4:x1(p.alternate,p)}}catch(xt){xr(p,p.return,xt)}if(b=p.sibling,b!==null){b.return=p.return,Ke=b;break}Ke=p.return}}}function BB(h,p,b){Ke=h,g2(h)}function g2(h,p,b){for(var C=(h.mode&1)!==0;Ke!==null;){var I=Ke,k=I.child;if(I.tag===22&&C){var j=I.memoizedState!==null||sm;if(!j){var te=I.alternate,ye=te!==null&&te.memoizedState!==null||Sl;te=sm;var Oe=Sl;if(sm=j,(Sl=ye)&&!Oe)for(Ke=I;Ke!==null;)j=Ke,ye=j.child,j.tag===22&&j.memoizedState!==null?x2(I):ye!==null?(ye.return=j,Ke=ye):x2(I);for(;k!==null;)Ke=k,g2(k),k=k.sibling;Ke=I,sm=te,Sl=Oe}v2(h)}else I.subtreeFlags&8772&&k!==null?(k.return=I,Ke=k):v2(h)}}function v2(h){for(;Ke!==null;){var p=Ke;if(p.flags&8772){var b=p.alternate;try{if(p.flags&8772)switch(p.tag){case 0:case 11:case 15:Sl||ih(5,p);break;case 1:var C=p.stateNode;if(p.flags&4&&!Sl)if(b===null)C.componentDidMount();else{var I=p.elementType===p.type?b.memoizedProps:Do(p.type,b.memoizedProps);C.componentDidUpdate(I,b.memoizedState,C.__reactInternalSnapshotBeforeUpdate)}var k=p.updateQueue;k!==null&&dE(p,k,C);break;case 3:var j=p.updateQueue;if(j!==null){if(b=null,p.child!==null)switch(p.child.tag){case 5:b=G(p.child.stateNode);break;case 1:b=p.child.stateNode}dE(p,j,b)}break;case 5:var te=p.stateNode;b===null&&p.flags&4&&ut(te,p.type,p.memoizedProps,p);break;case 6:break;case 4:break;case 12:break;case 13:if(Re&&p.memoizedState===null){var ye=p.alternate;if(ye!==null){var Oe=ye.memoizedState;if(Oe!==null){var ct=Oe.dehydrated;ct!==null&&Lp(ct)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(s(163))}Sl||p.flags&512&&g1(p)}catch(Ot){xr(p,p.return,Ot)}}if(p===h){Ke=null;break}if(b=p.sibling,b!==null){b.return=p.return,Ke=b;break}Ke=p.return}}function y2(h){for(;Ke!==null;){var p=Ke;if(p===h){Ke=null;break}var b=p.sibling;if(b!==null){b.return=p.return,Ke=b;break}Ke=p.return}}function x2(h){for(;Ke!==null;){var p=Ke;try{switch(p.tag){case 0:case 11:case 15:var b=p.return;try{ih(4,p)}catch(ye){xr(p,b,ye)}break;case 1:var C=p.stateNode;if(typeof C.componentDidMount=="function"){var I=p.return;try{C.componentDidMount()}catch(ye){xr(p,I,ye)}}var k=p.return;try{g1(p)}catch(ye){xr(p,k,ye)}break;case 5:var j=p.return;try{g1(p)}catch(ye){xr(p,j,ye)}}}catch(ye){xr(p,p.return,ye)}if(p===h){Ke=null;break}var te=p.sibling;if(te!==null){te.return=p.return,Ke=te;break}Ke=p.return}}var cm=0,um=1,dm=2,hm=3,fm=4;if(typeof Symbol=="function"&&Symbol.for){var rh=Symbol.for;cm=rh("selector.component"),um=rh("selector.has_pseudo_class"),dm=rh("selector.role"),hm=rh("selector.test_id"),fm=rh("selector.text")}function w1(h){var p=le(h);if(p!=null){if(typeof p.memoizedProps["data-testname"]!="string")throw Error(s(364));return p}if(h=_t(h),h===null)throw Error(s(362));return h.stateNode.current}function _1(h,p){switch(p.$$typeof){case cm:if(h.type===p.value)return!0;break;case um:e:{p=p.value,h=[h,0];for(var b=0;b<h.length;){var C=h[b++],I=h[b++],k=p[I];if(C.tag!==5||!L(C)){for(;k!=null&&_1(C,k);)I++,k=p[I];if(I===p.length){p=!0;break e}else for(C=C.child;C!==null;)h.push(C,I),C=C.sibling}}p=!1}return p;case dm:if(h.tag===5&&Q(h.stateNode,p.value))return!0;break;case fm:if((h.tag===5||h.tag===6)&&(h=B(h),h!==null&&0<=h.indexOf(p.value)))return!0;break;case hm:if(h.tag===5&&(h=h.memoizedProps["data-testname"],typeof h=="string"&&h.toLowerCase()===p.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function b1(h){switch(h.$$typeof){case cm:return"<"+(P(h.value)||"Unknown")+">";case um:return":has("+(b1(h)||"")+")";case dm:return'[role="'+h.value+'"]';case fm:return'"'+h.value+'"';case hm:return'[data-testname="'+h.value+'"]';default:throw Error(s(365))}}function w2(h,p){var b=[];h=[h,0];for(var C=0;C<h.length;){var I=h[C++],k=h[C++],j=p[k];if(I.tag!==5||!L(I)){for(;j!=null&&_1(I,j);)k++,j=p[k];if(k===p.length)b.push(I);else for(I=I.child;I!==null;)h.push(I,k),I=I.sibling}}return b}function S1(h,p){if(!$e)throw Error(s(363));h=w1(h),h=w2(h,p),p=[],h=Array.from(h);for(var b=0;b<h.length;){var C=h[b++];if(C.tag===5)L(C)||p.push(C.stateNode);else for(C=C.child;C!==null;)h.push(C),C=C.sibling}return p}var HB=Math.ceil,pm=a.ReactCurrentDispatcher,M1=a.ReactCurrentOwner,Qn=a.ReactCurrentBatchConfig,jt=0,ai=null,li=null,Di=0,Vr=0,Zc=Ye(0),mi=0,oh=null,Kc=0,mm=0,C1=0,sh=null,vr=null,E1=0,T1=1/0;function Qc(){T1=Mi()+500}var gm=!1,A1=null,va=null,vm=!1,ya=null,ym=0,ah=0,I1=null,xm=-1,wm=0;function rr(){return jt&6?Mi():xm!==-1?xm:xm=Mi()}function xa(h){return h.mode&1?jt&2&&Di!==0?Di&-Di:SB.transition!==null?(wm===0&&(h=cn,cn<<=1,!(cn&4194240)&&(cn=64),wm=h),wm):(h=sn,h!==0?h:ve()):1}function ho(h,p,b){if(50<ah)throw ah=0,I1=null,Error(s(185));var C=_m(h,p);return C===null?null:(Wd(C,p,b),(!(jt&2)||C!==ai)&&(C===ai&&(!(jt&2)&&(mm|=p),mi===4&&wa(C,Di)),yr(C,b),p===1&&jt===0&&!(h.mode&1)&&(Qc(),Op&&es())),C)}function _m(h,p){h.lanes|=p;var b=h.alternate;for(b!==null&&(b.lanes|=p),b=h,h=h.return;h!==null;)h.childLanes|=p,b=h.alternate,b!==null&&(b.childLanes|=p),b=h,h=h.return;return b.tag===3?b.stateNode:null}function yr(h,p){var b=h.callbackNode;$d(h,p);var C=si(h,h===ai?Di:0);if(C===0)b!==null&&sE(b),h.callbackNode=null,h.callbackPriority=0;else if(p=C&-C,h.callbackPriority!==p){if(b!=null&&sE(b),p===1)h.tag===0?bB(b2.bind(null,h)):aE(b2.bind(null,h)),V?mt(function(){jt===0&&es()}):Ox(Fx,es),b=null;else{switch(oE(C)){case 1:b=Fx;break;case 4:b=yB;break;case 16:b=Ux;break;case 536870912:b=xB;break;default:b=Ux}b=R2(b,_2.bind(null,h))}h.callbackPriority=p,h.callbackNode=b}}function _2(h,p){if(xm=-1,wm=0,jt&6)throw Error(s(327));var b=h.callbackNode;if(Tl()&&h.callbackNode!==b)return null;var C=si(h,h===ai?Di:0);if(C===0)return null;if(C&30||C&h.expiredLanes||p)p=bm(h,C);else{p=C;var I=jt;jt|=2;var k=C2();(ai!==h||Di!==p)&&(Qc(),Cl(h,p));do try{WB();break}catch(te){M2(h,te)}while(!0);Vx(),pm.current=k,jt=I,li!==null?p=0:(ai=null,Di=0,p=mi)}if(p!==0){if(p===2&&(I=Ro(h),I!==0&&(C=I,p=P1(h,I))),p===1)throw b=oh,Cl(h,0),wa(h,C),yr(h,Mi()),b;if(p===6)wa(h,C);else{if(I=h.current.alternate,!(C&30)&&!VB(I)&&(p=bm(h,C),p===2&&(k=Ro(h),k!==0&&(C=k,p=P1(h,k))),p===1))throw b=oh,Cl(h,0),wa(h,C),yr(h,Mi()),b;switch(h.finishedWork=I,h.finishedLanes=C,p){case 0:case 1:throw Error(s(345));case 2:El(h,vr);break;case 3:if(wa(h,C),(C&130023424)===C&&(p=E1+500-Mi(),10<p)){if(si(h,0)!==0)break;if(I=h.suspendedLanes,(I&C)!==C){rr(),h.pingedLanes|=h.suspendedLanes&I;break}h.timeoutHandle=me(El.bind(null,h,vr),p);break}El(h,vr);break;case 4:if(wa(h,C),(C&4194240)===C)break;for(p=h.eventTimes,I=-1;0<C;){var j=31-En(C);k=1<<j,j=p[j],j>I&&(I=j),C&=~k}if(C=I,C=Mi()-C,C=(120>C?120:480>C?480:1080>C?1080:1920>C?1920:3e3>C?3e3:4320>C?4320:1960*HB(C/1960))-C,10<C){h.timeoutHandle=me(El.bind(null,h,vr),C);break}El(h,vr);break;case 5:El(h,vr);break;default:throw Error(s(329))}}}return yr(h,Mi()),h.callbackNode===b?_2.bind(null,h):null}function P1(h,p){var b=sh;return h.current.memoizedState.isDehydrated&&(Cl(h,p).flags|=256),h=bm(h,p),h!==2&&(p=vr,vr=b,p!==null&&R1(p)),h}function R1(h){vr===null?vr=h:vr.push.apply(vr,h)}function VB(h){for(var p=h;;){if(p.flags&16384){var b=p.updateQueue;if(b!==null&&(b=b.stores,b!==null))for(var C=0;C<b.length;C++){var I=b[C],k=I.getSnapshot;I=I.value;try{if(!Jo(k(),I))return!1}catch{return!1}}}if(b=p.child,p.subtreeFlags&16384&&b!==null)b.return=p,p=b;else{if(p===h)break;for(;p.sibling===null;){if(p.return===null||p.return===h)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function wa(h,p){for(p&=~C1,p&=~mm,h.suspendedLanes|=p,h.pingedLanes&=~p,h=h.expirationTimes;0<p;){var b=31-En(p),C=1<<b;h[b]=-1,p&=~C}}function b2(h){if(jt&6)throw Error(s(327));Tl();var p=si(h,0);if(!(p&1))return yr(h,Mi()),null;var b=bm(h,p);if(h.tag!==0&&b===2){var C=Ro(h);C!==0&&(p=C,b=P1(h,C))}if(b===1)throw b=oh,Cl(h,0),wa(h,p),yr(h,Mi()),b;if(b===6)throw Error(s(345));return h.finishedWork=h.current.alternate,h.finishedLanes=p,El(h,vr),yr(h,Mi()),null}function S2(h){ya!==null&&ya.tag===0&&!(jt&6)&&Tl();var p=jt;jt|=1;var b=Qn.transition,C=sn;try{if(Qn.transition=null,sn=1,h)return h()}finally{sn=C,Qn.transition=b,jt=p,!(jt&6)&&es()}}function D1(){Vr=Zc.current,Te(Zc)}function Cl(h,p){h.finishedWork=null,h.finishedLanes=0;var b=h.timeoutHandle;if(b!==tt&&(h.timeoutHandle=tt,Fe(b)),li!==null)for(b=li.return;b!==null;){var C=b;switch(Yx(C),C.tag){case 1:C=C.type.childContextTypes,C!=null&&_n();break;case 3:Xc(),Te(nt),Te(lt),n1();break;case 5:e1(C);break;case 4:Xc();break;case 13:Te(Bn);break;case 19:Te(Bn);break;case 10:$x(C.type._context);break;case 22:case 23:D1()}b=b.return}if(ai=h,li=h=_a(h.current,null),Di=Vr=p,mi=0,oh=null,C1=mm=Kc=0,vr=sh=null,ts!==null){for(p=0;p<ts.length;p++)if(b=ts[p],C=b.interleaved,C!==null){b.interleaved=null;var I=C.next,k=b.pending;if(k!==null){var j=k.next;k.next=I,C.next=j}b.pending=C}ts=null}return h}function M2(h,p){do{var b=li;try{if(Vx(),Xp.current=em,Yp){for(var C=qn.memoizedState;C!==null;){var I=C.queue;I!==null&&(I.pending=null),C=C.next}Yp=!1}if(Yc=0,Ci=Ui=qn=null,Zd=!1,Kd=0,M1.current=null,b===null||b.return===null){mi=1,oh=p,li=null;break}e:{var k=h,j=b.return,te=b,ye=p;if(p=Di,te.flags|=32768,ye!==null&&typeof ye=="object"&&typeof ye.then=="function"){var Oe=ye,ct=te,Ot=ct.tag;if(!(ct.mode&1)&&(Ot===0||Ot===11||Ot===15)){var Et=ct.alternate;Et?(ct.updateQueue=Et.updateQueue,ct.memoizedState=Et.memoizedState,ct.lanes=Et.lanes):(ct.updateQueue=null,ct.memoizedState=null)}var bn=GE(j);if(bn!==null){bn.flags&=-257,jE(bn,j,te,k,p),bn.mode&1&&WE(k,Oe,p),p=bn,ye=Oe;var bt=p.updateQueue;if(bt===null){var Vi=new Set;Vi.add(ye),p.updateQueue=Vi}else bt.add(ye);break e}else{if(!(p&1)){WE(k,Oe,p),k1();break e}ye=Error(s(426))}}else if(zn&&te.mode&1){var po=GE(j);if(po!==null){!(po.flags&65536)&&(po.flags|=256),jE(po,j,te,k,p),Qx(ye);break e}}k=ye,mi!==4&&(mi=2),sh===null?sh=[k]:sh.push(k),ye=c1(ye,te),te=j;do{switch(te.tag){case 3:te.flags|=65536,p&=-p,te.lanes|=p;var ce=VE(te,ye,p);uE(te,ce);break e;case 1:k=ye;var ie=te.type,fe=te.stateNode;if(!(te.flags&128)&&(typeof ie.getDerivedStateFromError=="function"||fe!==null&&typeof fe.componentDidCatch=="function"&&(va===null||!va.has(fe)))){te.flags|=65536,p&=-p,te.lanes|=p;var Qe=$E(te,k,p);uE(te,Qe);break e}}te=te.return}while(te!==null)}T2(b)}catch(xt){p=xt,li===b&&b!==null&&(li=b=b.return);continue}break}while(!0)}function C2(){var h=pm.current;return pm.current=em,h===null?em:h}function k1(){(mi===0||mi===3||mi===2)&&(mi=4),ai===null||!(Kc&268435455)&&!(mm&268435455)||wa(ai,Di)}function bm(h,p){var b=jt;jt|=2;var C=C2();ai===h&&Di===p||Cl(h,p);do try{$B();break}catch(I){M2(h,I)}while(!0);if(Vx(),jt=b,pm.current=C,li!==null)throw Error(s(261));return ai=null,Di=0,mi}function $B(){for(;li!==null;)E2(li)}function WB(){for(;li!==null&&!gB();)E2(li)}function E2(h){var p=P2(h.alternate,h,Vr);h.memoizedProps=h.pendingProps,p===null?T2(h):li=p,M1.current=null}function T2(h){var p=h;do{var b=p.alternate;if(h=p.return,p.flags&32768){if(b=zB(b,p),b!==null){b.flags&=32767,li=b;return}if(h!==null)h.flags|=32768,h.subtreeFlags=0,h.deletions=null;else{mi=6,li=null;return}}else if(b=kB(b,p,Vr),b!==null){li=b;return}if(p=p.sibling,p!==null){li=p;return}li=p=h}while(p!==null);mi===0&&(mi=5)}function El(h,p){var b=sn,C=Qn.transition;try{Qn.transition=null,sn=1,GB(h,p,b)}finally{Qn.transition=C,sn=b}return null}function GB(h,p,b){do Tl();while(ya!==null);if(jt&6)throw Error(s(327));var C=h.finishedWork,I=h.finishedLanes;if(C===null)return null;if(h.finishedWork=null,h.finishedLanes=0,C===h.current)throw Error(s(177));h.callbackNode=null,h.callbackPriority=0;var k=C.lanes|C.childLanes;if(mB(h,k),h===ai&&(li=ai=null,Di=0),!(C.subtreeFlags&2064)&&!(C.flags&2064)||vm||(vm=!0,R2(Ux,function(){return Tl(),null})),k=(C.flags&15990)!==0,C.subtreeFlags&15990||k){k=Qn.transition,Qn.transition=null;var j=sn;sn=1;var te=jt;jt|=4,M1.current=null,FB(h,C),UB(h,C),X(h.containerInfo),h.current=C,BB(C),vB(),jt=te,sn=j,Qn.transition=k}else h.current=C;if(vm&&(vm=!1,ya=h,ym=I),k=h.pendingLanes,k===0&&(va=null),wB(C.stateNode),yr(h,Mi()),p!==null)for(b=h.onRecoverableError,C=0;C<p.length;C++)b(p[C]);if(gm)throw gm=!1,h=A1,A1=null,h;return ym&1&&h.tag!==0&&Tl(),k=h.pendingLanes,k&1?h===I1?ah++:(ah=0,I1=h):ah=0,es(),null}function Tl(){if(ya!==null){var h=oE(ym),p=Qn.transition,b=sn;try{if(Qn.transition=null,sn=16>h?16:h,ya===null)var C=!1;else{if(h=ya,ya=null,ym=0,jt&6)throw Error(s(331));var I=jt;for(jt|=4,Ke=h.current;Ke!==null;){var k=Ke,j=k.child;if(Ke.flags&16){var te=k.deletions;if(te!==null){for(var ye=0;ye<te.length;ye++){var Oe=te[ye];for(Ke=Oe;Ke!==null;){var ct=Ke;switch(ct.tag){case 0:case 11:case 15:Ml(8,ct,k)}var Ot=ct.child;if(Ot!==null)Ot.return=ct,Ke=Ot;else for(;Ke!==null;){ct=Ke;var Et=ct.sibling,bn=ct.return;if(d2(ct),ct===Oe){Ke=null;break}if(Et!==null){Et.return=bn,Ke=Et;break}Ke=bn}}}var bt=k.alternate;if(bt!==null){var Vi=bt.child;if(Vi!==null){bt.child=null;do{var po=Vi.sibling;Vi.sibling=null,Vi=po}while(Vi!==null)}}Ke=k}}if(k.subtreeFlags&2064&&j!==null)j.return=k,Ke=j;else e:for(;Ke!==null;){if(k=Ke,k.flags&2048)switch(k.tag){case 0:case 11:case 15:Ml(9,k,k.return)}var ce=k.sibling;if(ce!==null){ce.return=k.return,Ke=ce;break e}Ke=k.return}}var ie=h.current;for(Ke=ie;Ke!==null;){j=Ke;var fe=j.child;if(j.subtreeFlags&2064&&fe!==null)fe.return=j,Ke=fe;else e:for(j=ie;Ke!==null;){if(te=Ke,te.flags&2048)try{switch(te.tag){case 0:case 11:case 15:ih(9,te)}}catch(xt){xr(te,te.return,xt)}if(te===j){Ke=null;break e}var Qe=te.sibling;if(Qe!==null){Qe.return=te.return,Ke=Qe;break e}Ke=te.return}}if(jt=I,es(),Qo&&typeof Qo.onPostCommitFiberRoot=="function")try{Qo.onPostCommitFiberRoot(zp,h)}catch{}C=!0}return C}finally{sn=b,Qn.transition=p}}return!1}function A2(h,p,b){p=c1(b,p),p=VE(h,p,1),ga(h,p),p=rr(),h=_m(h,1),h!==null&&(Wd(h,1,p),yr(h,p))}function xr(h,p,b){if(h.tag===3)A2(h,h,b);else for(;p!==null;){if(p.tag===3){A2(p,h,b);break}else if(p.tag===1){var C=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof C.componentDidCatch=="function"&&(va===null||!va.has(C))){h=c1(b,h),h=$E(p,h,1),ga(p,h),h=rr(),p=_m(p,1),p!==null&&(Wd(p,1,h),yr(p,h));break}}p=p.return}}function jB(h,p,b){var C=h.pingCache;C!==null&&C.delete(p),p=rr(),h.pingedLanes|=h.suspendedLanes&b,ai===h&&(Di&b)===b&&(mi===4||mi===3&&(Di&130023424)===Di&&500>Mi()-E1?Cl(h,0):C1|=b),yr(h,p)}function I2(h,p){p===0&&(h.mode&1?(p=pi,pi<<=1,!(pi&130023424)&&(pi=4194304)):p=1);var b=rr();h=_m(h,p),h!==null&&(Wd(h,p,b),yr(h,b))}function qB(h){var p=h.memoizedState,b=0;p!==null&&(b=p.retryLane),I2(h,b)}function XB(h,p){var b=0;switch(h.tag){case 13:var C=h.stateNode,I=h.memoizedState;I!==null&&(b=I.retryLane);break;case 19:C=h.stateNode;break;default:throw Error(s(314))}C!==null&&C.delete(p),I2(h,b)}var P2;P2=function(h,p,b){if(h!==null)if(h.memoizedProps!==p.pendingProps||nt.current)Hr=!0;else{if(!(h.lanes&b)&&!(p.flags&128))return Hr=!1,LB(h,p,b);Hr=!!(h.flags&131072)}else Hr=!1,zn&&p.flags&1048576&&gE(p,Gp,p.index);switch(p.lanes=0,p.tag){case 2:var C=p.type;h!==null&&(h.alternate=null,p.alternate=null,p.flags|=2),h=p.pendingProps;var I=Kt(p,lt.current);Vc(p,b),I=r1(null,p,C,h,I,b);var k=o1();return p.flags|=1,typeof I=="object"&&I!==null&&typeof I.render=="function"&&I.$$typeof===void 0?(p.tag=1,p.memoizedState=null,p.updateQueue=null,Yt(C)?(k=!0,en(p)):k=!1,p.memoizedState=I.state!==null&&I.state!==void 0?I.state:null,Gx(p),I.updater=$p,p.stateNode=I,I._reactInternals=p,qx(p,C,h,b),p=h1(null,p,C,!0,k,b)):(p.tag=0,zn&&k&&Xx(p),ir(null,p,I,b),p=p.child),p;case 16:C=p.elementType;e:{switch(h!==null&&(h.alternate=null,p.alternate=null,p.flags|=2),h=p.pendingProps,I=C._init,C=I(C._payload),p.type=C,I=p.tag=ZB(C),h=Do(C,h),I){case 0:p=d1(null,p,C,h,b);break e;case 1:p=e2(null,p,C,h,b);break e;case 11:p=YE(null,p,C,h,b);break e;case 14:p=ZE(null,p,C,Do(C.type,h),b);break e}throw Error(s(306,C,""))}return p;case 0:return C=p.type,I=p.pendingProps,I=p.elementType===C?I:Do(C,I),d1(h,p,C,I,b);case 1:return C=p.type,I=p.pendingProps,I=p.elementType===C?I:Do(C,I),e2(h,p,C,I,b);case 3:e:{if(t2(p),h===null)throw Error(s(387));C=p.pendingProps,k=p.memoizedState,I=k.element,cE(h,p),Vp(p,C,null,b);var j=p.memoizedState;if(C=j.element,Re&&k.isDehydrated)if(k={element:C,isDehydrated:!1,cache:j.cache,transitions:j.transitions},p.updateQueue.baseState=k,p.memoizedState=k,p.flags&256){I=Error(s(423)),p=n2(h,p,C,b,I);break e}else if(C!==I){I=Error(s(424)),p=n2(h,p,C,b,I);break e}else for(Re&&(Br=Bd(p.stateNode.containerInfo),Ur=p,zn=!0,ko=null,Gd=!1),b=bE(p,null,C,b),p.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling;else{if(Gc(),C===I){p=Os(h,p,b);break e}ir(h,p,C,b)}p=p.child}return p;case 5:return SE(p),h===null&&Kx(p),C=p.type,I=p.pendingProps,k=h!==null?h.memoizedProps:null,j=I.children,it(C,I)?j=null:k!==null&&it(C,k)&&(p.flags|=32),JE(h,p),ir(h,p,j,b),p.child;case 6:return h===null&&Kx(p),null;case 13:return i2(h,p,b);case 4:return Jx(p,p.stateNode.containerInfo),C=p.pendingProps,h===null?p.child=jc(p,null,C,b):ir(h,p,C,b),p.child;case 11:return C=p.type,I=p.pendingProps,I=p.elementType===C?I:Do(C,I),YE(h,p,C,I,b);case 7:return ir(h,p,p.pendingProps,b),p.child;case 8:return ir(h,p,p.pendingProps.children,b),p.child;case 12:return ir(h,p,p.pendingProps.children,b),p.child;case 10:e:{if(C=p.type._context,I=p.pendingProps,k=p.memoizedProps,j=I.value,lE(p,C,j),k!==null)if(Jo(k.value,j)){if(k.children===I.children&&!nt.current){p=Os(h,p,b);break e}}else for(k=p.child,k!==null&&(k.return=p);k!==null;){var te=k.dependencies;if(te!==null){j=k.child;for(var ye=te.firstContext;ye!==null;){if(ye.context===C){if(k.tag===1){ye=ks(-1,b&-b),ye.tag=2;var Oe=k.updateQueue;if(Oe!==null){Oe=Oe.shared;var ct=Oe.pending;ct===null?ye.next=ye:(ye.next=ct.next,ct.next=ye),Oe.pending=ye}}k.lanes|=b,ye=k.alternate,ye!==null&&(ye.lanes|=b),Wx(k.return,b,p),te.lanes|=b;break}ye=ye.next}}else if(k.tag===10)j=k.type===p.type?null:k.child;else if(k.tag===18){if(j=k.return,j===null)throw Error(s(341));j.lanes|=b,te=j.alternate,te!==null&&(te.lanes|=b),Wx(j,b,p),j=k.sibling}else j=k.child;if(j!==null)j.return=k;else for(j=k;j!==null;){if(j===p){j=null;break}if(k=j.sibling,k!==null){k.return=j.return,j=k;break}j=j.return}k=j}ir(h,p,I.children,b),p=p.child}return p;case 9:return I=p.type,C=p.pendingProps.children,Vc(p,b),I=so(I),C=C(I),p.flags|=1,ir(h,p,C,b),p.child;case 14:return C=p.type,I=Do(C,p.pendingProps),I=Do(C.type,I),ZE(h,p,C,I,b);case 15:return KE(h,p,p.type,p.pendingProps,b);case 17:return C=p.type,I=p.pendingProps,I=p.elementType===C?I:Do(C,I),h!==null&&(h.alternate=null,p.alternate=null,p.flags|=2),p.tag=1,Yt(C)?(h=!0,en(p)):h=!1,Vc(p,b),pE(p,C,I),qx(p,C,I,b),h1(null,p,C,!0,h,b);case 19:return a2(h,p,b);case 22:return QE(h,p,b)}throw Error(s(156,p.tag))};function R2(h,p){return Ox(h,p)}function YB(h,p,b,C){this.tag=h,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fo(h,p,b,C){return new YB(h,p,b,C)}function N1(h){return h=h.prototype,!(!h||!h.isReactComponent)}function ZB(h){if(typeof h=="function")return N1(h)?1:0;if(h!=null){if(h=h.$$typeof,h===y)return 11;if(h===w)return 14}return 2}function _a(h,p){var b=h.alternate;return b===null?(b=fo(h.tag,p,h.key,h.mode),b.elementType=h.elementType,b.type=h.type,b.stateNode=h.stateNode,b.alternate=h,h.alternate=b):(b.pendingProps=p,b.type=h.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=h.flags&14680064,b.childLanes=h.childLanes,b.lanes=h.lanes,b.child=h.child,b.memoizedProps=h.memoizedProps,b.memoizedState=h.memoizedState,b.updateQueue=h.updateQueue,p=h.dependencies,b.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},b.sibling=h.sibling,b.index=h.index,b.ref=h.ref,b}function Sm(h,p,b,C,I,k){var j=2;if(C=h,typeof h=="function")N1(h)&&(j=1);else if(typeof h=="string")j=5;else e:switch(h){case u:return Al(b.children,I,k,p);case d:j=8,I|=8;break;case f:return h=fo(12,b,p,I|2),h.elementType=f,h.lanes=k,h;case x:return h=fo(13,b,p,I),h.elementType=x,h.lanes=k,h;case v:return h=fo(19,b,p,I),h.elementType=v,h.lanes=k,h;case S:return Mm(b,I,k,p);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case m:j=10;break e;case g:j=9;break e;case y:j=11;break e;case w:j=14;break e;case _:j=16,C=null;break e}throw Error(s(130,h==null?h:typeof h,""))}return p=fo(j,b,p,I),p.elementType=h,p.type=C,p.lanes=k,p}function Al(h,p,b,C){return h=fo(7,h,C,p),h.lanes=b,h}function Mm(h,p,b,C){return h=fo(22,h,C,p),h.elementType=S,h.lanes=b,h.stateNode={},h}function L1(h,p,b){return h=fo(6,h,null,p),h.lanes=b,h}function z1(h,p,b){return p=fo(4,h.children!==null?h.children:[],h.key,p),p.lanes=b,p.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},p}function KB(h,p,b,C,I){this.tag=p,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=tt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Lx(0),this.expirationTimes=Lx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lx(0),this.identifierPrefix=C,this.onRecoverableError=I,Re&&(this.mutableSourceEagerHydrationData=null)}function D2(h,p,b,C,I,k,j,te,ye){return h=new KB(h,p,b,te,ye),p===1?(p=1,k===!0&&(p|=8)):p=0,k=fo(3,null,null,p),h.current=k,k.stateNode=h,k.memoizedState={element:C,isDehydrated:b,cache:null,transitions:null},Gx(k),h}function k2(h){if(!h)return ot;h=h._reactInternals;e:{if(A(h)!==h||h.tag!==1)throw Error(s(170));var p=h;do{switch(p.tag){case 3:p=p.stateNode.context;break e;case 1:if(Yt(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break e}}p=p.return}while(p!==null);throw Error(s(171))}if(h.tag===1){var b=h.type;if(Yt(b))return St(h,b,p)}return p}function N2(h){var p=h._reactInternals;if(p===void 0)throw typeof h.render=="function"?Error(s(188)):(h=Object.keys(h).join(","),Error(s(268,h)));return h=O(p),h===null?null:h.stateNode}function L2(h,p){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var b=h.retryLane;h.retryLane=b!==0&&b<p?b:p}}function O1(h,p){L2(h,p),(h=h.alternate)&&L2(h,p)}function QB(h){return h=O(h),h===null?null:h.stateNode}function JB(){return null}return n.attemptContinuousHydration=function(h){if(h.tag===13){var p=rr();ho(h,134217728,p),O1(h,134217728)}},n.attemptHydrationAtCurrentPriority=function(h){if(h.tag===13){var p=rr(),b=xa(h);ho(h,b,p),O1(h,b)}},n.attemptSynchronousHydration=function(h){switch(h.tag){case 3:var p=h.stateNode;if(p.current.memoizedState.isDehydrated){var b=Si(p.pendingLanes);b!==0&&(zx(p,b|1),yr(p,Mi()),!(jt&6)&&(Qc(),es()))}break;case 13:var C=rr();S2(function(){return ho(h,1,C)}),O1(h,1)}},n.batchedUpdates=function(h,p){var b=jt;jt|=1;try{return h(p)}finally{jt=b,jt===0&&(Qc(),Op&&es())}},n.createComponentSelector=function(h){return{$$typeof:cm,value:h}},n.createContainer=function(h,p,b,C,I,k,j){return D2(h,p,!1,null,b,C,I,k,j)},n.createHasPseudoClassSelector=function(h){return{$$typeof:um,value:h}},n.createHydrationContainer=function(h,p,b,C,I,k,j,te,ye){return h=D2(b,C,!0,h,I,k,j,te,ye),h.context=k2(null),b=h.current,C=rr(),I=xa(b),k=ks(C,I),k.callback=p??null,ga(b,k),h.current.lanes=I,Wd(h,I,C),yr(h,C),h},n.createPortal=function(h,p,b){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:C==null?null:""+C,children:h,containerInfo:p,implementation:b}},n.createRoleSelector=function(h){return{$$typeof:dm,value:h}},n.createTestNameSelector=function(h){return{$$typeof:hm,value:h}},n.createTextSelector=function(h){return{$$typeof:fm,value:h}},n.deferredUpdates=function(h){var p=sn,b=Qn.transition;try{return Qn.transition=null,sn=16,h()}finally{sn=p,Qn.transition=b}},n.discreteUpdates=function(h,p,b,C,I){var k=sn,j=Qn.transition;try{return Qn.transition=null,sn=1,h(p,b,C,I)}finally{sn=k,Qn.transition=j,jt===0&&Qc()}},n.findAllNodes=S1,n.findBoundingRects=function(h,p){if(!$e)throw Error(s(363));p=S1(h,p),h=[];for(var b=0;b<p.length;b++)h.push(Ne(p[b]));for(p=h.length-1;0<p;p--){b=h[p];for(var C=b.x,I=C+b.width,k=b.y,j=k+b.height,te=p-1;0<=te;te--)if(p!==te){var ye=h[te],Oe=ye.x,ct=Oe+ye.width,Ot=ye.y,Et=Ot+ye.height;if(C>=Oe&&k>=Ot&&I<=ct&&j<=Et){h.splice(p,1);break}else if(C!==Oe||b.width!==ye.width||Et<k||Ot>j){if(!(k!==Ot||b.height!==ye.height||ct<C||Oe>I)){Oe>C&&(ye.width+=Oe-C,ye.x=C),ct<I&&(ye.width=I-Oe),h.splice(p,1);break}}else{Ot>k&&(ye.height+=Ot-k,ye.y=k),Et<j&&(ye.height=j-Ot),h.splice(p,1);break}}}return h},n.findHostInstance=N2,n.findHostInstanceWithNoPortals=function(h){return h=N(h),h=h!==null?q(h):null,h===null?null:h.stateNode},n.findHostInstanceWithWarning=function(h){return N2(h)},n.flushControlled=function(h){var p=jt;jt|=1;var b=Qn.transition,C=sn;try{Qn.transition=null,sn=1,h()}finally{sn=C,Qn.transition=b,jt=p,jt===0&&(Qc(),es())}},n.flushPassiveEffects=Tl,n.flushSync=S2,n.focusWithin=function(h,p){if(!$e)throw Error(s(363));for(h=w1(h),p=w2(h,p),p=Array.from(p),h=0;h<p.length;){var b=p[h++];if(!L(b)){if(b.tag===5&&re(b.stateNode))return!0;for(b=b.child;b!==null;)p.push(b),b=b.sibling}}return!1},n.getCurrentUpdatePriority=function(){return sn},n.getFindAllNodesFailureDescription=function(h,p){if(!$e)throw Error(s(363));var b=0,C=[];h=[w1(h),0];for(var I=0;I<h.length;){var k=h[I++],j=h[I++],te=p[j];if((k.tag!==5||!L(k))&&(_1(k,te)&&(C.push(b1(te)),j++,j>b&&(b=j)),j<p.length))for(k=k.child;k!==null;)h.push(k,j),k=k.sibling}if(b<p.length){for(h=[];b<p.length;b++)h.push(b1(p[b]));return`findAllNodes was able to match part of the selector:
  `+(C.join(" > ")+`

No matching component was found for:
  `)+h.join(" > ")}return null},n.getPublicRootInstance=function(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 5:return G(h.child.stateNode);default:return h.child.stateNode}},n.injectIntoDevTools=function(h){if(h={bundleType:h.bundleType,version:h.version,rendererPackageName:h.rendererPackageName,rendererConfig:h.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:QB,findFiberByHostInstance:h.findFiberByHostInstance||JB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")h=!1;else{var p=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(p.isDisabled||!p.supportsFiber)h=!0;else{try{zp=p.inject(h),Qo=p}catch{}h=!!p.checkDCE}}return h},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(h,p,b,C){if(!$e)throw Error(s(363));h=S1(h,p);var I=Se(h,b,C).disconnect;return{disconnect:function(){I()}}},n.registerMutableSourceForHydration=function(h,p){var b=p._getVersion;b=b(p._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[p,b]:h.mutableSourceEagerHydrationData.push(p,b)},n.runWithPriority=function(h,p){var b=sn;try{return sn=h,p()}finally{sn=b}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(h,p,b,C){var I=p.current,k=rr(),j=xa(I);return b=k2(b),p.context===null?p.context=b:p.pendingContext=b,p=ks(k,j),p.payload={element:h},C=C===void 0?null:C,C!==null&&(p.callback=C),ga(I,p),h=ho(I,j,k),h!==null&&Hp(h,I,j),j},n};Y5.exports=uie;var die=Y5.exports;const hie=vS(die);var Z5={exports:{}},K5={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,$){var X=z.length;z.push($);e:for(;0<X;){var K=X-1>>>1,oe=z[K];if(0<r(oe,$))z[K]=$,z[X]=oe,X=K;else break e}}function n(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var $=z[0],X=z.pop();if(X!==$){z[0]=X;e:for(var K=0,oe=z.length,pe=oe>>>1;K<pe;){var be=2*(K+1)-1,it=z[be],ae=be+1,me=z[ae];if(0>r(it,X))ae<oe&&0>r(me,it)?(z[K]=me,z[ae]=X,K=ae):(z[K]=it,z[be]=X,K=be);else if(ae<oe&&0>r(me,X))z[K]=me,z[ae]=X,K=ae;else break e}}return $}function r(z,$){var X=z.sortIndex-$.sortIndex;return X!==0?X:z.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var l=[],c=[],u=1,d=null,f=3,m=!1,g=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(z){for(var $=n(c);$!==null;){if($.callback===null)i(c);else if($.startTime<=z)i(c),$.sortIndex=$.expirationTime,e(l,$);else break;$=n(c)}}function S(z){if(y=!1,_(z),!g)if(n(l)!==null)g=!0,G(E);else{var $=n(c);$!==null&&Y(S,$.startTime-z)}}function E(z,$){g=!1,y&&(y=!1,v(D),D=-1),m=!0;var X=f;try{for(_($),d=n(l);d!==null&&(!(d.expirationTime>$)||z&&!N());){var K=d.callback;if(typeof K=="function"){d.callback=null,f=d.priorityLevel;var oe=K(d.expirationTime<=$);$=t.unstable_now(),typeof oe=="function"?d.callback=oe:d===n(l)&&i(l),_($)}else i(l);d=n(l)}if(d!==null)var pe=!0;else{var be=n(c);be!==null&&Y(S,be.startTime-$),pe=!1}return pe}finally{d=null,f=X,m=!1}}var T=!1,P=null,D=-1,A=5,R=-1;function N(){return!(t.unstable_now()-R<A)}function O(){if(P!==null){var z=t.unstable_now();R=z;var $=!0;try{$=P(!0,z)}finally{$?H():(T=!1,P=null)}}else T=!1}var H;if(typeof w=="function")H=function(){w(O)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,Z=q.port2;q.port1.onmessage=O,H=function(){Z.postMessage(null)}}else H=function(){x(O,0)};function G(z){P=z,T||(T=!0,H())}function Y(z,$){D=x(function(){z(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){g||m||(g=!0,G(E))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(z){switch(f){case 1:case 2:case 3:var $=3;break;default:$=f}var X=f;f=$;try{return z()}finally{f=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,$){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var X=f;f=z;try{return $()}finally{f=X}},t.unstable_scheduleCallback=function(z,$,X){var K=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?K+X:K):X=K,z){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=X+oe,z={id:u++,callback:$,priorityLevel:z,startTime:X,expirationTime:oe,sortIndex:-1},X>K?(z.sortIndex=X,e(c,z),n(l)===null&&z===n(c)&&(y?(v(D),D=-1):y=!0,Y(S,X-K))):(z.sortIndex=oe,e(l,z),g||m||(g=!0,G(E))),z},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(z){var $=f;return function(){var X=f;f=$;try{return z.apply(this,arguments)}finally{f=X}}}})(K5);Z5.exports=K5;var uD=Z5.exports;const iE={},fie=t=>void Object.assign(iE,t);function pie(t,e){function n(u,{args:d=[],attach:f,...m},g){let y=`${u[0].toUpperCase()}${u.slice(1)}`,x;if(u==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const v=m.object;x=Eu(v,{type:u,root:g,attach:f,primitive:!0})}else{const v=iE[y];if(!v)throw new Error(`R3F: ${y} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(d))throw new Error("R3F: The args prop must be an array!");x=Eu(new v(...d),{type:u,root:g,attach:f,memoizedProps:{args:d}})}return x.__r3f.attach===void 0&&(x.isBufferGeometry?x.__r3f.attach="geometry":x.isMaterial&&(x.__r3f.attach="material")),y!=="inject"&&S_(x,m),x}function i(u,d){let f=!1;if(d){var m,g;(m=d.__r3f)!=null&&m.attach?b_(u,d,d.__r3f.attach):d.isObject3D&&u.isObject3D&&(u.add(d),f=!0),f||(g=u.__r3f)==null||g.objects.push(d),d.__r3f||Eu(d,{}),d.__r3f.parent=u,gS(d),Tu(d)}}function r(u,d,f){let m=!1;if(d){var g,y;if((g=d.__r3f)!=null&&g.attach)b_(u,d,d.__r3f.attach);else if(d.isObject3D&&u.isObject3D){d.parent=u,d.dispatchEvent({type:"added"}),u.dispatchEvent({type:"childadded",child:d});const x=u.children.filter(w=>w!==d),v=x.indexOf(f);u.children=[...x.slice(0,v),d,...x.slice(v)],m=!0}m||(y=u.__r3f)==null||y.objects.push(d),d.__r3f||Eu(d,{}),d.__r3f.parent=u,gS(d),Tu(d)}}function o(u,d,f=!1){u&&[...u].forEach(m=>s(d,m,f))}function s(u,d,f){if(d){var m,g,y;if(d.__r3f&&(d.__r3f.parent=null),(m=u.__r3f)!=null&&m.objects&&(u.__r3f.objects=u.__r3f.objects.filter(S=>S!==d)),(g=d.__r3f)!=null&&g.attach)mD(u,d,d.__r3f.attach);else if(d.isObject3D&&u.isObject3D){var x;u.remove(d),(x=d.__r3f)!=null&&x.root&&bie(bv(d),d)}const w=(y=d.__r3f)==null?void 0:y.primitive,_=!w&&(f===void 0?d.dispose!==null:f);if(!w){var v;o((v=d.__r3f)==null?void 0:v.objects,d,_),o(d.children,d,_)}if(delete d.__r3f,_&&d.dispose&&d.type!=="Scene"){const S=()=>{try{d.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?uD.unstable_scheduleCallback(uD.unstable_IdlePriority,S):S()}Tu(u)}}function a(u,d,f,m){var g;const y=(g=u.__r3f)==null?void 0:g.parent;if(!y)return;const x=n(d,f,u.__r3f.root);if(u.children){for(const v of u.children)v.__r3f&&i(x,v);u.children=u.children.filter(v=>!v.__r3f)}u.__r3f.objects.forEach(v=>i(x,v)),u.__r3f.objects=[],u.__r3f.autoRemovedBeforeAppend||s(y,u),x.parent&&(x.__r3f.autoRemovedBeforeAppend=!0),i(y,x),x.raycast&&x.__r3f.eventCount&&bv(x).getState().internal.interaction.push(x),[m,m.alternate].forEach(v=>{v!==null&&(v.stateNode=x,v.ref&&(typeof v.ref=="function"?v.ref(x):v.ref.current=x))})}const l=()=>{};return{reconciler:hie({createInstance:n,removeChild:s,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(u,d)=>{if(!d)return;const f=u.getState().scene;f.__r3f&&(f.__r3f.root=u,i(f,d))},removeChildFromContainer:(u,d)=>{d&&s(u.getState().scene,d)},insertInContainerBefore:(u,d,f)=>{if(!d||!f)return;const m=u.getState().scene;m.__r3f&&r(m,d,f)},getRootHostContext:()=>null,getChildHostContext:u=>u,finalizeInitialChildren(u){var d;return!!((d=u==null?void 0:u.__r3f)!=null?d:{}).handlers},prepareUpdate(u,d,f,m){var g;if(((g=u==null?void 0:u.__r3f)!=null?g:{}).primitive&&m.object&&m.object!==u)return[!0];{const{args:x=[],children:v,...w}=m,{args:_=[],children:S,...E}=f;if(!Array.isArray(x))throw new Error("R3F: the args prop must be an array!");if(x.some((P,D)=>P!==_[D]))return[!0];const T=rB(u,w,E,!0);return T.changes.length?[!1,T]:null}},commitUpdate(u,[d,f],m,g,y,x){d?a(u,m,y,x):S_(u,f)},commitMount(u,d,f,m){var g;const y=(g=u.__r3f)!=null?g:{};u.raycast&&y.handlers&&y.eventCount&&bv(u).getState().internal.interaction.push(u)},getPublicInstance:u=>u,prepareForCommit:()=>null,preparePortalMount:u=>Eu(u.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(u){var d;const{attach:f,parent:m}=(d=u.__r3f)!=null?d:{};f&&m&&mD(m,u,f),u.isObject3D&&(u.visible=!1),Tu(u)},unhideInstance(u,d){var f;const{attach:m,parent:g}=(f=u.__r3f)!=null?f:{};m&&g&&b_(g,u,m),(u.isObject3D&&d.visible==null||d.visible)&&(u.visible=!0),Tu(u)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():qu.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Pn.fun(performance.now)?performance.now:Pn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Pn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Pn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:S_}}var dD,hD;const __=t=>"colorSpace"in t||"outputColorSpace"in t,Q5=()=>{var t;return(t=iE.ColorManagement)!=null?t:null},J5=t=>t&&t.isOrthographicCamera,mie=t=>t&&t.hasOwnProperty("current"),Ip=typeof window<"u"&&((dD=window.document)!=null&&dD.createElement||((hD=window.navigator)==null?void 0:hD.product)==="ReactNative")?Pe.useLayoutEffect:Pe.useEffect;function eB(t){const e=Pe.useRef(t);return Ip(()=>void(e.current=t),[t]),e}function gie({set:t}){return Ip(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}class tB extends Pe.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}tB.getDerivedStateFromError=()=>({error:!0});const nB="__default",fD=new Map,vie=t=>t&&!!t.memoized&&!!t.changes;function iB(t){var e;const n=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(t)?Math.min(Math.max(t[0],n),t[1]):t}const Dh=t=>{var e;return(e=t.__r3f)==null?void 0:e.root.getState()};function bv(t){let e=t.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const Pn={obj:t=>t===Object(t)&&!Pn.arr(t)&&typeof t!="function",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",boo:t=>typeof t=="boolean",und:t=>t===void 0,arr:t=>Array.isArray(t),equ(t,e,{arrays:n="shallow",objects:i="reference",strict:r=!0}={}){if(typeof t!=typeof e||!!t!=!!e)return!1;if(Pn.str(t)||Pn.num(t)||Pn.boo(t))return t===e;const o=Pn.obj(t);if(o&&i==="reference")return t===e;const s=Pn.arr(t);if(s&&n==="reference")return t===e;if((s||o)&&t===e)return!0;let a;for(a in t)if(!(a in e))return!1;if(o&&n==="shallow"&&i==="shallow"){for(a in r?e:t)if(!Pn.equ(t[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:t)if(t[a]!==e[a])return!1;if(Pn.und(a)){if(s&&t.length===0&&e.length===0||o&&Object.keys(t).length===0&&Object.keys(e).length===0)return!0;if(t!==e)return!1}return!0}};function yie(t){t.dispose&&t.type!=="Scene"&&t.dispose();for(const e in t)e.dispose==null||e.dispose(),delete t[e]}function Eu(t,e){const n=t;return n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},t}function mS(t,e){let n=t;if(e.includes("-")){const i=e.split("-"),r=i.pop();return n=i.reduce((o,s)=>o[s],t),{target:n,key:r}}else return{target:n,key:e}}const pD=/-\d+$/;function b_(t,e,n){if(Pn.str(n)){if(pD.test(n)){const o=n.replace(pD,""),{target:s,key:a}=mS(t,o);Array.isArray(s[a])||(s[a]=[])}const{target:i,key:r}=mS(t,n);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=n(t,e)}function mD(t,e,n){var i,r;if(Pn.str(n)){const{target:o,key:s}=mS(t,n),a=e.__r3f.previousAttach;a===void 0?delete o[s]:o[s]=a}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(t,e);(r=e.__r3f)==null||delete r.previousAttach}function rB(t,{children:e,key:n,ref:i,...r},{children:o,key:s,ref:a,...l}={},c=!1){const u=t.__r3f,d=Object.entries(r),f=[];if(c){const g=Object.keys(l);for(let y=0;y<g.length;y++)r.hasOwnProperty(g[y])||d.unshift([g[y],nB+"remove"])}d.forEach(([g,y])=>{var x;if((x=t.__r3f)!=null&&x.primitive&&g==="object"||Pn.equ(y,l[g]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(g))return f.push([g,y,!0,[]]);let v=[];g.includes("-")&&(v=g.split("-")),f.push([g,y,!1,v]);for(const w in r){const _=r[w];w.startsWith(`${g}-`)&&f.push([w,_,!1,w.split("-")])}});const m={...r};return u!=null&&u.memoizedProps&&u!=null&&u.memoizedProps.args&&(m.args=u.memoizedProps.args),u!=null&&u.memoizedProps&&u!=null&&u.memoizedProps.attach&&(m.attach=u.memoizedProps.attach),{memoized:m,changes:f}}const xie=typeof process<"u"&&!1;function S_(t,e){var n;const i=t.__r3f,r=i==null?void 0:i.root,o=r==null||r.getState==null?void 0:r.getState(),{memoized:s,changes:a}=vie(e)?e:rB(t,e),l=i==null?void 0:i.eventCount;t.__r3f&&(t.__r3f.memoizedProps=s);for(let f=0;f<a.length;f++){let[m,g,y,x]=a[f];if(__(t)){const S="srgb",E="srgb-linear";m==="encoding"?(m="colorSpace",g=g===3001?S:E):m==="outputEncoding"&&(m="outputColorSpace",g=g===3001?S:E)}let v=t,w=v[m];if(x.length&&(w=x.reduce((_,S)=>_[S],t),!(w&&w.set))){const[_,...S]=x.reverse();v=S.reverse().reduce((E,T)=>E[T],t),m=_}if(g===nB+"remove")if(v.constructor){let _=fD.get(v.constructor);_||(_=new v.constructor,fD.set(v.constructor,_)),g=_[m]}else g=0;if(y&&i)g?i.handlers[m]=g:delete i.handlers[m],i.eventCount=Object.keys(i.handlers).length;else if(w&&w.set&&(w.copy||w instanceof hc)){if(Array.isArray(g))w.fromArray?w.fromArray(g):w.set(...g);else if(w.copy&&g&&g.constructor&&(xie?w.constructor.name===g.constructor.name:w.constructor===g.constructor))w.copy(g);else if(g!==void 0){var c;const _=(c=w)==null?void 0:c.isColor;!_&&w.setScalar?w.setScalar(g):w instanceof hc&&g instanceof hc?w.mask=g.mask:w.set(g),!Q5()&&o&&!o.linear&&_&&w.convertSRGBToLinear()}}else{var u;if(v[m]=g,(u=v[m])!=null&&u.isTexture&&v[m].format===Ki&&v[m].type===cr&&o){const _=v[m];__(_)&&__(o.gl)?_.colorSpace=o.gl.outputColorSpace:_.encoding=o.gl.outputEncoding}}Tu(t)}if(i&&i.parent&&t.raycast&&l!==i.eventCount){const f=bv(t).getState().internal,m=f.interaction.indexOf(t);m>-1&&f.interaction.splice(m,1),i.eventCount&&f.interaction.push(t)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(n=t.__r3f)!=null&&n.parent&&gS(t),t}function Tu(t){var e,n;const i=(e=t.__r3f)==null||(n=e.root)==null||n.getState==null?void 0:n.getState();i&&i.internal.frames===0&&i.invalidate()}function gS(t){t.onUpdate==null||t.onUpdate(t)}function wie(t,e){t.manual||(J5(t)?(t.left=e.width/-2,t.right=e.width/2,t.top=e.height/2,t.bottom=e.height/-2):t.aspect=e.width/e.height,t.updateProjectionMatrix(),t.updateMatrixWorld())}function ev(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function _ie(){var t;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return qu.DefaultEventPriority;switch((t=e.event)==null?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return qu.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return qu.ContinuousEventPriority;default:return qu.DefaultEventPriority}}function oB(t,e,n,i){const r=n.get(e);r&&(n.delete(e),n.size===0&&(t.delete(i),r.target.releasePointerCapture(i)))}function bie(t,e){const{internal:n}=t.getState();n.interaction=n.interaction.filter(i=>i!==e),n.initialHits=n.initialHits.filter(i=>i!==e),n.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&n.hovered.delete(r)}),n.capturedMap.forEach((i,r)=>{oB(n.capturedMap,e,i,r)})}function Sie(t){function e(l){const{internal:c}=t.getState(),u=l.offsetX-c.initialClick[0],d=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(u*u+d*d))}function n(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(u=>{var d;return(d=c.__r3f)==null?void 0:d.handlers["onPointer"+u]}))}function i(l,c){const u=t.getState(),d=new Set,f=[],m=c?c(u.internal.interaction):u.internal.interaction;for(let v=0;v<m.length;v++){const w=Dh(m[v]);w&&(w.raycaster.camera=void 0)}u.previousRoot||u.events.compute==null||u.events.compute(l,u);function g(v){const w=Dh(v);if(!w||!w.events.enabled||w.raycaster.camera===null)return[];if(w.raycaster.camera===void 0){var _;w.events.compute==null||w.events.compute(l,w,(_=w.previousRoot)==null?void 0:_.getState()),w.raycaster.camera===void 0&&(w.raycaster.camera=null)}return w.raycaster.camera?w.raycaster.intersectObject(v,!0):[]}let y=m.flatMap(g).sort((v,w)=>{const _=Dh(v.object),S=Dh(w.object);return!_||!S?v.distance-w.distance:S.events.priority-_.events.priority||v.distance-w.distance}).filter(v=>{const w=ev(v);return d.has(w)?!1:(d.add(w),!0)});u.events.filter&&(y=u.events.filter(y,u));for(const v of y){let w=v.object;for(;w;){var x;(x=w.__r3f)!=null&&x.eventCount&&f.push({...v,eventObject:w}),w=w.parent}}if("pointerId"in l&&u.internal.capturedMap.has(l.pointerId))for(let v of u.internal.capturedMap.get(l.pointerId).values())d.has(ev(v.intersection))||f.push(v.intersection);return f}function r(l,c,u,d){const f=t.getState();if(l.length){const m={stopped:!1};for(const g of l){const y=Dh(g.object)||f,{raycaster:x,pointer:v,camera:w,internal:_}=y,S=new W(v.x,v.y,0).unproject(w),E=R=>{var N,O;return(N=(O=_.capturedMap.get(R))==null?void 0:O.has(g.eventObject))!=null?N:!1},T=R=>{const N={intersection:g,target:c.target};_.capturedMap.has(R)?_.capturedMap.get(R).set(g.eventObject,N):_.capturedMap.set(R,new Map([[g.eventObject,N]])),c.target.setPointerCapture(R)},P=R=>{const N=_.capturedMap.get(R);N&&oB(_.capturedMap,g.eventObject,N,R)};let D={};for(let R in c){let N=c[R];typeof N!="function"&&(D[R]=N)}let A={...g,...D,pointer:v,intersections:l,stopped:m.stopped,delta:u,unprojectedPoint:S,ray:x.ray,camera:w,stopPropagation(){const R="pointerId"in c&&_.capturedMap.get(c.pointerId);if((!R||R.has(g.eventObject))&&(A.stopped=m.stopped=!0,_.hovered.size&&Array.from(_.hovered.values()).find(N=>N.eventObject===g.eventObject))){const N=l.slice(0,l.indexOf(g));o([...N,g])}},target:{hasPointerCapture:E,setPointerCapture:T,releasePointerCapture:P},currentTarget:{hasPointerCapture:E,setPointerCapture:T,releasePointerCapture:P},nativeEvent:c};if(d(A),m.stopped===!0)break}}return l}function o(l){const{internal:c}=t.getState();for(const u of c.hovered.values())if(!l.length||!l.find(d=>d.object===u.object&&d.index===u.index&&d.instanceId===u.instanceId)){const f=u.eventObject.__r3f,m=f==null?void 0:f.handlers;if(c.hovered.delete(ev(u)),f!=null&&f.eventCount){const g={...u,intersections:l};m.onPointerOut==null||m.onPointerOut(g),m.onPointerLeave==null||m.onPointerLeave(g)}}}function s(l,c){for(let u=0;u<c.length;u++){const d=c[u].__r3f;d==null||d.handlers.onPointerMissed==null||d.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>o([]);case"onLostPointerCapture":return c=>{const{internal:u}=t.getState();"pointerId"in c&&u.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{u.capturedMap.has(c.pointerId)&&(u.capturedMap.delete(c.pointerId),o([]))})}}return function(u){const{onPointerMissed:d,internal:f}=t.getState();f.lastEvent.current=u;const m=l==="onPointerMove",g=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",x=i(u,m?n:void 0),v=g?e(u):0;l==="onPointerDown"&&(f.initialClick=[u.offsetX,u.offsetY],f.initialHits=x.map(_=>_.eventObject)),g&&!x.length&&v<=2&&(s(u,f.interaction),d&&d(u)),m&&o(x);function w(_){const S=_.eventObject,E=S.__r3f,T=E==null?void 0:E.handlers;if(E!=null&&E.eventCount)if(m){if(T.onPointerOver||T.onPointerEnter||T.onPointerOut||T.onPointerLeave){const P=ev(_),D=f.hovered.get(P);D?D.stopped&&_.stopPropagation():(f.hovered.set(P,_),T.onPointerOver==null||T.onPointerOver(_),T.onPointerEnter==null||T.onPointerEnter(_))}T.onPointerMove==null||T.onPointerMove(_)}else{const P=T[l];P?(!g||f.initialHits.includes(S))&&(s(u,f.interaction.filter(D=>!f.initialHits.includes(D))),P(_)):g&&f.initialHits.includes(S)&&s(u,f.interaction.filter(D=>!f.initialHits.includes(D)))}}r(x,u,v,w)}}return{handlePointer:a}}const sB=t=>!!(t!=null&&t.render),aB=Pe.createContext(null),Mie=(t,e)=>{const n=aie((a,l)=>{const c=new W,u=new W,d=new W;function f(v=l().camera,w=u,_=l().size){const{width:S,height:E,top:T,left:P}=_,D=S/E;w.isVector3?d.copy(w):d.set(...w);const A=v.getWorldPosition(c).distanceTo(d);if(J5(v))return{width:S/v.zoom,height:E/v.zoom,top:T,left:P,factor:1,distance:A,aspect:D};{const R=v.fov*Math.PI/180,N=2*Math.tan(R/2)*A,O=N*(S/E);return{width:O,height:N,top:T,left:P,factor:S/O,distance:A,aspect:D}}}let m;const g=v=>a(w=>({performance:{...w.performance,current:v}})),y=new Ce;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(v=1)=>t(l(),v),advance:(v,w)=>e(v,w,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new QC,pointer:y,mouse:y,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const v=l();m&&clearTimeout(m),v.performance.current!==v.performance.min&&g(v.performance.min),m=setTimeout(()=>g(l().performance.max),v.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:f},setEvents:v=>a(w=>({...w,events:{...w.events,...v}})),setSize:(v,w,_,S,E)=>{const T=l().camera,P={width:v,height:w,top:S||0,left:E||0,updateStyle:_};a(D=>({size:P,viewport:{...D.viewport,...f(T,u,P)}}))},setDpr:v=>a(w=>{const _=iB(v);return{viewport:{...w.viewport,dpr:_,initialDpr:w.viewport.initialDpr||_}}}),setFrameloop:(v="always")=>{const w=l().clock;w.stop(),w.elapsedTime=0,v!=="never"&&(w.start(),w.elapsedTime=0),a(()=>({frameloop:v}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:Pe.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(v,w,_)=>{const S=l().internal;return S.priority=S.priority+(w>0?1:0),S.subscribers.push({ref:v,priority:w,store:_}),S.subscribers=S.subscribers.sort((E,T)=>E.priority-T.priority),()=>{const E=l().internal;E!=null&&E.subscribers&&(E.priority=E.priority-(w>0?1:0),E.subscribers=E.subscribers.filter(T=>T.ref!==v))}}}}}),i=n.getState();let r=i.size,o=i.viewport.dpr,s=i.camera;return n.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:u,set:d}=n.getState();if(l.width!==r.width||l.height!==r.height||c.dpr!==o){var f;r=l,o=c.dpr,wie(a,l),u.setPixelRatio(c.dpr);const m=(f=l.updateStyle)!=null?f:typeof HTMLCanvasElement<"u"&&u.domElement instanceof HTMLCanvasElement;u.setSize(l.width,l.height,m)}a!==s&&(s=a,d(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),n.subscribe(a=>t(a)),n};let tv,Cie=new Set,Eie=new Set,Tie=new Set;function M_(t,e){if(t.size)for(const{callback:n}of t.values())n(e)}function kh(t,e){switch(t){case"before":return M_(Cie,e);case"after":return M_(Eie,e);case"tail":return M_(Tie,e)}}let C_,E_;function T_(t,e,n){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof t=="number"&&(i=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),C_=e.internal.subscribers,tv=0;tv<C_.length;tv++)E_=C_[tv],E_.ref.current(E_.store.getState(),i,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function Aie(t){let e=!1,n=!1,i,r,o;function s(c){r=requestAnimationFrame(s),e=!0,i=0,kh("before",c),n=!0;for(const d of t.values()){var u;o=d.store.getState(),o.internal.active&&(o.frameloop==="always"||o.internal.frames>0)&&!((u=o.gl.xr)!=null&&u.isPresenting)&&(i+=T_(c,o))}if(n=!1,kh("after",c),i===0)return kh("tail",c),e=!1,cancelAnimationFrame(r)}function a(c,u=1){var d;if(!c)return t.forEach(f=>a(f.store.getState(),u));(d=c.gl.xr)!=null&&d.isPresenting||!c.internal.active||c.frameloop==="never"||(u>1?c.internal.frames=Math.min(60,c.internal.frames+u):n?c.internal.frames=2:c.internal.frames=1,e||(e=!0,requestAnimationFrame(s)))}function l(c,u=!0,d,f){if(u&&kh("before",c),d)T_(c,d,f);else for(const m of t.values())T_(c,m.store.getState());u&&kh("after",c)}return{loop:s,invalidate:a,advance:l}}function lB(){const t=Pe.useContext(aB);if(!t)throw new Error("R3F: Hooks can only be used within the Canvas component!");return t}function Iie(t=n=>n,e){return lB()(t,e)}function cB(t,e=0){const n=lB(),i=n.getState().internal.subscribe,r=eB(t);return Ip(()=>i(r,e,n),[e,i,n]),null}const Md=new Map,{invalidate:gD,advance:vD}=Aie(Md),{reconciler:ay,applyProps:Mu}=pie(Md,_ie),Cu={objects:"shallow",strict:!1},Pie=(t,e)=>{const n=typeof t=="function"?t(e):t;return sB(n)?n:new q5({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...t})};function Rie(t,e){const n=typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement;if(e){const{width:i,height:r,top:o,left:s,updateStyle:a=n}=e;return{width:i,height:r,top:o,left:s,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&t.parentElement){const{width:i,height:r,top:o,left:s}=t.parentElement.getBoundingClientRect();return{width:i,height:r,top:o,left:s,updateStyle:n}}else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)return{width:t.width,height:t.height,top:0,left:0,updateStyle:n};return{width:0,height:0,top:0,left:0}}function Die(t){const e=Md.get(t),n=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,o=i||Mie(gD,vD),s=n||ay.createContainer(o,qu.ConcurrentRoot,null,!1,null,"",r,null);e||Md.set(t,{fiber:s,store:o});let a,l=!1,c;return{configure(u={}){let{gl:d,size:f,scene:m,events:g,onCreated:y,shadows:x=!1,linear:v=!1,flat:w=!1,legacy:_=!1,orthographic:S=!1,frameloop:E="always",dpr:T=[1,2],performance:P,raycaster:D,camera:A,onPointerMissed:R}=u,N=o.getState(),O=N.gl;N.gl||N.set({gl:O=Pie(d,t)});let H=N.raycaster;H||N.set({raycaster:H=new F5});const{params:q,...Z}=D||{};if(Pn.equ(Z,H,Cu)||Mu(H,{...Z}),Pn.equ(q,H.params,Cu)||Mu(H,{params:{...H.params,...q}}),!N.camera||N.camera===c&&!Pn.equ(c,A,Cu)){c=A;const X=A instanceof _p,K=X?A:S?new Od(0,0,0,0,.1,1e3):new Pi(75,0,.1,1e3);X||(K.position.z=5,A&&(Mu(K,A),("aspect"in A||"left"in A||"right"in A||"bottom"in A||"top"in A)&&(K.manual=!0,K.updateProjectionMatrix())),!N.camera&&!(A!=null&&A.rotation)&&K.lookAt(0,0,0)),N.set({camera:K}),H.camera=K}if(!N.scene){let X;m!=null&&m.isScene?X=m:(X=new PC,m&&Mu(X,m)),N.set({scene:Eu(X)})}if(!N.xr){var G;const X=(pe,be)=>{const it=o.getState();it.frameloop!=="never"&&vD(pe,!0,it,be)},K=()=>{const pe=o.getState();pe.gl.xr.enabled=pe.gl.xr.isPresenting,pe.gl.xr.setAnimationLoop(pe.gl.xr.isPresenting?X:null),pe.gl.xr.isPresenting||gD(pe)},oe={connect(){const pe=o.getState().gl;pe.xr.addEventListener("sessionstart",K),pe.xr.addEventListener("sessionend",K)},disconnect(){const pe=o.getState().gl;pe.xr.removeEventListener("sessionstart",K),pe.xr.removeEventListener("sessionend",K)}};typeof((G=O.xr)==null?void 0:G.addEventListener)=="function"&&oe.connect(),N.set({xr:oe})}if(O.shadowMap){const X=O.shadowMap.enabled,K=O.shadowMap.type;if(O.shadowMap.enabled=!!x,Pn.boo(x))O.shadowMap.type=ef;else if(Pn.str(x)){var Y;const oe={basic:rU,percentage:nd,soft:ef,variance:nc};O.shadowMap.type=(Y=oe[x])!=null?Y:ef}else Pn.obj(x)&&Object.assign(O.shadowMap,x);(X!==O.shadowMap.enabled||K!==O.shadowMap.type)&&(O.shadowMap.needsUpdate=!0)}const z=Q5();z&&("enabled"in z?z.enabled=!_:"legacyMode"in z&&(z.legacyMode=_)),l||Mu(O,{outputEncoding:v?3e3:3001,toneMapping:w?Mo:Xy}),N.legacy!==_&&N.set(()=>({legacy:_})),N.linear!==v&&N.set(()=>({linear:v})),N.flat!==w&&N.set(()=>({flat:w})),d&&!Pn.fun(d)&&!sB(d)&&!Pn.equ(d,O,Cu)&&Mu(O,d),g&&!N.events.handlers&&N.set({events:g(o)});const $=Rie(t,f);return Pn.equ($,N.size,Cu)||N.setSize($.width,$.height,$.updateStyle,$.top,$.left),T&&N.viewport.dpr!==iB(T)&&N.setDpr(T),N.frameloop!==E&&N.setFrameloop(E),N.onPointerMissed||N.set({onPointerMissed:R}),P&&!Pn.equ(P,N.performance,Cu)&&N.set(X=>({performance:{...X.performance,...P}})),a=y,l=!0,this},render(u){return l||this.configure(),ay.updateContainer(U.jsx(kie,{store:o,children:u,onCreated:a,rootElement:t}),s,null,()=>{}),o},unmount(){uB(t)}}}function kie({store:t,children:e,onCreated:n,rootElement:i}){return Ip(()=>{const r=t.getState();r.set(o=>({internal:{...o.internal,active:!0}})),n&&n(r),t.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),U.jsx(aB.Provider,{value:t,children:e})}function uB(t,e){const n=Md.get(t),i=n==null?void 0:n.fiber;if(i){const r=n==null?void 0:n.store.getState();r&&(r.internal.active=!1),ay.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var o,s,a,l;r.events.disconnect==null||r.events.disconnect(),(o=r.gl)==null||(s=o.renderLists)==null||s.dispose==null||s.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),yie(r),Md.delete(t)}catch{}},500)})}}ay.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:Pe.version});const A_={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Nie(t){const{handlePointer:e}=Sie(t);return{priority:1,enabled:!0,compute(n,i,r){i.pointer.set(n.offsetX/i.size.width*2-1,-(n.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(A_).reduce((n,i)=>({...n,[i]:e(i)}),{}),update:()=>{var n;const{events:i,internal:r}=t.getState();(n=r.lastEvent)!=null&&n.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:n=>{var i;const{set:r,events:o}=t.getState();o.disconnect==null||o.disconnect(),r(s=>({events:{...s.events,connected:n}})),Object.entries((i=o.handlers)!=null?i:[]).forEach(([s,a])=>{const[l,c]=A_[s];n.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:n,events:i}=t.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([o,s])=>{if(i&&i.connected instanceof HTMLElement){const[a]=A_[o];i.connected.removeEventListener(a,s)}}),n(o=>({events:{...o.events,connected:void 0}}))}}}}function yD(t,e){let n;return(...i)=>{window.clearTimeout(n),n=window.setTimeout(()=>t(...i),e)}}function Lie({debounce:t,scroll:e,polyfill:n,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=n||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,s]=Pe.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),a=Pe.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o,orientationHandler:null}),l=t?typeof t=="number"?t:t.scroll:null,c=t?typeof t=="number"?t:t.resize:null,u=Pe.useRef(!1);Pe.useEffect(()=>(u.current=!0,()=>void(u.current=!1)));const[d,f,m]=Pe.useMemo(()=>{const v=()=>{if(!a.current.element)return;const{left:w,top:_,width:S,height:E,bottom:T,right:P,x:D,y:A}=a.current.element.getBoundingClientRect(),R={left:w,top:_,width:S,height:E,bottom:T,right:P,x:D,y:A};a.current.element instanceof HTMLElement&&i&&(R.height=a.current.element.offsetHeight,R.width=a.current.element.offsetWidth),Object.freeze(R),u.current&&!Uie(a.current.lastBounds,R)&&s(a.current.lastBounds=R)};return[v,c?yD(v,c):v,l?yD(v,l):v]},[s,i,l,c]);function g(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(v=>v.removeEventListener("scroll",m,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function y(){a.current.element&&(a.current.resizeObserver=new r(m),a.current.resizeObserver.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(v=>v.addEventListener("scroll",m,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{m()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const x=v=>{!v||v===a.current.element||(g(),a.current.element=v,a.current.scrollContainers=dB(v),y())};return Oie(m,!!e),zie(f),Pe.useEffect(()=>{g(),y()},[e,m,f]),Pe.useEffect(()=>g,[]),[x,o,d]}function zie(t){Pe.useEffect(()=>{const e=t;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[t])}function Oie(t,e){Pe.useEffect(()=>{if(e){const n=t;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[t,e])}function dB(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:i,overflowY:r}=window.getComputedStyle(t);return[n,i,r].some(o=>o==="auto"||o==="scroll")&&e.push(t),[...e,...dB(t.parentElement)]}const Fie=["x","y","top","bottom","left","right","width","height"],Uie=(t,e)=>Fie.every(n=>t[n]===e[n]);var Bie=Object.defineProperty,Hie=Object.defineProperties,Vie=Object.getOwnPropertyDescriptors,xD=Object.getOwnPropertySymbols,$ie=Object.prototype.hasOwnProperty,Wie=Object.prototype.propertyIsEnumerable,wD=(t,e,n)=>e in t?Bie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_D=(t,e)=>{for(var n in e||(e={}))$ie.call(e,n)&&wD(t,n,e[n]);if(xD)for(var n of xD(e))Wie.call(e,n)&&wD(t,n,e[n]);return t},Gie=(t,e)=>Hie(t,Vie(e)),bD,SD;typeof window<"u"&&((bD=window.document)!=null&&bD.createElement||((SD=window.navigator)==null?void 0:SD.product)==="ReactNative")?Pe.useLayoutEffect:Pe.useEffect;function hB(t,e,n){if(!t)return;if(n(t)===!0)return t;let i=t.child;for(;i;){const r=hB(i,e,n);if(r)return r;i=i.sibling}}function fB(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const MD=console.error;console.error=function(){const t=[...arguments].join("");if(t!=null&&t.startsWith("Warning:")&&t.includes("useContext")){console.error=MD;return}return MD.apply(this,arguments)};const rE=fB(Pe.createContext(null));class pB extends Pe.Component{render(){return Pe.createElement(rE.Provider,{value:this._reactInternals},this.props.children)}}function jie(){const t=Pe.useContext(rE);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=Pe.useId();return Pe.useMemo(()=>{for(const i of[t,t==null?void 0:t.alternate]){if(!i)continue;const r=hB(i,!1,o=>{let s=o.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}});if(r)return r}},[t,e])}function qie(){const t=jie(),[e]=Pe.useState(()=>new Map);e.clear();let n=t;for(;n;){if(n.type&&typeof n.type=="object"){const r=n.type._context===void 0&&n.type.Provider===n.type?n.type:n.type._context;r&&r!==rE&&!e.has(r)&&e.set(r,Pe.useContext(fB(r)))}n=n.return}return e}function Xie(){const t=qie();return Pe.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>i=>Pe.createElement(e,null,Pe.createElement(n.Provider,Gie(_D({},i),{value:t.get(n)}))),e=>Pe.createElement(pB,_D({},e))),[t])}const Yie=Pe.forwardRef(function({children:e,fallback:n,resize:i,style:r,gl:o,events:s=Nie,eventSource:a,eventPrefix:l,shadows:c,linear:u,flat:d,legacy:f,orthographic:m,frameloop:g,dpr:y,performance:x,raycaster:v,camera:w,scene:_,onPointerMissed:S,onCreated:E,...T},P){Pe.useMemo(()=>fie(rie),[]);const D=Xie(),[A,R]=Lie({scroll:!0,debounce:{scroll:50,resize:0},...i}),N=Pe.useRef(null),O=Pe.useRef(null);Pe.useImperativeHandle(P,()=>N.current);const H=eB(S),[q,Z]=Pe.useState(!1),[G,Y]=Pe.useState(!1);if(q)throw q;if(G)throw G;const z=Pe.useRef(null);Ip(()=>{const X=N.current;R.width>0&&R.height>0&&X&&(z.current||(z.current=Die(X)),z.current.configure({gl:o,events:s,shadows:c,linear:u,flat:d,legacy:f,orthographic:m,frameloop:g,dpr:y,performance:x,raycaster:v,camera:w,scene:_,size:R,onPointerMissed:(...K)=>H.current==null?void 0:H.current(...K),onCreated:K=>{K.events.connect==null||K.events.connect(a?mie(a)?a.current:a:O.current),l&&K.setEvents({compute:(oe,pe)=>{const be=oe[l+"X"],it=oe[l+"Y"];pe.pointer.set(be/pe.size.width*2-1,-(it/pe.size.height)*2+1),pe.raycaster.setFromCamera(pe.pointer,pe.camera)}}),E==null||E(K)}}),z.current.render(U.jsx(D,{children:U.jsx(tB,{set:Y,children:U.jsx(Pe.Suspense,{fallback:U.jsx(gie,{set:Z}),children:e??null})})})))}),Pe.useEffect(()=>{const X=N.current;if(X)return()=>uB(X)},[]);const $=a?"none":"auto";return U.jsx("div",{ref:O,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:$,...r},...T,children:U.jsx("div",{ref:A,style:{width:"100%",height:"100%"},children:U.jsx("canvas",{ref:N,style:{display:"block"},children:n})})})}),Zie=Pe.forwardRef(function(e,n){return U.jsx(pB,{children:U.jsx(Yie,{...e,ref:n})})}),Kie=()=>parseInt(yp.replace(/\D+/g,"")),Qie=Kie();class Jie extends no{constructor(){super({uniforms:{time:{value:0},fade:{value:1}},vertexShader:`
      uniform float time;
      attribute float size;
      varying vec3 vColor;
      void main() {
        vColor = color;
        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);
        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(time + 100.0));
        gl_Position = projectionMatrix * mvPosition;
      }`,fragmentShader:`
      uniform sampler2D pointTexture;
      uniform float fade;
      varying vec3 vColor;
      void main() {
        float opacity = 1.0;
        if (fade == 1.0) {
          float d = distance(gl_PointCoord, vec2(0.5, 0.5));
          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));
        }
        gl_FragColor = vec4(vColor, opacity);

        #include <tonemapping_fragment>
	      #include <${Qie>=154?"colorspace_fragment":"encodings_fragment"}>
      }`})}}const ere=t=>new W().setFromSpherical(new U5(t,Math.acos(1-Math.random()*2),Math.random()*2*Math.PI)),tre=Pe.forwardRef(({radius:t=100,depth:e=50,count:n=5e3,saturation:i=0,factor:r=4,fade:o=!1,speed:s=1},a)=>{const l=Pe.useRef(),[c,u,d]=Pe.useMemo(()=>{const m=[],g=[],y=Array.from({length:n},()=>(.5+.5*Math.random())*r),x=new et;let v=t+e;const w=e/n;for(let _=0;_<n;_++)v-=w*Math.random(),m.push(...ere(v).toArray()),x.setHSL(_/n,i,.9),g.push(x.r,x.g,x.b);return[new Float32Array(m),new Float32Array(g),new Float32Array(y)]},[n,e,r,t,i]);cB(m=>l.current&&(l.current.uniforms.time.value=m.clock.elapsedTime*s));const[f]=Pe.useState(()=>new Jie);return Pe.createElement("points",{ref:a},Pe.createElement("bufferGeometry",null,Pe.createElement("bufferAttribute",{attach:"attributes-position",args:[c,3]}),Pe.createElement("bufferAttribute",{attach:"attributes-color",args:[u,3]}),Pe.createElement("bufferAttribute",{attach:"attributes-size",args:[d,1]})),Pe.createElement("primitive",{ref:l,object:f,attach:"material",blending:Lf,"uniforms-fade-value":o,depthWrite:!1,transparent:!0,vertexColors:!0}))}),Fo=5e3,nre=()=>{const t=Pe.useRef();Iie();const e=Pe.useMemo(()=>{const i=new Float32Array(Fo*3),r=new Float32Array(Fo*3),o=new Float32Array(Fo*3),s=new Float32Array(Fo*3);for(let a=0;a<Fo;a++){const l=a*3,c=Math.random()*5,u=Math.random()*Math.PI*2,d=Math.acos(2*Math.random()-1);i[l]=c*Math.sin(d)*Math.cos(u),i[l+1]=c*Math.sin(d)*Math.sin(u),i[l+2]=c*Math.cos(d),r[l]=(Math.random()-.5)*10,r[l+1]=(Math.random()-.5)*6,r[l+2]=(Math.random()-.5)*2,r[l+1]+=r[l]*.4;const f=5,m=a%f,g=[4,6,3,5,4][m]+(Math.random()-.5),y=(m-(f-1)/2)*2,x=Fo/f,w=Math.floor(a/f)/x*g;o[l]=y+(Math.random()-.5)*1.5,o[l+1]=w-g/2,o[l+2]=(Math.random()-.5)*.5;const _=a/Fo*Math.PI*20,S=2+a/Fo*10;s[l]=Math.cos(_)*S,s[l+1]=Math.sin(_)*S,s[l+2]=a/Fo*50-25}return{cloud:i,scatter:r,barChart:o,zoomStage:s}},[]),n=Pe.useMemo(()=>new Float32Array(e.cloud),[e]);return cB(i=>{if(!t.current)return;const r=window.scrollY,o=400,s=window.innerHeight*1.5,a=Math.max(0,Math.min((r-o)/s,1)),l=t.current.geometry.attributes.position.array;for(let c=0;c<Fo;c++){const u=c*3;let d,f,m;if(a<.25){const g=a/.25;d=vo.lerp(e.cloud[u],e.scatter[u],g),f=vo.lerp(e.cloud[u+1],e.scatter[u+1],g),m=vo.lerp(e.cloud[u+2],e.scatter[u+2],g)}else if(a<.5){const g=(a-.25)/.25;d=vo.lerp(e.scatter[u],e.barChart[u],g),f=vo.lerp(e.scatter[u+1],e.barChart[u+1],g),m=vo.lerp(e.scatter[u+2],e.barChart[u+2],g)}else if(a<.75){const g=(a-.5)/.25;d=vo.lerp(e.barChart[u],e.zoomStage[u],g),f=vo.lerp(e.barChart[u+1],e.zoomStage[u+1],g),m=vo.lerp(e.barChart[u+2],e.zoomStage[u+2],g)}else d=e.zoomStage[u],f=e.zoomStage[u+1],m=e.zoomStage[u+2];l[u]+=(d-l[u])*.1,l[u+1]+=(f-l[u+1])*.1,l[u+2]+=(m-l[u+2])*.1}if(t.current.geometry.attributes.position.needsUpdate=!0,a>.8){const c=(a-.8)/.2;i.camera.position.z=vo.lerp(8,-20,c),i.camera.focus=vo.lerp(10,50,c)}else i.camera.position.z=8;t.current.rotation.y+=.001,t.current.rotation.x+=5e-4}),U.jsxs("points",{ref:t,children:[U.jsx("bufferGeometry",{children:U.jsx("bufferAttribute",{attach:"attributes-position",count:Fo,array:n,itemSize:3})}),U.jsx("pointsMaterial",{size:.02,color:"#2EF2FF",transparent:!0,opacity:.8,sizeAttenuation:!0,blending:Lf})]})},ire=()=>U.jsxs("div",{className:"fixed top-0 left-0 w-full h-full z-[-1] pointer-events-none bg-s1",children:[U.jsxs(Zie,{camera:{position:[0,0,8],fov:60},gl:{antialias:!0,alpha:!0},children:[U.jsx("ambientLight",{intensity:.5}),U.jsx("pointLight",{position:[10,10,10],intensity:1,color:"#2EF2FF"}),U.jsx(nre,{}),U.jsx(tre,{radius:100,depth:50,count:5e3,factor:4,saturation:0,fade:!0,speed:1})]}),U.jsx("div",{className:"absolute bottom-10 left-1/2 -translate-x-1/2 text-white/50 uppercase tracking-widest text-xs animate-pulse transition-opacity duration-500",style:{opacity:Math.max(0,1-(typeof window<"u"?window.scrollY/500:0))},children:"Scroll to Analyze"})]}),rre=()=>{const[t,e]=Pe.useState(0);Pe.useEffect(()=>{const r=()=>{e(window.scrollY)};return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)},[]);const n=600,i=window.innerHeight*2.5;return U.jsxs("main",{className:"relative overflow-hidden",children:[U.jsx(ire,{}),U.jsx("div",{className:"fixed top-0 left-0 right-0 z-50",children:U.jsx(A$,{})}),U.jsx("div",{className:"relative z-20 transition-opacity duration-700",style:{opacity:Math.max(0,1-t/n),pointerEvents:t>n?"none":"auto"},children:U.jsx(I$,{})}),U.jsx("div",{className:"h-[200vh] w-full"}),U.jsxs("div",{className:`relative z-10 transition-all duration-1000 ${t>i?"opacity-100 translate-y-0":"opacity-0 translate-y-20 pointer-events-none"}`,children:[U.jsx(O$,{}),U.jsx(iW,{}),U.jsx(fW,{}),U.jsx(pW,{}),U.jsx(pX,{}),U.jsx(xX,{}),U.jsx(wX,{})]})]})};B3(document.getElementById("root")).render(U.jsx(Pe.StrictMode,{children:U.jsx(rre,{})}));export{BW as $,Pt as A,fre as B,_e as D,xn as E,ore as G,Xt as H,vre as K,dre as L,LW as M,ure as O,RM as P,NW as S,zW as T,hn as U,gre as V,hre as W,are as Y,sre as Z,FW as _,oL as a,cre as b,kW as c,Dc as d,cL as e,mre as f,Rn as g,Bh as h,HW as j,yv as k,TW as o,kA as p,pre as q,lre as r,yre as v,vi as w,ni as y,OW as z};
